(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();function cx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pd={exports:{}},ws={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function wE(){if(av)return ws;av=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,s,c){var o=null;if(c!==void 0&&(o=""+c),s.key!==void 0&&(o=""+s.key),"key"in s){c={};for(var d in s)d!=="key"&&(c[d]=s[d])}else c=s;return s=c.ref,{$$typeof:e,type:i,key:o,ref:s!==void 0?s:null,props:c}}return ws.Fragment=n,ws.jsx=r,ws.jsxs=r,ws}var rv;function bE(){return rv||(rv=1,Pd.exports=wE()),Pd.exports}var b=bE(),Wd={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function SE(){if(iv)return Re;iv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),p=Symbol.iterator;function v(T){return T===null||typeof T!="object"?null:(T=p&&T[p]||T["@@iterator"],typeof T=="function"?T:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,w={};function E(T,k,Q){this.props=T,this.context=k,this.refs=w,this.updater=Q||x}E.prototype.isReactComponent={},E.prototype.setState=function(T,k){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,k,"setState")},E.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function R(){}R.prototype=E.prototype;function D(T,k,Q){this.props=T,this.context=k,this.refs=w,this.updater=Q||x}var z=D.prototype=new R;z.constructor=D,A(z,E.prototype),z.isPureReactComponent=!0;var C=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function B(T,k,Q,ee,re,oe){return Q=oe.ref,{$$typeof:e,type:T,key:k,ref:Q!==void 0?Q:null,props:oe}}function J(T,k){return B(T.type,k,void 0,void 0,void 0,T.props)}function X(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function Z(T){var k={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(Q){return k[Q]})}var P=/\/+/g;function se(T,k){return typeof T=="object"&&T!==null&&T.key!=null?Z(""+T.key):k.toString(36)}function te(){}function N(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(te,te):(T.status="pending",T.then(function(k){T.status==="pending"&&(T.status="fulfilled",T.value=k)},function(k){T.status==="pending"&&(T.status="rejected",T.reason=k)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function I(T,k,Q,ee,re){var oe=typeof T;(oe==="undefined"||oe==="boolean")&&(T=null);var fe=!1;if(T===null)fe=!0;else switch(oe){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(T.$$typeof){case e:case n:fe=!0;break;case y:return fe=T._init,I(fe(T._payload),k,Q,ee,re)}}if(fe)return re=re(T),fe=ee===""?"."+se(T,0):ee,C(re)?(Q="",fe!=null&&(Q=fe.replace(P,"$&/")+"/"),I(re,k,Q,"",function(ce){return ce})):re!=null&&(X(re)&&(re=J(re,Q+(re.key==null||T&&T.key===re.key?"":(""+re.key).replace(P,"$&/")+"/")+fe)),k.push(re)),1;fe=0;var Ae=ee===""?".":ee+":";if(C(T))for(var ve=0;ve<T.length;ve++)ee=T[ve],oe=Ae+se(ee,ve),fe+=I(ee,k,Q,oe,re);else if(ve=v(T),typeof ve=="function")for(T=ve.call(T),ve=0;!(ee=T.next()).done;)ee=ee.value,oe=Ae+se(ee,ve++),fe+=I(ee,k,Q,oe,re);else if(oe==="object"){if(typeof T.then=="function")return I(N(T),k,Q,ee,re);throw k=String(T),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return fe}function M(T,k,Q){if(T==null)return T;var ee=[],re=0;return I(T,ee,"","",function(oe){return k.call(Q,oe,re++)}),ee}function Y(T){if(T._status===-1){var k=T._result;k=k(),k.then(function(Q){(T._status===0||T._status===-1)&&(T._status=1,T._result=Q)},function(Q){(T._status===0||T._status===-1)&&(T._status=2,T._result=Q)}),T._status===-1&&(T._status=0,T._result=k)}if(T._status===1)return T._result.default;throw T._result}var W=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function $(){}return Re.Children={map:M,forEach:function(T,k,Q){M(T,function(){k.apply(this,arguments)},Q)},count:function(T){var k=0;return M(T,function(){k++}),k},toArray:function(T){return M(T,function(k){return k})||[]},only:function(T){if(!X(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Re.Component=E,Re.Fragment=r,Re.Profiler=s,Re.PureComponent=D,Re.StrictMode=i,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Re.__COMPILER_RUNTIME={__proto__:null,c:function(T){return U.H.useMemoCache(T)}},Re.cache=function(T){return function(){return T.apply(null,arguments)}},Re.cloneElement=function(T,k,Q){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var ee=A({},T.props),re=T.key,oe=void 0;if(k!=null)for(fe in k.ref!==void 0&&(oe=void 0),k.key!==void 0&&(re=""+k.key),k)!O.call(k,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&k.ref===void 0||(ee[fe]=k[fe]);var fe=arguments.length-2;if(fe===1)ee.children=Q;else if(1<fe){for(var Ae=Array(fe),ve=0;ve<fe;ve++)Ae[ve]=arguments[ve+2];ee.children=Ae}return B(T.type,re,void 0,void 0,oe,ee)},Re.createContext=function(T){return T={$$typeof:o,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:c,_context:T},T},Re.createElement=function(T,k,Q){var ee,re={},oe=null;if(k!=null)for(ee in k.key!==void 0&&(oe=""+k.key),k)O.call(k,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(re[ee]=k[ee]);var fe=arguments.length-2;if(fe===1)re.children=Q;else if(1<fe){for(var Ae=Array(fe),ve=0;ve<fe;ve++)Ae[ve]=arguments[ve+2];re.children=Ae}if(T&&T.defaultProps)for(ee in fe=T.defaultProps,fe)re[ee]===void 0&&(re[ee]=fe[ee]);return B(T,oe,void 0,void 0,null,re)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(T){return{$$typeof:d,render:T}},Re.isValidElement=X,Re.lazy=function(T){return{$$typeof:y,_payload:{_status:-1,_result:T},_init:Y}},Re.memo=function(T,k){return{$$typeof:m,type:T,compare:k===void 0?null:k}},Re.startTransition=function(T){var k=U.T,Q={};U.T=Q;try{var ee=T(),re=U.S;re!==null&&re(Q,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then($,W)}catch(oe){W(oe)}finally{U.T=k}},Re.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Re.use=function(T){return U.H.use(T)},Re.useActionState=function(T,k,Q){return U.H.useActionState(T,k,Q)},Re.useCallback=function(T,k){return U.H.useCallback(T,k)},Re.useContext=function(T){return U.H.useContext(T)},Re.useDebugValue=function(){},Re.useDeferredValue=function(T,k){return U.H.useDeferredValue(T,k)},Re.useEffect=function(T,k,Q){var ee=U.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(T,k)},Re.useId=function(){return U.H.useId()},Re.useImperativeHandle=function(T,k,Q){return U.H.useImperativeHandle(T,k,Q)},Re.useInsertionEffect=function(T,k){return U.H.useInsertionEffect(T,k)},Re.useLayoutEffect=function(T,k){return U.H.useLayoutEffect(T,k)},Re.useMemo=function(T,k){return U.H.useMemo(T,k)},Re.useOptimistic=function(T,k){return U.H.useOptimistic(T,k)},Re.useReducer=function(T,k,Q){return U.H.useReducer(T,k,Q)},Re.useRef=function(T){return U.H.useRef(T)},Re.useState=function(T){return U.H.useState(T)},Re.useSyncExternalStore=function(T,k,Q){return U.H.useSyncExternalStore(T,k,Q)},Re.useTransition=function(){return U.H.useTransition()},Re.version="19.1.0",Re}var lv;function Ws(){return lv||(lv=1,Wd.exports=SE()),Wd.exports}var j=Ws();const ae=cx(j);var eh={exports:{}},bs={},th={exports:{}},nh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function EE(){return sv||(sv=1,function(e){function n(M,Y){var W=M.length;M.push(Y);e:for(;0<W;){var $=W-1>>>1,T=M[$];if(0<s(T,Y))M[$]=Y,M[W]=T,W=$;else break e}}function r(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var Y=M[0],W=M.pop();if(W!==Y){M[0]=W;e:for(var $=0,T=M.length,k=T>>>1;$<k;){var Q=2*($+1)-1,ee=M[Q],re=Q+1,oe=M[re];if(0>s(ee,W))re<T&&0>s(oe,ee)?(M[$]=oe,M[re]=W,$=re):(M[$]=ee,M[Q]=W,$=Q);else if(re<T&&0>s(oe,W))M[$]=oe,M[re]=W,$=re;else break e}}return Y}function s(M,Y){var W=M.sortIndex-Y.sortIndex;return W!==0?W:M.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var o=Date,d=o.now();e.unstable_now=function(){return o.now()-d}}var g=[],m=[],y=1,p=null,v=3,x=!1,A=!1,w=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function C(M){for(var Y=r(m);Y!==null;){if(Y.callback===null)i(m);else if(Y.startTime<=M)i(m),Y.sortIndex=Y.expirationTime,n(g,Y);else break;Y=r(m)}}function U(M){if(w=!1,C(M),!A)if(r(g)!==null)A=!0,O||(O=!0,se());else{var Y=r(m);Y!==null&&I(U,Y.startTime-M)}}var O=!1,B=-1,J=5,X=-1;function Z(){return E?!0:!(e.unstable_now()-X<J)}function P(){if(E=!1,O){var M=e.unstable_now();X=M;var Y=!0;try{e:{A=!1,w&&(w=!1,D(B),B=-1),x=!0;var W=v;try{t:{for(C(M),p=r(g);p!==null&&!(p.expirationTime>M&&Z());){var $=p.callback;if(typeof $=="function"){p.callback=null,v=p.priorityLevel;var T=$(p.expirationTime<=M);if(M=e.unstable_now(),typeof T=="function"){p.callback=T,C(M),Y=!0;break t}p===r(g)&&i(g),C(M)}else i(g);p=r(g)}if(p!==null)Y=!0;else{var k=r(m);k!==null&&I(U,k.startTime-M),Y=!1}}break e}finally{p=null,v=W,x=!1}Y=void 0}}finally{Y?se():O=!1}}}var se;if(typeof z=="function")se=function(){z(P)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,N=te.port2;te.port1.onmessage=P,se=function(){N.postMessage(null)}}else se=function(){R(P,0)};function I(M,Y){B=R(function(){M(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(M){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var W=v;v=Y;try{return M()}finally{v=W}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(M,Y){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var W=v;v=M;try{return Y()}finally{v=W}},e.unstable_scheduleCallback=function(M,Y,W){var $=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?$+W:$):W=$,M){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=W+T,M={id:y++,callback:Y,priorityLevel:M,startTime:W,expirationTime:T,sortIndex:-1},W>$?(M.sortIndex=W,n(m,M),r(g)===null&&M===r(m)&&(w?(D(B),B=-1):w=!0,I(U,W-$))):(M.sortIndex=T,n(g,M),A||x||(A=!0,O||(O=!0,se()))),M},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(M){var Y=v;return function(){var W=v;v=Y;try{return M.apply(this,arguments)}finally{v=W}}}}(nh)),nh}var uv;function AE(){return uv||(uv=1,th.exports=EE()),th.exports}var ah={exports:{}},kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv;function TE(){if(cv)return kt;cv=1;var e=Ws();function n(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(g,m,y){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:g,containerInfo:m,implementation:y}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,kt.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return c(g,m,null,y)},kt.flushSync=function(g){var m=o.T,y=i.p;try{if(o.T=null,i.p=2,g)return g()}finally{o.T=m,i.p=y,i.d.f()}},kt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(g,m))},kt.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},kt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,p=d(y,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?i.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:x}):y==="script"&&i.d.X(g,{crossOrigin:p,integrity:v,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},kt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);i.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(g)},kt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,p=d(y,m.crossOrigin);i.d.L(g,y,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},kt.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=d(m.as,m.crossOrigin);i.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(g)},kt.requestFormReset=function(g){i.d.r(g)},kt.unstable_batchedUpdates=function(g,m){return g(m)},kt.useFormState=function(g,m,y){return o.H.useFormState(g,m,y)},kt.useFormStatus=function(){return o.H.useHostTransitionStatus()},kt.version="19.1.0",kt}var ov;function ox(){if(ov)return ah.exports;ov=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),ah.exports=TE(),ah.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv;function CE(){if(fv)return bs;fv=1;var e=AE(),n=Ws(),r=ox();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var a=t,l=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(l=a.return),t=a.return;while(t)}return a.tag===3?l:null}function o(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function d(t){if(c(t)!==t)throw Error(i(188))}function g(t){var a=t.alternate;if(!a){if(a=c(t),a===null)throw Error(i(188));return a!==t?null:t}for(var l=t,u=a;;){var f=l.return;if(f===null)break;var h=f.alternate;if(h===null){if(u=f.return,u!==null){l=u;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===l)return d(f),t;if(h===u)return d(f),a;h=h.sibling}throw Error(i(188))}if(l.return!==u.return)l=f,u=h;else{for(var _=!1,S=f.child;S;){if(S===l){_=!0,l=f,u=h;break}if(S===u){_=!0,u=f,l=h;break}S=S.sibling}if(!_){for(S=h.child;S;){if(S===l){_=!0,l=h,u=f;break}if(S===u){_=!0,u=h,l=f;break}S=S.sibling}if(!_)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?t:a}function m(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=m(t),a!==null)return a;t=t.sibling}return null}var y=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),z=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function se(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var te=Symbol.for("react.client.reference");function N(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===te?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case A:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case U:return"Suspense";case O:return"SuspenseList";case X:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case x:return"Portal";case z:return(t.displayName||"Context")+".Provider";case D:return(t._context.displayName||"Context")+".Consumer";case C:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B:return a=t.displayName||null,a!==null?a:N(t.type)||"Memo";case J:a=t._payload,t=t._init;try{return N(t(a))}catch{}}return null}var I=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},$=[],T=-1;function k(t){return{current:t}}function Q(t){0>T||(t.current=$[T],$[T]=null,T--)}function ee(t,a){T++,$[T]=t.current,t.current=a}var re=k(null),oe=k(null),fe=k(null),Ae=k(null);function ve(t,a){switch(ee(fe,a),ee(oe,t),ee(re,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Np(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Np(a),t=Op(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Q(re),ee(re,t)}function ce(){Q(re),Q(oe),Q(fe)}function de(t){t.memoizedState!==null&&ee(Ae,t);var a=re.current,l=Op(a,t.type);a!==l&&(ee(oe,t),ee(re,l))}function we(t){oe.current===t&&(Q(re),Q(oe)),Ae.current===t&&(Q(Ae),ys._currentValue=W)}var ue=Object.prototype.hasOwnProperty,qe=e.unstable_scheduleCallback,Me=e.unstable_cancelCallback,He=e.unstable_shouldYield,Ke=e.unstable_requestPaint,Te=e.unstable_now,me=e.unstable_getCurrentPriorityLevel,jt=e.unstable_ImmediatePriority,Qn=e.unstable_UserBlockingPriority,Zn=e.unstable_NormalPriority,ka=e.unstable_LowPriority,fa=e.unstable_IdlePriority,zn=e.log,$a=e.unstable_setDisableYieldValue,an=null,st=null;function qt(t){if(typeof zn=="function"&&$a(t),st&&typeof st.setStrictMode=="function")try{st.setStrictMode(an,t)}catch{}}var ot=Math.clz32?Math.clz32:rn,Cr=Math.log,wt=Math.LN2;function rn(t){return t>>>=0,t===0?32:31-(Cr(t)/wt|0)|0}var vn=256,_n=4194304;function Xt(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Qt(t,a,l){var u=t.pendingLanes;if(u===0)return 0;var f=0,h=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var S=u&134217727;return S!==0?(u=S&~h,u!==0?f=Xt(u):(_&=S,_!==0?f=Xt(_):l||(l=S&~t,l!==0&&(f=Xt(l))))):(S=u&~h,S!==0?f=Xt(S):_!==0?f=Xt(_):l||(l=u&~t,l!==0&&(f=Xt(l)))),f===0?0:a!==0&&a!==f&&(a&h)===0&&(h=f&-f,l=a&-a,h>=l||h===32&&(l&4194048)!==0)?a:f}function Ht(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Mr(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oi(){var t=vn;return vn<<=1,(vn&4194048)===0&&(vn=256),t}function Ya(){var t=_n;return _n<<=1,(_n&62914560)===0&&(_n=4194304),t}function Rr(t){for(var a=[],l=0;31>l;l++)a.push(t);return a}function qa(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function da(t,a,l,u,f,h){var _=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var S=t.entanglements,H=t.expirationTimes,G=t.hiddenUpdates;for(l=_&~l;0<l;){var ne=31-ot(l),le=1<<ne;S[ne]=0,H[ne]=-1;var F=G[ne];if(F!==null)for(G[ne]=null,ne=0;ne<F.length;ne++){var K=F[ne];K!==null&&(K.lane&=-536870913)}l&=~le}u!==0&&fu(t,u,0),h!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=h&~(_&~a))}function fu(t,a,l){t.pendingLanes|=a,t.suspendedLanes&=~a;var u=31-ot(a);t.entangledLanes|=a,t.entanglements[u]=t.entanglements[u]|1073741824|l&4194090}function du(t,a){var l=t.entangledLanes|=a;for(t=t.entanglements;l;){var u=31-ot(l),f=1<<u;f&a|t[u]&a&&(t[u]|=a),l&=~f}}function El(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Al(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function hu(){var t=Y.p;return t!==0?t:(t=window.event,t===void 0?32:Jp(t.type))}function Vo(t,a){var l=Y.p;try{return Y.p=t,a()}finally{Y.p=l}}var In=Math.random().toString(36).slice(2),bt="__reactFiber$"+In,Bt="__reactProps$"+In,Xa="__reactContainer$"+In,Tl="__reactEvents$"+In,Go="__reactListeners$"+In,Qo="__reactHandles$"+In,mu="__reactResources$"+In,Dr="__reactMarker$"+In;function Cl(t){delete t[bt],delete t[Bt],delete t[Tl],delete t[Go],delete t[Qo]}function ha(t){var a=t[bt];if(a)return a;for(var l=t.parentNode;l;){if(a=l[Xa]||l[bt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(t=Hp(t);t!==null;){if(l=t[bt])return l;t=Hp(t)}return a}t=l,l=t.parentNode}return null}function Va(t){if(t=t[bt]||t[Xa]){var a=t.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return t}return null}function Nr(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function Ga(t){var a=t[mu];return a||(a=t[mu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ft(t){t[Dr]=!0}var gu=new Set,yu={};function ma(t,a){Qa(t,a),Qa(t+"Capture",a)}function Qa(t,a){for(yu[t]=a,t=0;t<a.length;t++)gu.add(a[t])}var pu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vu={},_u={};function Zo(t){return ue.call(_u,t)?!0:ue.call(vu,t)?!1:pu.test(t)?_u[t]=!0:(vu[t]=!0,!1)}function fi(t,a,l){if(Zo(a))if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+l)}}function di(t,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+l)}}function jn(t,a,l,u){if(u===null)t.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(a,l,""+u)}}var hi,xu;function Za(t){if(hi===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);hi=a&&a[1]||"",xu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hi+t+xu}var Ml=!1;function Or(t,a){if(!t||Ml)return"";Ml=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(K){var F=K}Reflect.construct(t,[],le)}else{try{le.call()}catch(K){F=K}t.call(le.prototype)}}else{try{throw Error()}catch(K){F=K}(le=t())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(K){if(K&&F&&typeof K.stack=="string")return[K.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=u.DetermineComponentFrameRoot(),_=h[0],S=h[1];if(_&&S){var H=_.split(`
`),G=S.split(`
`);for(f=u=0;u<H.length&&!H[u].includes("DetermineComponentFrameRoot");)u++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(u===H.length||f===G.length)for(u=H.length-1,f=G.length-1;1<=u&&0<=f&&H[u]!==G[f];)f--;for(;1<=u&&0<=f;u--,f--)if(H[u]!==G[f]){if(u!==1||f!==1)do if(u--,f--,0>f||H[u]!==G[f]){var ne=`
`+H[u].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=u&&0<=f);break}}}finally{Ml=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?Za(l):""}function g1(t){switch(t.tag){case 26:case 27:case 5:return Za(t.type);case 16:return Za("Lazy");case 13:return Za("Suspense");case 19:return Za("SuspenseList");case 0:case 15:return Or(t.type,!1);case 11:return Or(t.type.render,!1);case 1:return Or(t.type,!0);case 31:return Za("Activity");default:return""}}function Ag(t){try{var a="";do a+=g1(t),t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function xn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tg(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function y1(t){var a=Tg(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),u=""+t[a];if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,h=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(_){u=""+_,h.call(this,_)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function wu(t){t._valueTracker||(t._valueTracker=y1(t))}function Cg(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return t&&(u=Tg(t)?t.checked?"true":"false":t.value),t=u,t!==l?(a.setValue(t),!0):!1}function bu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var p1=/[\n"\\]/g;function wn(t){return t.replace(p1,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Io(t,a,l,u,f,h,_,S){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),a!=null?_==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+xn(a)):t.value!==""+xn(a)&&(t.value=""+xn(a)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),a!=null?Fo(t,_,xn(a)):l!=null?Fo(t,_,xn(l)):u!=null&&t.removeAttribute("value"),f==null&&h!=null&&(t.defaultChecked=!!h),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+xn(S):t.removeAttribute("name")}function Mg(t,a,l,u,f,h,_,S){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),a!=null||l!=null){if(!(h!=="submit"&&h!=="reset"||a!=null))return;l=l!=null?""+xn(l):"",a=a!=null?""+xn(a):l,S||a===t.value||(t.value=a),t.defaultValue=a}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=S?t.checked:!!u,t.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Fo(t,a,l){a==="number"&&bu(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function mi(t,a,l,u){if(t=t.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<t.length;l++)f=a.hasOwnProperty("$"+t[l].value),t[l].selected!==f&&(t[l].selected=f),f&&u&&(t[l].defaultSelected=!0)}else{for(l=""+xn(l),a=null,f=0;f<t.length;f++){if(t[f].value===l){t[f].selected=!0,u&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function Rg(t,a,l){if(a!=null&&(a=""+xn(a),a!==t.value&&(t.value=a),l==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=l!=null?""+xn(l):""}function Dg(t,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if(I(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=xn(a),t.defaultValue=l,u=t.textContent,u===l&&u!==""&&u!==null&&(t.value=u)}function gi(t,a){if(a){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=a;return}}t.textContent=a}var v1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ng(t,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":u?t.setProperty(a,l):typeof l!="number"||l===0||v1.has(a)?a==="float"?t.cssFloat=l:t[a]=(""+l).trim():t[a]=l+"px"}function Og(t,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var f in a)u=a[f],a.hasOwnProperty(f)&&l[f]!==u&&Ng(t,f,u)}else for(var h in a)a.hasOwnProperty(h)&&Ng(t,h,a[h])}function Ko(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),x1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Su(t){return x1.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Jo=null;function Po(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yi=null,pi=null;function Ug(t){var a=Va(t);if(a&&(t=a.stateNode)){var l=t[Bt]||null;e:switch(t=a.stateNode,a.type){case"input":if(Io(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+wn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==t&&u.form===t.form){var f=u[Bt]||null;if(!f)throw Error(i(90));Io(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===t.form&&Cg(u)}break e;case"textarea":Rg(t,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&mi(t,!!l.multiple,a,!1)}}}var Wo=!1;function zg(t,a,l){if(Wo)return t(a,l);Wo=!0;try{var u=t(a);return u}finally{if(Wo=!1,(yi!==null||pi!==null)&&(uc(),yi&&(a=yi,t=pi,pi=yi=null,Ug(a),t)))for(a=0;a<t.length;a++)Ug(t[a])}}function Rl(t,a){var l=t.stateNode;if(l===null)return null;var u=l[Bt]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ef=!1;if(ga)try{var Dl={};Object.defineProperty(Dl,"passive",{get:function(){ef=!0}}),window.addEventListener("test",Dl,Dl),window.removeEventListener("test",Dl,Dl)}catch{ef=!1}var Ia=null,tf=null,Eu=null;function jg(){if(Eu)return Eu;var t,a=tf,l=a.length,u,f="value"in Ia?Ia.value:Ia.textContent,h=f.length;for(t=0;t<l&&a[t]===f[t];t++);var _=l-t;for(u=1;u<=_&&a[l-u]===f[h-u];u++);return Eu=f.slice(t,1<u?1-u:void 0)}function Au(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Tu(){return!0}function Hg(){return!1}function Zt(t){function a(l,u,f,h,_){this._reactName=l,this._targetInst=f,this.type=u,this.nativeEvent=h,this.target=_,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(l=t[S],this[S]=l?l(h):h[S]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Tu:Hg,this.isPropagationStopped=Hg,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Tu)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Tu)},persist:function(){},isPersistent:Tu}),a}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cu=Zt(Ur),Nl=y({},Ur,{view:0,detail:0}),w1=Zt(Nl),nf,af,Ol,Mu=y({},Nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ol&&(Ol&&t.type==="mousemove"?(nf=t.screenX-Ol.screenX,af=t.screenY-Ol.screenY):af=nf=0,Ol=t),nf)},movementY:function(t){return"movementY"in t?t.movementY:af}}),Bg=Zt(Mu),b1=y({},Mu,{dataTransfer:0}),S1=Zt(b1),E1=y({},Nl,{relatedTarget:0}),rf=Zt(E1),A1=y({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),T1=Zt(A1),C1=y({},Ur,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),M1=Zt(C1),R1=y({},Ur,{data:0}),Lg=Zt(R1),D1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U1(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=O1[t])?!!a[t]:!1}function lf(){return U1}var z1=y({},Nl,{key:function(t){if(t.key){var a=D1[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Au(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?N1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lf,charCode:function(t){return t.type==="keypress"?Au(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Au(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),j1=Zt(z1),H1=y({},Mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kg=Zt(H1),B1=y({},Nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lf}),L1=Zt(B1),k1=y({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),$1=Zt(k1),Y1=y({},Mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),q1=Zt(Y1),X1=y({},Ur,{newState:0,oldState:0}),V1=Zt(X1),G1=[9,13,27,32],sf=ga&&"CompositionEvent"in window,Ul=null;ga&&"documentMode"in document&&(Ul=document.documentMode);var Q1=ga&&"TextEvent"in window&&!Ul,$g=ga&&(!sf||Ul&&8<Ul&&11>=Ul),Yg=" ",qg=!1;function Xg(t,a){switch(t){case"keyup":return G1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vi=!1;function Z1(t,a){switch(t){case"compositionend":return Vg(a);case"keypress":return a.which!==32?null:(qg=!0,Yg);case"textInput":return t=a.data,t===Yg&&qg?null:t;default:return null}}function I1(t,a){if(vi)return t==="compositionend"||!sf&&Xg(t,a)?(t=jg(),Eu=tf=Ia=null,vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return $g&&a.locale!=="ko"?null:a.data;default:return null}}var F1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!F1[t.type]:a==="textarea"}function Qg(t,a,l,u){yi?pi?pi.push(u):pi=[u]:yi=u,a=mc(a,"onChange"),0<a.length&&(l=new Cu("onChange","change",null,l,u),t.push({event:l,listeners:a}))}var zl=null,jl=null;function K1(t){Tp(t,0)}function Ru(t){var a=Nr(t);if(Cg(a))return t}function Zg(t,a){if(t==="change")return a}var Ig=!1;if(ga){var uf;if(ga){var cf="oninput"in document;if(!cf){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),cf=typeof Fg.oninput=="function"}uf=cf}else uf=!1;Ig=uf&&(!document.documentMode||9<document.documentMode)}function Kg(){zl&&(zl.detachEvent("onpropertychange",Jg),jl=zl=null)}function Jg(t){if(t.propertyName==="value"&&Ru(jl)){var a=[];Qg(a,jl,t,Po(t)),zg(K1,a)}}function J1(t,a,l){t==="focusin"?(Kg(),zl=a,jl=l,zl.attachEvent("onpropertychange",Jg)):t==="focusout"&&Kg()}function P1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ru(jl)}function W1(t,a){if(t==="click")return Ru(a)}function eS(t,a){if(t==="input"||t==="change")return Ru(a)}function tS(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ln=typeof Object.is=="function"?Object.is:tS;function Hl(t,a){if(ln(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var l=Object.keys(t),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var f=l[u];if(!ue.call(a,f)||!ln(t[f],a[f]))return!1}return!0}function Pg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wg(t,a){var l=Pg(t);t=0;for(var u;l;){if(l.nodeType===3){if(u=t+l.textContent.length,t<=a&&u>=a)return{node:l,offset:a-t};t=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Pg(l)}}function ey(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?ey(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function ty(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=bu(t.document);a instanceof t.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)t=a.contentWindow;else break;a=bu(t.document)}return a}function of(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var nS=ga&&"documentMode"in document&&11>=document.documentMode,_i=null,ff=null,Bl=null,df=!1;function ny(t,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;df||_i==null||_i!==bu(u)||(u=_i,"selectionStart"in u&&of(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Bl&&Hl(Bl,u)||(Bl=u,u=mc(ff,"onSelect"),0<u.length&&(a=new Cu("onSelect","select",null,a,l),t.push({event:a,listeners:u}),a.target=_i)))}function zr(t,a){var l={};return l[t.toLowerCase()]=a.toLowerCase(),l["Webkit"+t]="webkit"+a,l["Moz"+t]="moz"+a,l}var xi={animationend:zr("Animation","AnimationEnd"),animationiteration:zr("Animation","AnimationIteration"),animationstart:zr("Animation","AnimationStart"),transitionrun:zr("Transition","TransitionRun"),transitionstart:zr("Transition","TransitionStart"),transitioncancel:zr("Transition","TransitionCancel"),transitionend:zr("Transition","TransitionEnd")},hf={},ay={};ga&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);function jr(t){if(hf[t])return hf[t];if(!xi[t])return t;var a=xi[t],l;for(l in a)if(a.hasOwnProperty(l)&&l in ay)return hf[t]=a[l];return t}var ry=jr("animationend"),iy=jr("animationiteration"),ly=jr("animationstart"),aS=jr("transitionrun"),rS=jr("transitionstart"),iS=jr("transitioncancel"),sy=jr("transitionend"),uy=new Map,mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mf.push("scrollEnd");function Hn(t,a){uy.set(t,a),ma(a,[t])}var cy=new WeakMap;function bn(t,a){if(typeof t=="object"&&t!==null){var l=cy.get(t);return l!==void 0?l:(a={value:t,source:a,stack:Ag(a)},cy.set(t,a),a)}return{value:t,source:a,stack:Ag(a)}}var Sn=[],wi=0,gf=0;function Du(){for(var t=wi,a=gf=wi=0;a<t;){var l=Sn[a];Sn[a++]=null;var u=Sn[a];Sn[a++]=null;var f=Sn[a];Sn[a++]=null;var h=Sn[a];if(Sn[a++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}h!==0&&oy(l,f,h)}}function Nu(t,a,l,u){Sn[wi++]=t,Sn[wi++]=a,Sn[wi++]=l,Sn[wi++]=u,gf|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function yf(t,a,l,u){return Nu(t,a,l,u),Ou(t)}function bi(t,a){return Nu(t,null,null,a),Ou(t)}function oy(t,a,l){t.lanes|=l;var u=t.alternate;u!==null&&(u.lanes|=l);for(var f=!1,h=t.return;h!==null;)h.childLanes|=l,u=h.alternate,u!==null&&(u.childLanes|=l),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(f=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,f&&a!==null&&(f=31-ot(l),t=h.hiddenUpdates,u=t[f],u===null?t[f]=[a]:u.push(a),a.lane=l|536870912),h):null}function Ou(t){if(50<us)throw us=0,bd=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Si={};function lS(t,a,l,u){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,a,l,u){return new lS(t,a,l,u)}function pf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ya(t,a){var l=t.alternate;return l===null?(l=sn(t.tag,a,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=a,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,a=t.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function fy(t,a){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,a=l.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Uu(t,a,l,u,f,h){var _=0;if(u=t,typeof t=="function")pf(t)&&(_=1);else if(typeof t=="string")_=uE(t,l,re.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case X:return t=sn(31,l,a,f),t.elementType=X,t.lanes=h,t;case A:return Hr(l.children,f,h,a);case w:_=8,f|=24;break;case E:return t=sn(12,l,a,f|2),t.elementType=E,t.lanes=h,t;case U:return t=sn(13,l,a,f),t.elementType=U,t.lanes=h,t;case O:return t=sn(19,l,a,f),t.elementType=O,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:case z:_=10;break e;case D:_=9;break e;case C:_=11;break e;case B:_=14;break e;case J:_=16,u=null;break e}_=29,l=Error(i(130,t===null?"null":typeof t,"")),u=null}return a=sn(_,l,a,f),a.elementType=t,a.type=u,a.lanes=h,a}function Hr(t,a,l,u){return t=sn(7,t,u,a),t.lanes=l,t}function vf(t,a,l){return t=sn(6,t,null,a),t.lanes=l,t}function _f(t,a,l){return a=sn(4,t.children!==null?t.children:[],t.key,a),a.lanes=l,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Ei=[],Ai=0,zu=null,ju=0,En=[],An=0,Br=null,pa=1,va="";function Lr(t,a){Ei[Ai++]=ju,Ei[Ai++]=zu,zu=t,ju=a}function dy(t,a,l){En[An++]=pa,En[An++]=va,En[An++]=Br,Br=t;var u=pa;t=va;var f=32-ot(u)-1;u&=~(1<<f),l+=1;var h=32-ot(a)+f;if(30<h){var _=f-f%5;h=(u&(1<<_)-1).toString(32),u>>=_,f-=_,pa=1<<32-ot(a)+f|l<<f|u,va=h+t}else pa=1<<h|l<<f|u,va=t}function xf(t){t.return!==null&&(Lr(t,1),dy(t,1,0))}function wf(t){for(;t===zu;)zu=Ei[--Ai],Ei[Ai]=null,ju=Ei[--Ai],Ei[Ai]=null;for(;t===Br;)Br=En[--An],En[An]=null,va=En[--An],En[An]=null,pa=En[--An],En[An]=null}var Vt=null,rt=null,$e=!1,kr=null,Fn=!1,bf=Error(i(519));function $r(t){var a=Error(i(418,""));throw $l(bn(a,t)),bf}function hy(t){var a=t.stateNode,l=t.type,u=t.memoizedProps;switch(a[bt]=t,a[Bt]=u,l){case"dialog":ze("cancel",a),ze("close",a);break;case"iframe":case"object":case"embed":ze("load",a);break;case"video":case"audio":for(l=0;l<os.length;l++)ze(os[l],a);break;case"source":ze("error",a);break;case"img":case"image":case"link":ze("error",a),ze("load",a);break;case"details":ze("toggle",a);break;case"input":ze("invalid",a),Mg(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),wu(a);break;case"select":ze("invalid",a);break;case"textarea":ze("invalid",a),Dg(a,u.value,u.defaultValue,u.children),wu(a)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||Dp(a.textContent,l)?(u.popover!=null&&(ze("beforetoggle",a),ze("toggle",a)),u.onScroll!=null&&ze("scroll",a),u.onScrollEnd!=null&&ze("scrollend",a),u.onClick!=null&&(a.onclick=gc),a=!0):a=!1,a||$r(t)}function my(t){for(Vt=t.return;Vt;)switch(Vt.tag){case 5:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:Vt=Vt.return}}function Ll(t){if(t!==Vt)return!1;if(!$e)return my(t),$e=!0,!1;var a=t.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Ld(t.type,t.memoizedProps)),l=!l),l&&rt&&$r(t),my(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8)if(l=t.data,l==="/$"){if(a===0){rt=Ln(t.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;t=t.nextSibling}rt=null}}else a===27?(a=rt,or(t.type)?(t=qd,qd=null,rt=t):rt=a):rt=Vt?Ln(t.stateNode.nextSibling):null;return!0}function kl(){rt=Vt=null,$e=!1}function gy(){var t=kr;return t!==null&&(Kt===null?Kt=t:Kt.push.apply(Kt,t),kr=null),t}function $l(t){kr===null?kr=[t]:kr.push(t)}var Sf=k(null),Yr=null,_a=null;function Fa(t,a,l){ee(Sf,a._currentValue),a._currentValue=l}function xa(t){t._currentValue=Sf.current,Q(Sf)}function Ef(t,a,l){for(;t!==null;){var u=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),t===l)break;t=t.return}}function Af(t,a,l,u){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var h=f.dependencies;if(h!==null){var _=f.child;h=h.firstContext;e:for(;h!==null;){var S=h;h=f;for(var H=0;H<a.length;H++)if(S.context===a[H]){h.lanes|=l,S=h.alternate,S!==null&&(S.lanes|=l),Ef(h.return,l,t),u||(_=null);break e}h=S.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=l,h=_.alternate,h!==null&&(h.lanes|=l),Ef(_,l,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Yl(t,a,l,u){t=null;for(var f=a,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var S=f.type;ln(f.pendingProps.value,_.value)||(t!==null?t.push(S):t=[S])}}else if(f===Ae.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(ys):t=[ys])}f=f.return}t!==null&&Af(a,t,l,u),a.flags|=262144}function Hu(t){for(t=t.firstContext;t!==null;){if(!ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function qr(t){Yr=t,_a=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Lt(t){return yy(Yr,t)}function Bu(t,a){return Yr===null&&qr(t),yy(t,a)}function yy(t,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},_a===null){if(t===null)throw Error(i(308));_a=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else _a=_a.next=a;return l}var sS=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(l,u){t.push(u)}};this.abort=function(){a.aborted=!0,t.forEach(function(l){return l()})}},uS=e.unstable_scheduleCallback,cS=e.unstable_NormalPriority,mt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tf(){return{controller:new sS,data:new Map,refCount:0}}function ql(t){t.refCount--,t.refCount===0&&uS(cS,function(){t.controller.abort()})}var Xl=null,Cf=0,Ti=0,Ci=null;function oS(t,a){if(Xl===null){var l=Xl=[];Cf=0,Ti=Rd(),Ci={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Cf++,a.then(py,py),a}function py(){if(--Cf===0&&Xl!==null){Ci!==null&&(Ci.status="fulfilled");var t=Xl;Xl=null,Ti=0,Ci=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function fS(t,a){var l=[],u={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return t.then(function(){u.status="fulfilled",u.value=a;for(var f=0;f<l.length;f++)(0,l[f])(a)},function(f){for(u.status="rejected",u.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),u}var vy=M.S;M.S=function(t,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&oS(t,a),vy!==null&&vy(t,a)};var Xr=k(null);function Mf(){var t=Xr.current;return t!==null?t:Je.pooledCache}function Lu(t,a){a===null?ee(Xr,Xr.current):ee(Xr,a.pool)}function _y(){var t=Mf();return t===null?null:{parent:mt._currentValue,pool:t}}var Vl=Error(i(460)),xy=Error(i(474)),ku=Error(i(542)),Rf={then:function(){}};function wy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function $u(){}function by(t,a,l){switch(l=t[l],l===void 0?t.push(a):l!==a&&(a.then($u,$u),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Ey(t),t;default:if(typeof a.status=="string")a.then($u,$u);else{if(t=Je,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(u){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=u}},function(u){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Ey(t),t}throw Gl=a,Vl}}var Gl=null;function Sy(){if(Gl===null)throw Error(i(459));var t=Gl;return Gl=null,t}function Ey(t){if(t===Vl||t===ku)throw Error(i(483))}var Ka=!1;function Df(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nf(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ja(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(t,a,l){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Xe&2)!==0){var f=u.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a,a=Ou(t),oy(t,null,l),a}return Nu(t,u,a,l),Ou(t)}function Ql(t,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=t.pendingLanes,l|=u,a.lanes=l,du(t,l)}}function Of(t,a){var l=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var f=null,h=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};h===null?f=h=_:h=h.next=_,l=l.next}while(l!==null);h===null?f=h=a:h=h.next=a}else f=h=a;l={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:u.shared,callbacks:u.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=a:t.next=a,l.lastBaseUpdate=a}var Uf=!1;function Zl(){if(Uf){var t=Ci;if(t!==null)throw t}}function Il(t,a,l,u){Uf=!1;var f=t.updateQueue;Ka=!1;var h=f.firstBaseUpdate,_=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var H=S,G=H.next;H.next=null,_===null?h=G:_.next=G,_=H;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,S=ne.lastBaseUpdate,S!==_&&(S===null?ne.firstBaseUpdate=G:S.next=G,ne.lastBaseUpdate=H))}if(h!==null){var le=f.baseState;_=0,ne=G=H=null,S=h;do{var F=S.lane&-536870913,K=F!==S.lane;if(K?(Be&F)===F:(u&F)===F){F!==0&&F===Ti&&(Uf=!0),ne!==null&&(ne=ne.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Se=t,_e=S;F=a;var Ze=l;switch(_e.tag){case 1:if(Se=_e.payload,typeof Se=="function"){le=Se.call(Ze,le,F);break e}le=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=_e.payload,F=typeof Se=="function"?Se.call(Ze,le,F):Se,F==null)break e;le=y({},le,F);break e;case 2:Ka=!0}}F=S.callback,F!==null&&(t.flags|=64,K&&(t.flags|=8192),K=f.callbacks,K===null?f.callbacks=[F]:K.push(F))}else K={lane:F,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ne===null?(G=ne=K,H=le):ne=ne.next=K,_|=F;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;K=S,S=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);ne===null&&(H=le),f.baseState=H,f.firstBaseUpdate=G,f.lastBaseUpdate=ne,h===null&&(f.shared.lanes=0),lr|=_,t.lanes=_,t.memoizedState=le}}function Ay(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function Ty(t,a){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Ay(l[t],a)}var Mi=k(null),Yu=k(0);function Cy(t,a){t=Ca,ee(Yu,t),ee(Mi,a),Ca=t|a.baseLanes}function zf(){ee(Yu,Ca),ee(Mi,Mi.current)}function jf(){Ca=Yu.current,Q(Mi),Q(Yu)}var Wa=0,De=null,Ge=null,dt=null,qu=!1,Ri=!1,Vr=!1,Xu=0,Fl=0,Di=null,dS=0;function ut(){throw Error(i(321))}function Hf(t,a){if(a===null)return!1;for(var l=0;l<a.length&&l<t.length;l++)if(!ln(t[l],a[l]))return!1;return!0}function Bf(t,a,l,u,f,h){return Wa=h,De=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,M.H=t===null||t.memoizedState===null?o0:f0,Vr=!1,h=l(u,f),Vr=!1,Ri&&(h=Ry(a,l,u,f)),My(t),h}function My(t){M.H=Fu;var a=Ge!==null&&Ge.next!==null;if(Wa=0,dt=Ge=De=null,qu=!1,Fl=0,Di=null,a)throw Error(i(300));t===null||St||(t=t.dependencies,t!==null&&Hu(t)&&(St=!0))}function Ry(t,a,l,u){De=t;var f=0;do{if(Ri&&(Di=null),Fl=0,Ri=!1,25<=f)throw Error(i(301));if(f+=1,dt=Ge=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}M.H=_S,h=a(l,u)}while(Ri);return h}function hS(){var t=M.H,a=t.useState()[0];return a=typeof a.then=="function"?Kl(a):a,t=t.useState()[0],(Ge!==null?Ge.memoizedState:null)!==t&&(De.flags|=1024),a}function Lf(){var t=Xu!==0;return Xu=0,t}function kf(t,a,l){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~l}function $f(t){if(qu){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}qu=!1}Wa=0,dt=Ge=De=null,Ri=!1,Fl=Xu=0,Di=null}function It(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?De.memoizedState=dt=t:dt=dt.next=t,dt}function ht(){if(Ge===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var a=dt===null?De.memoizedState:dt.next;if(a!==null)dt=a,Ge=t;else{if(t===null)throw De.alternate===null?Error(i(467)):Error(i(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},dt===null?De.memoizedState=dt=t:dt=dt.next=t}return dt}function Yf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(t){var a=Fl;return Fl+=1,Di===null&&(Di=[]),t=by(Di,t,a),a=De,(dt===null?a.memoizedState:dt.next)===null&&(a=a.alternate,M.H=a===null||a.memoizedState===null?o0:f0),t}function Vu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Kl(t);if(t.$$typeof===z)return Lt(t)}throw Error(i(438,String(t)))}function qf(t){var a=null,l=De.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=De.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Yf(),De.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(t),u=0;u<t;u++)l[u]=Z;return a.index++,l}function wa(t,a){return typeof a=="function"?a(t):a}function Gu(t){var a=ht();return Xf(a,Ge,t)}function Xf(t,a,l){var u=t.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var f=t.baseQueue,h=u.pending;if(h!==null){if(f!==null){var _=f.next;f.next=h.next,h.next=_}a.baseQueue=f=h,u.pending=null}if(h=t.baseState,f===null)t.memoizedState=h;else{a=f.next;var S=_=null,H=null,G=a,ne=!1;do{var le=G.lane&-536870913;if(le!==G.lane?(Be&le)===le:(Wa&le)===le){var F=G.revertLane;if(F===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),le===Ti&&(ne=!0);else if((Wa&F)===F){G=G.next,F===Ti&&(ne=!0);continue}else le={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},H===null?(S=H=le,_=h):H=H.next=le,De.lanes|=F,lr|=F;le=G.action,Vr&&l(h,le),h=G.hasEagerState?G.eagerState:l(h,le)}else F={lane:le,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},H===null?(S=H=F,_=h):H=H.next=F,De.lanes|=le,lr|=le;G=G.next}while(G!==null&&G!==a);if(H===null?_=h:H.next=S,!ln(h,t.memoizedState)&&(St=!0,ne&&(l=Ci,l!==null)))throw l;t.memoizedState=h,t.baseState=_,t.baseQueue=H,u.lastRenderedState=h}return f===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function Vf(t){var a=ht(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=t;var u=l.dispatch,f=l.pending,h=a.memoizedState;if(f!==null){l.pending=null;var _=f=f.next;do h=t(h,_.action),_=_.next;while(_!==f);ln(h,a.memoizedState)||(St=!0),a.memoizedState=h,a.baseQueue===null&&(a.baseState=h),l.lastRenderedState=h}return[h,u]}function Dy(t,a,l){var u=De,f=ht(),h=$e;if(h){if(l===void 0)throw Error(i(407));l=l()}else l=a();var _=!ln((Ge||f).memoizedState,l);_&&(f.memoizedState=l,St=!0),f=f.queue;var S=Uy.bind(null,u,f,t);if(Jl(2048,8,S,[t]),f.getSnapshot!==a||_||dt!==null&&dt.memoizedState.tag&1){if(u.flags|=2048,Ni(9,Qu(),Oy.bind(null,u,f,l,a),null),Je===null)throw Error(i(349));h||(Wa&124)!==0||Ny(u,a,l)}return l}function Ny(t,a,l){t.flags|=16384,t={getSnapshot:a,value:l},a=De.updateQueue,a===null?(a=Yf(),De.updateQueue=a,a.stores=[t]):(l=a.stores,l===null?a.stores=[t]:l.push(t))}function Oy(t,a,l,u){a.value=l,a.getSnapshot=u,zy(a)&&jy(t)}function Uy(t,a,l){return l(function(){zy(a)&&jy(t)})}function zy(t){var a=t.getSnapshot;t=t.value;try{var l=a();return!ln(t,l)}catch{return!0}}function jy(t){var a=bi(t,2);a!==null&&dn(a,t,2)}function Gf(t){var a=It();if(typeof t=="function"){var l=t;if(t=l(),Vr){qt(!0);try{l()}finally{qt(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:t},a}function Hy(t,a,l,u){return t.baseState=l,Xf(t,Ge,typeof u=="function"?u:wa)}function mS(t,a,l,u,f){if(Iu(t))throw Error(i(485));if(t=a.action,t!==null){var h={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){h.listeners.push(_)}};M.T!==null?l(!0):h.isTransition=!1,u(h),l=a.pending,l===null?(h.next=a.pending=h,By(a,h)):(h.next=l.next,a.pending=l.next=h)}}function By(t,a){var l=a.action,u=a.payload,f=t.state;if(a.isTransition){var h=M.T,_={};M.T=_;try{var S=l(f,u),H=M.S;H!==null&&H(_,S),Ly(t,a,S)}catch(G){Qf(t,a,G)}finally{M.T=h}}else try{h=l(f,u),Ly(t,a,h)}catch(G){Qf(t,a,G)}}function Ly(t,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){ky(t,a,u)},function(u){return Qf(t,a,u)}):ky(t,a,l)}function ky(t,a,l){a.status="fulfilled",a.value=l,$y(a),t.state=l,a=t.pending,a!==null&&(l=a.next,l===a?t.pending=null:(l=l.next,a.next=l,By(t,l)))}function Qf(t,a,l){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,$y(a),a=a.next;while(a!==u)}t.action=null}function $y(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Yy(t,a){return a}function qy(t,a){if($e){var l=Je.formState;if(l!==null){e:{var u=De;if($e){if(rt){t:{for(var f=rt,h=Fn;f.nodeType!==8;){if(!h){f=null;break t}if(f=Ln(f.nextSibling),f===null){f=null;break t}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){rt=Ln(f.nextSibling),u=f.data==="F!";break e}}$r(u)}u=!1}u&&(a=l[0])}}return l=It(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yy,lastRenderedState:a},l.queue=u,l=s0.bind(null,De,u),u.dispatch=l,u=Gf(!1),h=Jf.bind(null,De,!1,u.queue),u=It(),f={state:a,dispatch:null,action:t,pending:null},u.queue=f,l=mS.bind(null,De,f,h,l),f.dispatch=l,u.memoizedState=t,[a,l,!1]}function Xy(t){var a=ht();return Vy(a,Ge,t)}function Vy(t,a,l){if(a=Xf(t,a,Yy)[0],t=Gu(wa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Kl(a)}catch(_){throw _===Vl?ku:_}else u=a;a=ht();var f=a.queue,h=f.dispatch;return l!==a.memoizedState&&(De.flags|=2048,Ni(9,Qu(),gS.bind(null,f,l),null)),[u,h,t]}function gS(t,a){t.action=a}function Gy(t){var a=ht(),l=Ge;if(l!==null)return Vy(a,l,t);ht(),a=a.memoizedState,l=ht();var u=l.queue.dispatch;return l.memoizedState=t,[a,u,!1]}function Ni(t,a,l,u){return t={tag:t,create:l,deps:u,inst:a,next:null},a=De.updateQueue,a===null&&(a=Yf(),De.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=t.next=t:(u=l.next,l.next=t,t.next=u,a.lastEffect=t),t}function Qu(){return{destroy:void 0,resource:void 0}}function Qy(){return ht().memoizedState}function Zu(t,a,l,u){var f=It();u=u===void 0?null:u,De.flags|=t,f.memoizedState=Ni(1|a,Qu(),l,u)}function Jl(t,a,l,u){var f=ht();u=u===void 0?null:u;var h=f.memoizedState.inst;Ge!==null&&u!==null&&Hf(u,Ge.memoizedState.deps)?f.memoizedState=Ni(a,h,l,u):(De.flags|=t,f.memoizedState=Ni(1|a,h,l,u))}function Zy(t,a){Zu(8390656,8,t,a)}function Iy(t,a){Jl(2048,8,t,a)}function Fy(t,a){return Jl(4,2,t,a)}function Ky(t,a){return Jl(4,4,t,a)}function Jy(t,a){if(typeof a=="function"){t=t();var l=a(t);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Py(t,a,l){l=l!=null?l.concat([t]):null,Jl(4,4,Jy.bind(null,a,t),l)}function Zf(){}function Wy(t,a){var l=ht();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Hf(a,u[1])?u[0]:(l.memoizedState=[t,a],t)}function e0(t,a){var l=ht();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Hf(a,u[1]))return u[0];if(u=t(),Vr){qt(!0);try{t()}finally{qt(!1)}}return l.memoizedState=[u,a],u}function If(t,a,l){return l===void 0||(Wa&1073741824)!==0?t.memoizedState=a:(t.memoizedState=l,t=ap(),De.lanes|=t,lr|=t,l)}function t0(t,a,l,u){return ln(l,a)?l:Mi.current!==null?(t=If(t,l,u),ln(t,a)||(St=!0),t):(Wa&42)===0?(St=!0,t.memoizedState=l):(t=ap(),De.lanes|=t,lr|=t,a)}function n0(t,a,l,u,f){var h=Y.p;Y.p=h!==0&&8>h?h:8;var _=M.T,S={};M.T=S,Jf(t,!1,a,l);try{var H=f(),G=M.S;if(G!==null&&G(S,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ne=fS(H,u);Pl(t,a,ne,fn(t))}else Pl(t,a,u,fn(t))}catch(le){Pl(t,a,{then:function(){},status:"rejected",reason:le},fn())}finally{Y.p=h,M.T=_}}function yS(){}function Ff(t,a,l,u){if(t.tag!==5)throw Error(i(476));var f=a0(t).queue;n0(t,f,a,W,l===null?yS:function(){return r0(t),l(u)})}function a0(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:W},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:l},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function r0(t){var a=a0(t).next.queue;Pl(t,a,{},fn())}function Kf(){return Lt(ys)}function i0(){return ht().memoizedState}function l0(){return ht().memoizedState}function pS(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var l=fn();t=Ja(l);var u=Pa(a,t,l);u!==null&&(dn(u,a,l),Ql(u,a,l)),a={cache:Tf()},t.payload=a;return}a=a.return}}function vS(t,a,l){var u=fn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Iu(t)?u0(a,l):(l=yf(t,a,l,u),l!==null&&(dn(l,t,u),c0(l,a,u)))}function s0(t,a,l){var u=fn();Pl(t,a,l,u)}function Pl(t,a,l,u){var f={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Iu(t))u0(a,f);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=a.lastRenderedReducer,h!==null))try{var _=a.lastRenderedState,S=h(_,l);if(f.hasEagerState=!0,f.eagerState=S,ln(S,_))return Nu(t,a,f,0),Je===null&&Du(),!1}catch{}finally{}if(l=yf(t,a,f,u),l!==null)return dn(l,t,u),c0(l,a,u),!0}return!1}function Jf(t,a,l,u){if(u={lane:2,revertLane:Rd(),action:u,hasEagerState:!1,eagerState:null,next:null},Iu(t)){if(a)throw Error(i(479))}else a=yf(t,l,u,2),a!==null&&dn(a,t,2)}function Iu(t){var a=t.alternate;return t===De||a!==null&&a===De}function u0(t,a){Ri=qu=!0;var l=t.pending;l===null?a.next=a:(a.next=l.next,l.next=a),t.pending=a}function c0(t,a,l){if((l&4194048)!==0){var u=a.lanes;u&=t.pendingLanes,l|=u,a.lanes=l,du(t,l)}}var Fu={readContext:Lt,use:Vu,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut},o0={readContext:Lt,use:Vu,useCallback:function(t,a){return It().memoizedState=[t,a===void 0?null:a],t},useContext:Lt,useEffect:Zy,useImperativeHandle:function(t,a,l){l=l!=null?l.concat([t]):null,Zu(4194308,4,Jy.bind(null,a,t),l)},useLayoutEffect:function(t,a){return Zu(4194308,4,t,a)},useInsertionEffect:function(t,a){Zu(4,2,t,a)},useMemo:function(t,a){var l=It();a=a===void 0?null:a;var u=t();if(Vr){qt(!0);try{t()}finally{qt(!1)}}return l.memoizedState=[u,a],u},useReducer:function(t,a,l){var u=It();if(l!==void 0){var f=l(a);if(Vr){qt(!0);try{l(a)}finally{qt(!1)}}}else f=a;return u.memoizedState=u.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},u.queue=t,t=t.dispatch=vS.bind(null,De,t),[u.memoizedState,t]},useRef:function(t){var a=It();return t={current:t},a.memoizedState=t},useState:function(t){t=Gf(t);var a=t.queue,l=s0.bind(null,De,a);return a.dispatch=l,[t.memoizedState,l]},useDebugValue:Zf,useDeferredValue:function(t,a){var l=It();return If(l,t,a)},useTransition:function(){var t=Gf(!1);return t=n0.bind(null,De,t.queue,!0,!1),It().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,l){var u=De,f=It();if($e){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),Je===null)throw Error(i(349));(Be&124)!==0||Ny(u,a,l)}f.memoizedState=l;var h={value:l,getSnapshot:a};return f.queue=h,Zy(Uy.bind(null,u,h,t),[t]),u.flags|=2048,Ni(9,Qu(),Oy.bind(null,u,h,l,a),null),l},useId:function(){var t=It(),a=Je.identifierPrefix;if($e){var l=va,u=pa;l=(u&~(1<<32-ot(u)-1)).toString(32)+l,a=""+a+"R"+l,l=Xu++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=dS++,a=""+a+"r"+l.toString(32)+"";return t.memoizedState=a},useHostTransitionStatus:Kf,useFormState:qy,useActionState:qy,useOptimistic:function(t){var a=It();a.memoizedState=a.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Jf.bind(null,De,!0,l),l.dispatch=a,[t,a]},useMemoCache:qf,useCacheRefresh:function(){return It().memoizedState=pS.bind(null,De)}},f0={readContext:Lt,use:Vu,useCallback:Wy,useContext:Lt,useEffect:Iy,useImperativeHandle:Py,useInsertionEffect:Fy,useLayoutEffect:Ky,useMemo:e0,useReducer:Gu,useRef:Qy,useState:function(){return Gu(wa)},useDebugValue:Zf,useDeferredValue:function(t,a){var l=ht();return t0(l,Ge.memoizedState,t,a)},useTransition:function(){var t=Gu(wa)[0],a=ht().memoizedState;return[typeof t=="boolean"?t:Kl(t),a]},useSyncExternalStore:Dy,useId:i0,useHostTransitionStatus:Kf,useFormState:Xy,useActionState:Xy,useOptimistic:function(t,a){var l=ht();return Hy(l,Ge,t,a)},useMemoCache:qf,useCacheRefresh:l0},_S={readContext:Lt,use:Vu,useCallback:Wy,useContext:Lt,useEffect:Iy,useImperativeHandle:Py,useInsertionEffect:Fy,useLayoutEffect:Ky,useMemo:e0,useReducer:Vf,useRef:Qy,useState:function(){return Vf(wa)},useDebugValue:Zf,useDeferredValue:function(t,a){var l=ht();return Ge===null?If(l,t,a):t0(l,Ge.memoizedState,t,a)},useTransition:function(){var t=Vf(wa)[0],a=ht().memoizedState;return[typeof t=="boolean"?t:Kl(t),a]},useSyncExternalStore:Dy,useId:i0,useHostTransitionStatus:Kf,useFormState:Gy,useActionState:Gy,useOptimistic:function(t,a){var l=ht();return Ge!==null?Hy(l,Ge,t,a):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:qf,useCacheRefresh:l0},Oi=null,Wl=0;function Ku(t){var a=Wl;return Wl+=1,Oi===null&&(Oi=[]),by(Oi,t,a)}function es(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Ju(t,a){throw a.$$typeof===p?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function d0(t){var a=t._init;return a(t._payload)}function h0(t){function a(q,L){if(t){var V=q.deletions;V===null?(q.deletions=[L],q.flags|=16):V.push(L)}}function l(q,L){if(!t)return null;for(;L!==null;)a(q,L),L=L.sibling;return null}function u(q){for(var L=new Map;q!==null;)q.key!==null?L.set(q.key,q):L.set(q.index,q),q=q.sibling;return L}function f(q,L){return q=ya(q,L),q.index=0,q.sibling=null,q}function h(q,L,V){return q.index=V,t?(V=q.alternate,V!==null?(V=V.index,V<L?(q.flags|=67108866,L):V):(q.flags|=67108866,L)):(q.flags|=1048576,L)}function _(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function S(q,L,V,ie){return L===null||L.tag!==6?(L=vf(V,q.mode,ie),L.return=q,L):(L=f(L,V),L.return=q,L)}function H(q,L,V,ie){var he=V.type;return he===A?ne(q,L,V.props.children,ie,V.key):L!==null&&(L.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===J&&d0(he)===L.type)?(L=f(L,V.props),es(L,V),L.return=q,L):(L=Uu(V.type,V.key,V.props,null,q.mode,ie),es(L,V),L.return=q,L)}function G(q,L,V,ie){return L===null||L.tag!==4||L.stateNode.containerInfo!==V.containerInfo||L.stateNode.implementation!==V.implementation?(L=_f(V,q.mode,ie),L.return=q,L):(L=f(L,V.children||[]),L.return=q,L)}function ne(q,L,V,ie,he){return L===null||L.tag!==7?(L=Hr(V,q.mode,ie,he),L.return=q,L):(L=f(L,V),L.return=q,L)}function le(q,L,V){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=vf(""+L,q.mode,V),L.return=q,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case v:return V=Uu(L.type,L.key,L.props,null,q.mode,V),es(V,L),V.return=q,V;case x:return L=_f(L,q.mode,V),L.return=q,L;case J:var ie=L._init;return L=ie(L._payload),le(q,L,V)}if(I(L)||se(L))return L=Hr(L,q.mode,V,null),L.return=q,L;if(typeof L.then=="function")return le(q,Ku(L),V);if(L.$$typeof===z)return le(q,Bu(q,L),V);Ju(q,L)}return null}function F(q,L,V,ie){var he=L!==null?L.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return he!==null?null:S(q,L,""+V,ie);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return V.key===he?H(q,L,V,ie):null;case x:return V.key===he?G(q,L,V,ie):null;case J:return he=V._init,V=he(V._payload),F(q,L,V,ie)}if(I(V)||se(V))return he!==null?null:ne(q,L,V,ie,null);if(typeof V.then=="function")return F(q,L,Ku(V),ie);if(V.$$typeof===z)return F(q,L,Bu(q,V),ie);Ju(q,V)}return null}function K(q,L,V,ie,he){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return q=q.get(V)||null,S(L,q,""+ie,he);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case v:return q=q.get(ie.key===null?V:ie.key)||null,H(L,q,ie,he);case x:return q=q.get(ie.key===null?V:ie.key)||null,G(L,q,ie,he);case J:var Ne=ie._init;return ie=Ne(ie._payload),K(q,L,V,ie,he)}if(I(ie)||se(ie))return q=q.get(V)||null,ne(L,q,ie,he,null);if(typeof ie.then=="function")return K(q,L,V,Ku(ie),he);if(ie.$$typeof===z)return K(q,L,V,Bu(L,ie),he);Ju(L,ie)}return null}function Se(q,L,V,ie){for(var he=null,Ne=null,ge=L,xe=L=0,At=null;ge!==null&&xe<V.length;xe++){ge.index>xe?(At=ge,ge=null):At=ge.sibling;var Le=F(q,ge,V[xe],ie);if(Le===null){ge===null&&(ge=At);break}t&&ge&&Le.alternate===null&&a(q,ge),L=h(Le,L,xe),Ne===null?he=Le:Ne.sibling=Le,Ne=Le,ge=At}if(xe===V.length)return l(q,ge),$e&&Lr(q,xe),he;if(ge===null){for(;xe<V.length;xe++)ge=le(q,V[xe],ie),ge!==null&&(L=h(ge,L,xe),Ne===null?he=ge:Ne.sibling=ge,Ne=ge);return $e&&Lr(q,xe),he}for(ge=u(ge);xe<V.length;xe++)At=K(ge,q,xe,V[xe],ie),At!==null&&(t&&At.alternate!==null&&ge.delete(At.key===null?xe:At.key),L=h(At,L,xe),Ne===null?he=At:Ne.sibling=At,Ne=At);return t&&ge.forEach(function(gr){return a(q,gr)}),$e&&Lr(q,xe),he}function _e(q,L,V,ie){if(V==null)throw Error(i(151));for(var he=null,Ne=null,ge=L,xe=L=0,At=null,Le=V.next();ge!==null&&!Le.done;xe++,Le=V.next()){ge.index>xe?(At=ge,ge=null):At=ge.sibling;var gr=F(q,ge,Le.value,ie);if(gr===null){ge===null&&(ge=At);break}t&&ge&&gr.alternate===null&&a(q,ge),L=h(gr,L,xe),Ne===null?he=gr:Ne.sibling=gr,Ne=gr,ge=At}if(Le.done)return l(q,ge),$e&&Lr(q,xe),he;if(ge===null){for(;!Le.done;xe++,Le=V.next())Le=le(q,Le.value,ie),Le!==null&&(L=h(Le,L,xe),Ne===null?he=Le:Ne.sibling=Le,Ne=Le);return $e&&Lr(q,xe),he}for(ge=u(ge);!Le.done;xe++,Le=V.next())Le=K(ge,q,xe,Le.value,ie),Le!==null&&(t&&Le.alternate!==null&&ge.delete(Le.key===null?xe:Le.key),L=h(Le,L,xe),Ne===null?he=Le:Ne.sibling=Le,Ne=Le);return t&&ge.forEach(function(xE){return a(q,xE)}),$e&&Lr(q,xe),he}function Ze(q,L,V,ie){if(typeof V=="object"&&V!==null&&V.type===A&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case v:e:{for(var he=V.key;L!==null;){if(L.key===he){if(he=V.type,he===A){if(L.tag===7){l(q,L.sibling),ie=f(L,V.props.children),ie.return=q,q=ie;break e}}else if(L.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===J&&d0(he)===L.type){l(q,L.sibling),ie=f(L,V.props),es(ie,V),ie.return=q,q=ie;break e}l(q,L);break}else a(q,L);L=L.sibling}V.type===A?(ie=Hr(V.props.children,q.mode,ie,V.key),ie.return=q,q=ie):(ie=Uu(V.type,V.key,V.props,null,q.mode,ie),es(ie,V),ie.return=q,q=ie)}return _(q);case x:e:{for(he=V.key;L!==null;){if(L.key===he)if(L.tag===4&&L.stateNode.containerInfo===V.containerInfo&&L.stateNode.implementation===V.implementation){l(q,L.sibling),ie=f(L,V.children||[]),ie.return=q,q=ie;break e}else{l(q,L);break}else a(q,L);L=L.sibling}ie=_f(V,q.mode,ie),ie.return=q,q=ie}return _(q);case J:return he=V._init,V=he(V._payload),Ze(q,L,V,ie)}if(I(V))return Se(q,L,V,ie);if(se(V)){if(he=se(V),typeof he!="function")throw Error(i(150));return V=he.call(V),_e(q,L,V,ie)}if(typeof V.then=="function")return Ze(q,L,Ku(V),ie);if(V.$$typeof===z)return Ze(q,L,Bu(q,V),ie);Ju(q,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,L!==null&&L.tag===6?(l(q,L.sibling),ie=f(L,V),ie.return=q,q=ie):(l(q,L),ie=vf(V,q.mode,ie),ie.return=q,q=ie),_(q)):l(q,L)}return function(q,L,V,ie){try{Wl=0;var he=Ze(q,L,V,ie);return Oi=null,he}catch(ge){if(ge===Vl||ge===ku)throw ge;var Ne=sn(29,ge,null,q.mode);return Ne.lanes=ie,Ne.return=q,Ne}finally{}}}var Ui=h0(!0),m0=h0(!1),Tn=k(null),Kn=null;function er(t){var a=t.alternate;ee(gt,gt.current&1),ee(Tn,t),Kn===null&&(a===null||Mi.current!==null||a.memoizedState!==null)&&(Kn=t)}function g0(t){if(t.tag===22){if(ee(gt,gt.current),ee(Tn,t),Kn===null){var a=t.alternate;a!==null&&a.memoizedState!==null&&(Kn=t)}}else tr()}function tr(){ee(gt,gt.current),ee(Tn,Tn.current)}function ba(t){Q(Tn),Kn===t&&(Kn=null),Q(gt)}var gt=k(0);function Pu(t){for(var a=t;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Yd(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Pf(t,a,l,u){a=t.memoizedState,l=l(u,a),l=l==null?a:y({},a,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var Wf={enqueueSetState:function(t,a,l){t=t._reactInternals;var u=fn(),f=Ja(u);f.payload=a,l!=null&&(f.callback=l),a=Pa(t,f,u),a!==null&&(dn(a,t,u),Ql(a,t,u))},enqueueReplaceState:function(t,a,l){t=t._reactInternals;var u=fn(),f=Ja(u);f.tag=1,f.payload=a,l!=null&&(f.callback=l),a=Pa(t,f,u),a!==null&&(dn(a,t,u),Ql(a,t,u))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var l=fn(),u=Ja(l);u.tag=2,a!=null&&(u.callback=a),a=Pa(t,u,l),a!==null&&(dn(a,t,l),Ql(a,t,l))}};function y0(t,a,l,u,f,h,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,h,_):a.prototype&&a.prototype.isPureReactComponent?!Hl(l,u)||!Hl(f,h):!0}function p0(t,a,l,u){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==t&&Wf.enqueueReplaceState(a,a.state,null)}function Gr(t,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(t=t.defaultProps){l===a&&(l=y({},l));for(var f in t)l[f]===void 0&&(l[f]=t[f])}return l}var Wu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function v0(t){Wu(t)}function _0(t){console.error(t)}function x0(t){Wu(t)}function ec(t,a){try{var l=t.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function w0(t,a,l){try{var u=t.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ed(t,a,l){return l=Ja(l),l.tag=3,l.payload={element:null},l.callback=function(){ec(t,a)},l}function b0(t){return t=Ja(t),t.tag=3,t}function S0(t,a,l,u){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var h=u.value;t.payload=function(){return f(h)},t.callback=function(){w0(a,l,u)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){w0(a,l,u),typeof f!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function xS(t,a,l,u,f){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&Yl(a,l,f,!0),l=Tn.current,l!==null){switch(l.tag){case 13:return Kn===null?Ed():l.alternate===null&&it===0&&(it=3),l.flags&=-257,l.flags|=65536,l.lanes=f,u===Rf?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),Td(t,u,f)),!1;case 22:return l.flags|=65536,u===Rf?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),Td(t,u,f)),!1}throw Error(i(435,l.tag))}return Td(t,u,f),Ed(),!1}if($e)return a=Tn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,u!==bf&&(t=Error(i(422),{cause:u}),$l(bn(t,l)))):(u!==bf&&(a=Error(i(423),{cause:u}),$l(bn(a,l))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,u=bn(u,l),f=ed(t.stateNode,u,f),Of(t,f),it!==4&&(it=2)),!1;var h=Error(i(520),{cause:u});if(h=bn(h,l),ss===null?ss=[h]:ss.push(h),it!==4&&(it=2),a===null)return!0;u=bn(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,t=f&-f,l.lanes|=t,t=ed(l.stateNode,u,t),Of(l,t),!1;case 1:if(a=l.type,h=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(sr===null||!sr.has(h))))return l.flags|=65536,f&=-f,l.lanes|=f,f=b0(f),S0(f,t,l,u),Of(l,f),!1}l=l.return}while(l!==null);return!1}var E0=Error(i(461)),St=!1;function Rt(t,a,l,u){a.child=t===null?m0(a,null,l,u):Ui(a,t.child,l,u)}function A0(t,a,l,u,f){l=l.render;var h=a.ref;if("ref"in u){var _={};for(var S in u)S!=="ref"&&(_[S]=u[S])}else _=u;return qr(a),u=Bf(t,a,l,_,h,f),S=Lf(),t!==null&&!St?(kf(t,a,f),Sa(t,a,f)):($e&&S&&xf(a),a.flags|=1,Rt(t,a,u,f),a.child)}function T0(t,a,l,u,f){if(t===null){var h=l.type;return typeof h=="function"&&!pf(h)&&h.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=h,C0(t,a,h,u,f)):(t=Uu(l.type,null,u,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(h=t.child,!ud(t,f)){var _=h.memoizedProps;if(l=l.compare,l=l!==null?l:Hl,l(_,u)&&t.ref===a.ref)return Sa(t,a,f)}return a.flags|=1,t=ya(h,u),t.ref=a.ref,t.return=a,a.child=t}function C0(t,a,l,u,f){if(t!==null){var h=t.memoizedProps;if(Hl(h,u)&&t.ref===a.ref)if(St=!1,a.pendingProps=u=h,ud(t,f))(t.flags&131072)!==0&&(St=!0);else return a.lanes=t.lanes,Sa(t,a,f)}return td(t,a,l,u,f)}function M0(t,a,l){var u=a.pendingProps,f=u.children,h=t!==null?t.memoizedState:null;if(u.mode==="hidden"){if((a.flags&128)!==0){if(u=h!==null?h.baseLanes|l:l,t!==null){for(f=a.child=t.child,h=0;f!==null;)h=h|f.lanes|f.childLanes,f=f.sibling;a.childLanes=h&~u}else a.childLanes=0,a.child=null;return R0(t,a,u,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Lu(a,h!==null?h.cachePool:null),h!==null?Cy(a,h):zf(),g0(a);else return a.lanes=a.childLanes=536870912,R0(t,a,h!==null?h.baseLanes|l:l,l)}else h!==null?(Lu(a,h.cachePool),Cy(a,h),tr(),a.memoizedState=null):(t!==null&&Lu(a,null),zf(),tr());return Rt(t,a,f,l),a.child}function R0(t,a,l,u){var f=Mf();return f=f===null?null:{parent:mt._currentValue,pool:f},a.memoizedState={baseLanes:l,cachePool:f},t!==null&&Lu(a,null),zf(),g0(a),t!==null&&Yl(t,a,u,!0),null}function tc(t,a){var l=a.ref;if(l===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(t===null||t.ref!==l)&&(a.flags|=4194816)}}function td(t,a,l,u,f){return qr(a),l=Bf(t,a,l,u,void 0,f),u=Lf(),t!==null&&!St?(kf(t,a,f),Sa(t,a,f)):($e&&u&&xf(a),a.flags|=1,Rt(t,a,l,f),a.child)}function D0(t,a,l,u,f,h){return qr(a),a.updateQueue=null,l=Ry(a,u,l,f),My(t),u=Lf(),t!==null&&!St?(kf(t,a,h),Sa(t,a,h)):($e&&u&&xf(a),a.flags|=1,Rt(t,a,l,h),a.child)}function N0(t,a,l,u,f){if(qr(a),a.stateNode===null){var h=Si,_=l.contextType;typeof _=="object"&&_!==null&&(h=Lt(_)),h=new l(u,h),a.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Wf,a.stateNode=h,h._reactInternals=a,h=a.stateNode,h.props=u,h.state=a.memoizedState,h.refs={},Df(a),_=l.contextType,h.context=typeof _=="object"&&_!==null?Lt(_):Si,h.state=a.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(Pf(a,l,_,u),h.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(_=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),_!==h.state&&Wf.enqueueReplaceState(h,h.state,null),Il(a,u,h,f),Zl(),h.state=a.memoizedState),typeof h.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(t===null){h=a.stateNode;var S=a.memoizedProps,H=Gr(l,S);h.props=H;var G=h.context,ne=l.contextType;_=Si,typeof ne=="object"&&ne!==null&&(_=Lt(ne));var le=l.getDerivedStateFromProps;ne=typeof le=="function"||typeof h.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,ne||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(S||G!==_)&&p0(a,h,u,_),Ka=!1;var F=a.memoizedState;h.state=F,Il(a,u,h,f),Zl(),G=a.memoizedState,S||F!==G||Ka?(typeof le=="function"&&(Pf(a,l,le,u),G=a.memoizedState),(H=Ka||y0(a,l,H,u,F,G,_))?(ne||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(a.flags|=4194308)):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=G),h.props=u,h.state=G,h.context=_,u=H):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{h=a.stateNode,Nf(t,a),_=a.memoizedProps,ne=Gr(l,_),h.props=ne,le=a.pendingProps,F=h.context,G=l.contextType,H=Si,typeof G=="object"&&G!==null&&(H=Lt(G)),S=l.getDerivedStateFromProps,(G=typeof S=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_!==le||F!==H)&&p0(a,h,u,H),Ka=!1,F=a.memoizedState,h.state=F,Il(a,u,h,f),Zl();var K=a.memoizedState;_!==le||F!==K||Ka||t!==null&&t.dependencies!==null&&Hu(t.dependencies)?(typeof S=="function"&&(Pf(a,l,S,u),K=a.memoizedState),(ne=Ka||y0(a,l,ne,u,F,K,H)||t!==null&&t.dependencies!==null&&Hu(t.dependencies))?(G||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(u,K,H),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(u,K,H)),typeof h.componentDidUpdate=="function"&&(a.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof h.componentDidUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=K),h.props=u,h.state=K,h.context=H,u=ne):(typeof h.componentDidUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(a.flags|=1024),u=!1)}return h=u,tc(t,a),u=(a.flags&128)!==0,h||u?(h=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:h.render(),a.flags|=1,t!==null&&u?(a.child=Ui(a,t.child,null,f),a.child=Ui(a,null,l,f)):Rt(t,a,l,f),a.memoizedState=h.state,t=a.child):t=Sa(t,a,f),t}function O0(t,a,l,u){return kl(),a.flags|=256,Rt(t,a,l,u),a.child}var nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ad(t){return{baseLanes:t,cachePool:_y()}}function rd(t,a,l){return t=t!==null?t.childLanes&~l:0,a&&(t|=Cn),t}function U0(t,a,l){var u=a.pendingProps,f=!1,h=(a.flags&128)!==0,_;if((_=h)||(_=t!==null&&t.memoizedState===null?!1:(gt.current&2)!==0),_&&(f=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,t===null){if($e){if(f?er(a):tr(),$e){var S=rt,H;if(H=S){e:{for(H=S,S=Fn;H.nodeType!==8;){if(!S){S=null;break e}if(H=Ln(H.nextSibling),H===null){S=null;break e}}S=H}S!==null?(a.memoizedState={dehydrated:S,treeContext:Br!==null?{id:pa,overflow:va}:null,retryLane:536870912,hydrationErrors:null},H=sn(18,null,null,0),H.stateNode=S,H.return=a,a.child=H,Vt=a,rt=null,H=!0):H=!1}H||$r(a)}if(S=a.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Yd(S)?a.lanes=32:a.lanes=536870912,null;ba(a)}return S=u.children,u=u.fallback,f?(tr(),f=a.mode,S=nc({mode:"hidden",children:S},f),u=Hr(u,f,l,null),S.return=a,u.return=a,S.sibling=u,a.child=S,f=a.child,f.memoizedState=ad(l),f.childLanes=rd(t,_,l),a.memoizedState=nd,u):(er(a),id(a,S))}if(H=t.memoizedState,H!==null&&(S=H.dehydrated,S!==null)){if(h)a.flags&256?(er(a),a.flags&=-257,a=ld(t,a,l)):a.memoizedState!==null?(tr(),a.child=t.child,a.flags|=128,a=null):(tr(),f=u.fallback,S=a.mode,u=nc({mode:"visible",children:u.children},S),f=Hr(f,S,l,null),f.flags|=2,u.return=a,f.return=a,u.sibling=f,a.child=u,Ui(a,t.child,null,l),u=a.child,u.memoizedState=ad(l),u.childLanes=rd(t,_,l),a.memoizedState=nd,a=f);else if(er(a),Yd(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var G=_.dgst;_=G,u=Error(i(419)),u.stack="",u.digest=_,$l({value:u,source:null,stack:null}),a=ld(t,a,l)}else if(St||Yl(t,a,l,!1),_=(l&t.childLanes)!==0,St||_){if(_=Je,_!==null&&(u=l&-l,u=(u&42)!==0?1:El(u),u=(u&(_.suspendedLanes|l))!==0?0:u,u!==0&&u!==H.retryLane))throw H.retryLane=u,bi(t,u),dn(_,t,u),E0;S.data==="$?"||Ed(),a=ld(t,a,l)}else S.data==="$?"?(a.flags|=192,a.child=t.child,a=null):(t=H.treeContext,rt=Ln(S.nextSibling),Vt=a,$e=!0,kr=null,Fn=!1,t!==null&&(En[An++]=pa,En[An++]=va,En[An++]=Br,pa=t.id,va=t.overflow,Br=a),a=id(a,u.children),a.flags|=4096);return a}return f?(tr(),f=u.fallback,S=a.mode,H=t.child,G=H.sibling,u=ya(H,{mode:"hidden",children:u.children}),u.subtreeFlags=H.subtreeFlags&65011712,G!==null?f=ya(G,f):(f=Hr(f,S,l,null),f.flags|=2),f.return=a,u.return=a,u.sibling=f,a.child=u,u=f,f=a.child,S=t.child.memoizedState,S===null?S=ad(l):(H=S.cachePool,H!==null?(G=mt._currentValue,H=H.parent!==G?{parent:G,pool:G}:H):H=_y(),S={baseLanes:S.baseLanes|l,cachePool:H}),f.memoizedState=S,f.childLanes=rd(t,_,l),a.memoizedState=nd,u):(er(a),l=t.child,t=l.sibling,l=ya(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,t!==null&&(_=a.deletions,_===null?(a.deletions=[t],a.flags|=16):_.push(t)),a.child=l,a.memoizedState=null,l)}function id(t,a){return a=nc({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function nc(t,a){return t=sn(22,t,null,a),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function ld(t,a,l){return Ui(a,t.child,null,l),t=id(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function z0(t,a,l){t.lanes|=a;var u=t.alternate;u!==null&&(u.lanes|=a),Ef(t.return,a,l)}function sd(t,a,l,u,f){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:f}:(h.isBackwards=a,h.rendering=null,h.renderingStartTime=0,h.last=u,h.tail=l,h.tailMode=f)}function j0(t,a,l){var u=a.pendingProps,f=u.revealOrder,h=u.tail;if(Rt(t,a,u.children,l),u=gt.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&z0(t,l,a);else if(t.tag===19)z0(t,l,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}switch(ee(gt,u),f){case"forwards":for(l=a.child,f=null;l!==null;)t=l.alternate,t!==null&&Pu(t)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),sd(a,!1,f,l,h);break;case"backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Pu(t)===null){a.child=f;break}t=f.sibling,f.sibling=l,l=f,f=t}sd(a,!0,l,null,h);break;case"together":sd(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Sa(t,a,l){if(t!==null&&(a.dependencies=t.dependencies),lr|=a.lanes,(l&a.childLanes)===0)if(t!==null){if(Yl(t,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,l=ya(t,t.pendingProps),a.child=l,l.return=a;t.sibling!==null;)t=t.sibling,l=l.sibling=ya(t,t.pendingProps),l.return=a;l.sibling=null}return a.child}function ud(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Hu(t)))}function wS(t,a,l){switch(a.tag){case 3:ve(a,a.stateNode.containerInfo),Fa(a,mt,t.memoizedState.cache),kl();break;case 27:case 5:de(a);break;case 4:ve(a,a.stateNode.containerInfo);break;case 10:Fa(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(er(a),a.flags|=128,null):(l&a.child.childLanes)!==0?U0(t,a,l):(er(a),t=Sa(t,a,l),t!==null?t.sibling:null);er(a);break;case 19:var f=(t.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(Yl(t,a,l,!1),u=(l&a.childLanes)!==0),f){if(u)return j0(t,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ee(gt,gt.current),u)break;return null;case 22:case 23:return a.lanes=0,M0(t,a,l);case 24:Fa(a,mt,t.memoizedState.cache)}return Sa(t,a,l)}function H0(t,a,l){if(t!==null)if(t.memoizedProps!==a.pendingProps)St=!0;else{if(!ud(t,l)&&(a.flags&128)===0)return St=!1,wS(t,a,l);St=(t.flags&131072)!==0}else St=!1,$e&&(a.flags&1048576)!==0&&dy(a,ju,a.index);switch(a.lanes=0,a.tag){case 16:e:{t=a.pendingProps;var u=a.elementType,f=u._init;if(u=f(u._payload),a.type=u,typeof u=="function")pf(u)?(t=Gr(u,t),a.tag=1,a=N0(null,a,u,t,l)):(a.tag=0,a=td(null,a,u,t,l));else{if(u!=null){if(f=u.$$typeof,f===C){a.tag=11,a=A0(null,a,u,t,l);break e}else if(f===B){a.tag=14,a=T0(null,a,u,t,l);break e}}throw a=N(u)||u,Error(i(306,a,""))}}return a;case 0:return td(t,a,a.type,a.pendingProps,l);case 1:return u=a.type,f=Gr(u,a.pendingProps),N0(t,a,u,f,l);case 3:e:{if(ve(a,a.stateNode.containerInfo),t===null)throw Error(i(387));u=a.pendingProps;var h=a.memoizedState;f=h.element,Nf(t,a),Il(a,u,null,l);var _=a.memoizedState;if(u=_.cache,Fa(a,mt,u),u!==h.cache&&Af(a,[mt],l,!0),Zl(),u=_.element,h.isDehydrated)if(h={element:u,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=h,a.memoizedState=h,a.flags&256){a=O0(t,a,u,l);break e}else if(u!==f){f=bn(Error(i(424)),a),$l(f),a=O0(t,a,u,l);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(rt=Ln(t.firstChild),Vt=a,$e=!0,kr=null,Fn=!0,l=m0(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(kl(),u===f){a=Sa(t,a,l);break e}Rt(t,a,u,l)}a=a.child}return a;case 26:return tc(t,a),t===null?(l=$p(a.type,null,a.pendingProps,null))?a.memoizedState=l:$e||(l=a.type,t=a.pendingProps,u=yc(fe.current).createElement(l),u[bt]=a,u[Bt]=t,Nt(u,l,t),ft(u),a.stateNode=u):a.memoizedState=$p(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return de(a),t===null&&$e&&(u=a.stateNode=Bp(a.type,a.pendingProps,fe.current),Vt=a,Fn=!0,f=rt,or(a.type)?(qd=f,rt=Ln(u.firstChild)):rt=f),Rt(t,a,a.pendingProps.children,l),tc(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&$e&&((f=u=rt)&&(u=FS(u,a.type,a.pendingProps,Fn),u!==null?(a.stateNode=u,Vt=a,rt=Ln(u.firstChild),Fn=!1,f=!0):f=!1),f||$r(a)),de(a),f=a.type,h=a.pendingProps,_=t!==null?t.memoizedProps:null,u=h.children,Ld(f,h)?u=null:_!==null&&Ld(f,_)&&(a.flags|=32),a.memoizedState!==null&&(f=Bf(t,a,hS,null,null,l),ys._currentValue=f),tc(t,a),Rt(t,a,u,l),a.child;case 6:return t===null&&$e&&((t=l=rt)&&(l=KS(l,a.pendingProps,Fn),l!==null?(a.stateNode=l,Vt=a,rt=null,t=!0):t=!1),t||$r(a)),null;case 13:return U0(t,a,l);case 4:return ve(a,a.stateNode.containerInfo),u=a.pendingProps,t===null?a.child=Ui(a,null,u,l):Rt(t,a,u,l),a.child;case 11:return A0(t,a,a.type,a.pendingProps,l);case 7:return Rt(t,a,a.pendingProps,l),a.child;case 8:return Rt(t,a,a.pendingProps.children,l),a.child;case 12:return Rt(t,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Fa(a,a.type,u.value),Rt(t,a,u.children,l),a.child;case 9:return f=a.type._context,u=a.pendingProps.children,qr(a),f=Lt(f),u=u(f),a.flags|=1,Rt(t,a,u,l),a.child;case 14:return T0(t,a,a.type,a.pendingProps,l);case 15:return C0(t,a,a.type,a.pendingProps,l);case 19:return j0(t,a,l);case 31:return u=a.pendingProps,l=a.mode,u={mode:u.mode,children:u.children},t===null?(l=nc(u,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=ya(t.child,u),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return M0(t,a,l);case 24:return qr(a),u=Lt(mt),t===null?(f=Mf(),f===null&&(f=Je,h=Tf(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=l),f=h),a.memoizedState={parent:u,cache:f},Df(a),Fa(a,mt,f)):((t.lanes&l)!==0&&(Nf(t,a),Il(a,null,null,l),Zl()),f=t.memoizedState,h=a.memoizedState,f.parent!==u?(f={parent:u,cache:u},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Fa(a,mt,u)):(u=h.cache,Fa(a,mt,u),u!==f.cache&&Af(a,[mt],l,!0))),Rt(t,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ea(t){t.flags|=4}function B0(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Gp(a)){if(a=Tn.current,a!==null&&((Be&4194048)===Be?Kn!==null:(Be&62914560)!==Be&&(Be&536870912)===0||a!==Kn))throw Gl=Rf,xy;t.flags|=8192}}function ac(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Ya():536870912,t.lanes|=a,Bi|=a)}function ts(t,a){if(!$e)switch(t.tailMode){case"hidden":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function et(t){var a=t.alternate!==null&&t.alternate.child===t.child,l=0,u=0;if(a)for(var f=t.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=u,t.childLanes=l,a}function bS(t,a,l){var u=a.pendingProps;switch(wf(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(a),null;case 1:return et(a),null;case 3:return l=a.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),xa(mt),ce(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(Ll(a)?Ea(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,gy())),et(a),null;case 26:return l=a.memoizedState,t===null?(Ea(a),l!==null?(et(a),B0(a,l)):(et(a),a.flags&=-16777217)):l?l!==t.memoizedState?(Ea(a),et(a),B0(a,l)):(et(a),a.flags&=-16777217):(t.memoizedProps!==u&&Ea(a),et(a),a.flags&=-16777217),null;case 27:we(a),l=fe.current;var f=a.type;if(t!==null&&a.stateNode!=null)t.memoizedProps!==u&&Ea(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return et(a),null}t=re.current,Ll(a)?hy(a):(t=Bp(f,u,l),a.stateNode=t,Ea(a))}return et(a),null;case 5:if(we(a),l=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==u&&Ea(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return et(a),null}if(t=re.current,Ll(a))hy(a);else{switch(f=yc(fe.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?t.multiple=!0:u.size&&(t.size=u.size);break;default:t=typeof u.is=="string"?f.createElement(l,{is:u.is}):f.createElement(l)}}t[bt]=a,t[Bt]=u;e:for(f=a.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break e;for(;f.sibling===null;){if(f.return===null||f.return===a)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}a.stateNode=t;e:switch(Nt(t,l,u),l){case"button":case"input":case"select":case"textarea":t=!!u.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ea(a)}}return et(a),a.flags&=-16777217,null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==u&&Ea(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(t=fe.current,Ll(a)){if(t=a.stateNode,l=a.memoizedProps,u=null,f=Vt,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}t[bt]=a,t=!!(t.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Dp(t.nodeValue,l)),t||$r(a)}else t=yc(t).createTextNode(u),t[bt]=a,a.stateNode=t}return et(a),null;case 13:if(u=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Ll(a),u!==null&&u.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[bt]=a}else kl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;et(a),f=!1}else f=gy(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(ba(a),a):(ba(a),null)}if(ba(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=u!==null,t=t!==null&&t.memoizedState!==null,l){u=a.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var h=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(h=u.memoizedState.cachePool.pool),h!==f&&(u.flags|=2048)}return l!==t&&l&&(a.child.flags|=8192),ac(a,a.updateQueue),et(a),null;case 4:return ce(),t===null&&Ud(a.stateNode.containerInfo),et(a),null;case 10:return xa(a.type),et(a),null;case 19:if(Q(gt),f=a.memoizedState,f===null)return et(a),null;if(u=(a.flags&128)!==0,h=f.rendering,h===null)if(u)ts(f,!1);else{if(it!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(h=Pu(t),h!==null){for(a.flags|=128,ts(f,!1),t=h.updateQueue,a.updateQueue=t,ac(a,t),a.subtreeFlags=0,t=l,l=a.child;l!==null;)fy(l,t),l=l.sibling;return ee(gt,gt.current&1|2),a.child}t=t.sibling}f.tail!==null&&Te()>lc&&(a.flags|=128,u=!0,ts(f,!1),a.lanes=4194304)}else{if(!u)if(t=Pu(h),t!==null){if(a.flags|=128,u=!0,t=t.updateQueue,a.updateQueue=t,ac(a,t),ts(f,!0),f.tail===null&&f.tailMode==="hidden"&&!h.alternate&&!$e)return et(a),null}else 2*Te()-f.renderingStartTime>lc&&l!==536870912&&(a.flags|=128,u=!0,ts(f,!1),a.lanes=4194304);f.isBackwards?(h.sibling=a.child,a.child=h):(t=f.last,t!==null?t.sibling=h:a.child=h,f.last=h)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=Te(),a.sibling=null,t=gt.current,ee(gt,u?t&1|2:t&1),a):(et(a),null);case 22:case 23:return ba(a),jf(),u=a.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(et(a),a.subtreeFlags&6&&(a.flags|=8192)):et(a),l=a.updateQueue,l!==null&&ac(a,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),t!==null&&Q(Xr),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),xa(mt),et(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function SS(t,a){switch(wf(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return xa(mt),ce(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return we(a),null;case 13:if(ba(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));kl()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return Q(gt),null;case 4:return ce(),null;case 10:return xa(a.type),null;case 22:case 23:return ba(a),jf(),t!==null&&Q(Xr),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return xa(mt),null;case 25:return null;default:return null}}function L0(t,a){switch(wf(a),a.tag){case 3:xa(mt),ce();break;case 26:case 27:case 5:we(a);break;case 4:ce();break;case 13:ba(a);break;case 19:Q(gt);break;case 10:xa(a.type);break;case 22:case 23:ba(a),jf(),t!==null&&Q(Xr);break;case 24:xa(mt)}}function ns(t,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&t)===t){u=void 0;var h=l.create,_=l.inst;u=h(),_.destroy=u}l=l.next}while(l!==f)}}catch(S){Fe(a,a.return,S)}}function nr(t,a,l){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var h=f.next;u=h;do{if((u.tag&t)===t){var _=u.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,f=a;var H=l,G=S;try{G()}catch(ne){Fe(f,H,ne)}}}u=u.next}while(u!==h)}}catch(ne){Fe(a,a.return,ne)}}function k0(t){var a=t.updateQueue;if(a!==null){var l=t.stateNode;try{Ty(a,l)}catch(u){Fe(t,t.return,u)}}}function $0(t,a,l){l.props=Gr(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(u){Fe(t,a,u)}}function as(t,a){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof l=="function"?t.refCleanup=l(u):l.current=u}}catch(f){Fe(t,a,f)}}function Jn(t,a){var l=t.ref,u=t.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(f){Fe(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){Fe(t,a,f)}else l.current=null}function Y0(t){var a=t.type,l=t.memoizedProps,u=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(f){Fe(t,t.return,f)}}function cd(t,a,l){try{var u=t.stateNode;VS(u,t.type,l,a),u[Bt]=a}catch(f){Fe(t,t.return,f)}}function q0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&or(t.type)||t.tag===4}function od(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&or(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fd(t,a,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(t),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=gc));else if(u!==4&&(u===27&&or(t.type)&&(l=t.stateNode,a=null),t=t.child,t!==null))for(fd(t,a,l),t=t.sibling;t!==null;)fd(t,a,l),t=t.sibling}function rc(t,a,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?l.insertBefore(t,a):l.appendChild(t);else if(u!==4&&(u===27&&or(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(rc(t,a,l),t=t.sibling;t!==null;)rc(t,a,l),t=t.sibling}function X0(t){var a=t.stateNode,l=t.memoizedProps;try{for(var u=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);Nt(a,u,l),a[bt]=t,a[Bt]=l}catch(h){Fe(t,t.return,h)}}var Aa=!1,ct=!1,dd=!1,V0=typeof WeakSet=="function"?WeakSet:Set,Et=null;function ES(t,a){if(t=t.containerInfo,Hd=bc,t=ty(t),of(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var f=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{l.nodeType,h.nodeType}catch{l=null;break e}var _=0,S=-1,H=-1,G=0,ne=0,le=t,F=null;t:for(;;){for(var K;le!==l||f!==0&&le.nodeType!==3||(S=_+f),le!==h||u!==0&&le.nodeType!==3||(H=_+u),le.nodeType===3&&(_+=le.nodeValue.length),(K=le.firstChild)!==null;)F=le,le=K;for(;;){if(le===t)break t;if(F===l&&++G===f&&(S=_),F===h&&++ne===u&&(H=_),(K=le.nextSibling)!==null)break;le=F,F=le.parentNode}le=K}l=S===-1||H===-1?null:{start:S,end:H}}else l=null}l=l||{start:0,end:0}}else l=null;for(Bd={focusedElem:t,selectionRange:l},bc=!1,Et=a;Et!==null;)if(a=Et,t=a.child,(a.subtreeFlags&1024)!==0&&t!==null)t.return=a,Et=t;else for(;Et!==null;){switch(a=Et,h=a.alternate,t=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,l=a,f=h.memoizedProps,h=h.memoizedState,u=l.stateNode;try{var Se=Gr(l.type,f,l.elementType===l.type);t=u.getSnapshotBeforeUpdate(Se,h),u.__reactInternalSnapshotBeforeUpdate=t}catch(_e){Fe(l,l.return,_e)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,l=t.nodeType,l===9)$d(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":$d(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,Et=t;break}Et=a.return}}function G0(t,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:ar(t,l),u&4&&ns(5,l);break;case 1:if(ar(t,l),u&4)if(t=l.stateNode,a===null)try{t.componentDidMount()}catch(_){Fe(l,l.return,_)}else{var f=Gr(l.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Fe(l,l.return,_)}}u&64&&k0(l),u&512&&as(l,l.return);break;case 3:if(ar(t,l),u&64&&(t=l.updateQueue,t!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Ty(t,a)}catch(_){Fe(l,l.return,_)}}break;case 27:a===null&&u&4&&X0(l);case 26:case 5:ar(t,l),a===null&&u&4&&Y0(l),u&512&&as(l,l.return);break;case 12:ar(t,l);break;case 13:ar(t,l),u&4&&I0(t,l),u&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=US.bind(null,l),JS(t,l))));break;case 22:if(u=l.memoizedState!==null||Aa,!u){a=a!==null&&a.memoizedState!==null||ct,f=Aa;var h=ct;Aa=u,(ct=a)&&!h?rr(t,l,(l.subtreeFlags&8772)!==0):ar(t,l),Aa=f,ct=h}break;case 30:break;default:ar(t,l)}}function Q0(t){var a=t.alternate;a!==null&&(t.alternate=null,Q0(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Cl(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Pe=null,Ft=!1;function Ta(t,a,l){for(l=l.child;l!==null;)Z0(t,a,l),l=l.sibling}function Z0(t,a,l){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(an,l)}catch{}switch(l.tag){case 26:ct||Jn(l,a),Ta(t,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ct||Jn(l,a);var u=Pe,f=Ft;or(l.type)&&(Pe=l.stateNode,Ft=!1),Ta(t,a,l),ds(l.stateNode),Pe=u,Ft=f;break;case 5:ct||Jn(l,a);case 6:if(u=Pe,f=Ft,Pe=null,Ta(t,a,l),Pe=u,Ft=f,Pe!==null)if(Ft)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(l.stateNode)}catch(h){Fe(l,a,h)}else try{Pe.removeChild(l.stateNode)}catch(h){Fe(l,a,h)}break;case 18:Pe!==null&&(Ft?(t=Pe,jp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),xs(t)):jp(Pe,l.stateNode));break;case 4:u=Pe,f=Ft,Pe=l.stateNode.containerInfo,Ft=!0,Ta(t,a,l),Pe=u,Ft=f;break;case 0:case 11:case 14:case 15:ct||nr(2,l,a),ct||nr(4,l,a),Ta(t,a,l);break;case 1:ct||(Jn(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&$0(l,a,u)),Ta(t,a,l);break;case 21:Ta(t,a,l);break;case 22:ct=(u=ct)||l.memoizedState!==null,Ta(t,a,l),ct=u;break;default:Ta(t,a,l)}}function I0(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xs(t)}catch(l){Fe(a,a.return,l)}}function AS(t){switch(t.tag){case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new V0),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new V0),a;default:throw Error(i(435,t.tag))}}function hd(t,a){var l=AS(t);a.forEach(function(u){var f=zS.bind(null,t,u);l.has(u)||(l.add(u),u.then(f,f))})}function un(t,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var f=l[u],h=t,_=a,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(or(S.type)){Pe=S.stateNode,Ft=!1;break e}break;case 5:Pe=S.stateNode,Ft=!1;break e;case 3:case 4:Pe=S.stateNode.containerInfo,Ft=!0;break e}S=S.return}if(Pe===null)throw Error(i(160));Z0(h,_,f),Pe=null,Ft=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)F0(a,t),a=a.sibling}var Bn=null;function F0(t,a){var l=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:un(a,t),cn(t),u&4&&(nr(3,t,t.return),ns(3,t),nr(5,t,t.return));break;case 1:un(a,t),cn(t),u&512&&(ct||l===null||Jn(l,l.return)),u&64&&Aa&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var f=Bn;if(un(a,t),cn(t),u&512&&(ct||l===null||Jn(l,l.return)),u&4){var h=l!==null?l.memoizedState:null;if(u=t.memoizedState,l===null)if(u===null)if(t.stateNode===null){e:{u=t.type,l=t.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":h=f.getElementsByTagName("title")[0],(!h||h[Dr]||h[bt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(u),f.head.insertBefore(h,f.querySelector("head > title"))),Nt(h,u,l),h[bt]=t,ft(h),u=h;break e;case"link":var _=Xp("link","href",f).get(u+(l.href||""));if(_){for(var S=0;S<_.length;S++)if(h=_[S],h.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&h.getAttribute("rel")===(l.rel==null?null:l.rel)&&h.getAttribute("title")===(l.title==null?null:l.title)&&h.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(S,1);break t}}h=f.createElement(u),Nt(h,u,l),f.head.appendChild(h);break;case"meta":if(_=Xp("meta","content",f).get(u+(l.content||""))){for(S=0;S<_.length;S++)if(h=_[S],h.getAttribute("content")===(l.content==null?null:""+l.content)&&h.getAttribute("name")===(l.name==null?null:l.name)&&h.getAttribute("property")===(l.property==null?null:l.property)&&h.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&h.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(S,1);break t}}h=f.createElement(u),Nt(h,u,l),f.head.appendChild(h);break;default:throw Error(i(468,u))}h[bt]=t,ft(h),u=h}t.stateNode=u}else Vp(f,t.type,t.stateNode);else t.stateNode=qp(f,u,t.memoizedProps);else h!==u?(h===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):h.count--,u===null?Vp(f,t.type,t.stateNode):qp(f,u,t.memoizedProps)):u===null&&t.stateNode!==null&&cd(t,t.memoizedProps,l.memoizedProps)}break;case 27:un(a,t),cn(t),u&512&&(ct||l===null||Jn(l,l.return)),l!==null&&u&4&&cd(t,t.memoizedProps,l.memoizedProps);break;case 5:if(un(a,t),cn(t),u&512&&(ct||l===null||Jn(l,l.return)),t.flags&32){f=t.stateNode;try{gi(f,"")}catch(K){Fe(t,t.return,K)}}u&4&&t.stateNode!=null&&(f=t.memoizedProps,cd(t,f,l!==null?l.memoizedProps:f)),u&1024&&(dd=!0);break;case 6:if(un(a,t),cn(t),u&4){if(t.stateNode===null)throw Error(i(162));u=t.memoizedProps,l=t.stateNode;try{l.nodeValue=u}catch(K){Fe(t,t.return,K)}}break;case 3:if(_c=null,f=Bn,Bn=pc(a.containerInfo),un(a,t),Bn=f,cn(t),u&4&&l!==null&&l.memoizedState.isDehydrated)try{xs(a.containerInfo)}catch(K){Fe(t,t.return,K)}dd&&(dd=!1,K0(t));break;case 4:u=Bn,Bn=pc(t.stateNode.containerInfo),un(a,t),cn(t),Bn=u;break;case 12:un(a,t),cn(t);break;case 13:un(a,t),cn(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(_d=Te()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,hd(t,u)));break;case 22:f=t.memoizedState!==null;var H=l!==null&&l.memoizedState!==null,G=Aa,ne=ct;if(Aa=G||f,ct=ne||H,un(a,t),ct=ne,Aa=G,cn(t),u&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(l===null||H||Aa||ct||Qr(t)),l=null,a=t;;){if(a.tag===5||a.tag===26){if(l===null){H=l=a;try{if(h=H.stateNode,f)_=h.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=H.stateNode;var le=H.memoizedProps.style,F=le!=null&&le.hasOwnProperty("display")?le.display:null;S.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(K){Fe(H,H.return,K)}}}else if(a.tag===6){if(l===null){H=a;try{H.stateNode.nodeValue=f?"":H.memoizedProps}catch(K){Fe(H,H.return,K)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=t.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,hd(t,l))));break;case 19:un(a,t),cn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,hd(t,u)));break;case 30:break;case 21:break;default:un(a,t),cn(t)}}function cn(t){var a=t.flags;if(a&2){try{for(var l,u=t.return;u!==null;){if(q0(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var f=l.stateNode,h=od(t);rc(t,h,f);break;case 5:var _=l.stateNode;l.flags&32&&(gi(_,""),l.flags&=-33);var S=od(t);rc(t,S,_);break;case 3:case 4:var H=l.stateNode.containerInfo,G=od(t);fd(t,G,H);break;default:throw Error(i(161))}}catch(ne){Fe(t,t.return,ne)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function K0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;K0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ar(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)G0(t,a.alternate,a),a=a.sibling}function Qr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:nr(4,a,a.return),Qr(a);break;case 1:Jn(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&$0(a,a.return,l),Qr(a);break;case 27:ds(a.stateNode);case 26:case 5:Jn(a,a.return),Qr(a);break;case 22:a.memoizedState===null&&Qr(a);break;case 30:Qr(a);break;default:Qr(a)}t=t.sibling}}function rr(t,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,f=t,h=a,_=h.flags;switch(h.tag){case 0:case 11:case 15:rr(f,h,l),ns(4,h);break;case 1:if(rr(f,h,l),u=h,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){Fe(u,u.return,G)}if(u=h,f=u.updateQueue,f!==null){var S=u.stateNode;try{var H=f.shared.hiddenCallbacks;if(H!==null)for(f.shared.hiddenCallbacks=null,f=0;f<H.length;f++)Ay(H[f],S)}catch(G){Fe(u,u.return,G)}}l&&_&64&&k0(h),as(h,h.return);break;case 27:X0(h);case 26:case 5:rr(f,h,l),l&&u===null&&_&4&&Y0(h),as(h,h.return);break;case 12:rr(f,h,l);break;case 13:rr(f,h,l),l&&_&4&&I0(f,h);break;case 22:h.memoizedState===null&&rr(f,h,l),as(h,h.return);break;case 30:break;default:rr(f,h,l)}a=a.sibling}}function md(t,a){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&ql(l))}function gd(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ql(t))}function Pn(t,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)J0(t,a,l,u),a=a.sibling}function J0(t,a,l,u){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Pn(t,a,l,u),f&2048&&ns(9,a);break;case 1:Pn(t,a,l,u);break;case 3:Pn(t,a,l,u),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ql(t)));break;case 12:if(f&2048){Pn(t,a,l,u),t=a.stateNode;try{var h=a.memoizedProps,_=h.id,S=h.onPostCommit;typeof S=="function"&&S(_,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(H){Fe(a,a.return,H)}}else Pn(t,a,l,u);break;case 13:Pn(t,a,l,u);break;case 23:break;case 22:h=a.stateNode,_=a.alternate,a.memoizedState!==null?h._visibility&2?Pn(t,a,l,u):rs(t,a):h._visibility&2?Pn(t,a,l,u):(h._visibility|=2,zi(t,a,l,u,(a.subtreeFlags&10256)!==0)),f&2048&&md(_,a);break;case 24:Pn(t,a,l,u),f&2048&&gd(a.alternate,a);break;default:Pn(t,a,l,u)}}function zi(t,a,l,u,f){for(f=f&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var h=t,_=a,S=l,H=u,G=_.flags;switch(_.tag){case 0:case 11:case 15:zi(h,_,S,H,f),ns(8,_);break;case 23:break;case 22:var ne=_.stateNode;_.memoizedState!==null?ne._visibility&2?zi(h,_,S,H,f):rs(h,_):(ne._visibility|=2,zi(h,_,S,H,f)),f&&G&2048&&md(_.alternate,_);break;case 24:zi(h,_,S,H,f),f&&G&2048&&gd(_.alternate,_);break;default:zi(h,_,S,H,f)}a=a.sibling}}function rs(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=t,u=a,f=u.flags;switch(u.tag){case 22:rs(l,u),f&2048&&md(u.alternate,u);break;case 24:rs(l,u),f&2048&&gd(u.alternate,u);break;default:rs(l,u)}a=a.sibling}}var is=8192;function ji(t){if(t.subtreeFlags&is)for(t=t.child;t!==null;)P0(t),t=t.sibling}function P0(t){switch(t.tag){case 26:ji(t),t.flags&is&&t.memoizedState!==null&&oE(Bn,t.memoizedState,t.memoizedProps);break;case 5:ji(t);break;case 3:case 4:var a=Bn;Bn=pc(t.stateNode.containerInfo),ji(t),Bn=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=is,is=16777216,ji(t),is=a):ji(t));break;default:ji(t)}}function W0(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function ls(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];Et=u,tp(u,t)}W0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ep(t),t=t.sibling}function ep(t){switch(t.tag){case 0:case 11:case 15:ls(t),t.flags&2048&&nr(9,t,t.return);break;case 3:ls(t);break;case 12:ls(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,ic(t)):ls(t);break;default:ls(t)}}function ic(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];Et=u,tp(u,t)}W0(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:nr(8,a,a.return),ic(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,ic(a));break;default:ic(a)}t=t.sibling}}function tp(t,a){for(;Et!==null;){var l=Et;switch(l.tag){case 0:case 11:case 15:nr(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ql(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Et=u;else e:for(l=t;Et!==null;){u=Et;var f=u.sibling,h=u.return;if(Q0(u),u===l){Et=null;break e}if(f!==null){f.return=h,Et=f;break e}Et=h}}}var TS={getCacheForType:function(t){var a=Lt(mt),l=a.data.get(t);return l===void 0&&(l=t(),a.data.set(t,l)),l}},CS=typeof WeakMap=="function"?WeakMap:Map,Xe=0,Je=null,Ue=null,Be=0,Ve=0,on=null,ir=!1,Hi=!1,yd=!1,Ca=0,it=0,lr=0,Zr=0,pd=0,Cn=0,Bi=0,ss=null,Kt=null,vd=!1,_d=0,lc=1/0,sc=null,sr=null,Dt=0,ur=null,Li=null,ki=0,xd=0,wd=null,np=null,us=0,bd=null;function fn(){if((Xe&2)!==0&&Be!==0)return Be&-Be;if(M.T!==null){var t=Ti;return t!==0?t:Rd()}return hu()}function ap(){Cn===0&&(Cn=(Be&536870912)===0||$e?oi():536870912);var t=Tn.current;return t!==null&&(t.flags|=32),Cn}function dn(t,a,l){(t===Je&&(Ve===2||Ve===9)||t.cancelPendingCommit!==null)&&($i(t,0),cr(t,Be,Cn,!1)),qa(t,l),((Xe&2)===0||t!==Je)&&(t===Je&&((Xe&2)===0&&(Zr|=l),it===4&&cr(t,Be,Cn,!1)),Wn(t))}function rp(t,a,l){if((Xe&6)!==0)throw Error(i(327));var u=!l&&(a&124)===0&&(a&t.expiredLanes)===0||Ht(t,a),f=u?DS(t,a):Ad(t,a,!0),h=u;do{if(f===0){Hi&&!u&&cr(t,a,0,!1);break}else{if(l=t.current.alternate,h&&!MS(l)){f=Ad(t,a,!1),h=!1;continue}if(f===2){if(h=a,t.errorRecoveryDisabledLanes&h)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;e:{var S=t;f=ss;var H=S.current.memoizedState.isDehydrated;if(H&&($i(S,_).flags|=256),_=Ad(S,_,!1),_!==2){if(yd&&!H){S.errorRecoveryDisabledLanes|=h,Zr|=h,f=4;break e}h=Kt,Kt=f,h!==null&&(Kt===null?Kt=h:Kt.push.apply(Kt,h))}f=_}if(h=!1,f!==2)continue}}if(f===1){$i(t,0),cr(t,a,0,!0);break}e:{switch(u=t,h=f,h){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:cr(u,a,Cn,!ir);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(f=_d+300-Te(),10<f)){if(cr(u,a,Cn,!ir),Qt(u,0,!0)!==0)break e;u.timeoutHandle=Up(ip.bind(null,u,l,Kt,sc,vd,a,Cn,Zr,Bi,ir,h,2,-0,0),f);break e}ip(u,l,Kt,sc,vd,a,Cn,Zr,Bi,ir,h,0,-0,0)}}break}while(!0);Wn(t)}function ip(t,a,l,u,f,h,_,S,H,G,ne,le,F,K){if(t.timeoutHandle=-1,le=a.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(gs={stylesheets:null,count:0,unsuspend:cE},P0(a),le=fE(),le!==null)){t.cancelPendingCommit=le(dp.bind(null,t,a,h,l,u,f,_,S,H,ne,1,F,K)),cr(t,h,_,!G);return}dp(t,a,h,l,u,f,_,S,H)}function MS(t){for(var a=t;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var f=l[u],h=f.getSnapshot;f=f.value;try{if(!ln(h(),f))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function cr(t,a,l,u){a&=~pd,a&=~Zr,t.suspendedLanes|=a,t.pingedLanes&=~a,u&&(t.warmLanes|=a),u=t.expirationTimes;for(var f=a;0<f;){var h=31-ot(f),_=1<<h;u[h]=-1,f&=~_}l!==0&&fu(t,l,a)}function uc(){return(Xe&6)===0?(cs(0),!1):!0}function Sd(){if(Ue!==null){if(Ve===0)var t=Ue.return;else t=Ue,_a=Yr=null,$f(t),Oi=null,Wl=0,t=Ue;for(;t!==null;)L0(t.alternate,t),t=t.return;Ue=null}}function $i(t,a){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,QS(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Sd(),Je=t,Ue=l=ya(t.current,null),Be=a,Ve=0,on=null,ir=!1,Hi=Ht(t,a),yd=!1,Bi=Cn=pd=Zr=lr=it=0,Kt=ss=null,vd=!1,(a&8)!==0&&(a|=a&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=a;0<u;){var f=31-ot(u),h=1<<f;a|=t[f],u&=~h}return Ca=a,Du(),l}function lp(t,a){De=null,M.H=Fu,a===Vl||a===ku?(a=Sy(),Ve=3):a===xy?(a=Sy(),Ve=4):Ve=a===E0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,on=a,Ue===null&&(it=1,ec(t,bn(a,t.current)))}function sp(){var t=M.H;return M.H=Fu,t===null?Fu:t}function up(){var t=M.A;return M.A=TS,t}function Ed(){it=4,ir||(Be&4194048)!==Be&&Tn.current!==null||(Hi=!0),(lr&134217727)===0&&(Zr&134217727)===0||Je===null||cr(Je,Be,Cn,!1)}function Ad(t,a,l){var u=Xe;Xe|=2;var f=sp(),h=up();(Je!==t||Be!==a)&&(sc=null,$i(t,a)),a=!1;var _=it;e:do try{if(Ve!==0&&Ue!==null){var S=Ue,H=on;switch(Ve){case 8:Sd(),_=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(a=!0);var G=Ve;if(Ve=0,on=null,Yi(t,S,H,G),l&&Hi){_=0;break e}break;default:G=Ve,Ve=0,on=null,Yi(t,S,H,G)}}RS(),_=it;break}catch(ne){lp(t,ne)}while(!0);return a&&t.shellSuspendCounter++,_a=Yr=null,Xe=u,M.H=f,M.A=h,Ue===null&&(Je=null,Be=0,Du()),_}function RS(){for(;Ue!==null;)cp(Ue)}function DS(t,a){var l=Xe;Xe|=2;var u=sp(),f=up();Je!==t||Be!==a?(sc=null,lc=Te()+500,$i(t,a)):Hi=Ht(t,a);e:do try{if(Ve!==0&&Ue!==null){a=Ue;var h=on;t:switch(Ve){case 1:Ve=0,on=null,Yi(t,a,h,1);break;case 2:case 9:if(wy(h)){Ve=0,on=null,op(a);break}a=function(){Ve!==2&&Ve!==9||Je!==t||(Ve=7),Wn(t)},h.then(a,a);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:wy(h)?(Ve=0,on=null,op(a)):(Ve=0,on=null,Yi(t,a,h,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var S=Ue;if(!_||Gp(_)){Ve=0,on=null;var H=S.sibling;if(H!==null)Ue=H;else{var G=S.return;G!==null?(Ue=G,cc(G)):Ue=null}break t}}Ve=0,on=null,Yi(t,a,h,5);break;case 6:Ve=0,on=null,Yi(t,a,h,6);break;case 8:Sd(),it=6;break e;default:throw Error(i(462))}}NS();break}catch(ne){lp(t,ne)}while(!0);return _a=Yr=null,M.H=u,M.A=f,Xe=l,Ue!==null?0:(Je=null,Be=0,Du(),it)}function NS(){for(;Ue!==null&&!He();)cp(Ue)}function cp(t){var a=H0(t.alternate,t,Ca);t.memoizedProps=t.pendingProps,a===null?cc(t):Ue=a}function op(t){var a=t,l=a.alternate;switch(a.tag){case 15:case 0:a=D0(l,a,a.pendingProps,a.type,void 0,Be);break;case 11:a=D0(l,a,a.pendingProps,a.type.render,a.ref,Be);break;case 5:$f(a);default:L0(l,a),a=Ue=fy(a,Ca),a=H0(l,a,Ca)}t.memoizedProps=t.pendingProps,a===null?cc(t):Ue=a}function Yi(t,a,l,u){_a=Yr=null,$f(a),Oi=null,Wl=0;var f=a.return;try{if(xS(t,f,a,l,Be)){it=1,ec(t,bn(l,t.current)),Ue=null;return}}catch(h){if(f!==null)throw Ue=f,h;it=1,ec(t,bn(l,t.current)),Ue=null;return}a.flags&32768?($e||u===1?t=!0:Hi||(Be&536870912)!==0?t=!1:(ir=t=!0,(u===2||u===9||u===3||u===6)&&(u=Tn.current,u!==null&&u.tag===13&&(u.flags|=16384))),fp(a,t)):cc(a)}function cc(t){var a=t;do{if((a.flags&32768)!==0){fp(a,ir);return}t=a.return;var l=bS(a.alternate,a,Ca);if(l!==null){Ue=l;return}if(a=a.sibling,a!==null){Ue=a;return}Ue=a=t}while(a!==null);it===0&&(it=5)}function fp(t,a){do{var l=SS(t.alternate,t);if(l!==null){l.flags&=32767,Ue=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=l}while(t!==null);it=6,Ue=null}function dp(t,a,l,u,f,h,_,S,H){t.cancelPendingCommit=null;do oc();while(Dt!==0);if((Xe&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(h=a.lanes|a.childLanes,h|=gf,da(t,l,h,_,S,H),t===Je&&(Ue=Je=null,Be=0),Li=a,ur=t,ki=l,xd=h,wd=f,np=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,jS(Zn,function(){return pp(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=M.T,M.T=null,f=Y.p,Y.p=2,_=Xe,Xe|=4;try{ES(t,a,l)}finally{Xe=_,Y.p=f,M.T=u}}Dt=1,hp(),mp(),gp()}}function hp(){if(Dt===1){Dt=0;var t=ur,a=Li,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=M.T,M.T=null;var u=Y.p;Y.p=2;var f=Xe;Xe|=4;try{F0(a,t);var h=Bd,_=ty(t.containerInfo),S=h.focusedElem,H=h.selectionRange;if(_!==S&&S&&S.ownerDocument&&ey(S.ownerDocument.documentElement,S)){if(H!==null&&of(S)){var G=H.start,ne=H.end;if(ne===void 0&&(ne=G),"selectionStart"in S)S.selectionStart=G,S.selectionEnd=Math.min(ne,S.value.length);else{var le=S.ownerDocument||document,F=le&&le.defaultView||window;if(F.getSelection){var K=F.getSelection(),Se=S.textContent.length,_e=Math.min(H.start,Se),Ze=H.end===void 0?_e:Math.min(H.end,Se);!K.extend&&_e>Ze&&(_=Ze,Ze=_e,_e=_);var q=Wg(S,_e),L=Wg(S,Ze);if(q&&L&&(K.rangeCount!==1||K.anchorNode!==q.node||K.anchorOffset!==q.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var V=le.createRange();V.setStart(q.node,q.offset),K.removeAllRanges(),_e>Ze?(K.addRange(V),K.extend(L.node,L.offset)):(V.setEnd(L.node,L.offset),K.addRange(V))}}}}for(le=[],K=S;K=K.parentNode;)K.nodeType===1&&le.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<le.length;S++){var ie=le[S];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}bc=!!Hd,Bd=Hd=null}finally{Xe=f,Y.p=u,M.T=l}}t.current=a,Dt=2}}function mp(){if(Dt===2){Dt=0;var t=ur,a=Li,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=M.T,M.T=null;var u=Y.p;Y.p=2;var f=Xe;Xe|=4;try{G0(t,a.alternate,a)}finally{Xe=f,Y.p=u,M.T=l}}Dt=3}}function gp(){if(Dt===4||Dt===3){Dt=0,Ke();var t=ur,a=Li,l=ki,u=np;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Dt=5:(Dt=0,Li=ur=null,yp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(sr=null),Al(l),a=a.stateNode,st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(an,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=M.T,f=Y.p,Y.p=2,M.T=null;try{for(var h=t.onRecoverableError,_=0;_<u.length;_++){var S=u[_];h(S.value,{componentStack:S.stack})}}finally{M.T=a,Y.p=f}}(ki&3)!==0&&oc(),Wn(t),f=t.pendingLanes,(l&4194090)!==0&&(f&42)!==0?t===bd?us++:(us=0,bd=t):us=0,cs(0)}}function yp(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,ql(a)))}function oc(t){return hp(),mp(),gp(),pp()}function pp(){if(Dt!==5)return!1;var t=ur,a=xd;xd=0;var l=Al(ki),u=M.T,f=Y.p;try{Y.p=32>l?32:l,M.T=null,l=wd,wd=null;var h=ur,_=ki;if(Dt=0,Li=ur=null,ki=0,(Xe&6)!==0)throw Error(i(331));var S=Xe;if(Xe|=4,ep(h.current),J0(h,h.current,_,l),Xe=S,cs(0,!1),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(an,h)}catch{}return!0}finally{Y.p=f,M.T=u,yp(t,a)}}function vp(t,a,l){a=bn(l,a),a=ed(t.stateNode,a,2),t=Pa(t,a,2),t!==null&&(qa(t,2),Wn(t))}function Fe(t,a,l){if(t.tag===3)vp(t,t,l);else for(;a!==null;){if(a.tag===3){vp(a,t,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(sr===null||!sr.has(u))){t=bn(l,t),l=b0(2),u=Pa(a,l,2),u!==null&&(S0(l,u,a,t),qa(u,2),Wn(u));break}}a=a.return}}function Td(t,a,l){var u=t.pingCache;if(u===null){u=t.pingCache=new CS;var f=new Set;u.set(a,f)}else f=u.get(a),f===void 0&&(f=new Set,u.set(a,f));f.has(l)||(yd=!0,f.add(l),t=OS.bind(null,t,a,l),a.then(t,t))}function OS(t,a,l){var u=t.pingCache;u!==null&&u.delete(a),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,Je===t&&(Be&l)===l&&(it===4||it===3&&(Be&62914560)===Be&&300>Te()-_d?(Xe&2)===0&&$i(t,0):pd|=l,Bi===Be&&(Bi=0)),Wn(t)}function _p(t,a){a===0&&(a=Ya()),t=bi(t,a),t!==null&&(qa(t,a),Wn(t))}function US(t){var a=t.memoizedState,l=0;a!==null&&(l=a.retryLane),_p(t,l)}function zS(t,a){var l=0;switch(t.tag){case 13:var u=t.stateNode,f=t.memoizedState;f!==null&&(l=f.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),_p(t,l)}function jS(t,a){return qe(t,a)}var fc=null,qi=null,Cd=!1,dc=!1,Md=!1,Ir=0;function Wn(t){t!==qi&&t.next===null&&(qi===null?fc=qi=t:qi=qi.next=t),dc=!0,Cd||(Cd=!0,BS())}function cs(t,a){if(!Md&&dc){Md=!0;do for(var l=!1,u=fc;u!==null;){if(t!==0){var f=u.pendingLanes;if(f===0)var h=0;else{var _=u.suspendedLanes,S=u.pingedLanes;h=(1<<31-ot(42|t)+1)-1,h&=f&~(_&~S),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(l=!0,Sp(u,h))}else h=Be,h=Qt(u,u===Je?h:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(h&3)===0||Ht(u,h)||(l=!0,Sp(u,h));u=u.next}while(l);Md=!1}}function HS(){xp()}function xp(){dc=Cd=!1;var t=0;Ir!==0&&(GS()&&(t=Ir),Ir=0);for(var a=Te(),l=null,u=fc;u!==null;){var f=u.next,h=wp(u,a);h===0?(u.next=null,l===null?fc=f:l.next=f,f===null&&(qi=l)):(l=u,(t!==0||(h&3)!==0)&&(dc=!0)),u=f}cs(t)}function wp(t,a){for(var l=t.suspendedLanes,u=t.pingedLanes,f=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var _=31-ot(h),S=1<<_,H=f[_];H===-1?((S&l)===0||(S&u)!==0)&&(f[_]=Mr(S,a)):H<=a&&(t.expiredLanes|=S),h&=~S}if(a=Je,l=Be,l=Qt(t,t===a?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,l===0||t===a&&(Ve===2||Ve===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&Me(u),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Ht(t,l)){if(a=l&-l,a===t.callbackPriority)return a;switch(u!==null&&Me(u),Al(l)){case 2:case 8:l=Qn;break;case 32:l=Zn;break;case 268435456:l=fa;break;default:l=Zn}return u=bp.bind(null,t),l=qe(l,u),t.callbackPriority=a,t.callbackNode=l,a}return u!==null&&u!==null&&Me(u),t.callbackPriority=2,t.callbackNode=null,2}function bp(t,a){if(Dt!==0&&Dt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(oc()&&t.callbackNode!==l)return null;var u=Be;return u=Qt(t,t===Je?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(rp(t,u,a),wp(t,Te()),t.callbackNode!=null&&t.callbackNode===l?bp.bind(null,t):null)}function Sp(t,a){if(oc())return null;rp(t,a,!0)}function BS(){ZS(function(){(Xe&6)!==0?qe(jt,HS):xp()})}function Rd(){return Ir===0&&(Ir=oi()),Ir}function Ep(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Su(""+t)}function Ap(t,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,t.id&&l.setAttribute("form",t.id),a.parentNode.insertBefore(l,a),t=new FormData(t),l.parentNode.removeChild(l),t}function LS(t,a,l,u,f){if(a==="submit"&&l&&l.stateNode===f){var h=Ep((f[Bt]||null).action),_=u.submitter;_&&(a=(a=_[Bt]||null)?Ep(a.formAction):_.getAttribute("formAction"),a!==null&&(h=a,_=null));var S=new Cu("action","action",null,u,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ir!==0){var H=_?Ap(f,_):new FormData(f);Ff(l,{pending:!0,data:H,method:f.method,action:h},null,H)}}else typeof h=="function"&&(S.preventDefault(),H=_?Ap(f,_):new FormData(f),Ff(l,{pending:!0,data:H,method:f.method,action:h},h,H))},currentTarget:f}]})}}for(var Dd=0;Dd<mf.length;Dd++){var Nd=mf[Dd],kS=Nd.toLowerCase(),$S=Nd[0].toUpperCase()+Nd.slice(1);Hn(kS,"on"+$S)}Hn(ry,"onAnimationEnd"),Hn(iy,"onAnimationIteration"),Hn(ly,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(aS,"onTransitionRun"),Hn(rS,"onTransitionStart"),Hn(iS,"onTransitionCancel"),Hn(sy,"onTransitionEnd"),Qa("onMouseEnter",["mouseout","mouseover"]),Qa("onMouseLeave",["mouseout","mouseover"]),Qa("onPointerEnter",["pointerout","pointerover"]),Qa("onPointerLeave",["pointerout","pointerover"]),ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(os));function Tp(t,a){a=(a&4)!==0;for(var l=0;l<t.length;l++){var u=t[l],f=u.event;u=u.listeners;e:{var h=void 0;if(a)for(var _=u.length-1;0<=_;_--){var S=u[_],H=S.instance,G=S.currentTarget;if(S=S.listener,H!==h&&f.isPropagationStopped())break e;h=S,f.currentTarget=G;try{h(f)}catch(ne){Wu(ne)}f.currentTarget=null,h=H}else for(_=0;_<u.length;_++){if(S=u[_],H=S.instance,G=S.currentTarget,S=S.listener,H!==h&&f.isPropagationStopped())break e;h=S,f.currentTarget=G;try{h(f)}catch(ne){Wu(ne)}f.currentTarget=null,h=H}}}}function ze(t,a){var l=a[Tl];l===void 0&&(l=a[Tl]=new Set);var u=t+"__bubble";l.has(u)||(Cp(a,t,2,!1),l.add(u))}function Od(t,a,l){var u=0;a&&(u|=4),Cp(l,t,u,a)}var hc="_reactListening"+Math.random().toString(36).slice(2);function Ud(t){if(!t[hc]){t[hc]=!0,gu.forEach(function(l){l!=="selectionchange"&&(YS.has(l)||Od(l,!1,t),Od(l,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[hc]||(a[hc]=!0,Od("selectionchange",!1,a))}}function Cp(t,a,l,u){switch(Jp(a)){case 2:var f=mE;break;case 8:f=gE;break;default:f=Zd}l=f.bind(null,a,l,t),f=void 0,!ef||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),u?f!==void 0?t.addEventListener(a,l,{capture:!0,passive:f}):t.addEventListener(a,l,!0):f!==void 0?t.addEventListener(a,l,{passive:f}):t.addEventListener(a,l,!1)}function zd(t,a,l,u,f){var h=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var S=u.stateNode.containerInfo;if(S===f)break;if(_===4)for(_=u.return;_!==null;){var H=_.tag;if((H===3||H===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;S!==null;){if(_=ha(S),_===null)return;if(H=_.tag,H===5||H===6||H===26||H===27){u=h=_;continue e}S=S.parentNode}}u=u.return}zg(function(){var G=h,ne=Po(l),le=[];e:{var F=uy.get(t);if(F!==void 0){var K=Cu,Se=t;switch(t){case"keypress":if(Au(l)===0)break e;case"keydown":case"keyup":K=j1;break;case"focusin":Se="focus",K=rf;break;case"focusout":Se="blur",K=rf;break;case"beforeblur":case"afterblur":K=rf;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Bg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=S1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=L1;break;case ry:case iy:case ly:K=T1;break;case sy:K=$1;break;case"scroll":case"scrollend":K=w1;break;case"wheel":K=q1;break;case"copy":case"cut":case"paste":K=M1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=kg;break;case"toggle":case"beforetoggle":K=V1}var _e=(a&4)!==0,Ze=!_e&&(t==="scroll"||t==="scrollend"),q=_e?F!==null?F+"Capture":null:F;_e=[];for(var L=G,V;L!==null;){var ie=L;if(V=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||V===null||q===null||(ie=Rl(L,q),ie!=null&&_e.push(fs(L,ie,V))),Ze)break;L=L.return}0<_e.length&&(F=new K(F,Se,null,l,ne),le.push({event:F,listeners:_e}))}}if((a&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",F&&l!==Jo&&(Se=l.relatedTarget||l.fromElement)&&(ha(Se)||Se[Xa]))break e;if((K||F)&&(F=ne.window===ne?ne:(F=ne.ownerDocument)?F.defaultView||F.parentWindow:window,K?(Se=l.relatedTarget||l.toElement,K=G,Se=Se?ha(Se):null,Se!==null&&(Ze=c(Se),_e=Se.tag,Se!==Ze||_e!==5&&_e!==27&&_e!==6)&&(Se=null)):(K=null,Se=G),K!==Se)){if(_e=Bg,ie="onMouseLeave",q="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(_e=kg,ie="onPointerLeave",q="onPointerEnter",L="pointer"),Ze=K==null?F:Nr(K),V=Se==null?F:Nr(Se),F=new _e(ie,L+"leave",K,l,ne),F.target=Ze,F.relatedTarget=V,ie=null,ha(ne)===G&&(_e=new _e(q,L+"enter",Se,l,ne),_e.target=V,_e.relatedTarget=Ze,ie=_e),Ze=ie,K&&Se)t:{for(_e=K,q=Se,L=0,V=_e;V;V=Xi(V))L++;for(V=0,ie=q;ie;ie=Xi(ie))V++;for(;0<L-V;)_e=Xi(_e),L--;for(;0<V-L;)q=Xi(q),V--;for(;L--;){if(_e===q||q!==null&&_e===q.alternate)break t;_e=Xi(_e),q=Xi(q)}_e=null}else _e=null;K!==null&&Mp(le,F,K,_e,!1),Se!==null&&Ze!==null&&Mp(le,Ze,Se,_e,!0)}}e:{if(F=G?Nr(G):window,K=F.nodeName&&F.nodeName.toLowerCase(),K==="select"||K==="input"&&F.type==="file")var he=Zg;else if(Gg(F))if(Ig)he=eS;else{he=P1;var Ne=J1}else K=F.nodeName,!K||K.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?G&&Ko(G.elementType)&&(he=Zg):he=W1;if(he&&(he=he(t,G))){Qg(le,he,l,ne);break e}Ne&&Ne(t,F,G),t==="focusout"&&G&&F.type==="number"&&G.memoizedProps.value!=null&&Fo(F,"number",F.value)}switch(Ne=G?Nr(G):window,t){case"focusin":(Gg(Ne)||Ne.contentEditable==="true")&&(_i=Ne,ff=G,Bl=null);break;case"focusout":Bl=ff=_i=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,ny(le,l,ne);break;case"selectionchange":if(nS)break;case"keydown":case"keyup":ny(le,l,ne)}var ge;if(sf)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else vi?Xg(t,l)&&(xe="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&($g&&l.locale!=="ko"&&(vi||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&vi&&(ge=jg()):(Ia=ne,tf="value"in Ia?Ia.value:Ia.textContent,vi=!0)),Ne=mc(G,xe),0<Ne.length&&(xe=new Lg(xe,t,null,l,ne),le.push({event:xe,listeners:Ne}),ge?xe.data=ge:(ge=Vg(l),ge!==null&&(xe.data=ge)))),(ge=Q1?Z1(t,l):I1(t,l))&&(xe=mc(G,"onBeforeInput"),0<xe.length&&(Ne=new Lg("onBeforeInput","beforeinput",null,l,ne),le.push({event:Ne,listeners:xe}),Ne.data=ge)),LS(le,t,G,l,ne)}Tp(le,a)})}function fs(t,a,l){return{instance:t,listener:a,currentTarget:l}}function mc(t,a){for(var l=a+"Capture",u=[];t!==null;){var f=t,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=Rl(t,l),f!=null&&u.unshift(fs(t,f,h)),f=Rl(t,a),f!=null&&u.push(fs(t,f,h))),t.tag===3)return u;t=t.return}return[]}function Xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Mp(t,a,l,u,f){for(var h=a._reactName,_=[];l!==null&&l!==u;){var S=l,H=S.alternate,G=S.stateNode;if(S=S.tag,H!==null&&H===u)break;S!==5&&S!==26&&S!==27||G===null||(H=G,f?(G=Rl(l,h),G!=null&&_.unshift(fs(l,G,H))):f||(G=Rl(l,h),G!=null&&_.push(fs(l,G,H)))),l=l.return}_.length!==0&&t.push({event:a,listeners:_})}var qS=/\r\n?/g,XS=/\u0000|\uFFFD/g;function Rp(t){return(typeof t=="string"?t:""+t).replace(qS,`
`).replace(XS,"")}function Dp(t,a){return a=Rp(a),Rp(t)===a}function gc(){}function Qe(t,a,l,u,f,h){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||gi(t,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&gi(t,""+u);break;case"className":di(t,"class",u);break;case"tabIndex":di(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":di(t,l,u);break;case"style":Og(t,u,h);break;case"data":if(a!=="object"){di(t,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){t.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(l);break}u=Su(""+u),t.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(l==="formAction"?(a!=="input"&&Qe(t,a,"name",f.name,f,null),Qe(t,a,"formEncType",f.formEncType,f,null),Qe(t,a,"formMethod",f.formMethod,f,null),Qe(t,a,"formTarget",f.formTarget,f,null)):(Qe(t,a,"encType",f.encType,f,null),Qe(t,a,"method",f.method,f,null),Qe(t,a,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(l);break}u=Su(""+u),t.setAttribute(l,u);break;case"onClick":u!=null&&(t.onclick=gc);break;case"onScroll":u!=null&&ze("scroll",t);break;case"onScrollEnd":u!=null&&ze("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}l=Su(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,""+u):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":u===!0?t.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(l,u):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(l,u):t.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(l):t.setAttribute(l,u);break;case"popover":ze("beforetoggle",t),ze("toggle",t),fi(t,"popover",u);break;case"xlinkActuate":jn(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":jn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":jn(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":jn(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":jn(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":jn(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":jn(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":jn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":jn(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":fi(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=_1.get(l)||l,fi(t,l,u))}}function jd(t,a,l,u,f,h){switch(l){case"style":Og(t,u,h);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"children":typeof u=="string"?gi(t,u):(typeof u=="number"||typeof u=="bigint")&&gi(t,""+u);break;case"onScroll":u!=null&&ze("scroll",t);break;case"onScrollEnd":u!=null&&ze("scrollend",t);break;case"onClick":u!=null&&(t.onclick=gc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yu.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),a=l.slice(2,f?l.length-7:void 0),h=t[Bt]||null,h=h!=null?h[l]:null,typeof h=="function"&&t.removeEventListener(a,h,f),typeof u=="function")){typeof h!="function"&&h!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(a,u,f);break e}l in t?t[l]=u:u===!0?t.setAttribute(l,""):fi(t,l,u)}}}function Nt(t,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",t),ze("load",t);var u=!1,f=!1,h;for(h in l)if(l.hasOwnProperty(h)){var _=l[h];if(_!=null)switch(h){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Qe(t,a,h,_,l,null)}}f&&Qe(t,a,"srcSet",l.srcSet,l,null),u&&Qe(t,a,"src",l.src,l,null);return;case"input":ze("invalid",t);var S=h=_=f=null,H=null,G=null;for(u in l)if(l.hasOwnProperty(u)){var ne=l[u];if(ne!=null)switch(u){case"name":f=ne;break;case"type":_=ne;break;case"checked":H=ne;break;case"defaultChecked":G=ne;break;case"value":h=ne;break;case"defaultValue":S=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:Qe(t,a,u,ne,l,null)}}Mg(t,h,S,H,G,_,f,!1),wu(t);return;case"select":ze("invalid",t),u=_=h=null;for(f in l)if(l.hasOwnProperty(f)&&(S=l[f],S!=null))switch(f){case"value":h=S;break;case"defaultValue":_=S;break;case"multiple":u=S;default:Qe(t,a,f,S,l,null)}a=h,l=_,t.multiple=!!u,a!=null?mi(t,!!u,a,!1):l!=null&&mi(t,!!u,l,!0);return;case"textarea":ze("invalid",t),h=f=u=null;for(_ in l)if(l.hasOwnProperty(_)&&(S=l[_],S!=null))switch(_){case"value":u=S;break;case"defaultValue":f=S;break;case"children":h=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:Qe(t,a,_,S,l,null)}Dg(t,u,f,h),wu(t);return;case"option":for(H in l)if(l.hasOwnProperty(H)&&(u=l[H],u!=null))switch(H){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Qe(t,a,H,u,l,null)}return;case"dialog":ze("beforetoggle",t),ze("toggle",t),ze("cancel",t),ze("close",t);break;case"iframe":case"object":ze("load",t);break;case"video":case"audio":for(u=0;u<os.length;u++)ze(os[u],t);break;case"image":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"embed":case"source":case"link":ze("error",t),ze("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(u=l[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Qe(t,a,G,u,l,null)}return;default:if(Ko(a)){for(ne in l)l.hasOwnProperty(ne)&&(u=l[ne],u!==void 0&&jd(t,a,ne,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&Qe(t,a,S,u,l,null))}function VS(t,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,_=null,S=null,H=null,G=null,ne=null;for(K in l){var le=l[K];if(l.hasOwnProperty(K)&&le!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":H=le;default:u.hasOwnProperty(K)||Qe(t,a,K,null,u,le)}}for(var F in u){var K=u[F];if(le=l[F],u.hasOwnProperty(F)&&(K!=null||le!=null))switch(F){case"type":h=K;break;case"name":f=K;break;case"checked":G=K;break;case"defaultChecked":ne=K;break;case"value":_=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,a));break;default:K!==le&&Qe(t,a,F,K,u,le)}}Io(t,_,S,H,G,ne,h,f);return;case"select":K=_=S=F=null;for(h in l)if(H=l[h],l.hasOwnProperty(h)&&H!=null)switch(h){case"value":break;case"multiple":K=H;default:u.hasOwnProperty(h)||Qe(t,a,h,null,u,H)}for(f in u)if(h=u[f],H=l[f],u.hasOwnProperty(f)&&(h!=null||H!=null))switch(f){case"value":F=h;break;case"defaultValue":S=h;break;case"multiple":_=h;default:h!==H&&Qe(t,a,f,h,u,H)}a=S,l=_,u=K,F!=null?mi(t,!!l,F,!1):!!u!=!!l&&(a!=null?mi(t,!!l,a,!0):mi(t,!!l,l?[]:"",!1));return;case"textarea":K=F=null;for(S in l)if(f=l[S],l.hasOwnProperty(S)&&f!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Qe(t,a,S,null,u,f)}for(_ in u)if(f=u[_],h=l[_],u.hasOwnProperty(_)&&(f!=null||h!=null))switch(_){case"value":F=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==h&&Qe(t,a,_,f,u,h)}Rg(t,F,K);return;case"option":for(var Se in l)if(F=l[Se],l.hasOwnProperty(Se)&&F!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:Qe(t,a,Se,null,u,F)}for(H in u)if(F=u[H],K=l[H],u.hasOwnProperty(H)&&F!==K&&(F!=null||K!=null))switch(H){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Qe(t,a,H,F,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in l)F=l[_e],l.hasOwnProperty(_e)&&F!=null&&!u.hasOwnProperty(_e)&&Qe(t,a,_e,null,u,F);for(G in u)if(F=u[G],K=l[G],u.hasOwnProperty(G)&&F!==K&&(F!=null||K!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,a));break;default:Qe(t,a,G,F,u,K)}return;default:if(Ko(a)){for(var Ze in l)F=l[Ze],l.hasOwnProperty(Ze)&&F!==void 0&&!u.hasOwnProperty(Ze)&&jd(t,a,Ze,void 0,u,F);for(ne in u)F=u[ne],K=l[ne],!u.hasOwnProperty(ne)||F===K||F===void 0&&K===void 0||jd(t,a,ne,F,u,K);return}}for(var q in l)F=l[q],l.hasOwnProperty(q)&&F!=null&&!u.hasOwnProperty(q)&&Qe(t,a,q,null,u,F);for(le in u)F=u[le],K=l[le],!u.hasOwnProperty(le)||F===K||F==null&&K==null||Qe(t,a,le,F,u,K)}var Hd=null,Bd=null;function yc(t){return t.nodeType===9?t:t.ownerDocument}function Np(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Op(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Ld(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var kd=null;function GS(){var t=window.event;return t&&t.type==="popstate"?t===kd?!1:(kd=t,!0):(kd=null,!1)}var Up=typeof setTimeout=="function"?setTimeout:void 0,QS=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,ZS=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(t){return zp.resolve(null).then(t).catch(IS)}:Up;function IS(t){setTimeout(function(){throw t})}function or(t){return t==="head"}function jp(t,a){var l=a,u=0,f=0;do{var h=l.nextSibling;if(t.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(0<u&&8>u){l=u;var _=t.ownerDocument;if(l&1&&ds(_.documentElement),l&2&&ds(_.body),l&4)for(l=_.head,ds(l),_=l.firstChild;_;){var S=_.nextSibling,H=_.nodeName;_[Dr]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=S}}if(f===0){t.removeChild(h),xs(a);return}f--}else l==="$"||l==="$?"||l==="$!"?f++:u=l.charCodeAt(0)-48;else u=0;l=h}while(l);xs(a)}function $d(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":$d(l),Cl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function FS(t,a,l,u){for(;t.nodeType===1;){var f=l;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[Dr])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=Ln(t.nextSibling),t===null)break}return null}function KS(t,a,l){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Ln(t.nextSibling),t===null))return null;return t}function Yd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function JS(t,a){var l=t.ownerDocument;if(t.data!=="$?"||l.readyState==="complete")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function Ln(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return t}var qd=null;function Hp(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return t;a--}else l==="/$"&&a++}t=t.previousSibling}return null}function Bp(t,a,l){switch(a=yc(l),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function ds(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Cl(t)}var Mn=new Map,Lp=new Set;function pc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ma=Y.d;Y.d={f:PS,r:WS,D:eE,C:tE,L:nE,m:aE,X:iE,S:rE,M:lE};function PS(){var t=Ma.f(),a=uc();return t||a}function WS(t){var a=Va(t);a!==null&&a.tag===5&&a.type==="form"?r0(a):Ma.r(t)}var Vi=typeof document>"u"?null:document;function kp(t,a,l){var u=Vi;if(u&&typeof a=="string"&&a){var f=wn(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),Lp.has(f)||(Lp.add(f),t={rel:t,crossOrigin:l,href:a},u.querySelector(f)===null&&(a=u.createElement("link"),Nt(a,"link",t),ft(a),u.head.appendChild(a)))}}function eE(t){Ma.D(t),kp("dns-prefetch",t,null)}function tE(t,a){Ma.C(t,a),kp("preconnect",t,a)}function nE(t,a,l){Ma.L(t,a,l);var u=Vi;if(u&&t&&a){var f='link[rel="preload"][as="'+wn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+wn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+wn(l.imageSizes)+'"]')):f+='[href="'+wn(t)+'"]';var h=f;switch(a){case"style":h=Gi(t);break;case"script":h=Qi(t)}Mn.has(h)||(t=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:t,as:a},l),Mn.set(h,t),u.querySelector(f)!==null||a==="style"&&u.querySelector(hs(h))||a==="script"&&u.querySelector(ms(h))||(a=u.createElement("link"),Nt(a,"link",t),ft(a),u.head.appendChild(a)))}}function aE(t,a){Ma.m(t,a);var l=Vi;if(l&&t){var u=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+wn(u)+'"][href="'+wn(t)+'"]',h=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Qi(t)}if(!Mn.has(h)&&(t=y({rel:"modulepreload",href:t},a),Mn.set(h,t),l.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ms(h)))return}u=l.createElement("link"),Nt(u,"link",t),ft(u),l.head.appendChild(u)}}}function rE(t,a,l){Ma.S(t,a,l);var u=Vi;if(u&&t){var f=Ga(u).hoistableStyles,h=Gi(t);a=a||"default";var _=f.get(h);if(!_){var S={loading:0,preload:null};if(_=u.querySelector(hs(h)))S.loading=5;else{t=y({rel:"stylesheet",href:t,"data-precedence":a},l),(l=Mn.get(h))&&Xd(t,l);var H=_=u.createElement("link");ft(H),Nt(H,"link",t),H._p=new Promise(function(G,ne){H.onload=G,H.onerror=ne}),H.addEventListener("load",function(){S.loading|=1}),H.addEventListener("error",function(){S.loading|=2}),S.loading|=4,vc(_,a,u)}_={type:"stylesheet",instance:_,count:1,state:S},f.set(h,_)}}}function iE(t,a){Ma.X(t,a);var l=Vi;if(l&&t){var u=Ga(l).hoistableScripts,f=Qi(t),h=u.get(f);h||(h=l.querySelector(ms(f)),h||(t=y({src:t,async:!0},a),(a=Mn.get(f))&&Vd(t,a),h=l.createElement("script"),ft(h),Nt(h,"link",t),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},u.set(f,h))}}function lE(t,a){Ma.M(t,a);var l=Vi;if(l&&t){var u=Ga(l).hoistableScripts,f=Qi(t),h=u.get(f);h||(h=l.querySelector(ms(f)),h||(t=y({src:t,async:!0,type:"module"},a),(a=Mn.get(f))&&Vd(t,a),h=l.createElement("script"),ft(h),Nt(h,"link",t),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},u.set(f,h))}}function $p(t,a,l,u){var f=(f=fe.current)?pc(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Gi(l.href),l=Ga(f).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=Gi(l.href);var h=Ga(f).hoistableStyles,_=h.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,_),(h=f.querySelector(hs(t)))&&!h._p&&(_.instance=h,_.state.loading=5),Mn.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Mn.set(t,l),h||sE(f,t,l,_.state))),a&&u===null)throw Error(i(528,""));return _}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Qi(l),l=Ga(f).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Gi(t){return'href="'+wn(t)+'"'}function hs(t){return'link[rel="stylesheet"]['+t+"]"}function Yp(t){return y({},t,{"data-precedence":t.precedence,precedence:null})}function sE(t,a,l,u){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=t.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Nt(a,"link",l),ft(a),t.head.appendChild(a))}function Qi(t){return'[src="'+wn(t)+'"]'}function ms(t){return"script[async]"+t}function qp(t,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=t.querySelector('style[data-href~="'+wn(l.href)+'"]');if(u)return a.instance=u,ft(u),u;var f=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),ft(u),Nt(u,"style",f),vc(u,l.precedence,t),a.instance=u;case"stylesheet":f=Gi(l.href);var h=t.querySelector(hs(f));if(h)return a.state.loading|=4,a.instance=h,ft(h),h;u=Yp(l),(f=Mn.get(f))&&Xd(u,f),h=(t.ownerDocument||t).createElement("link"),ft(h);var _=h;return _._p=new Promise(function(S,H){_.onload=S,_.onerror=H}),Nt(h,"link",u),a.state.loading|=4,vc(h,l.precedence,t),a.instance=h;case"script":return h=Qi(l.src),(f=t.querySelector(ms(h)))?(a.instance=f,ft(f),f):(u=l,(f=Mn.get(h))&&(u=y({},l),Vd(u,f)),t=t.ownerDocument||t,f=t.createElement("script"),ft(f),Nt(f,"link",u),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,vc(u,l.precedence,t));return a.instance}function vc(t,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,h=f,_=0;_<u.length;_++){var S=u[_];if(S.dataset.precedence===a)h=S;else if(h!==f)break}h?h.parentNode.insertBefore(t,h.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(t,a.firstChild))}function Xd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Vd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var _c=null;function Xp(t,a,l){if(_c===null){var u=new Map,f=_c=new Map;f.set(l,u)}else f=_c,u=f.get(l),u||(u=new Map,f.set(l,u));if(u.has(t))return u;for(u.set(t,null),l=l.getElementsByTagName(t),f=0;f<l.length;f++){var h=l[f];if(!(h[Dr]||h[bt]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var _=h.getAttribute(a)||"";_=t+_;var S=u.get(_);S?S.push(h):u.set(_,[h])}}return u}function Vp(t,a,l){t=t.ownerDocument||t,t.head.insertBefore(l,a==="title"?t.querySelector("head > title"):null)}function uE(t,a,l){if(l===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Gp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var gs=null;function cE(){}function oE(t,a,l){if(gs===null)throw Error(i(475));var u=gs;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Gi(l.href),h=t.querySelector(hs(f));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(u.count++,u=xc.bind(u),t.then(u,u)),a.state.loading|=4,a.instance=h,ft(h);return}h=t.ownerDocument||t,l=Yp(l),(f=Mn.get(f))&&Xd(l,f),h=h.createElement("link"),ft(h);var _=h;_._p=new Promise(function(S,H){_.onload=S,_.onerror=H}),Nt(h,"link",l),a.instance=h}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=xc.bind(u),t.addEventListener("load",a),t.addEventListener("error",a))}}function fE(){if(gs===null)throw Error(i(475));var t=gs;return t.stylesheets&&t.count===0&&Gd(t,t.stylesheets),0<t.count?function(a){var l=setTimeout(function(){if(t.stylesheets&&Gd(t,t.stylesheets),t.unsuspend){var u=t.unsuspend;t.unsuspend=null,u()}},6e4);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l)}}:null}function xc(){if(this.count--,this.count===0){if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var wc=null;function Gd(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,wc=new Map,a.forEach(dE,t),wc=null,xc.call(t))}function dE(t,a){if(!(a.state.loading&4)){var l=wc.get(t);if(l)var u=l.get(null);else{l=new Map,wc.set(t,l);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var _=f[h];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),u=_)}u&&l.set(null,u)}f=a.instance,_=f.getAttribute("data-precedence"),h=l.get(_)||u,h===u&&l.set(null,f),l.set(_,f),this.count++,u=xc.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),h?h.parentNode.insertBefore(f,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var ys={$$typeof:z,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function hE(t,a,l,u,f,h,_,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rr(0),this.hiddenUpdates=Rr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Qp(t,a,l,u,f,h,_,S,H,G,ne,le){return t=new hE(t,a,l,_,S,H,G,le),a=1,h===!0&&(a|=24),h=sn(3,null,null,a),t.current=h,h.stateNode=t,a=Tf(),a.refCount++,t.pooledCache=a,a.refCount++,h.memoizedState={element:u,isDehydrated:l,cache:a},Df(h),t}function Zp(t){return t?(t=Si,t):Si}function Ip(t,a,l,u,f,h){f=Zp(f),u.context===null?u.context=f:u.pendingContext=f,u=Ja(a),u.payload={element:l},h=h===void 0?null:h,h!==null&&(u.callback=h),l=Pa(t,u,a),l!==null&&(dn(l,t,a),Ql(l,t,a))}function Fp(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<a?l:a}}function Qd(t,a){Fp(t,a),(t=t.alternate)&&Fp(t,a)}function Kp(t){if(t.tag===13){var a=bi(t,67108864);a!==null&&dn(a,t,67108864),Qd(t,67108864)}}var bc=!0;function mE(t,a,l,u){var f=M.T;M.T=null;var h=Y.p;try{Y.p=2,Zd(t,a,l,u)}finally{Y.p=h,M.T=f}}function gE(t,a,l,u){var f=M.T;M.T=null;var h=Y.p;try{Y.p=8,Zd(t,a,l,u)}finally{Y.p=h,M.T=f}}function Zd(t,a,l,u){if(bc){var f=Id(u);if(f===null)zd(t,a,u,Sc,l),Pp(t,u);else if(pE(f,t,a,l,u))u.stopPropagation();else if(Pp(t,u),a&4&&-1<yE.indexOf(t)){for(;f!==null;){var h=Va(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var _=Xt(h.pendingLanes);if(_!==0){var S=h;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var H=1<<31-ot(_);S.entanglements[1]|=H,_&=~H}Wn(h),(Xe&6)===0&&(lc=Te()+500,cs(0))}}break;case 13:S=bi(h,2),S!==null&&dn(S,h,2),uc(),Qd(h,2)}if(h=Id(u),h===null&&zd(t,a,u,Sc,l),h===f)break;f=h}f!==null&&u.stopPropagation()}else zd(t,a,u,null,l)}}function Id(t){return t=Po(t),Fd(t)}var Sc=null;function Fd(t){if(Sc=null,t=ha(t),t!==null){var a=c(t);if(a===null)t=null;else{var l=a.tag;if(l===13){if(t=o(a),t!==null)return t;t=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Sc=t,null}function Jp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case jt:return 2;case Qn:return 8;case Zn:case ka:return 32;case fa:return 268435456;default:return 32}default:return 32}}var Kd=!1,fr=null,dr=null,hr=null,ps=new Map,vs=new Map,mr=[],yE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pp(t,a){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":ps.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":vs.delete(a.pointerId)}}function _s(t,a,l,u,f,h){return t===null||t.nativeEvent!==h?(t={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:h,targetContainers:[f]},a!==null&&(a=Va(a),a!==null&&Kp(a)),t):(t.eventSystemFlags|=u,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function pE(t,a,l,u,f){switch(a){case"focusin":return fr=_s(fr,t,a,l,u,f),!0;case"dragenter":return dr=_s(dr,t,a,l,u,f),!0;case"mouseover":return hr=_s(hr,t,a,l,u,f),!0;case"pointerover":var h=f.pointerId;return ps.set(h,_s(ps.get(h)||null,t,a,l,u,f)),!0;case"gotpointercapture":return h=f.pointerId,vs.set(h,_s(vs.get(h)||null,t,a,l,u,f)),!0}return!1}function Wp(t){var a=ha(t.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=o(l),a!==null){t.blockedOn=a,Vo(t.priority,function(){if(l.tag===13){var u=fn();u=El(u);var f=bi(l,u);f!==null&&dn(f,l,u),Qd(l,u)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ec(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var l=Id(t.nativeEvent);if(l===null){l=t.nativeEvent;var u=new l.constructor(l.type,l);Jo=u,l.target.dispatchEvent(u),Jo=null}else return a=Va(l),a!==null&&Kp(a),t.blockedOn=l,!1;a.shift()}return!0}function ev(t,a,l){Ec(t)&&l.delete(a)}function vE(){Kd=!1,fr!==null&&Ec(fr)&&(fr=null),dr!==null&&Ec(dr)&&(dr=null),hr!==null&&Ec(hr)&&(hr=null),ps.forEach(ev),vs.forEach(ev)}function Ac(t,a){t.blockedOn===a&&(t.blockedOn=null,Kd||(Kd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vE)))}var Tc=null;function tv(t){Tc!==t&&(Tc=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Tc===t&&(Tc=null);for(var a=0;a<t.length;a+=3){var l=t[a],u=t[a+1],f=t[a+2];if(typeof u!="function"){if(Fd(u||l)===null)continue;break}var h=Va(l);h!==null&&(t.splice(a,3),a-=3,Ff(h,{pending:!0,data:f,method:l.method,action:u},u,f))}}))}function xs(t){function a(H){return Ac(H,t)}fr!==null&&Ac(fr,t),dr!==null&&Ac(dr,t),hr!==null&&Ac(hr,t),ps.forEach(a),vs.forEach(a);for(var l=0;l<mr.length;l++){var u=mr[l];u.blockedOn===t&&(u.blockedOn=null)}for(;0<mr.length&&(l=mr[0],l.blockedOn===null);)Wp(l),l.blockedOn===null&&mr.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var f=l[u],h=l[u+1],_=f[Bt]||null;if(typeof h=="function")_||tv(l);else if(_){var S=null;if(h&&h.hasAttribute("formAction")){if(f=h,_=h[Bt]||null)S=_.formAction;else if(Fd(f)!==null)continue}else S=_.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),tv(l)}}}function Jd(t){this._internalRoot=t}Cc.prototype.render=Jd.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=fn();Ip(l,u,t,a,null,null)},Cc.prototype.unmount=Jd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Ip(t.current,2,null,t,null,null),uc(),a[Xa]=null}};function Cc(t){this._internalRoot=t}Cc.prototype.unstable_scheduleHydration=function(t){if(t){var a=hu();t={blockedOn:null,target:t,priority:a};for(var l=0;l<mr.length&&a!==0&&a<mr[l].priority;l++);mr.splice(l,0,t),l===0&&Wp(t)}};var nv=n.version;if(nv!=="19.1.0")throw Error(i(527,nv,"19.1.0"));Y.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(a),t=t!==null?m(t):null,t=t===null?null:t.stateNode,t};var _E={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{an=Mc.inject(_E),st=Mc}catch{}}return bs.createRoot=function(t,a){if(!s(t))throw Error(i(299));var l=!1,u="",f=v0,h=_0,_=x0,S=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks)),a=Qp(t,1,!1,null,null,l,u,f,h,_,S,null),t[Xa]=a.current,Ud(t),new Jd(a)},bs.hydrateRoot=function(t,a,l){if(!s(t))throw Error(i(299));var u=!1,f="",h=v0,_=_0,S=x0,H=null,G=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(h=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(H=l.unstable_transitionCallbacks),l.formState!==void 0&&(G=l.formState)),a=Qp(t,1,!0,a,l??null,u,f,h,_,S,H,G),a.context=Zp(null),l=a.current,u=fn(),u=El(u),f=Ja(u),f.callback=null,Pa(l,f,u),l=u,a.current.lanes=l,qa(a,l),Wn(a),t[Xa]=a.current,Ud(t),new Cc(a)},bs.version="19.1.0",bs}var dv;function ME(){if(dv)return eh.exports;dv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),eh.exports=CE(),eh.exports}var RE=ME();const fx=j.createContext(void 0),We=()=>{const e=j.useContext(fx);if(!e)throw new Error("useStateMachine must be used inside <StateMachine>");return e},Rn=({name:e,onEnter:n,onExit:r,transition:i,children:s})=>{const{registerState:c,unregisterState:o,currentState:d}=We();return j.useEffect(()=>{const g={element:s||b.jsx(b.Fragment,{}),onEnter:n,onExit:r,transition:i};return c(e,g),()=>{o(e)}},[e,s,n,r,i,c,o]),d===e?b.jsx(b.Fragment,{children:s}):null},DE=({initial:e,children:n,name:r})=>{const i=`yg-${r??"#"}`,s=j.useCallback(()=>{const z=window.location.hash.startsWith("#?")?window.location.hash.slice(2):"";return new URLSearchParams(z).get(i)},[i]),c=j.useCallback(()=>{const z=new URLSearchParams(window.location.hash.startsWith("#?")?window.location.hash.slice(2):""),C=Array.from(z.entries()).map(([U,O])=>{const B=Number(O);return[U,!isNaN(B)&&O!==""?B:O]});return Object.fromEntries(C)},[]),[o,d]=j.useState(()=>s()??e),g=j.useRef(o);j.useEffect(()=>{g.current=o},[o]);const[m,y]=j.useState(()=>c()),p=j.useRef({}),v=j.useCallback((z,C)=>{p.current[z]=C},[]),x=j.useCallback(z=>{delete p.current[z]},[]),A=j.useCallback(z=>{d(C=>{var O,B,J,X,Z;if(C===z)return C;const U=C?(O=p.current[C])==null?void 0:O.transition:void 0;return U&&!U.includes(z)?(console.warn(`Transition from "${C}" to "${z}" not allowed.`),C):(C&&((J=(B=p.current[C])==null?void 0:B.onExit)==null||J.call(B)),(Z=(X=p.current[z])==null?void 0:X.onEnter)==null||Z.call(X),z)})},[]),w=j.useCallback(z=>{var X;const C=g.current;if(C===z)return;const U=C?(X=p.current[C])==null?void 0:X.transition:void 0;if(U&&!U.includes(z)){console.warn(`Transition from "${C}" to "${z}" not allowed.`);return}const O=window.location.hash.startsWith("#?")?window.location.hash.slice(2):"",B=new URLSearchParams(O);B.set(i,z);const J=`#?${B.toString()}`;window.history.pushState(null,"",J),window.dispatchEvent(new HashChangeEvent("hashchange"))},[i]),E=j.useCallback(()=>{const z=window.location.hash.startsWith("#?")?window.location.hash.slice(2):"",C=new URLSearchParams(z);C.delete(i);const U=C.toString()?`#?${C.toString()}`:"";window.history.pushState(null,"",U),window.dispatchEvent(new HashChangeEvent("hashchange"))},[i]),R=j.useCallback((z,C=!1)=>{y(U=>{const O=C?Object.fromEntries(Object.entries(U).filter(([X])=>X.startsWith("yg-"))):{...U};for(const[X,Z]of Object.entries(z))O[X]=Z;const B=Object.fromEntries(Object.entries(O).map(([X,Z])=>[X,String(Z)])),J=new URLSearchParams(B).toString();return window.location.hash=`?${J}`,O})},[]);j.useEffect(()=>{const z=()=>{const C=s();C?C!==g.current&&A(C):d(void 0),y(c())};return z(),window.addEventListener("hashchange",z),()=>window.removeEventListener("hashchange",z)},[A,s,c]);const D=j.useMemo(()=>{var z;return{currentState:o,gotoState:w,close:E,is:C=>C===o,availableTransitions:o?((z=p.current[o])==null?void 0:z.transition)??[]:[],query:m,setQuery:R,registerState:v,unregisterState:x}},[o,w,E,m,R,v,x]);return b.jsx(fx.Provider,{value:D,children:o?n:null})};function Dn({data:e,replace:n,to:r,children:i,className:s,...c}){const{gotoState:o,is:d,setQuery:g}=We(),m=[s,d(r)?"active":void 0].filter(Boolean).join(" ");return b.jsx("button",{...c,className:m,onClick:()=>{e&&g(e,n),o(r)},children:i??r})}function NE({data:e,machine:n,to:r,children:i,className:s,...c}){return b.jsx("button",{...c,className:s,onClick:()=>{const o=window.location.hash.startsWith("#?")?window.location.hash.slice(2):"",d=new URLSearchParams(o);if(d.set(`yg-${n}`,r),e)for(const[m,y]of Object.entries(e))d.set(m,String(y));const g=`#?${d.toString()}`;window.history.pushState(null,"",g),window.dispatchEvent(new HashChangeEvent("hashchange"))},children:i??r})}const je={CHECKMARK_GREEN:"",DARROW_LEFT:"",EYE:"",EYE_CLOSED:"",FLOPPY_DISK:"",PERSON:"",PLUS:"",RED_X:""};function hv(e,n){const[r,i]=j.useState(()=>{const c=window.localStorage.getItem(e);try{const o=c?JSON.parse(c):void 0;return o!==void 0?o:(window.localStorage.setItem(e,JSON.stringify(n)),n)}catch{return window.localStorage.setItem(e,JSON.stringify(n)),n}}),s=c=>{try{const o=c instanceof Function?c(r):c;i(o),window.localStorage.setItem(e,JSON.stringify(o)),window.dispatchEvent(new CustomEvent("localStorageUpdate",{detail:{key:e,newValue:o}}))}catch(o){console.error(o)}};return j.useEffect(()=>{const c=d=>{if(d.key===e)try{i(d.newValue?JSON.parse(d.newValue):n)}catch{i(n)}},o=d=>{d.detail.key===e&&i(d.detail.newValue)};return window.addEventListener("storage",c),window.addEventListener("localStorageUpdate",o),()=>{window.removeEventListener("storage",c),window.removeEventListener("localStorageUpdate",o)}},[e,n]),[r,s]}function mv(e){if(typeof e!="string")return!1;try{return JSON.parse(e),!0}catch{return!1}}function OE(e="user",n={},r={}){const i=o=>`${e}.${String(o)}`,s=new Map,c=new Proxy(n,{set:(o,d,g)=>{if(typeof window>"u"||typeof d!="string")return!1;const m=d,y=i(m),p=localStorage.getItem(y),v=mv(p)?JSON.parse(p):p;return localStorage.setItem(y,JSON.stringify(g)),window.dispatchEvent(new CustomEvent("store:change",{detail:{property:m,oldValue:v,newValue:g,prefix:e}})),(s.get(m)??[]).forEach(x=>x(g,v)),!0},get:(o,d)=>{if(d==="on")return(m,y)=>{s.has(m)||s.set(m,[]),s.get(m).push(y)};if(d==="off")return(m,y)=>{const p=s.get(m);if(!p)return;const v=p.indexOf(y);v>-1&&p.splice(v,1)};if(typeof d!="string")return;const g=localStorage.getItem(i(d));return mv(g)?JSON.parse(g):g}});return Object.entries(r).forEach(([o,d])=>{const g=o;(c[g]===void 0||c[g]===null)&&(c[g]=d)}),c}function ca(e="user",n={}){const[,r]=j.useState(0),i=j.useRef(null);return!i.current&&typeof window<"u"&&(i.current=OE(e,{},n)),j.useEffect(()=>{const s=()=>r(d=>d+1),c=d=>{var g;((g=d.detail)==null?void 0:g.prefix)===e&&s()},o=d=>{var g;(g=d.key)!=null&&g.startsWith(e+".")&&s()};return window.addEventListener("store:change",c),window.addEventListener("storage",o),()=>{window.removeEventListener("store:change",c),window.removeEventListener("storage",o)}},[e]),i.current??new Proxy({},{get:()=>{},set:()=>!0})}var gv={exports:{}},Ss={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function UE(){if(yv)return Ss;yv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,s,c){var o=null;if(c!==void 0&&(o=""+c),s.key!==void 0&&(o=""+s.key),"key"in s){c={};for(var d in s)d!=="key"&&(c[d]=s[d])}else c=s;return s=c.ref,{$$typeof:e,type:i,key:o,ref:s!==void 0?s:null,props:c}}return Ss.Fragment=n,Ss.jsx=r,Ss.jsxs=r,Ss}var pv;function zE(){return pv||(pv=1,gv.exports=UE()),gv.exports}zE();j.createContext(void 0);function jE(){const e=ca(),n=e.autoSave!==!1&&e.dataFileHandle;return b.jsxs("header",{children:[b.jsx(NE,{className:"plain",machine:"main",to:"main",children:b.jsx("h1",{children:" Poemia "})}),b.jsx("span",{className:"auto-save-indicator",title:n?"Auto-Save On":"Auto-Save Off",children:n?je.CHECKMARK_GREEN:je.RED_X})]})}function HE(){const[e,n]=j.useState(()=>window.localStorage.getItem("openaiKey")||"");return j.useEffect(()=>{e?window.localStorage.setItem("openaiKey",e):window.localStorage.removeItem("openaiKey")},[e]),b.jsx("div",{children:b.jsxs("label",{children:["OpenAI API Key:"," ",b.jsx("input",{type:"password",value:e,onChange:r=>n(r.target.value),placeholder:"sk-..."})]})})}function BE(){return b.jsxs("div",{children:[b.jsx("h2",{children:"Settings"}),b.jsx(HE,{})]})}const Ot=[];for(let e=0;e<256;++e)Ot.push((e+256).toString(16).slice(1));function LE(e,n=0){return(Ot[e[n+0]]+Ot[e[n+1]]+Ot[e[n+2]]+Ot[e[n+3]]+"-"+Ot[e[n+4]]+Ot[e[n+5]]+"-"+Ot[e[n+6]]+Ot[e[n+7]]+"-"+Ot[e[n+8]]+Ot[e[n+9]]+"-"+Ot[e[n+10]]+Ot[e[n+11]]+Ot[e[n+12]]+Ot[e[n+13]]+Ot[e[n+14]]+Ot[e[n+15]]).toLowerCase()}let rh;const kE=new Uint8Array(16);function $E(){if(!rh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");rh=crypto.getRandomValues.bind(crypto)}return rh(kE)}const YE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vv={randomUUID:YE};function qE(e,n,r){var s;if(vv.randomUUID&&!e)return vv.randomUUID();e=e||{};const i=e.random??((s=e.rng)==null?void 0:s.call(e))??$E();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,LE(i)}const XE=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:/;function dx(e){if(e&&typeof e=="object")for(const[n,r]of Object.entries(e))typeof r=="string"&&XE.test(r)?e[n]=new Date(r):typeof r=="object"&&r!==null&&(e[n]=dx(r));return e}function VE(e){try{const n=typeof window<"u"?window.localStorage.getItem(e):null;if(!n)return new Map;const r=JSON.parse(n),i=new Map;for(const s of r){const c=dx(s);i.set(c.id,c)}return i}catch{return new Map}}function ih(e,n){if(typeof window>"u")return;const r=Array.from(n.values());window.localStorage.setItem(e,JSON.stringify(r))}function si(e){const n=VE(e),r=()=>new Date;return{create(i){const s=!i.id||i.id===""?qE():i.id,c=r(),o={...i,id:s,created:c,updated:c};return n.set(s,o),ih(e,n),o},read(i){return n.get(i)},readAll(i){const s=Array.from(n.values());return i?s.filter(c=>c.realmId===i):s},remove(i){const s=n.delete(i);return s&&ih(e,n),s},update(i,s){const c=n.get(i);if(!c)return;const o={...c,...s,updated:r()};return n.set(i,o),ih(e,n),o}}}function dm(e){const n=sa.read(e);if(!n){alert(`Realm ${e} not found`);return}return{realm:n,characters:vt.readAll(n.id),communities:ra.readAll(n.id),concepts:Pt.readAll(n.id),events:la.readAll(n.id),items:yn.readAll(n.id),locations:en.readAll(n.id)}}function GE(e){if(!e.realm||!e.realm.id){alert("Invalid data for merge: missing realm");return}sa.update(e.realm.id,e.realm)||sa.create(e.realm),Array.isArray(e.characters)&&e.characters.forEach(r=>{vt.update(r.id,r)||vt.create(r)}),Array.isArray(e.communities)&&e.communities.forEach(r=>{ra.update(r.id,r)||ra.create(r)}),Array.isArray(e.concepts)&&e.concepts.forEach(r=>{Pt.update(r.id,r)||Pt.create(r)}),Array.isArray(e.events)&&e.events.forEach(r=>{la.update(r.id,r)||la.create(r)}),Array.isArray(e.items)&&e.items.forEach(r=>{yn.update(r.id,r)||yn.create(r)}),Array.isArray(e.locations)&&e.locations.forEach(r=>{en.update(r.id,r)||en.create(r)})}const vt=si("characters"),ra=si("communities"),Pt=si("concepts"),la=si("events"),yn=si("items"),en=si("locations"),sa=si("realms");function _v(e,n){const r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=n,s.click(),URL.revokeObjectURL(i)}function xv(e){if(!e)return"";const n=typeof e=="string"?new Date(e):e;return new Date(n.getTime()-n.getTimezoneOffset()*6e4).toISOString().slice(0,10)}function wv(e){if(!e)return"";const n=typeof e=="string"?new Date(e):e;return new Date(n.getTime()-n.getTimezoneOffset()*6e4).toISOString().slice(0,16)}async function QE(){if("showOpenFilePicker"in window)try{const[e]=await window.showOpenFilePicker({multiple:!1,types:[{description:"JSON files",accept:{"application/json":[".json"]}}]}),r=await(await e.getFile()).text();return{data:JSON.parse(r),handle:e}}catch{return{data:null}}return new Promise(e=>{const n=document.createElement("input");n.type="file",n.accept=".json,application/json",n.onchange=r=>{var c;const i=(c=r.target.files)==null?void 0:c[0];if(!i){e({data:null});return}const s=new FileReader;s.onload=o=>{var d;try{const g=JSON.parse((d=o.target)==null?void 0:d.result);e({data:g})}catch{e({data:null})}},s.onerror=()=>e({data:null}),s.readAsText(i)},n.click()})}async function ZE(e,n){n.includes(".")||(n+=".json");try{if("showSaveFilePicker"in window){const i=await(await window.showSaveFilePicker({suggestedName:n,types:[{description:"JSON files",accept:{"application/json":[".json"]}}]})).createWritable();await i.write(JSON.stringify(e,null,2)),await i.close()}else _v(e,n)}catch{_v(e,n)}}async function IE(e,n){try{const r=await n.createWritable();await r.write(JSON.stringify(e,null,2)),await r.close()}catch(r){console.error("Failed to save to handle",r)}}const FE="_list_jj7og_1",KE={list:FE};function JE(){const[e]=j.useState([]),[n,r]=j.useState([]),[,i]=j.useState([]),s=ca(),c=async()=>{var m,y;const g=await QE();g.data&&(await GE(g.data),g.handle&&(s.dataFileHandle=g.handle,(y=(m=g.data)==null?void 0:m.realm)!=null&&y.id&&(s.dataFileHandleRealmId=g.data.realm.id)),s.autoSave===void 0&&(s.autoSave=!0),o())},o=()=>{const g=sa.readAll();r(g)},d=async(g,m)=>{const y=dm(g);await ZE(y,`${m}.json`)};return j.useEffect(()=>{o()},[]),j.useEffect(()=>{const g=[];for(const m of n)g.push({uuid:m.id,name:m.name});console.debug("DATA:NEWDATA",g),i(g)},[e,n]),b.jsxs("div",{children:[b.jsx("h2",{children:"Data"}),b.jsx("button",{onClick:c,children:"Load Data File"}),b.jsxs("label",{style:{marginLeft:"1em"},children:["Auto-Save",b.jsx("input",{type:"checkbox",checked:s.autoSave!==!1,onChange:g=>s.autoSave=g.target.checked})]}),b.jsx("ul",{className:KE.list,children:n.map(g=>b.jsxs("li",{children:[g.name,b.jsx("button",{onClick:()=>d(g.id,g.name),children:"Save"})]},g.id))})]})}function PE({className:e}){const{query:n,setQuery:r}=We(),[i,s]=j.useState([]),c=()=>{const d=prompt("Enter a name for the new realm");if(!d)return;const g={name:d,description:"new realm"},m=sa.create(g);o(),r({realmId:m.id})},o=()=>{s(sa.readAll())};return j.useEffect(()=>{o()},[]),b.jsxs("div",{className:e,children:[b.jsx("button",{onClick:c,children:je.PLUS}),b.jsxs("select",{onChange:d=>r({realmId:d.target.value}),value:n.realmId,children:[b.jsx("option",{value:"",children:"Select a realm"}),i&&(i==null?void 0:i.map(d=>b.jsx("option",{value:d.id,children:d.name},d.id)))]})]})}async function nn(e,n){if((e==null?void 0:e.autoSave)!==!1&&(e!=null&&e.dataFileHandle)&&n&&e.dataFileHandleRealmId===n){const r=dm(n);r&&await IE(r,e.dataFileHandle)}}function WE(){const{query:e,setQuery:n}=We(),r=e.id,i=ca(),[s,c]=j.useState({}),[o,d]=j.useState([]),[g,m]=j.useState([]),[y,p]=j.useState([]),[v,x]=j.useState(!1),A=()=>{m([...g,{key:"",value:""}])},w=(C={})=>Object.entries(C).map(([U,O])=>({key:U,value:String(O)})),E=C=>{const U={};for(const{key:O,value:B}of C)O&&(U[O]=B);return U},R=C=>{const U=vt.read(C);c({name:"",description:"",properties:{},...U,birth:U!=null&&U.birth?xv(U.birth):"",death:U!=null&&U.death?xv(U.death):""}),d(w((U==null?void 0:U.properties)||{})),m(w((U==null?void 0:U.relations)||{})),U!=null&&U.realmId?p(vt.readAll(U.realmId).sort((O,B)=>{const J=O.birth?new Date(O.birth).getTime():0,X=B.birth?new Date(B.birth).getTime():0;return J-X})):p([])},D=async C=>{prompt(`Type 'yes' to remove the ${s==null?void 0:s.name} character?`)==="yes"&&vt.remove(C),await nn(i,e.realmId),n({id:""})},z=async C=>{C.preventDefault();const U={...s,birth:s!=null&&s.birth?new Date(s.birth):void 0,death:s!=null&&s.death?new Date(s.death):void 0,properties:E(o),relations:E(g)};vt.update(s==null?void 0:s.id,U),await nn(i,e.realmId),n({id:""})};return j.useEffect(()=>{r?R(r):(c({}),d([]),m([]),p([]))},[r]),b.jsxs(b.Fragment,{children:[b.jsxs("form",{onSubmit:z,children:[b.jsx("label",{children:"Name"}),b.jsx("input",{type:"text",required:!0,name:"name",value:(s==null?void 0:s.name)||"",onChange:C=>c({...s,name:C.target.value})}),b.jsx("label",{children:"Description"}),b.jsx("textarea",{autoFocus:!0,name:"description",required:!0,value:(s==null?void 0:s.description)||"",onChange:C=>c({...s,description:C.target.value})}),b.jsx("label",{children:"Birth"}),b.jsx("input",{type:"date",name:"birth",value:(s==null?void 0:s.birth)||"",onChange:C=>c({...s,birth:C.target.value})}),b.jsx("label",{children:"Death"}),b.jsx("input",{type:"date",name:"death",value:(s==null?void 0:s.death)||"",onChange:C=>c({...s,death:C.target.value})}),b.jsx("label",{children:"Attributes"}),b.jsx("div",{children:o.map((C,U)=>b.jsxs("span",{className:"key-value",children:[b.jsx("input",{autoFocus:!0,type:"text",placeholder:"Key",value:C.key,onChange:O=>{const B=[...o];B[U]={...B[U],key:O.target.value},d(B)}}),b.jsx("input",{type:"text",placeholder:"Value",value:C.value,onChange:O=>{const B=[...o];B[U]={...B[U],value:O.target.value},d(B)}}),b.jsx("button",{type:"button",onClick:()=>{const O=o.filter((B,J)=>J!==U);d(O)},children:"x"})]},U))}),b.jsx("label",{children:"Add property"}),b.jsx("span",{children:b.jsx("button",{type:"button",onClick:()=>d([...o,{key:"",value:""}]),children:je.PLUS})}),b.jsx("label",{children:"Relations"}),b.jsx("div",{children:g.map((C,U)=>b.jsxs("span",{className:"key-value",children:[b.jsx("input",{autoFocus:!0,type:"text",placeholder:"Relation",value:C.key,onChange:O=>{const B=[...g];B[U]={...B[U],key:O.target.value},m(B)}}),b.jsxs("select",{value:C.value,onChange:O=>{const B=[...g];B[U]={...B[U],value:O.target.value},m(B)},children:[b.jsx("option",{value:"",children:"Select character"}),y.map(O=>b.jsx("option",{value:O.id,children:O.name},O.id))]}),b.jsx("button",{type:"button",onClick:()=>{const O=g.filter((B,J)=>J!==U);m(O)},children:je.RED_X})]},U))}),b.jsx("span",{children:"Add Relation"}),b.jsx("span",{children:b.jsx("button",{type:"button",onClick:A,children:je.PLUS})}),b.jsx("span",{}),b.jsxs("span",{children:[b.jsx("button",{type:"button",onClick:()=>n({id:""}),children:je.DARROW_LEFT}),b.jsx("button",{type:"submit",children:je.FLOPPY_DISK}),b.jsx("button",{onClick:()=>D(s==null?void 0:s.id),children:je.RED_X})]})]}),b.jsx("button",{onClick:()=>x(!v),children:v?je.EYE_CLOSED:je.EYE}),v&&b.jsx("pre",{children:JSON.stringify(s,null,2)})]})}function Gt(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,i;r<e.length;r++)(i=Gt(e[r]))!==""&&(n+=(n&&" ")+i);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}var lh={exports:{}},sh={},uh={exports:{}},ch={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function e2(){if(bv)return ch;bv=1;var e=Ws();function n(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var r=typeof Object.is=="function"?Object.is:n,i=e.useState,s=e.useEffect,c=e.useLayoutEffect,o=e.useDebugValue;function d(p,v){var x=v(),A=i({inst:{value:x,getSnapshot:v}}),w=A[0].inst,E=A[1];return c(function(){w.value=x,w.getSnapshot=v,g(w)&&E({inst:w})},[p,x,v]),s(function(){return g(w)&&E({inst:w}),p(function(){g(w)&&E({inst:w})})},[p]),o(x),x}function g(p){var v=p.getSnapshot;p=p.value;try{var x=v();return!r(p,x)}catch{return!0}}function m(p,v){return v()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return ch.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,ch}var Sv;function t2(){return Sv||(Sv=1,uh.exports=e2()),uh.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function n2(){if(Ev)return sh;Ev=1;var e=Ws(),n=t2();function r(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var i=typeof Object.is=="function"?Object.is:r,s=n.useSyncExternalStore,c=e.useRef,o=e.useEffect,d=e.useMemo,g=e.useDebugValue;return sh.useSyncExternalStoreWithSelector=function(m,y,p,v,x){var A=c(null);if(A.current===null){var w={hasValue:!1,value:null};A.current=w}else w=A.current;A=d(function(){function R(O){if(!D){if(D=!0,z=O,O=v(O),x!==void 0&&w.hasValue){var B=w.value;if(x(B,O))return C=B}return C=O}if(B=C,i(z,O))return B;var J=v(O);return x!==void 0&&x(B,J)?(z=O,B):(z=O,C=J)}var D=!1,z,C,U=p===void 0?null:p;return[function(){return R(y())},U===null?void 0:function(){return R(U())}]},[y,p,v,x]);var E=s(m,A[0],A[1]);return o(function(){w.hasValue=!0,w.value=E},[E]),g(E),E},sh}var Av;function a2(){return Av||(Av=1,lh.exports=n2()),lh.exports}var r2=a2();const i2=cx(r2),l2={},Tv=e=>{let n;const r=new Set,i=(y,p)=>{const v=typeof y=="function"?y(n):y;if(!Object.is(v,n)){const x=n;n=p??(typeof v!="object"||v===null)?v:Object.assign({},n,v),r.forEach(A=>A(n,x))}},s=()=>n,g={setState:i,getState:s,getInitialState:()=>m,subscribe:y=>(r.add(y),()=>r.delete(y)),destroy:()=>{(l2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},m=n=e(i,s,g);return g},s2=e=>e?Tv(e):Tv,{useDebugValue:u2}=ae,{useSyncExternalStoreWithSelector:c2}=i2,o2=e=>e;function hx(e,n=o2,r){const i=c2(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return u2(i),i}const Cv=(e,n)=>{const r=s2(e),i=(s,c=n)=>hx(r,s,c);return Object.assign(i,r),i},f2=(e,n)=>e?Cv(e,n):Cv;function Yt(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[i,s]of e)if(!Object.is(s,n.get(i)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const i of e)if(!n.has(i))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const i of r)if(!Object.prototype.hasOwnProperty.call(n,i)||!Object.is(e[i],n[i]))return!1;return!0}var d2={value:()=>{}};function Eo(){for(var e=0,n=arguments.length,r={},i;e<n;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Fc(r)}function Fc(e){this._=e}function h2(e,n){return e.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Fc.prototype=Eo.prototype={constructor:Fc,on:function(e,n){var r=this._,i=h2(e+"",r),s,c=-1,o=i.length;if(arguments.length<2){for(;++c<o;)if((s=(e=i[c]).type)&&(s=m2(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<o;)if(s=(e=i[c]).type)r[s]=Mv(r[s],e.name,n);else if(n==null)for(s in r)r[s]=Mv(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new Fc(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,c;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],i=0,s=c.length;i<s;++i)c[i].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],s=0,c=i.length;s<c;++s)i[s].value.apply(n,r)}};function m2(e,n){for(var r=0,i=e.length,s;r<i;++r)if((s=e[r]).name===n)return s.value}function Mv(e,n,r){for(var i=0,s=e.length;i<s;++i)if(e[i].name===n){e[i]=d2,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:n,value:r}),e}var Hh="http://www.w3.org/1999/xhtml";const Rv={svg:"http://www.w3.org/2000/svg",xhtml:Hh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ao(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Rv.hasOwnProperty(n)?{space:Rv[n],local:e}:e}function g2(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Hh&&n.documentElement.namespaceURI===Hh?n.createElement(e):n.createElementNS(r,e)}}function y2(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function mx(e){var n=Ao(e);return(n.local?y2:g2)(n)}function p2(){}function hm(e){return e==null?p2:function(){return this.querySelector(e)}}function v2(e){typeof e!="function"&&(e=hm(e));for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s)for(var c=n[s],o=c.length,d=i[s]=new Array(o),g,m,y=0;y<o;++y)(g=c[y])&&(m=e.call(g,g.__data__,y,c))&&("__data__"in g&&(m.__data__=g.__data__),d[y]=m);return new pn(i,this._parents)}function _2(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function x2(){return[]}function gx(e){return e==null?x2:function(){return this.querySelectorAll(e)}}function w2(e){return function(){return _2(e.apply(this,arguments))}}function b2(e){typeof e=="function"?e=w2(e):e=gx(e);for(var n=this._groups,r=n.length,i=[],s=[],c=0;c<r;++c)for(var o=n[c],d=o.length,g,m=0;m<d;++m)(g=o[m])&&(i.push(e.call(g,g.__data__,m,o)),s.push(g));return new pn(i,s)}function yx(e){return function(){return this.matches(e)}}function px(e){return function(n){return n.matches(e)}}var S2=Array.prototype.find;function E2(e){return function(){return S2.call(this.children,e)}}function A2(){return this.firstElementChild}function T2(e){return this.select(e==null?A2:E2(typeof e=="function"?e:px(e)))}var C2=Array.prototype.filter;function M2(){return Array.from(this.children)}function R2(e){return function(){return C2.call(this.children,e)}}function D2(e){return this.selectAll(e==null?M2:R2(typeof e=="function"?e:px(e)))}function N2(e){typeof e!="function"&&(e=yx(e));for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s)for(var c=n[s],o=c.length,d=i[s]=[],g,m=0;m<o;++m)(g=c[m])&&e.call(g,g.__data__,m,c)&&d.push(g);return new pn(i,this._parents)}function vx(e){return new Array(e.length)}function O2(){return new pn(this._enter||this._groups.map(vx),this._parents)}function lo(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}lo.prototype={constructor:lo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function U2(e){return function(){return e}}function z2(e,n,r,i,s,c){for(var o=0,d,g=n.length,m=c.length;o<m;++o)(d=n[o])?(d.__data__=c[o],i[o]=d):r[o]=new lo(e,c[o]);for(;o<g;++o)(d=n[o])&&(s[o]=d)}function j2(e,n,r,i,s,c,o){var d,g,m=new Map,y=n.length,p=c.length,v=new Array(y),x;for(d=0;d<y;++d)(g=n[d])&&(v[d]=x=o.call(g,g.__data__,d,n)+"",m.has(x)?s[d]=g:m.set(x,g));for(d=0;d<p;++d)x=o.call(e,c[d],d,c)+"",(g=m.get(x))?(i[d]=g,g.__data__=c[d],m.delete(x)):r[d]=new lo(e,c[d]);for(d=0;d<y;++d)(g=n[d])&&m.get(v[d])===g&&(s[d]=g)}function H2(e){return e.__data__}function B2(e,n){if(!arguments.length)return Array.from(this,H2);var r=n?j2:z2,i=this._parents,s=this._groups;typeof e!="function"&&(e=U2(e));for(var c=s.length,o=new Array(c),d=new Array(c),g=new Array(c),m=0;m<c;++m){var y=i[m],p=s[m],v=p.length,x=L2(e.call(y,y&&y.__data__,m,i)),A=x.length,w=d[m]=new Array(A),E=o[m]=new Array(A),R=g[m]=new Array(v);r(y,p,w,E,R,x,n);for(var D=0,z=0,C,U;D<A;++D)if(C=w[D]){for(D>=z&&(z=D+1);!(U=E[z])&&++z<A;);C._next=U||null}}return o=new pn(o,i),o._enter=d,o._exit=g,o}function L2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function k2(){return new pn(this._exit||this._groups.map(vx),this._parents)}function $2(e,n,r){var i=this.enter(),s=this,c=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?c.remove():r(c),i&&s?i.merge(s).order():s}function Y2(e){for(var n=e.selection?e.selection():e,r=this._groups,i=n._groups,s=r.length,c=i.length,o=Math.min(s,c),d=new Array(s),g=0;g<o;++g)for(var m=r[g],y=i[g],p=m.length,v=d[g]=new Array(p),x,A=0;A<p;++A)(x=m[A]||y[A])&&(v[A]=x);for(;g<s;++g)d[g]=r[g];return new pn(d,this._parents)}function q2(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var i=e[n],s=i.length-1,c=i[s],o;--s>=0;)(o=i[s])&&(c&&o.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(o,c),c=o);return this}function X2(e){e||(e=V2);function n(p,v){return p&&v?e(p.__data__,v.__data__):!p-!v}for(var r=this._groups,i=r.length,s=new Array(i),c=0;c<i;++c){for(var o=r[c],d=o.length,g=s[c]=new Array(d),m,y=0;y<d;++y)(m=o[y])&&(g[y]=m);g.sort(n)}return new pn(s,this._parents).order()}function V2(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function G2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Q2(){return Array.from(this)}function Z2(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,c=i.length;s<c;++s){var o=i[s];if(o)return o}return null}function I2(){let e=0;for(const n of this)++e;return e}function F2(){return!this.node()}function K2(e){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var s=n[r],c=0,o=s.length,d;c<o;++c)(d=s[c])&&e.call(d,d.__data__,c,s);return this}function J2(e){return function(){this.removeAttribute(e)}}function P2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function W2(e,n){return function(){this.setAttribute(e,n)}}function eA(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function tA(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function nA(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function aA(e,n){var r=Ao(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((n==null?r.local?P2:J2:typeof n=="function"?r.local?nA:tA:r.local?eA:W2)(r,n))}function _x(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function rA(e){return function(){this.style.removeProperty(e)}}function iA(e,n,r){return function(){this.style.setProperty(e,n,r)}}function lA(e,n,r){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function sA(e,n,r){return arguments.length>1?this.each((n==null?rA:typeof n=="function"?lA:iA)(e,n,r??"")):gl(this.node(),e)}function gl(e,n){return e.style.getPropertyValue(n)||_x(e).getComputedStyle(e,null).getPropertyValue(n)}function uA(e){return function(){delete this[e]}}function cA(e,n){return function(){this[e]=n}}function oA(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function fA(e,n){return arguments.length>1?this.each((n==null?uA:typeof n=="function"?oA:cA)(e,n)):this.node()[e]}function xx(e){return e.trim().split(/^|\s+/)}function mm(e){return e.classList||new wx(e)}function wx(e){this._node=e,this._names=xx(e.getAttribute("class")||"")}wx.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function bx(e,n){for(var r=mm(e),i=-1,s=n.length;++i<s;)r.add(n[i])}function Sx(e,n){for(var r=mm(e),i=-1,s=n.length;++i<s;)r.remove(n[i])}function dA(e){return function(){bx(this,e)}}function hA(e){return function(){Sx(this,e)}}function mA(e,n){return function(){(n.apply(this,arguments)?bx:Sx)(this,e)}}function gA(e,n){var r=xx(e+"");if(arguments.length<2){for(var i=mm(this.node()),s=-1,c=r.length;++s<c;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?mA:n?dA:hA)(r,n))}function yA(){this.textContent=""}function pA(e){return function(){this.textContent=e}}function vA(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function _A(e){return arguments.length?this.each(e==null?yA:(typeof e=="function"?vA:pA)(e)):this.node().textContent}function xA(){this.innerHTML=""}function wA(e){return function(){this.innerHTML=e}}function bA(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function SA(e){return arguments.length?this.each(e==null?xA:(typeof e=="function"?bA:wA)(e)):this.node().innerHTML}function EA(){this.nextSibling&&this.parentNode.appendChild(this)}function AA(){return this.each(EA)}function TA(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function CA(){return this.each(TA)}function MA(e){var n=typeof e=="function"?e:mx(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function RA(){return null}function DA(e,n){var r=typeof e=="function"?e:mx(e),i=n==null?RA:typeof n=="function"?n:hm(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function NA(){var e=this.parentNode;e&&e.removeChild(this)}function OA(){return this.each(NA)}function UA(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function zA(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function jA(e){return this.select(e?zA:UA)}function HA(e){return arguments.length?this.property("__data__",e):this.node().__data__}function BA(e){return function(n){e.call(this,n,this.__data__)}}function LA(e){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");return i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),{type:n,name:r}})}function kA(e){return function(){var n=this.__on;if(n){for(var r=0,i=-1,s=n.length,c;r<s;++r)c=n[r],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):n[++i]=c;++i?n.length=i:delete this.__on}}}function $A(e,n,r){return function(){var i=this.__on,s,c=BA(n);if(i){for(var o=0,d=i.length;o<d;++o)if((s=i[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=c,s.options=r),s.value=n;return}}this.addEventListener(e.type,c,r),s={type:e.type,name:e.name,value:n,listener:c,options:r},i?i.push(s):this.__on=[s]}}function YA(e,n,r){var i=LA(e+""),s,c=i.length,o;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,m=d.length,y;g<m;++g)for(s=0,y=d[g];s<c;++s)if((o=i[s]).type===y.type&&o.name===y.name)return y.value}return}for(d=n?$A:kA,s=0;s<c;++s)this.each(d(i[s],n,r));return this}function Ex(e,n,r){var i=_x(e),s=i.CustomEvent;typeof s=="function"?s=new s(n,r):(s=i.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),e.dispatchEvent(s)}function qA(e,n){return function(){return Ex(this,e,n)}}function XA(e,n){return function(){return Ex(this,e,n.apply(this,arguments))}}function VA(e,n){return this.each((typeof n=="function"?XA:qA)(e,n))}function*GA(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,c=i.length,o;s<c;++s)(o=i[s])&&(yield o)}var Ax=[null];function pn(e,n){this._groups=e,this._parents=n}function eu(){return new pn([[document.documentElement]],Ax)}function QA(){return this}pn.prototype=eu.prototype={constructor:pn,select:v2,selectAll:b2,selectChild:T2,selectChildren:D2,filter:N2,data:B2,enter:O2,exit:k2,join:$2,merge:Y2,selection:QA,order:q2,sort:X2,call:G2,nodes:Q2,node:Z2,size:I2,empty:F2,each:K2,attr:aA,style:sA,property:fA,classed:gA,text:_A,html:SA,raise:AA,lower:CA,append:MA,insert:DA,remove:OA,clone:jA,datum:HA,on:YA,dispatch:VA,[Symbol.iterator]:GA};function Wt(e){return typeof e=="string"?new pn([[document.querySelector(e)]],[document.documentElement]):new pn([[e]],Ax)}function ZA(e){let n;for(;n=e.sourceEvent;)e=n;return e}function ta(e,n){if(e=ZA(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var s=n.getBoundingClientRect();return[e.clientX-s.left-n.clientLeft,e.clientY-s.top-n.clientTop]}}return[e.pageX,e.pageY]}const IA={passive:!1},Vs={capture:!0,passive:!1};function oh(e){e.stopImmediatePropagation()}function ul(e){e.preventDefault(),e.stopImmediatePropagation()}function Tx(e){var n=e.document.documentElement,r=Wt(e).on("dragstart.drag",ul,Vs);"onselectstart"in n?r.on("selectstart.drag",ul,Vs):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Cx(e,n){var r=e.document.documentElement,i=Wt(e).on("dragstart.drag",null);n&&(i.on("click.drag",ul,Vs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Rc=e=>()=>e;function Bh(e,{sourceEvent:n,subject:r,target:i,identifier:s,active:c,x:o,y:d,dx:g,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Bh.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function FA(e){return!e.ctrlKey&&!e.button}function KA(){return this.parentNode}function JA(e,n){return n??{x:e.x,y:e.y}}function PA(){return navigator.maxTouchPoints||"ontouchstart"in this}function WA(){var e=FA,n=KA,r=JA,i=PA,s={},c=Eo("start","drag","end"),o=0,d,g,m,y,p=0;function v(C){C.on("mousedown.drag",x).filter(i).on("touchstart.drag",E).on("touchmove.drag",R,IA).on("touchend.drag touchcancel.drag",D).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(C,U){if(!(y||!e.call(this,C,U))){var O=z(this,n.call(this,C,U),C,U,"mouse");O&&(Wt(C.view).on("mousemove.drag",A,Vs).on("mouseup.drag",w,Vs),Tx(C.view),oh(C),m=!1,d=C.clientX,g=C.clientY,O("start",C))}}function A(C){if(ul(C),!m){var U=C.clientX-d,O=C.clientY-g;m=U*U+O*O>p}s.mouse("drag",C)}function w(C){Wt(C.view).on("mousemove.drag mouseup.drag",null),Cx(C.view,m),ul(C),s.mouse("end",C)}function E(C,U){if(e.call(this,C,U)){var O=C.changedTouches,B=n.call(this,C,U),J=O.length,X,Z;for(X=0;X<J;++X)(Z=z(this,B,C,U,O[X].identifier,O[X]))&&(oh(C),Z("start",C,O[X]))}}function R(C){var U=C.changedTouches,O=U.length,B,J;for(B=0;B<O;++B)(J=s[U[B].identifier])&&(ul(C),J("drag",C,U[B]))}function D(C){var U=C.changedTouches,O=U.length,B,J;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),B=0;B<O;++B)(J=s[U[B].identifier])&&(oh(C),J("end",C,U[B]))}function z(C,U,O,B,J,X){var Z=c.copy(),P=ta(X||O,U),se,te,N;if((N=r.call(C,new Bh("beforestart",{sourceEvent:O,target:v,identifier:J,active:o,x:P[0],y:P[1],dx:0,dy:0,dispatch:Z}),B))!=null)return se=N.x-P[0]||0,te=N.y-P[1]||0,function I(M,Y,W){var $=P,T;switch(M){case"start":s[J]=I,T=o++;break;case"end":delete s[J],--o;case"drag":P=ta(W||Y,U),T=o;break}Z.call(M,C,new Bh(M,{sourceEvent:Y,subject:N,target:v,identifier:J,active:T,x:P[0]+se,y:P[1]+te,dx:P[0]-$[0],dy:P[1]-$[1],dispatch:Z}),B)}}return v.filter=function(C){return arguments.length?(e=typeof C=="function"?C:Rc(!!C),v):e},v.container=function(C){return arguments.length?(n=typeof C=="function"?C:Rc(C),v):n},v.subject=function(C){return arguments.length?(r=typeof C=="function"?C:Rc(C),v):r},v.touchable=function(C){return arguments.length?(i=typeof C=="function"?C:Rc(!!C),v):i},v.on=function(){var C=c.on.apply(c,arguments);return C===c?v:C},v.clickDistance=function(C){return arguments.length?(p=(C=+C)*C,v):Math.sqrt(p)},v}function gm(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function Mx(e,n){var r=Object.create(e.prototype);for(var i in n)r[i]=n[i];return r}function tu(){}var Gs=.7,so=1/Gs,cl="\\s*([+-]?\\d+)\\s*",Qs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eT=/^#([0-9a-f]{3,8})$/,tT=new RegExp(`^rgb\\(${cl},${cl},${cl}\\)$`),nT=new RegExp(`^rgb\\(${ua},${ua},${ua}\\)$`),aT=new RegExp(`^rgba\\(${cl},${cl},${cl},${Qs}\\)$`),rT=new RegExp(`^rgba\\(${ua},${ua},${ua},${Qs}\\)$`),iT=new RegExp(`^hsl\\(${Qs},${ua},${ua}\\)$`),lT=new RegExp(`^hsla\\(${Qs},${ua},${ua},${Qs}\\)$`),Dv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gm(tu,ni,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Nv,formatHex:Nv,formatHex8:sT,formatHsl:uT,formatRgb:Ov,toString:Ov});function Nv(){return this.rgb().formatHex()}function sT(){return this.rgb().formatHex8()}function uT(){return Rx(this).formatHsl()}function Ov(){return this.rgb().formatRgb()}function ni(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=eT.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Uv(n):r===3?new tn(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Dc(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Dc(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=tT.exec(e))?new tn(n[1],n[2],n[3],1):(n=nT.exec(e))?new tn(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=aT.exec(e))?Dc(n[1],n[2],n[3],n[4]):(n=rT.exec(e))?Dc(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=iT.exec(e))?Hv(n[1],n[2]/100,n[3]/100,1):(n=lT.exec(e))?Hv(n[1],n[2]/100,n[3]/100,n[4]):Dv.hasOwnProperty(e)?Uv(Dv[e]):e==="transparent"?new tn(NaN,NaN,NaN,0):null}function Uv(e){return new tn(e>>16&255,e>>8&255,e&255,1)}function Dc(e,n,r,i){return i<=0&&(e=n=r=NaN),new tn(e,n,r,i)}function cT(e){return e instanceof tu||(e=ni(e)),e?(e=e.rgb(),new tn(e.r,e.g,e.b,e.opacity)):new tn}function Lh(e,n,r,i){return arguments.length===1?cT(e):new tn(e,n,r,i??1)}function tn(e,n,r,i){this.r=+e,this.g=+n,this.b=+r,this.opacity=+i}gm(tn,Lh,Mx(tu,{brighter(e){return e=e==null?so:Math.pow(so,e),new tn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gs:Math.pow(Gs,e),new tn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tn(ti(this.r),ti(this.g),ti(this.b),uo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zv,formatHex:zv,formatHex8:oT,formatRgb:jv,toString:jv}));function zv(){return`#${Pr(this.r)}${Pr(this.g)}${Pr(this.b)}`}function oT(){return`#${Pr(this.r)}${Pr(this.g)}${Pr(this.b)}${Pr((isNaN(this.opacity)?1:this.opacity)*255)}`}function jv(){const e=uo(this.opacity);return`${e===1?"rgb(":"rgba("}${ti(this.r)}, ${ti(this.g)}, ${ti(this.b)}${e===1?")":`, ${e})`}`}function uo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ti(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pr(e){return e=ti(e),(e<16?"0":"")+e.toString(16)}function Hv(e,n,r,i){return i<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new qn(e,n,r,i)}function Rx(e){if(e instanceof qn)return new qn(e.h,e.s,e.l,e.opacity);if(e instanceof tu||(e=ni(e)),!e)return new qn;if(e instanceof qn)return e;e=e.rgb();var n=e.r/255,r=e.g/255,i=e.b/255,s=Math.min(n,r,i),c=Math.max(n,r,i),o=NaN,d=c-s,g=(c+s)/2;return d?(n===c?o=(r-i)/d+(r<i)*6:r===c?o=(i-n)/d+2:o=(n-r)/d+4,d/=g<.5?c+s:2-c-s,o*=60):d=g>0&&g<1?0:o,new qn(o,d,g,e.opacity)}function fT(e,n,r,i){return arguments.length===1?Rx(e):new qn(e,n,r,i??1)}function qn(e,n,r,i){this.h=+e,this.s=+n,this.l=+r,this.opacity=+i}gm(qn,fT,Mx(tu,{brighter(e){return e=e==null?so:Math.pow(so,e),new qn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gs:Math.pow(Gs,e),new qn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,s=2*r-i;return new tn(fh(e>=240?e-240:e+120,s,i),fh(e,s,i),fh(e<120?e+240:e-120,s,i),this.opacity)},clamp(){return new qn(Bv(this.h),Nc(this.s),Nc(this.l),uo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uo(this.opacity);return`${e===1?"hsl(":"hsla("}${Bv(this.h)}, ${Nc(this.s)*100}%, ${Nc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Bv(e){return e=(e||0)%360,e<0?e+360:e}function Nc(e){return Math.max(0,Math.min(1,e||0))}function fh(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const ym=e=>()=>e;function dT(e,n){return function(r){return e+r*n}}function hT(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(i){return Math.pow(e+i*n,r)}}function mT(e){return(e=+e)==1?Dx:function(n,r){return r-n?hT(n,r,e):ym(isNaN(n)?r:n)}}function Dx(e,n){var r=n-e;return r?dT(e,r):ym(isNaN(e)?n:e)}const co=function e(n){var r=mT(n);function i(s,c){var o=r((s=Lh(s)).r,(c=Lh(c)).r),d=r(s.g,c.g),g=r(s.b,c.b),m=Dx(s.opacity,c.opacity);return function(y){return s.r=o(y),s.g=d(y),s.b=g(y),s.opacity=m(y),s+""}}return i.gamma=e,i}(1);function gT(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,i=n.slice(),s;return function(c){for(s=0;s<r;++s)i[s]=e[s]*(1-c)+n[s]*c;return i}}function yT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pT(e,n){var r=n?n.length:0,i=e?Math.min(r,e.length):0,s=new Array(i),c=new Array(r),o;for(o=0;o<i;++o)s[o]=pm(e[o],n[o]);for(;o<r;++o)c[o]=n[o];return function(d){for(o=0;o<i;++o)c[o]=s[o](d);return c}}function vT(e,n){var r=new Date;return e=+e,n=+n,function(i){return r.setTime(e*(1-i)+n*i),r}}function Yn(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function _T(e,n){var r={},i={},s;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(s in n)s in e?r[s]=pm(e[s],n[s]):i[s]=n[s];return function(c){for(s in r)i[s]=r[s](c);return i}}var kh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dh=new RegExp(kh.source,"g");function xT(e){return function(){return e}}function wT(e){return function(n){return e(n)+""}}function Nx(e,n){var r=kh.lastIndex=dh.lastIndex=0,i,s,c,o=-1,d=[],g=[];for(e=e+"",n=n+"";(i=kh.exec(e))&&(s=dh.exec(n));)(c=s.index)>r&&(c=n.slice(r,c),d[o]?d[o]+=c:d[++o]=c),(i=i[0])===(s=s[0])?d[o]?d[o]+=s:d[++o]=s:(d[++o]=null,g.push({i:o,x:Yn(i,s)})),r=dh.lastIndex;return r<n.length&&(c=n.slice(r),d[o]?d[o]+=c:d[++o]=c),d.length<2?g[0]?wT(g[0].x):xT(n):(n=g.length,function(m){for(var y=0,p;y<n;++y)d[(p=g[y]).i]=p.x(m);return d.join("")})}function pm(e,n){var r=typeof n,i;return n==null||r==="boolean"?ym(n):(r==="number"?Yn:r==="string"?(i=ni(n))?(n=i,co):Nx:n instanceof ni?co:n instanceof Date?vT:yT(n)?gT:Array.isArray(n)?pT:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?_T:Yn)(e,n)}function bT(e,n){return e=+e,n=+n,function(r){return Math.round(e*(1-r)+n*r)}}var Lv=180/Math.PI,$h={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ox(e,n,r,i,s,c){var o,d,g;return(o=Math.sqrt(e*e+n*n))&&(e/=o,n/=o),(g=e*r+n*i)&&(r-=e*g,i-=n*g),(d=Math.sqrt(r*r+i*i))&&(r/=d,i/=d,g/=d),e*i<n*r&&(e=-e,n=-n,g=-g,o=-o),{translateX:s,translateY:c,rotate:Math.atan2(n,e)*Lv,skewX:Math.atan(g)*Lv,scaleX:o,scaleY:d}}var Oc;function ST(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?$h:Ox(n.a,n.b,n.c,n.d,n.e,n.f)}function ET(e){return e==null||(Oc||(Oc=document.createElementNS("http://www.w3.org/2000/svg","g")),Oc.setAttribute("transform",e),!(e=Oc.transform.baseVal.consolidate()))?$h:(e=e.matrix,Ox(e.a,e.b,e.c,e.d,e.e,e.f))}function Ux(e,n,r,i){function s(m){return m.length?m.pop()+" ":""}function c(m,y,p,v,x,A){if(m!==p||y!==v){var w=x.push("translate(",null,n,null,r);A.push({i:w-4,x:Yn(m,p)},{i:w-2,x:Yn(y,v)})}else(p||v)&&x.push("translate("+p+n+v+r)}function o(m,y,p,v){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),v.push({i:p.push(s(p)+"rotate(",null,i)-2,x:Yn(m,y)})):y&&p.push(s(p)+"rotate("+y+i)}function d(m,y,p,v){m!==y?v.push({i:p.push(s(p)+"skewX(",null,i)-2,x:Yn(m,y)}):y&&p.push(s(p)+"skewX("+y+i)}function g(m,y,p,v,x,A){if(m!==p||y!==v){var w=x.push(s(x)+"scale(",null,",",null,")");A.push({i:w-4,x:Yn(m,p)},{i:w-2,x:Yn(y,v)})}else(p!==1||v!==1)&&x.push(s(x)+"scale("+p+","+v+")")}return function(m,y){var p=[],v=[];return m=e(m),y=e(y),c(m.translateX,m.translateY,y.translateX,y.translateY,p,v),o(m.rotate,y.rotate,p,v),d(m.skewX,y.skewX,p,v),g(m.scaleX,m.scaleY,y.scaleX,y.scaleY,p,v),m=y=null,function(x){for(var A=-1,w=v.length,E;++A<w;)p[(E=v[A]).i]=E.x(x);return p.join("")}}}var AT=Ux(ST,"px, ","px)","deg)"),TT=Ux(ET,", ",")",")"),CT=1e-12;function kv(e){return((e=Math.exp(e))+1/e)/2}function MT(e){return((e=Math.exp(e))-1/e)/2}function RT(e){return((e=Math.exp(2*e))-1)/(e+1)}const DT=function e(n,r,i){function s(c,o){var d=c[0],g=c[1],m=c[2],y=o[0],p=o[1],v=o[2],x=y-d,A=p-g,w=x*x+A*A,E,R;if(w<CT)R=Math.log(v/m)/n,E=function(B){return[d+B*x,g+B*A,m*Math.exp(n*B*R)]};else{var D=Math.sqrt(w),z=(v*v-m*m+i*w)/(2*m*r*D),C=(v*v-m*m-i*w)/(2*v*r*D),U=Math.log(Math.sqrt(z*z+1)-z),O=Math.log(Math.sqrt(C*C+1)-C);R=(O-U)/n,E=function(B){var J=B*R,X=kv(U),Z=m/(r*D)*(X*RT(n*J+U)-MT(U));return[d+Z*x,g+Z*A,m*X/kv(n*J+U)]}}return E.duration=R*1e3*n/Math.SQRT2,E}return s.rho=function(c){var o=Math.max(.001,+c),d=o*o,g=d*d;return e(o,d,g)},s}(Math.SQRT2,2,4);var yl=0,Os=0,Es=0,zx=1e3,oo,Us,fo=0,ai=0,To=0,Zs=typeof performance=="object"&&performance.now?performance:Date,jx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function vm(){return ai||(jx(NT),ai=Zs.now()+To)}function NT(){ai=0}function ho(){this._call=this._time=this._next=null}ho.prototype=Hx.prototype={constructor:ho,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?vm():+r)+(n==null?0:+n),!this._next&&Us!==this&&(Us?Us._next=this:oo=this,Us=this),this._call=e,this._time=r,Yh()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yh())}};function Hx(e,n,r){var i=new ho;return i.restart(e,n,r),i}function OT(){vm(),++yl;for(var e=oo,n;e;)(n=ai-e._time)>=0&&e._call.call(void 0,n),e=e._next;--yl}function $v(){ai=(fo=Zs.now())+To,yl=Os=0;try{OT()}finally{yl=0,zT(),ai=0}}function UT(){var e=Zs.now(),n=e-fo;n>zx&&(To-=n,fo=e)}function zT(){for(var e,n=oo,r,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:oo=r);Us=e,Yh(i)}function Yh(e){if(!yl){Os&&(Os=clearTimeout(Os));var n=e-ai;n>24?(e<1/0&&(Os=setTimeout($v,e-Zs.now()-To)),Es&&(Es=clearInterval(Es))):(Es||(fo=Zs.now(),Es=setInterval(UT,zx)),yl=1,jx($v))}}function Yv(e,n,r){var i=new ho;return n=n==null?0:+n,i.restart(s=>{i.stop(),e(s+n)},n,r),i}var jT=Eo("start","end","cancel","interrupt"),HT=[],Bx=0,qv=1,qh=2,Kc=3,Xv=4,Xh=5,Jc=6;function Co(e,n,r,i,s,c){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;BT(e,r,{name:n,index:i,group:s,on:jT,tween:HT,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:Bx})}function _m(e,n){var r=Gn(e,n);if(r.state>Bx)throw new Error("too late; already scheduled");return r}function oa(e,n){var r=Gn(e,n);if(r.state>Kc)throw new Error("too late; already running");return r}function Gn(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function BT(e,n,r){var i=e.__transition,s;i[n]=r,r.timer=Hx(c,0,r.time);function c(m){r.state=qv,r.timer.restart(o,r.delay,r.time),r.delay<=m&&o(m-r.delay)}function o(m){var y,p,v,x;if(r.state!==qv)return g();for(y in i)if(x=i[y],x.name===r.name){if(x.state===Kc)return Yv(o);x.state===Xv?(x.state=Jc,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete i[y]):+y<n&&(x.state=Jc,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete i[y])}if(Yv(function(){r.state===Kc&&(r.state=Xv,r.timer.restart(d,r.delay,r.time),d(m))}),r.state=qh,r.on.call("start",e,e.__data__,r.index,r.group),r.state===qh){for(r.state=Kc,s=new Array(v=r.tween.length),y=0,p=-1;y<v;++y)(x=r.tween[y].value.call(e,e.__data__,r.index,r.group))&&(s[++p]=x);s.length=p+1}}function d(m){for(var y=m<r.duration?r.ease.call(null,m/r.duration):(r.timer.restart(g),r.state=Xh,1),p=-1,v=s.length;++p<v;)s[p].call(e,y);r.state===Xh&&(r.on.call("end",e,e.__data__,r.index,r.group),g())}function g(){r.state=Jc,r.timer.stop(),delete i[n];for(var m in i)return;delete e.__transition}}function Pc(e,n){var r=e.__transition,i,s,c=!0,o;if(r){n=n==null?null:n+"";for(o in r){if((i=r[o]).name!==n){c=!1;continue}s=i.state>qh&&i.state<Xh,i.state=Jc,i.timer.stop(),i.on.call(s?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[o]}c&&delete e.__transition}}function LT(e){return this.each(function(){Pc(this,e)})}function kT(e,n){var r,i;return function(){var s=oa(this,e),c=s.tween;if(c!==r){i=r=c;for(var o=0,d=i.length;o<d;++o)if(i[o].name===n){i=i.slice(),i.splice(o,1);break}}s.tween=i}}function $T(e,n,r){var i,s;if(typeof r!="function")throw new Error;return function(){var c=oa(this,e),o=c.tween;if(o!==i){s=(i=o).slice();for(var d={name:n,value:r},g=0,m=s.length;g<m;++g)if(s[g].name===n){s[g]=d;break}g===m&&s.push(d)}c.tween=s}}function YT(e,n){var r=this._id;if(e+="",arguments.length<2){for(var i=Gn(this.node(),r).tween,s=0,c=i.length,o;s<c;++s)if((o=i[s]).name===e)return o.value;return null}return this.each((n==null?kT:$T)(r,e,n))}function xm(e,n,r){var i=e._id;return e.each(function(){var s=oa(this,i);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return Gn(s,i).value[n]}}function Lx(e,n){var r;return(typeof n=="number"?Yn:n instanceof ni?co:(r=ni(n))?(n=r,co):Nx)(e,n)}function qT(e){return function(){this.removeAttribute(e)}}function XT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function VT(e,n,r){var i,s=r+"",c;return function(){var o=this.getAttribute(e);return o===s?null:o===i?c:c=n(i=o,r)}}function GT(e,n,r){var i,s=r+"",c;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===i?c:c=n(i=o,r)}}function QT(e,n,r){var i,s,c;return function(){var o,d=r(this),g;return d==null?void this.removeAttribute(e):(o=this.getAttribute(e),g=d+"",o===g?null:o===i&&g===s?c:(s=g,c=n(i=o,d)))}}function ZT(e,n,r){var i,s,c;return function(){var o,d=r(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),g=d+"",o===g?null:o===i&&g===s?c:(s=g,c=n(i=o,d)))}}function IT(e,n){var r=Ao(e),i=r==="transform"?TT:Lx;return this.attrTween(e,typeof n=="function"?(r.local?ZT:QT)(r,i,xm(this,"attr."+e,n)):n==null?(r.local?XT:qT)(r):(r.local?GT:VT)(r,i,n))}function FT(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function KT(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function JT(e,n){var r,i;function s(){var c=n.apply(this,arguments);return c!==i&&(r=(i=c)&&KT(e,c)),r}return s._value=n,s}function PT(e,n){var r,i;function s(){var c=n.apply(this,arguments);return c!==i&&(r=(i=c)&&FT(e,c)),r}return s._value=n,s}function WT(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var i=Ao(e);return this.tween(r,(i.local?JT:PT)(i,n))}function eC(e,n){return function(){_m(this,e).delay=+n.apply(this,arguments)}}function tC(e,n){return n=+n,function(){_m(this,e).delay=n}}function nC(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?eC:tC)(n,e)):Gn(this.node(),n).delay}function aC(e,n){return function(){oa(this,e).duration=+n.apply(this,arguments)}}function rC(e,n){return n=+n,function(){oa(this,e).duration=n}}function iC(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?aC:rC)(n,e)):Gn(this.node(),n).duration}function lC(e,n){if(typeof n!="function")throw new Error;return function(){oa(this,e).ease=n}}function sC(e){var n=this._id;return arguments.length?this.each(lC(n,e)):Gn(this.node(),n).ease}function uC(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;oa(this,e).ease=r}}function cC(e){if(typeof e!="function")throw new Error;return this.each(uC(this._id,e))}function oC(e){typeof e!="function"&&(e=yx(e));for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s)for(var c=n[s],o=c.length,d=i[s]=[],g,m=0;m<o;++m)(g=c[m])&&e.call(g,g.__data__,m,c)&&d.push(g);return new ja(i,this._parents,this._name,this._id)}function fC(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,i=n.length,s=r.length,c=Math.min(i,s),o=new Array(i),d=0;d<c;++d)for(var g=n[d],m=r[d],y=g.length,p=o[d]=new Array(y),v,x=0;x<y;++x)(v=g[x]||m[x])&&(p[x]=v);for(;d<i;++d)o[d]=n[d];return new ja(o,this._parents,this._name,this._id)}function dC(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function hC(e,n,r){var i,s,c=dC(n)?_m:oa;return function(){var o=c(this,e),d=o.on;d!==i&&(s=(i=d).copy()).on(n,r),o.on=s}}function mC(e,n){var r=this._id;return arguments.length<2?Gn(this.node(),r).on.on(e):this.each(hC(r,e,n))}function gC(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function yC(){return this.on("end.remove",gC(this._id))}function pC(e){var n=this._name,r=this._id;typeof e!="function"&&(e=hm(e));for(var i=this._groups,s=i.length,c=new Array(s),o=0;o<s;++o)for(var d=i[o],g=d.length,m=c[o]=new Array(g),y,p,v=0;v<g;++v)(y=d[v])&&(p=e.call(y,y.__data__,v,d))&&("__data__"in y&&(p.__data__=y.__data__),m[v]=p,Co(m[v],n,r,v,m,Gn(y,r)));return new ja(c,this._parents,n,r)}function vC(e){var n=this._name,r=this._id;typeof e!="function"&&(e=gx(e));for(var i=this._groups,s=i.length,c=[],o=[],d=0;d<s;++d)for(var g=i[d],m=g.length,y,p=0;p<m;++p)if(y=g[p]){for(var v=e.call(y,y.__data__,p,g),x,A=Gn(y,r),w=0,E=v.length;w<E;++w)(x=v[w])&&Co(x,n,r,w,v,A);c.push(v),o.push(y)}return new ja(c,o,n,r)}var _C=eu.prototype.constructor;function xC(){return new _C(this._groups,this._parents)}function wC(e,n){var r,i,s;return function(){var c=gl(this,e),o=(this.style.removeProperty(e),gl(this,e));return c===o?null:c===r&&o===i?s:s=n(r=c,i=o)}}function kx(e){return function(){this.style.removeProperty(e)}}function bC(e,n,r){var i,s=r+"",c;return function(){var o=gl(this,e);return o===s?null:o===i?c:c=n(i=o,r)}}function SC(e,n,r){var i,s,c;return function(){var o=gl(this,e),d=r(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),gl(this,e))),o===g?null:o===i&&g===s?c:(s=g,c=n(i=o,d))}}function EC(e,n){var r,i,s,c="style."+n,o="end."+c,d;return function(){var g=oa(this,e),m=g.on,y=g.value[c]==null?d||(d=kx(n)):void 0;(m!==r||s!==y)&&(i=(r=m).copy()).on(o,s=y),g.on=i}}function AC(e,n,r){var i=(e+="")=="transform"?AT:Lx;return n==null?this.styleTween(e,wC(e,i)).on("end.style."+e,kx(e)):typeof n=="function"?this.styleTween(e,SC(e,i,xm(this,"style."+e,n))).each(EC(this._id,e)):this.styleTween(e,bC(e,i,n),r).on("end.style."+e,null)}function TC(e,n,r){return function(i){this.style.setProperty(e,n.call(this,i),r)}}function CC(e,n,r){var i,s;function c(){var o=n.apply(this,arguments);return o!==s&&(i=(s=o)&&TC(e,o,r)),i}return c._value=n,c}function MC(e,n,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,CC(e,n,r??""))}function RC(e){return function(){this.textContent=e}}function DC(e){return function(){var n=e(this);this.textContent=n??""}}function NC(e){return this.tween("text",typeof e=="function"?DC(xm(this,"text",e)):RC(e==null?"":e+""))}function OC(e){return function(n){this.textContent=e.call(this,n)}}function UC(e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&OC(s)),n}return i._value=e,i}function zC(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,UC(e))}function jC(){for(var e=this._name,n=this._id,r=$x(),i=this._groups,s=i.length,c=0;c<s;++c)for(var o=i[c],d=o.length,g,m=0;m<d;++m)if(g=o[m]){var y=Gn(g,n);Co(g,e,r,m,o,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new ja(i,this._parents,e,r)}function HC(){var e,n,r=this,i=r._id,s=r.size();return new Promise(function(c,o){var d={value:o},g={value:function(){--s===0&&c()}};r.each(function(){var m=oa(this,i),y=m.on;y!==e&&(n=(e=y).copy(),n._.cancel.push(d),n._.interrupt.push(d),n._.end.push(g)),m.on=n}),s===0&&c()})}var BC=0;function ja(e,n,r,i){this._groups=e,this._parents=n,this._name=r,this._id=i}function $x(){return++BC}var Ra=eu.prototype;ja.prototype={constructor:ja,select:pC,selectAll:vC,selectChild:Ra.selectChild,selectChildren:Ra.selectChildren,filter:oC,merge:fC,selection:xC,transition:jC,call:Ra.call,nodes:Ra.nodes,node:Ra.node,size:Ra.size,empty:Ra.empty,each:Ra.each,on:mC,attr:IT,attrTween:WT,style:AC,styleTween:MC,text:NC,textTween:zC,remove:yC,tween:YT,delay:nC,duration:iC,ease:sC,easeVarying:cC,end:HC,[Symbol.iterator]:Ra[Symbol.iterator]};function LC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var kC={time:null,delay:0,duration:250,ease:LC};function $C(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function YC(e){var n,r;e instanceof ja?(n=e._id,e=e._name):(n=$x(),(r=kC).time=vm(),e=e==null?null:e+"");for(var i=this._groups,s=i.length,c=0;c<s;++c)for(var o=i[c],d=o.length,g,m=0;m<d;++m)(g=o[m])&&Co(g,e,n,m,o,r||$C(g,n));return new ja(i,this._parents,e,n)}eu.prototype.interrupt=LT;eu.prototype.transition=YC;const Uc=e=>()=>e;function qC(e,{sourceEvent:n,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Oa(e,n,r){this.k=e,this.x=n,this.y=r}Oa.prototype={constructor:Oa,scale:function(e){return e===1?this:new Oa(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new Oa(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var br=new Oa(1,0,0);Oa.prototype;function hh(e){e.stopImmediatePropagation()}function As(e){e.preventDefault(),e.stopImmediatePropagation()}function XC(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function VC(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Vv(){return this.__zoom||br}function GC(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function QC(){return navigator.maxTouchPoints||"ontouchstart"in this}function ZC(e,n,r){var i=e.invertX(n[0][0])-r[0][0],s=e.invertX(n[1][0])-r[1][0],c=e.invertY(n[0][1])-r[0][1],o=e.invertY(n[1][1])-r[1][1];return e.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),o>c?(c+o)/2:Math.min(0,c)||Math.max(0,o))}function IC(){var e=XC,n=VC,r=ZC,i=GC,s=QC,c=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],d=250,g=DT,m=Eo("start","zoom","end"),y,p,v,x=500,A=150,w=0,E=10;function R(N){N.property("__zoom",Vv).on("wheel.zoom",J,{passive:!1}).on("mousedown.zoom",X).on("dblclick.zoom",Z).filter(s).on("touchstart.zoom",P).on("touchmove.zoom",se).on("touchend.zoom touchcancel.zoom",te).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}R.transform=function(N,I,M,Y){var W=N.selection?N.selection():N;W.property("__zoom",Vv),N!==W?U(N,I,M,Y):W.interrupt().each(function(){O(this,arguments).event(Y).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},R.scaleBy=function(N,I,M,Y){R.scaleTo(N,function(){var W=this.__zoom.k,$=typeof I=="function"?I.apply(this,arguments):I;return W*$},M,Y)},R.scaleTo=function(N,I,M,Y){R.transform(N,function(){var W=n.apply(this,arguments),$=this.__zoom,T=M==null?C(W):typeof M=="function"?M.apply(this,arguments):M,k=$.invert(T),Q=typeof I=="function"?I.apply(this,arguments):I;return r(z(D($,Q),T,k),W,o)},M,Y)},R.translateBy=function(N,I,M,Y){R.transform(N,function(){return r(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof M=="function"?M.apply(this,arguments):M),n.apply(this,arguments),o)},null,Y)},R.translateTo=function(N,I,M,Y,W){R.transform(N,function(){var $=n.apply(this,arguments),T=this.__zoom,k=Y==null?C($):typeof Y=="function"?Y.apply(this,arguments):Y;return r(br.translate(k[0],k[1]).scale(T.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof M=="function"?-M.apply(this,arguments):-M),$,o)},Y,W)};function D(N,I){return I=Math.max(c[0],Math.min(c[1],I)),I===N.k?N:new Oa(I,N.x,N.y)}function z(N,I,M){var Y=I[0]-M[0]*N.k,W=I[1]-M[1]*N.k;return Y===N.x&&W===N.y?N:new Oa(N.k,Y,W)}function C(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function U(N,I,M,Y){N.on("start.zoom",function(){O(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(Y).end()}).tween("zoom",function(){var W=this,$=arguments,T=O(W,$).event(Y),k=n.apply(W,$),Q=M==null?C(k):typeof M=="function"?M.apply(W,$):M,ee=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),re=W.__zoom,oe=typeof I=="function"?I.apply(W,$):I,fe=g(re.invert(Q).concat(ee/re.k),oe.invert(Q).concat(ee/oe.k));return function(Ae){if(Ae===1)Ae=oe;else{var ve=fe(Ae),ce=ee/ve[2];Ae=new Oa(ce,Q[0]-ve[0]*ce,Q[1]-ve[1]*ce)}T.zoom(null,Ae)}})}function O(N,I,M){return!M&&N.__zooming||new B(N,I)}function B(N,I){this.that=N,this.args=I,this.active=0,this.sourceEvent=null,this.extent=n.apply(N,I),this.taps=0}B.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,I){return this.mouse&&N!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var I=Wt(this.that).datum();m.call(N,this.that,new qC(N,{sourceEvent:this.sourceEvent,target:R,transform:this.that.__zoom,dispatch:m}),I)}};function J(N,...I){if(!e.apply(this,arguments))return;var M=O(this,I).event(N),Y=this.__zoom,W=Math.max(c[0],Math.min(c[1],Y.k*Math.pow(2,i.apply(this,arguments)))),$=ta(N);if(M.wheel)(M.mouse[0][0]!==$[0]||M.mouse[0][1]!==$[1])&&(M.mouse[1]=Y.invert(M.mouse[0]=$)),clearTimeout(M.wheel);else{if(Y.k===W)return;M.mouse=[$,Y.invert($)],Pc(this),M.start()}As(N),M.wheel=setTimeout(T,A),M.zoom("mouse",r(z(D(Y,W),M.mouse[0],M.mouse[1]),M.extent,o));function T(){M.wheel=null,M.end()}}function X(N,...I){if(v||!e.apply(this,arguments))return;var M=N.currentTarget,Y=O(this,I,!0).event(N),W=Wt(N.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",ee,!0),$=ta(N,M),T=N.clientX,k=N.clientY;Tx(N.view),hh(N),Y.mouse=[$,this.__zoom.invert($)],Pc(this),Y.start();function Q(re){if(As(re),!Y.moved){var oe=re.clientX-T,fe=re.clientY-k;Y.moved=oe*oe+fe*fe>w}Y.event(re).zoom("mouse",r(z(Y.that.__zoom,Y.mouse[0]=ta(re,M),Y.mouse[1]),Y.extent,o))}function ee(re){W.on("mousemove.zoom mouseup.zoom",null),Cx(re.view,Y.moved),As(re),Y.event(re).end()}}function Z(N,...I){if(e.apply(this,arguments)){var M=this.__zoom,Y=ta(N.changedTouches?N.changedTouches[0]:N,this),W=M.invert(Y),$=M.k*(N.shiftKey?.5:2),T=r(z(D(M,$),Y,W),n.apply(this,I),o);As(N),d>0?Wt(this).transition().duration(d).call(U,T,Y,N):Wt(this).call(R.transform,T,Y,N)}}function P(N,...I){if(e.apply(this,arguments)){var M=N.touches,Y=M.length,W=O(this,I,N.changedTouches.length===Y).event(N),$,T,k,Q;for(hh(N),T=0;T<Y;++T)k=M[T],Q=ta(k,this),Q=[Q,this.__zoom.invert(Q),k.identifier],W.touch0?!W.touch1&&W.touch0[2]!==Q[2]&&(W.touch1=Q,W.taps=0):(W.touch0=Q,$=!0,W.taps=1+!!y);y&&(y=clearTimeout(y)),$&&(W.taps<2&&(p=Q[0],y=setTimeout(function(){y=null},x)),Pc(this),W.start())}}function se(N,...I){if(this.__zooming){var M=O(this,I).event(N),Y=N.changedTouches,W=Y.length,$,T,k,Q;for(As(N),$=0;$<W;++$)T=Y[$],k=ta(T,this),M.touch0&&M.touch0[2]===T.identifier?M.touch0[0]=k:M.touch1&&M.touch1[2]===T.identifier&&(M.touch1[0]=k);if(T=M.that.__zoom,M.touch1){var ee=M.touch0[0],re=M.touch0[1],oe=M.touch1[0],fe=M.touch1[1],Ae=(Ae=oe[0]-ee[0])*Ae+(Ae=oe[1]-ee[1])*Ae,ve=(ve=fe[0]-re[0])*ve+(ve=fe[1]-re[1])*ve;T=D(T,Math.sqrt(Ae/ve)),k=[(ee[0]+oe[0])/2,(ee[1]+oe[1])/2],Q=[(re[0]+fe[0])/2,(re[1]+fe[1])/2]}else if(M.touch0)k=M.touch0[0],Q=M.touch0[1];else return;M.zoom("touch",r(z(T,k,Q),M.extent,o))}}function te(N,...I){if(this.__zooming){var M=O(this,I).event(N),Y=N.changedTouches,W=Y.length,$,T;for(hh(N),v&&clearTimeout(v),v=setTimeout(function(){v=null},x),$=0;$<W;++$)T=Y[$],M.touch0&&M.touch0[2]===T.identifier?delete M.touch0:M.touch1&&M.touch1[2]===T.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(T=ta(T,this),Math.hypot(p[0]-T[0],p[1]-T[1])<E)){var k=Wt(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return R.wheelDelta=function(N){return arguments.length?(i=typeof N=="function"?N:Uc(+N),R):i},R.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Uc(!!N),R):e},R.touchable=function(N){return arguments.length?(s=typeof N=="function"?N:Uc(!!N),R):s},R.extent=function(N){return arguments.length?(n=typeof N=="function"?N:Uc([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),R):n},R.scaleExtent=function(N){return arguments.length?(c[0]=+N[0],c[1]=+N[1],R):[c[0],c[1]]},R.translateExtent=function(N){return arguments.length?(o[0][0]=+N[0][0],o[1][0]=+N[1][0],o[0][1]=+N[0][1],o[1][1]=+N[1][1],R):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},R.constrain=function(N){return arguments.length?(r=N,R):r},R.duration=function(N){return arguments.length?(d=+N,R):d},R.interpolate=function(N){return arguments.length?(g=N,R):g},R.on=function(){var N=m.on.apply(m,arguments);return N===m?R:N},R.clickDistance=function(N){return arguments.length?(w=(N=+N)*N,R):Math.sqrt(w)},R.tapDistance=function(N){return arguments.length?(E=+N,R):E},R}ox();const Mo=j.createContext(null),FC=Mo.Provider,Ha={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,n)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?n.targetHandle:n.sourceHandle}", edge id: ${n.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Yx=Ha.error001();function nt(e,n){const r=j.useContext(Mo);if(r===null)throw new Error(Yx);return hx(r,e,n)}const Ct=()=>{const e=j.useContext(Mo);if(e===null)throw new Error(Yx);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},KC=e=>e.userSelectionActive?"none":"all";function qx({position:e,children:n,className:r,style:i,...s}){const c=nt(KC),o=`${e}`.split("-");return ae.createElement("div",{className:Gt(["react-flow__panel",r,...o]),style:{...i,pointerEvents:c},...s},n)}function JC({proOptions:e,position:n="bottom-right"}){return e!=null&&e.hideAttribution?null:ae.createElement(qx,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ae.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const PC=({x:e,y:n,label:r,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:c={},labelBgPadding:o=[2,4],labelBgBorderRadius:d=2,children:g,className:m,...y})=>{const p=j.useRef(null),[v,x]=j.useState({x:0,y:0,width:0,height:0}),A=Gt(["react-flow__edge-textwrapper",m]);return j.useEffect(()=>{if(p.current){const w=p.current.getBBox();x({x:w.x,y:w.y,width:w.width,height:w.height})}},[r]),typeof r>"u"||!r?null:ae.createElement("g",{transform:`translate(${e-v.width/2} ${n-v.height/2})`,className:A,visibility:v.width?"visible":"hidden",...y},s&&ae.createElement("rect",{width:v.width+2*o[0],x:-o[0],y:-o[1],height:v.height+2*o[1],className:"react-flow__edge-textbg",style:c,rx:d,ry:d}),ae.createElement("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:p,style:i},r),g)};var WC=j.memo(PC);const wm=e=>({width:e.offsetWidth,height:e.offsetHeight}),pl=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),bm=(e={x:0,y:0},n)=>({x:pl(e.x,n[0][0],n[1][0]),y:pl(e.y,n[0][1],n[1][1])}),Gv=(e,n,r)=>e<n?pl(Math.abs(e-n),1,50)/50:e>r?-pl(Math.abs(e-r),1,50)/50:0,Xx=(e,n)=>{const r=Gv(e.x,35,n.width-35)*20,i=Gv(e.y,35,n.height-35)*20;return[r,i]},Vx=e=>{var n;return((n=e.getRootNode)==null?void 0:n.call(e))||(window==null?void 0:window.document)},eM=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),Sm=({x:e,y:n,width:r,height:i})=>({x:e,y:n,x2:e+r,y2:n+i}),tM=({x:e,y:n,x2:r,y2:i})=>({x:e,y:n,width:r-e,height:i-n}),Qv=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Vh=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),i=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*i)},nM=e=>Nn(e.width)&&Nn(e.height)&&Nn(e.x)&&Nn(e.y),Nn=e=>!isNaN(e)&&isFinite(e),lt=Symbol.for("internals"),Gx=["Enter"," ","Escape"],aM=(e,n)=>{},rM=e=>"nativeEvent"in e;function Gh(e){var s,c;const n=rM(e)?e.nativeEvent:e,r=((c=(s=n.composedPath)==null?void 0:s.call(n))==null?void 0:c[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Qx=e=>"clientX"in e,Sr=(e,n)=>{var c,o;const r=Qx(e),i=r?e.clientX:(c=e.touches)==null?void 0:c[0].clientX,s=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((n==null?void 0:n.left)??0),y:s-((n==null?void 0:n.top)??0)}},mo=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},nu=({id:e,path:n,labelX:r,labelY:i,label:s,labelStyle:c,labelShowBg:o,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:v,interactionWidth:x=20})=>ae.createElement(ae.Fragment,null,ae.createElement("path",{id:e,style:y,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:v}),x&&ae.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),s&&Nn(r)&&Nn(i)?ae.createElement(WC,{x:r,y:i,label:s,labelStyle:c,labelShowBg:o,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m}):null);nu.displayName="BaseEdge";function Ts(e,n,r){return r===void 0?r:i=>{const s=n().edges.find(c=>c.id===e);s&&r(i,{...s})}}function Zx({sourceX:e,sourceY:n,targetX:r,targetY:i}){const s=Math.abs(r-e)/2,c=r<e?r+s:r-s,o=Math.abs(i-n)/2,d=i<n?i+o:i-o;return[c,d,s,o]}function Ix({sourceX:e,sourceY:n,targetX:r,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:o,targetControlY:d}){const g=e*.125+s*.375+o*.375+r*.125,m=n*.125+c*.375+d*.375+i*.125,y=Math.abs(g-e),p=Math.abs(m-n);return[g,m,y,p]}var ri;(function(e){e.Strict="strict",e.Loose="loose"})(ri||(ri={}));var Wr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Wr||(Wr={}));var Is;(function(e){e.Partial="partial",e.Full="full"})(Is||(Is={}));var wr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(wr||(wr={}));var Fs;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Fs||(Fs={}));var pe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(pe||(pe={}));function Zv({pos:e,x1:n,y1:r,x2:i,y2:s}){return e===pe.Left||e===pe.Right?[.5*(n+i),r]:[n,.5*(r+s)]}function Fx({sourceX:e,sourceY:n,sourcePosition:r=pe.Bottom,targetX:i,targetY:s,targetPosition:c=pe.Top}){const[o,d]=Zv({pos:r,x1:e,y1:n,x2:i,y2:s}),[g,m]=Zv({pos:c,x1:i,y1:s,x2:e,y2:n}),[y,p,v,x]=Ix({sourceX:e,sourceY:n,targetX:i,targetY:s,sourceControlX:o,sourceControlY:d,targetControlX:g,targetControlY:m});return[`M${e},${n} C${o},${d} ${g},${m} ${i},${s}`,y,p,v,x]}const Em=j.memo(({sourceX:e,sourceY:n,targetX:r,targetY:i,sourcePosition:s=pe.Bottom,targetPosition:c=pe.Top,label:o,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:v,markerEnd:x,markerStart:A,interactionWidth:w})=>{const[E,R,D]=Fx({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:i,targetPosition:c});return ae.createElement(nu,{path:E,labelX:R,labelY:D,label:o,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:v,markerEnd:x,markerStart:A,interactionWidth:w})});Em.displayName="SimpleBezierEdge";const Iv={[pe.Left]:{x:-1,y:0},[pe.Right]:{x:1,y:0},[pe.Top]:{x:0,y:-1},[pe.Bottom]:{x:0,y:1}},iM=({source:e,sourcePosition:n=pe.Bottom,target:r})=>n===pe.Left||n===pe.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},Fv=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function lM({source:e,sourcePosition:n=pe.Bottom,target:r,targetPosition:i=pe.Top,center:s,offset:c}){const o=Iv[n],d=Iv[i],g={x:e.x+o.x*c,y:e.y+o.y*c},m={x:r.x+d.x*c,y:r.y+d.y*c},y=iM({source:g,sourcePosition:n,target:m}),p=y.x!==0?"x":"y",v=y[p];let x=[],A,w;const E={x:0,y:0},R={x:0,y:0},[D,z,C,U]=Zx({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[p]*d[p]===-1){A=s.x??D,w=s.y??z;const B=[{x:A,y:g.y},{x:A,y:m.y}],J=[{x:g.x,y:w},{x:m.x,y:w}];o[p]===v?x=p==="x"?B:J:x=p==="x"?J:B}else{const B=[{x:g.x,y:m.y}],J=[{x:m.x,y:g.y}];if(p==="x"?x=o.x===v?J:B:x=o.y===v?B:J,n===i){const te=Math.abs(e[p]-r[p]);if(te<=c){const N=Math.min(c-1,c-te);o[p]===v?E[p]=(g[p]>e[p]?-1:1)*N:R[p]=(m[p]>r[p]?-1:1)*N}}if(n!==i){const te=p==="x"?"y":"x",N=o[p]===d[te],I=g[te]>m[te],M=g[te]<m[te];(o[p]===1&&(!N&&I||N&&M)||o[p]!==1&&(!N&&M||N&&I))&&(x=p==="x"?B:J)}const X={x:g.x+E.x,y:g.y+E.y},Z={x:m.x+R.x,y:m.y+R.y},P=Math.max(Math.abs(X.x-x[0].x),Math.abs(Z.x-x[0].x)),se=Math.max(Math.abs(X.y-x[0].y),Math.abs(Z.y-x[0].y));P>=se?(A=(X.x+Z.x)/2,w=x[0].y):(A=x[0].x,w=(X.y+Z.y)/2)}return[[e,{x:g.x+E.x,y:g.y+E.y},...x,{x:m.x+R.x,y:m.y+R.y},r],A,w,C,U]}function sM(e,n,r,i){const s=Math.min(Fv(e,n)/2,Fv(n,r)/2,i),{x:c,y:o}=n;if(e.x===c&&c===r.x||e.y===o&&o===r.y)return`L${c} ${o}`;if(e.y===o){const m=e.x<r.x?-1:1,y=e.y<r.y?1:-1;return`L ${c+s*m},${o}Q ${c},${o} ${c},${o+s*y}`}const d=e.x<r.x?1:-1,g=e.y<r.y?-1:1;return`L ${c},${o+s*g}Q ${c},${o} ${c+s*d},${o}`}function Qh({sourceX:e,sourceY:n,sourcePosition:r=pe.Bottom,targetX:i,targetY:s,targetPosition:c=pe.Top,borderRadius:o=5,centerX:d,centerY:g,offset:m=20}){const[y,p,v,x,A]=lM({source:{x:e,y:n},sourcePosition:r,target:{x:i,y:s},targetPosition:c,center:{x:d,y:g},offset:m});return[y.reduce((E,R,D)=>{let z="";return D>0&&D<y.length-1?z=sM(y[D-1],R,y[D+1],o):z=`${D===0?"M":"L"}${R.x} ${R.y}`,E+=z,E},""),p,v,x,A]}const Ro=j.memo(({sourceX:e,sourceY:n,targetX:r,targetY:i,label:s,labelStyle:c,labelShowBg:o,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,sourcePosition:p=pe.Bottom,targetPosition:v=pe.Top,markerEnd:x,markerStart:A,pathOptions:w,interactionWidth:E})=>{const[R,D,z]=Qh({sourceX:e,sourceY:n,sourcePosition:p,targetX:r,targetY:i,targetPosition:v,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset});return ae.createElement(nu,{path:R,labelX:D,labelY:z,label:s,labelStyle:c,labelShowBg:o,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:x,markerStart:A,interactionWidth:E})});Ro.displayName="SmoothStepEdge";const Am=j.memo(e=>{var n;return ae.createElement(Ro,{...e,pathOptions:j.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(n=e.pathOptions)==null?void 0:n.offset])})});Am.displayName="StepEdge";function uM({sourceX:e,sourceY:n,targetX:r,targetY:i}){const[s,c,o,d]=Zx({sourceX:e,sourceY:n,targetX:r,targetY:i});return[`M ${e},${n}L ${r},${i}`,s,c,o,d]}const Tm=j.memo(({sourceX:e,sourceY:n,targetX:r,targetY:i,label:s,labelStyle:c,labelShowBg:o,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:v,interactionWidth:x})=>{const[A,w,E]=uM({sourceX:e,sourceY:n,targetX:r,targetY:i});return ae.createElement(nu,{path:A,labelX:w,labelY:E,label:s,labelStyle:c,labelShowBg:o,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:v,interactionWidth:x})});Tm.displayName="StraightEdge";function zc(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function Kv({pos:e,x1:n,y1:r,x2:i,y2:s,c}){switch(e){case pe.Left:return[n-zc(n-i,c),r];case pe.Right:return[n+zc(i-n,c),r];case pe.Top:return[n,r-zc(r-s,c)];case pe.Bottom:return[n,r+zc(s-r,c)]}}function Kx({sourceX:e,sourceY:n,sourcePosition:r=pe.Bottom,targetX:i,targetY:s,targetPosition:c=pe.Top,curvature:o=.25}){const[d,g]=Kv({pos:r,x1:e,y1:n,x2:i,y2:s,c:o}),[m,y]=Kv({pos:c,x1:i,y1:s,x2:e,y2:n,c:o}),[p,v,x,A]=Ix({sourceX:e,sourceY:n,targetX:i,targetY:s,sourceControlX:d,sourceControlY:g,targetControlX:m,targetControlY:y});return[`M${e},${n} C${d},${g} ${m},${y} ${i},${s}`,p,v,x,A]}const go=j.memo(({sourceX:e,sourceY:n,targetX:r,targetY:i,sourcePosition:s=pe.Bottom,targetPosition:c=pe.Top,label:o,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:v,markerEnd:x,markerStart:A,pathOptions:w,interactionWidth:E})=>{const[R,D,z]=Kx({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:i,targetPosition:c,curvature:w==null?void 0:w.curvature});return ae.createElement(nu,{path:R,labelX:D,labelY:z,label:o,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:v,markerEnd:x,markerStart:A,interactionWidth:E})});go.displayName="BezierEdge";const Cm=j.createContext(null),cM=Cm.Provider;Cm.Consumer;const oM=()=>j.useContext(Cm),fM=e=>"id"in e&&"source"in e&&"target"in e,dM=({source:e,sourceHandle:n,target:r,targetHandle:i})=>`reactflow__edge-${e}${n||""}-${r}${i||""}`,Zh=(e,n)=>typeof e>"u"?"":typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`,hM=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),mM=(e,n)=>{if(!e.source||!e.target)return n;let r;return fM(e)?r={...e}:r={...e,id:dM(e)},hM(r,n)?n:n.concat(r)},Ih=({x:e,y:n},[r,i,s],c,[o,d])=>{const g={x:(e-r)/s,y:(n-i)/s};return c?{x:o*Math.round(g.x/o),y:d*Math.round(g.y/d)}:g},Jx=({x:e,y:n},[r,i,s])=>({x:e*s+r,y:n*s+i}),ol=(e,n=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*n[0],i=(e.height??0)*n[1],s={x:e.position.x-r,y:e.position.y-i};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-i}:s}},Mm=(e,n=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((i,s)=>{const{x:c,y:o}=ol(s,n).positionAbsolute;return eM(i,Sm({x:c,y:o,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return tM(r)},Px=(e,n,[r,i,s]=[0,0,1],c=!1,o=!1,d=[0,0])=>{const g={x:(n.x-r)/s,y:(n.y-i)/s,width:n.width/s,height:n.height/s},m=[];return e.forEach(y=>{const{width:p,height:v,selectable:x=!0,hidden:A=!1}=y;if(o&&!x||A)return!1;const{positionAbsolute:w}=ol(y,d),E={x:w.x,y:w.y,width:p||0,height:v||0},R=Vh(g,E),D=typeof p>"u"||typeof v>"u"||p===null||v===null,z=c&&R>0,C=(p||0)*(v||0);(D||z||R>=C||y.dragging)&&m.push(y)}),m},Wx=(e,n)=>{const r=e.map(i=>i.id);return n.filter(i=>r.includes(i.source)||r.includes(i.target))},ew=(e,n,r,i,s,c=.1)=>{const o=n/(e.width*(1+c)),d=r/(e.height*(1+c)),g=Math.min(o,d),m=pl(g,i,s),y=e.x+e.width/2,p=e.y+e.height/2,v=n/2-y*m,x=r/2-p*m;return{x:v,y:x,zoom:m}},Kr=(e,n=0)=>e.transition().duration(n);function Jv(e,n,r,i){return(n[r]||[]).reduce((s,c)=>{var o,d;return`${e.id}-${c.id}-${r}`!==i&&s.push({id:c.id||null,type:r,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+c.x+c.width/2,y:(((d=e.positionAbsolute)==null?void 0:d.y)??0)+c.y+c.height/2}),s},[])}function gM(e,n,r,i,s,c){const{x:o,y:d}=Sr(e),m=n.elementsFromPoint(o,d).find(A=>A.classList.contains("react-flow__handle"));if(m){const A=m.getAttribute("data-nodeid");if(A){const w=Rm(void 0,m),E=m.getAttribute("data-handleid"),R=c({nodeId:A,id:E,type:w});if(R){const D=s.find(z=>z.nodeId===A&&z.type===w&&z.id===E);return{handle:{id:E,type:w,nodeId:A,x:(D==null?void 0:D.x)||r.x,y:(D==null?void 0:D.y)||r.y},validHandleResult:R}}}}let y=[],p=1/0;if(s.forEach(A=>{const w=Math.sqrt((A.x-r.x)**2+(A.y-r.y)**2);if(w<=i){const E=c(A);w<=p&&(w<p?y=[{handle:A,validHandleResult:E}]:w===p&&y.push({handle:A,validHandleResult:E}),p=w)}}),!y.length)return{handle:null,validHandleResult:tw()};if(y.length===1)return y[0];const v=y.some(({validHandleResult:A})=>A.isValid),x=y.some(({handle:A})=>A.type==="target");return y.find(({handle:A,validHandleResult:w})=>x?A.type==="target":v?w.isValid:!0)||y[0]}const yM={source:null,target:null,sourceHandle:null,targetHandle:null},tw=()=>({handleDomNode:null,isValid:!1,connection:yM,endHandle:null});function nw(e,n,r,i,s,c,o){const d=s==="target",g=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),m={...tw(),handleDomNode:g};if(g){const y=Rm(void 0,g),p=g.getAttribute("data-nodeid"),v=g.getAttribute("data-handleid"),x=g.classList.contains("connectable"),A=g.classList.contains("connectableend"),w={source:d?p:r,sourceHandle:d?v:i,target:d?r:p,targetHandle:d?i:v};m.connection=w,x&&A&&(n===ri.Strict?d&&y==="source"||!d&&y==="target":p!==r||v!==i)&&(m.endHandle={nodeId:p,handleId:v,type:y},m.isValid=c(w))}return m}function pM({nodes:e,nodeId:n,handleId:r,handleType:i}){return e.reduce((s,c)=>{if(c[lt]){const{handleBounds:o}=c[lt];let d=[],g=[];o&&(d=Jv(c,o,"source",`${n}-${r}-${i}`),g=Jv(c,o,"target",`${n}-${r}-${i}`)),s.push(...d,...g)}return s},[])}function Rm(e,n){return e||(n!=null&&n.classList.contains("target")?"target":n!=null&&n.classList.contains("source")?"source":null)}function mh(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function vM(e,n){let r=null;return n?r="valid":e&&!n&&(r="invalid"),r}function aw({event:e,handleId:n,nodeId:r,onConnect:i,isTarget:s,getState:c,setState:o,isValidConnection:d,edgeUpdaterType:g,onReconnectEnd:m}){const y=Vx(e.target),{connectionMode:p,domNode:v,autoPanOnConnect:x,connectionRadius:A,onConnectStart:w,panBy:E,getNodes:R,cancelConnection:D}=c();let z=0,C;const{x:U,y:O}=Sr(e),B=y==null?void 0:y.elementFromPoint(U,O),J=Rm(g,B),X=v==null?void 0:v.getBoundingClientRect();if(!X||!J)return;let Z,P=Sr(e,X),se=!1,te=null,N=!1,I=null;const M=pM({nodes:R(),nodeId:r,handleId:n,handleType:J}),Y=()=>{if(!x)return;const[T,k]=Xx(P,X);E({x:T,y:k}),z=requestAnimationFrame(Y)};o({connectionPosition:P,connectionStatus:null,connectionNodeId:r,connectionHandleId:n,connectionHandleType:J,connectionStartHandle:{nodeId:r,handleId:n,type:J},connectionEndHandle:null}),w==null||w(e,{nodeId:r,handleId:n,handleType:J});function W(T){const{transform:k}=c();P=Sr(T,X);const{handle:Q,validHandleResult:ee}=gM(T,y,Ih(P,k,!1,[1,1]),A,M,re=>nw(re,p,r,n,s?"target":"source",d,y));if(C=Q,se||(Y(),se=!0),I=ee.handleDomNode,te=ee.connection,N=ee.isValid,o({connectionPosition:C&&N?Jx({x:C.x,y:C.y},k):P,connectionStatus:vM(!!C,N),connectionEndHandle:ee.endHandle}),!C&&!N&&!I)return mh(Z);te.source!==te.target&&I&&(mh(Z),Z=I,I.classList.add("connecting","react-flow__handle-connecting"),I.classList.toggle("valid",N),I.classList.toggle("react-flow__handle-valid",N))}function $(T){var k,Q;(C||I)&&te&&N&&(i==null||i(te)),(Q=(k=c()).onConnectEnd)==null||Q.call(k,T),g&&(m==null||m(T)),mh(Z),D(),cancelAnimationFrame(z),se=!1,N=!1,te=null,I=null,y.removeEventListener("mousemove",W),y.removeEventListener("mouseup",$),y.removeEventListener("touchmove",W),y.removeEventListener("touchend",$)}y.addEventListener("mousemove",W),y.addEventListener("mouseup",$),y.addEventListener("touchmove",W),y.addEventListener("touchend",$)}const Pv=()=>!0,_M=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),xM=(e,n,r)=>i=>{const{connectionStartHandle:s,connectionEndHandle:c,connectionClickStartHandle:o}=i;return{connecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===n&&(s==null?void 0:s.type)===r||(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.handleId)===n&&(c==null?void 0:c.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===n&&(o==null?void 0:o.type)===r}},rw=j.forwardRef(({type:e="source",position:n=pe.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:c=!0,id:o,onConnect:d,children:g,className:m,onMouseDown:y,onTouchStart:p,...v},x)=>{var X,Z;const A=o||null,w=e==="target",E=Ct(),R=oM(),{connectOnClick:D,noPanClassName:z}=nt(_M,Yt),{connecting:C,clickConnecting:U}=nt(xM(R,A,e),Yt);R||(Z=(X=E.getState()).onError)==null||Z.call(X,"010",Ha.error010());const O=P=>{const{defaultEdgeOptions:se,onConnect:te,hasDefaultEdges:N}=E.getState(),I={...se,...P};if(N){const{edges:M,setEdges:Y}=E.getState();Y(mM(I,M))}te==null||te(I),d==null||d(I)},B=P=>{if(!R)return;const se=Qx(P);s&&(se&&P.button===0||!se)&&aw({event:P,handleId:A,nodeId:R,onConnect:O,isTarget:w,getState:E.getState,setState:E.setState,isValidConnection:r||E.getState().isValidConnection||Pv}),se?y==null||y(P):p==null||p(P)},J=P=>{const{onClickConnectStart:se,onClickConnectEnd:te,connectionClickStartHandle:N,connectionMode:I,isValidConnection:M}=E.getState();if(!R||!N&&!s)return;if(!N){se==null||se(P,{nodeId:R,handleId:A,handleType:e}),E.setState({connectionClickStartHandle:{nodeId:R,type:e,handleId:A}});return}const Y=Vx(P.target),W=r||M||Pv,{connection:$,isValid:T}=nw({nodeId:R,id:A,type:e},I,N.nodeId,N.handleId||null,N.type,W,Y);T&&O($),te==null||te(P),E.setState({connectionClickStartHandle:null})};return ae.createElement("div",{"data-handleid":A,"data-nodeid":R,"data-handlepos":n,"data-id":`${R}-${A}-${e}`,className:Gt(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",z,m,{source:!w,target:w,connectable:i,connectablestart:s,connectableend:c,connecting:U,connectionindicator:i&&(s&&!C||c&&C)}]),onMouseDown:B,onTouchStart:B,onClick:D?J:void 0,ref:x,...v},g)});rw.displayName="Handle";var vl=j.memo(rw);const iw=({data:e,isConnectable:n,targetPosition:r=pe.Top,sourcePosition:i=pe.Bottom})=>ae.createElement(ae.Fragment,null,ae.createElement(vl,{type:"target",position:r,isConnectable:n}),e==null?void 0:e.label,ae.createElement(vl,{type:"source",position:i,isConnectable:n}));iw.displayName="DefaultNode";var Fh=j.memo(iw);const lw=({data:e,isConnectable:n,sourcePosition:r=pe.Bottom})=>ae.createElement(ae.Fragment,null,e==null?void 0:e.label,ae.createElement(vl,{type:"source",position:r,isConnectable:n}));lw.displayName="InputNode";var sw=j.memo(lw);const uw=({data:e,isConnectable:n,targetPosition:r=pe.Top})=>ae.createElement(ae.Fragment,null,ae.createElement(vl,{type:"target",position:r,isConnectable:n}),e==null?void 0:e.label);uw.displayName="OutputNode";var cw=j.memo(uw);const Dm=()=>null;Dm.displayName="GroupNode";const wM=e=>({selectedNodes:e.getNodes().filter(n=>n.selected),selectedEdges:e.edges.filter(n=>n.selected).map(n=>({...n}))}),jc=e=>e.id;function bM(e,n){return Yt(e.selectedNodes.map(jc),n.selectedNodes.map(jc))&&Yt(e.selectedEdges.map(jc),n.selectedEdges.map(jc))}const ow=j.memo(({onSelectionChange:e})=>{const n=Ct(),{selectedNodes:r,selectedEdges:i}=nt(wM,bM);return j.useEffect(()=>{const s={nodes:r,edges:i};e==null||e(s),n.getState().onSelectionChange.forEach(c=>c(s))},[r,i,e]),null});ow.displayName="SelectionListener";const SM=e=>!!e.onSelectionChange;function EM({onSelectionChange:e}){const n=nt(SM);return e||n?ae.createElement(ow,{onSelectionChange:e}):null}const AM=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Zi(e,n){j.useEffect(()=>{typeof e<"u"&&n(e)},[e])}function Oe(e,n,r){j.useEffect(()=>{typeof n<"u"&&r({[e]:n})},[n])}const TM=({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,onConnect:s,onConnectStart:c,onConnectEnd:o,onClickConnectStart:d,onClickConnectEnd:g,nodesDraggable:m,nodesConnectable:y,nodesFocusable:p,edgesFocusable:v,edgesUpdatable:x,elevateNodesOnSelect:A,minZoom:w,maxZoom:E,nodeExtent:R,onNodesChange:D,onEdgesChange:z,elementsSelectable:C,connectionMode:U,snapGrid:O,snapToGrid:B,translateExtent:J,connectOnClick:X,defaultEdgeOptions:Z,fitView:P,fitViewOptions:se,onNodesDelete:te,onEdgesDelete:N,onNodeDrag:I,onNodeDragStart:M,onNodeDragStop:Y,onSelectionDrag:W,onSelectionDragStart:$,onSelectionDragStop:T,noPanClassName:k,nodeOrigin:Q,rfId:ee,autoPanOnConnect:re,autoPanOnNodeDrag:oe,onError:fe,connectionRadius:Ae,isValidConnection:ve,nodeDragThreshold:ce})=>{const{setNodes:de,setEdges:we,setDefaultNodesAndEdges:ue,setMinZoom:qe,setMaxZoom:Me,setTranslateExtent:He,setNodeExtent:Ke,reset:Te}=nt(AM,Yt),me=Ct();return j.useEffect(()=>{const jt=i==null?void 0:i.map(Qn=>({...Qn,...Z}));return ue(r,jt),()=>{Te()}},[]),Oe("defaultEdgeOptions",Z,me.setState),Oe("connectionMode",U,me.setState),Oe("onConnect",s,me.setState),Oe("onConnectStart",c,me.setState),Oe("onConnectEnd",o,me.setState),Oe("onClickConnectStart",d,me.setState),Oe("onClickConnectEnd",g,me.setState),Oe("nodesDraggable",m,me.setState),Oe("nodesConnectable",y,me.setState),Oe("nodesFocusable",p,me.setState),Oe("edgesFocusable",v,me.setState),Oe("edgesUpdatable",x,me.setState),Oe("elementsSelectable",C,me.setState),Oe("elevateNodesOnSelect",A,me.setState),Oe("snapToGrid",B,me.setState),Oe("snapGrid",O,me.setState),Oe("onNodesChange",D,me.setState),Oe("onEdgesChange",z,me.setState),Oe("connectOnClick",X,me.setState),Oe("fitViewOnInit",P,me.setState),Oe("fitViewOnInitOptions",se,me.setState),Oe("onNodesDelete",te,me.setState),Oe("onEdgesDelete",N,me.setState),Oe("onNodeDrag",I,me.setState),Oe("onNodeDragStart",M,me.setState),Oe("onNodeDragStop",Y,me.setState),Oe("onSelectionDrag",W,me.setState),Oe("onSelectionDragStart",$,me.setState),Oe("onSelectionDragStop",T,me.setState),Oe("noPanClassName",k,me.setState),Oe("nodeOrigin",Q,me.setState),Oe("rfId",ee,me.setState),Oe("autoPanOnConnect",re,me.setState),Oe("autoPanOnNodeDrag",oe,me.setState),Oe("onError",fe,me.setState),Oe("connectionRadius",Ae,me.setState),Oe("isValidConnection",ve,me.setState),Oe("nodeDragThreshold",ce,me.setState),Zi(e,de),Zi(n,we),Zi(w,qe),Zi(E,Me),Zi(J,He),Zi(R,Ke),null},Wv={display:"none"},CM={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},fw="react-flow__node-desc",dw="react-flow__edge-desc",MM="react-flow__aria-live",RM=e=>e.ariaLiveMessage;function DM({rfId:e}){const n=nt(RM);return ae.createElement("div",{id:`${MM}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:CM},n)}function NM({rfId:e,disableKeyboardA11y:n}){return ae.createElement(ae.Fragment,null,ae.createElement("div",{id:`${fw}-${e}`,style:Wv},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ae.createElement("div",{id:`${dw}-${e}`,style:Wv},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&ae.createElement(DM,{rfId:e}))}var Ks=(e=null,n={actInsideInputWithModifier:!0})=>{const[r,i]=j.useState(!1),s=j.useRef(!1),c=j.useRef(new Set([])),[o,d]=j.useMemo(()=>{if(e!==null){const m=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.split("+")),y=m.reduce((p,v)=>p.concat(...v),[]);return[m,y]}return[[],[]]},[e]);return j.useEffect(()=>{const g=typeof document<"u"?document:null,m=(n==null?void 0:n.target)||g;if(e!==null){const y=x=>{if(s.current=x.ctrlKey||x.metaKey||x.shiftKey,(!s.current||s.current&&!n.actInsideInputWithModifier)&&Gh(x))return!1;const w=t_(x.code,d);c.current.add(x[w]),e_(o,c.current,!1)&&(x.preventDefault(),i(!0))},p=x=>{if((!s.current||s.current&&!n.actInsideInputWithModifier)&&Gh(x))return!1;const w=t_(x.code,d);e_(o,c.current,!0)?(i(!1),c.current.clear()):c.current.delete(x[w]),x.key==="Meta"&&c.current.clear(),s.current=!1},v=()=>{c.current.clear(),i(!1)};return m==null||m.addEventListener("keydown",y),m==null||m.addEventListener("keyup",p),window.addEventListener("blur",v),()=>{m==null||m.removeEventListener("keydown",y),m==null||m.removeEventListener("keyup",p),window.removeEventListener("blur",v)}}},[e,i]),r};function e_(e,n,r){return e.filter(i=>r||i.length===n.size).some(i=>i.every(s=>n.has(s)))}function t_(e,n){return n.includes(e)?"code":"key"}function hw(e,n,r,i){var d,g;const s=e.parentNode||e.parentId;if(!s)return r;const c=n.get(s),o=ol(c,i);return hw(c,n,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((d=c[lt])==null?void 0:d.z)??0)>(r.z??0)?((g=c[lt])==null?void 0:g.z)??0:r.z??0},i)}function mw(e,n,r){e.forEach(i=>{var c;const s=i.parentNode||i.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||r!=null&&r[i.id]){const{x:o,y:d,z:g}=hw(i,e,{...i.position,z:((c=i[lt])==null?void 0:c.z)??0},n);i.positionAbsolute={x:o,y:d},i[lt].z=g,r!=null&&r[i.id]&&(i[lt].isParent=!0)}})}function gh(e,n,r,i){const s=new Map,c={},o=i?1e3:0;return e.forEach(d=>{var x;const g=(Nn(d.zIndex)?d.zIndex:0)+(d.selected?o:0),m=n.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},p=d.parentNode||d.parentId;p&&(c[p]=!0);const v=(m==null?void 0:m.type)&&(m==null?void 0:m.type)!==d.type;Object.defineProperty(y,lt,{enumerable:!1,value:{handleBounds:v||(x=m==null?void 0:m[lt])==null?void 0:x.handleBounds,z:g}}),s.set(d.id,y)}),mw(s,r,c),s}function gw(e,n={}){const{getNodes:r,width:i,height:s,minZoom:c,maxZoom:o,d3Zoom:d,d3Selection:g,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:p}=e(),v=n.initial&&!m&&y;if(d&&g&&(v||!n.initial)){const A=r().filter(E=>{var D;const R=n.includeHiddenNodes?E.width&&E.height:!E.hidden;return(D=n.nodes)!=null&&D.length?R&&n.nodes.some(z=>z.id===E.id):R}),w=A.every(E=>E.width&&E.height);if(A.length>0&&w){const E=Mm(A,p),{x:R,y:D,zoom:z}=ew(E,i,s,n.minZoom??c,n.maxZoom??o,n.padding??.1),C=br.translate(R,D).scale(z);return typeof n.duration=="number"&&n.duration>0?d.transform(Kr(g,n.duration),C):d.transform(g,C),!0}}return!1}function OM(e,n){return e.forEach(r=>{const i=n.get(r.id);i&&n.set(i.id,{...i,[lt]:i[lt],selected:r.selected})}),new Map(n)}function UM(e,n){return n.map(r=>{const i=e.find(s=>s.id===r.id);return i&&(r.selected=i.selected),r})}function Hc({changedNodes:e,changedEdges:n,get:r,set:i}){const{nodeInternals:s,edges:c,onNodesChange:o,onEdgesChange:d,hasDefaultNodes:g,hasDefaultEdges:m}=r();e!=null&&e.length&&(g&&i({nodeInternals:OM(e,s)}),o==null||o(e)),n!=null&&n.length&&(m&&i({edges:UM(n,c)}),d==null||d(n))}const Ii=()=>{},zM={zoomIn:Ii,zoomOut:Ii,zoomTo:Ii,getZoom:()=>1,setViewport:Ii,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ii,fitBounds:Ii,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},jM=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),HM=()=>{const e=Ct(),{d3Zoom:n,d3Selection:r}=nt(jM,Yt);return j.useMemo(()=>r&&n?{zoomIn:s=>n.scaleBy(Kr(r,s==null?void 0:s.duration),1.2),zoomOut:s=>n.scaleBy(Kr(r,s==null?void 0:s.duration),1/1.2),zoomTo:(s,c)=>n.scaleTo(Kr(r,c==null?void 0:c.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,c)=>{const[o,d,g]=e.getState().transform,m=br.translate(s.x??o,s.y??d).scale(s.zoom??g);n.transform(Kr(r,c==null?void 0:c.duration),m)},getViewport:()=>{const[s,c,o]=e.getState().transform;return{x:s,y:c,zoom:o}},fitView:s=>gw(e.getState,s),setCenter:(s,c,o)=>{const{width:d,height:g,maxZoom:m}=e.getState(),y=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:m,p=d/2-s*y,v=g/2-c*y,x=br.translate(p,v).scale(y);n.transform(Kr(r,o==null?void 0:o.duration),x)},fitBounds:(s,c)=>{const{width:o,height:d,minZoom:g,maxZoom:m}=e.getState(),{x:y,y:p,zoom:v}=ew(s,o,d,g,m,(c==null?void 0:c.padding)??.1),x=br.translate(y,p).scale(v);n.transform(Kr(r,c==null?void 0:c.duration),x)},project:s=>{const{transform:c,snapToGrid:o,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Ih(s,c,o,d)},screenToFlowPosition:s=>{const{transform:c,snapToGrid:o,snapGrid:d,domNode:g}=e.getState();if(!g)return s;const{x:m,y}=g.getBoundingClientRect(),p={x:s.x-m,y:s.y-y};return Ih(p,c,o,d)},flowToScreenPosition:s=>{const{transform:c,domNode:o}=e.getState();if(!o)return s;const{x:d,y:g}=o.getBoundingClientRect(),m=Jx(s,c);return{x:m.x+d,y:m.y+g}},viewportInitialized:!0}:zM,[n,r])};function Nm(){const e=HM(),n=Ct(),r=j.useCallback(()=>n.getState().getNodes().map(w=>({...w})),[]),i=j.useCallback(w=>n.getState().nodeInternals.get(w),[]),s=j.useCallback(()=>{const{edges:w=[]}=n.getState();return w.map(E=>({...E}))},[]),c=j.useCallback(w=>{const{edges:E=[]}=n.getState();return E.find(R=>R.id===w)},[]),o=j.useCallback(w=>{const{getNodes:E,setNodes:R,hasDefaultNodes:D,onNodesChange:z}=n.getState(),C=E(),U=typeof w=="function"?w(C):w;if(D)R(U);else if(z){const O=U.length===0?C.map(B=>({type:"remove",id:B.id})):U.map(B=>({item:B,type:"reset"}));z(O)}},[]),d=j.useCallback(w=>{const{edges:E=[],setEdges:R,hasDefaultEdges:D,onEdgesChange:z}=n.getState(),C=typeof w=="function"?w(E):w;if(D)R(C);else if(z){const U=C.length===0?E.map(O=>({type:"remove",id:O.id})):C.map(O=>({item:O,type:"reset"}));z(U)}},[]),g=j.useCallback(w=>{const E=Array.isArray(w)?w:[w],{getNodes:R,setNodes:D,hasDefaultNodes:z,onNodesChange:C}=n.getState();if(z){const O=[...R(),...E];D(O)}else if(C){const U=E.map(O=>({item:O,type:"add"}));C(U)}},[]),m=j.useCallback(w=>{const E=Array.isArray(w)?w:[w],{edges:R=[],setEdges:D,hasDefaultEdges:z,onEdgesChange:C}=n.getState();if(z)D([...R,...E]);else if(C){const U=E.map(O=>({item:O,type:"add"}));C(U)}},[]),y=j.useCallback(()=>{const{getNodes:w,edges:E=[],transform:R}=n.getState(),[D,z,C]=R;return{nodes:w().map(U=>({...U})),edges:E.map(U=>({...U})),viewport:{x:D,y:z,zoom:C}}},[]),p=j.useCallback(({nodes:w,edges:E})=>{const{nodeInternals:R,getNodes:D,edges:z,hasDefaultNodes:C,hasDefaultEdges:U,onNodesDelete:O,onEdgesDelete:B,onNodesChange:J,onEdgesChange:X}=n.getState(),Z=(w||[]).map(I=>I.id),P=(E||[]).map(I=>I.id),se=D().reduce((I,M)=>{const Y=M.parentNode||M.parentId,W=!Z.includes(M.id)&&Y&&I.find(T=>T.id===Y);return(typeof M.deletable=="boolean"?M.deletable:!0)&&(Z.includes(M.id)||W)&&I.push(M),I},[]),te=z.filter(I=>typeof I.deletable=="boolean"?I.deletable:!0),N=te.filter(I=>P.includes(I.id));if(se||N){const I=Wx(se,te),M=[...N,...I],Y=M.reduce((W,$)=>(W.includes($.id)||W.push($.id),W),[]);if((U||C)&&(U&&n.setState({edges:z.filter(W=>!Y.includes(W.id))}),C&&(se.forEach(W=>{R.delete(W.id)}),n.setState({nodeInternals:new Map(R)}))),Y.length>0&&(B==null||B(M),X&&X(Y.map(W=>({id:W,type:"remove"})))),se.length>0&&(O==null||O(se),J)){const W=se.map($=>({id:$.id,type:"remove"}));J(W)}}},[]),v=j.useCallback(w=>{const E=nM(w),R=E?null:n.getState().nodeInternals.get(w.id);return!E&&!R?[null,null,E]:[E?w:Qv(R),R,E]},[]),x=j.useCallback((w,E=!0,R)=>{const[D,z,C]=v(w);return D?(R||n.getState().getNodes()).filter(U=>{if(!C&&(U.id===z.id||!U.positionAbsolute))return!1;const O=Qv(U),B=Vh(O,D);return E&&B>0||B>=D.width*D.height}):[]},[]),A=j.useCallback((w,E,R=!0)=>{const[D]=v(w);if(!D)return!1;const z=Vh(D,E);return R&&z>0||z>=D.width*D.height},[]);return j.useMemo(()=>({...e,getNodes:r,getNode:i,getEdges:s,getEdge:c,setNodes:o,setEdges:d,addNodes:g,addEdges:m,toObject:y,deleteElements:p,getIntersectingNodes:x,isNodeIntersecting:A}),[e,r,i,s,c,o,d,g,m,y,p,x,A])}const BM={actInsideInputWithModifier:!1};var LM=({deleteKeyCode:e,multiSelectionKeyCode:n})=>{const r=Ct(),{deleteElements:i}=Nm(),s=Ks(e,BM),c=Ks(n);j.useEffect(()=>{if(s){const{edges:o,getNodes:d}=r.getState(),g=d().filter(y=>y.selected),m=o.filter(y=>y.selected);i({nodes:g,edges:m}),r.setState({nodesSelectionActive:!1})}},[s]),j.useEffect(()=>{r.setState({multiSelectionActive:c})},[c])};function kM(e){const n=Ct();j.useEffect(()=>{let r;const i=()=>{var c,o;if(!e.current)return;const s=wm(e.current);(s.height===0||s.width===0)&&((o=(c=n.getState()).onError)==null||o.call(c,"004",Ha.error004())),n.setState({width:s.width||500,height:s.height||500})};return i(),window.addEventListener("resize",i),e.current&&(r=new ResizeObserver(()=>i()),r.observe(e.current)),()=>{window.removeEventListener("resize",i),r&&e.current&&r.unobserve(e.current)}},[])}const Om={position:"absolute",width:"100%",height:"100%",top:0,left:0},$M=(e,n)=>e.x!==n.x||e.y!==n.y||e.zoom!==n.k,Bc=e=>({x:e.x,y:e.y,zoom:e.k}),Fi=(e,n)=>e.target.closest(`.${n}`),n_=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),a_=e=>{const n=e.ctrlKey&&mo()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n},YM=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),qM=({onMove:e,onMoveStart:n,onMoveEnd:r,onPaneContextMenu:i,zoomOnScroll:s=!0,zoomOnPinch:c=!0,panOnScroll:o=!1,panOnScrollSpeed:d=.5,panOnScrollMode:g=Wr.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:p=!0,defaultViewport:v,translateExtent:x,minZoom:A,maxZoom:w,zoomActivationKeyCode:E,preventScrolling:R=!0,children:D,noWheelClassName:z,noPanClassName:C})=>{const U=j.useRef(),O=Ct(),B=j.useRef(!1),J=j.useRef(!1),X=j.useRef(null),Z=j.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:se,d3ZoomHandler:te,userSelectionActive:N}=nt(YM,Yt),I=Ks(E),M=j.useRef(0),Y=j.useRef(!1),W=j.useRef();return kM(X),j.useEffect(()=>{if(X.current){const $=X.current.getBoundingClientRect(),T=IC().scaleExtent([A,w]).translateExtent(x),k=Wt(X.current).call(T),Q=br.translate(v.x,v.y).scale(pl(v.zoom,A,w)),ee=[[0,0],[$.width,$.height]],re=T.constrain()(Q,ee,x);T.transform(k,re),T.wheelDelta(a_),O.setState({d3Zoom:T,d3Selection:k,d3ZoomHandler:k.on("wheel.zoom"),transform:[re.x,re.y,re.k],domNode:X.current.closest(".react-flow")})}},[]),j.useEffect(()=>{se&&P&&(o&&!I&&!N?se.on("wheel.zoom",$=>{if(Fi($,z))return!1;$.preventDefault(),$.stopImmediatePropagation();const T=se.property("__zoom").k||1;if($.ctrlKey&&c){const ve=ta($),ce=a_($),de=T*Math.pow(2,ce);P.scaleTo(se,de,ve,$);return}const k=$.deltaMode===1?20:1;let Q=g===Wr.Vertical?0:$.deltaX*k,ee=g===Wr.Horizontal?0:$.deltaY*k;!mo()&&$.shiftKey&&g!==Wr.Vertical&&(Q=$.deltaY*k,ee=0),P.translateBy(se,-(Q/T)*d,-(ee/T)*d,{internal:!0});const re=Bc(se.property("__zoom")),{onViewportChangeStart:oe,onViewportChange:fe,onViewportChangeEnd:Ae}=O.getState();clearTimeout(W.current),Y.current||(Y.current=!0,n==null||n($,re),oe==null||oe(re)),Y.current&&(e==null||e($,re),fe==null||fe(re),W.current=setTimeout(()=>{r==null||r($,re),Ae==null||Ae(re),Y.current=!1},150))},{passive:!1}):typeof te<"u"&&se.on("wheel.zoom",function($,T){if(!R&&$.type==="wheel"&&!$.ctrlKey||Fi($,z))return null;$.preventDefault(),te.call(this,$,T)},{passive:!1}))},[N,o,g,se,P,te,I,c,R,z,n,e,r]),j.useEffect(()=>{P&&P.on("start",$=>{var Q,ee;if(!$.sourceEvent||$.sourceEvent.internal)return null;M.current=(Q=$.sourceEvent)==null?void 0:Q.button;const{onViewportChangeStart:T}=O.getState(),k=Bc($.transform);B.current=!0,Z.current=k,((ee=$.sourceEvent)==null?void 0:ee.type)==="mousedown"&&O.setState({paneDragging:!0}),T==null||T(k),n==null||n($.sourceEvent,k)})},[P,n]),j.useEffect(()=>{P&&(N&&!B.current?P.on("zoom",null):N||P.on("zoom",$=>{var k;const{onViewportChange:T}=O.getState();if(O.setState({transform:[$.transform.x,$.transform.y,$.transform.k]}),J.current=!!(i&&n_(p,M.current??0)),(e||T)&&!((k=$.sourceEvent)!=null&&k.internal)){const Q=Bc($.transform);T==null||T(Q),e==null||e($.sourceEvent,Q)}}))},[N,P,e,p,i]),j.useEffect(()=>{P&&P.on("end",$=>{if(!$.sourceEvent||$.sourceEvent.internal)return null;const{onViewportChangeEnd:T}=O.getState();if(B.current=!1,O.setState({paneDragging:!1}),i&&n_(p,M.current??0)&&!J.current&&i($.sourceEvent),J.current=!1,(r||T)&&$M(Z.current,$.transform)){const k=Bc($.transform);Z.current=k,clearTimeout(U.current),U.current=setTimeout(()=>{T==null||T(k),r==null||r($.sourceEvent,k)},o?150:0)}})},[P,o,p,r,i]),j.useEffect(()=>{P&&P.filter($=>{const T=I||s,k=c&&$.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&$.button===1&&$.type==="mousedown"&&(Fi($,"react-flow__node")||Fi($,"react-flow__edge")))return!0;if(!p&&!T&&!o&&!m&&!c||N||!m&&$.type==="dblclick"||Fi($,z)&&$.type==="wheel"||Fi($,C)&&($.type!=="wheel"||o&&$.type==="wheel"&&!I)||!c&&$.ctrlKey&&$.type==="wheel"||!T&&!o&&!k&&$.type==="wheel"||!p&&($.type==="mousedown"||$.type==="touchstart")||Array.isArray(p)&&!p.includes($.button)&&$.type==="mousedown")return!1;const Q=Array.isArray(p)&&p.includes($.button)||!$.button||$.button<=1;return(!$.ctrlKey||$.type==="wheel")&&Q})},[N,P,s,c,o,m,p,y,I]),ae.createElement("div",{className:"react-flow__renderer",ref:X,style:Om},D)},XM=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function VM(){const{userSelectionActive:e,userSelectionRect:n}=nt(XM,Yt);return e&&n?ae.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}function r_(e,n){const r=n.parentNode||n.parentId,i=e.find(s=>s.id===r);if(i){const s=n.position.x+n.width-i.width,c=n.position.y+n.height-i.height;if(s>0||c>0||n.position.x<0||n.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,s>0&&(i.style.width+=s),c>0&&(i.style.height+=c),n.position.x<0){const o=Math.abs(n.position.x);i.position.x=i.position.x-o,i.style.width+=o,n.position.x=0}if(n.position.y<0){const o=Math.abs(n.position.y);i.position.y=i.position.y-o,i.style.height+=o,n.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function GM(e,n){if(e.some(i=>i.type==="reset"))return e.filter(i=>i.type==="reset").map(i=>i.item);const r=e.filter(i=>i.type==="add").map(i=>i.item);return n.reduce((i,s)=>{const c=e.filter(d=>d.id===s.id);if(c.length===0)return i.push(s),i;const o={...s};for(const d of c)if(d)switch(d.type){case"select":{o.selected=d.selected;break}case"position":{typeof d.position<"u"&&(o.position=d.position),typeof d.positionAbsolute<"u"&&(o.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(o.dragging=d.dragging),o.expandParent&&r_(i,o);break}case"dimensions":{typeof d.dimensions<"u"&&(o.width=d.dimensions.width,o.height=d.dimensions.height),typeof d.updateStyle<"u"&&(o.style={...o.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(o.resizing=d.resizing),o.expandParent&&r_(i,o);break}case"remove":return i}return i.push(o),i},r)}function QM(e,n){return GM(e,n)}const xr=(e,n)=>({id:e,type:"select",selected:n});function rl(e,n){return e.reduce((r,i)=>{const s=n.includes(i.id);return!i.selected&&s?(i.selected=!0,r.push(xr(i.id,!0))):i.selected&&!s&&(i.selected=!1,r.push(xr(i.id,!1))),r},[])}const yh=(e,n)=>r=>{r.target===n.current&&(e==null||e(r))},ZM=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),yw=j.memo(({isSelecting:e,selectionMode:n=Is.Full,panOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:c,onPaneContextMenu:o,onPaneScroll:d,onPaneMouseEnter:g,onPaneMouseMove:m,onPaneMouseLeave:y,children:p})=>{const v=j.useRef(null),x=Ct(),A=j.useRef(0),w=j.useRef(0),E=j.useRef(),{userSelectionActive:R,elementsSelectable:D,dragging:z}=nt(ZM,Yt),C=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),A.current=0,w.current=0},U=te=>{c==null||c(te),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},O=te=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){te.preventDefault();return}o==null||o(te)},B=d?te=>d(te):void 0,J=te=>{const{resetSelectedElements:N,domNode:I}=x.getState();if(E.current=I==null?void 0:I.getBoundingClientRect(),!D||!e||te.button!==0||te.target!==v.current||!E.current)return;const{x:M,y:Y}=Sr(te,E.current);N(),x.setState({userSelectionRect:{width:0,height:0,startX:M,startY:Y,x:M,y:Y}}),i==null||i(te)},X=te=>{const{userSelectionRect:N,nodeInternals:I,edges:M,transform:Y,onNodesChange:W,onEdgesChange:$,nodeOrigin:T,getNodes:k}=x.getState();if(!e||!E.current||!N)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const Q=Sr(te,E.current),ee=N.startX??0,re=N.startY??0,oe={...N,x:Q.x<ee?Q.x:ee,y:Q.y<re?Q.y:re,width:Math.abs(Q.x-ee),height:Math.abs(Q.y-re)},fe=k(),Ae=Px(I,oe,Y,n===Is.Partial,!0,T),ve=Wx(Ae,M).map(de=>de.id),ce=Ae.map(de=>de.id);if(A.current!==ce.length){A.current=ce.length;const de=rl(fe,ce);de.length&&(W==null||W(de))}if(w.current!==ve.length){w.current=ve.length;const de=rl(M,ve);de.length&&($==null||$(de))}x.setState({userSelectionRect:oe})},Z=te=>{if(te.button!==0)return;const{userSelectionRect:N}=x.getState();!R&&N&&te.target===v.current&&(U==null||U(te)),x.setState({nodesSelectionActive:A.current>0}),C(),s==null||s(te)},P=te=>{R&&(x.setState({nodesSelectionActive:A.current>0}),s==null||s(te)),C()},se=D&&(e||R);return ae.createElement("div",{className:Gt(["react-flow__pane",{dragging:z,selection:e}]),onClick:se?void 0:yh(U,v),onContextMenu:yh(O,v),onWheel:yh(B,v),onMouseEnter:se?void 0:g,onMouseDown:se?J:void 0,onMouseMove:se?X:m,onMouseUp:se?Z:void 0,onMouseLeave:se?P:y,ref:v,style:Om},p,ae.createElement(VM,null))});yw.displayName="Pane";function pw(e,n){const r=e.parentNode||e.parentId;if(!r)return!1;const i=n.get(r);return i?i.selected?!0:pw(i,n):!1}function i_(e,n,r){let i=e;do{if(i!=null&&i.matches(n))return!0;if(i===r.current)return!1;i=i.parentElement}while(i);return!1}function IM(e,n,r,i){return Array.from(e.values()).filter(s=>(s.selected||s.id===i)&&(!s.parentNode||s.parentId||!pw(s,e))&&(s.draggable||n&&typeof s.draggable>"u")).map(s=>{var c,o;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((c=s.positionAbsolute)==null?void 0:c.x)??0),y:r.y-(((o=s.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function FM(e,n){return!n||n==="parent"?n:[n[0],[n[1][0]-(e.width||0),n[1][1]-(e.height||0)]]}function vw(e,n,r,i,s=[0,0],c){const o=FM(e,e.extent||i);let d=o;const g=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(g&&e.width&&e.height){const p=r.get(g),{x:v,y:x}=ol(p,s).positionAbsolute;d=p&&Nn(v)&&Nn(x)&&Nn(p.width)&&Nn(p.height)?[[v+e.width*s[0],x+e.height*s[1]],[v+p.width-e.width+e.width*s[0],x+p.height-e.height+e.height*s[1]]]:d}else c==null||c("005",Ha.error005()),d=o;else if(e.extent&&g&&e.extent!=="parent"){const p=r.get(g),{x:v,y:x}=ol(p,s).positionAbsolute;d=[[e.extent[0][0]+v,e.extent[0][1]+x],[e.extent[1][0]+v,e.extent[1][1]+x]]}let m={x:0,y:0};if(g){const p=r.get(g);m=ol(p,s).positionAbsolute}const y=d&&d!=="parent"?bm(n,d):n;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function ph({nodeId:e,dragItems:n,nodeInternals:r}){const i=n.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?i.find(s=>s.id===e):i[0],i]}const l_=(e,n,r,i)=>{const s=n.querySelectorAll(e);if(!s||!s.length)return null;const c=Array.from(s),o=n.getBoundingClientRect(),d={x:o.width*i[0],y:o.height*i[1]};return c.map(g=>{const m=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(m.left-o.left-d.x)/r,y:(m.top-o.top-d.y)/r,...wm(g)}})};function Cs(e,n,r){return r===void 0?r:i=>{const s=n().nodeInternals.get(e);s&&r(i,{...s})}}function Kh({id:e,store:n,unselect:r=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:c,multiSelectionActive:o,nodeInternals:d,onError:g}=n.getState(),m=d.get(e);if(!m){g==null||g("012",Ha.error012(e));return}n.setState({nodesSelectionActive:!1}),m.selected?(r||m.selected&&o)&&(c({nodes:[m],edges:[]}),requestAnimationFrame(()=>{var y;return(y=i==null?void 0:i.current)==null?void 0:y.blur()})):s([e])}function KM(){const e=Ct();return j.useCallback(({sourceEvent:r})=>{const{transform:i,snapGrid:s,snapToGrid:c}=e.getState(),o=r.touches?r.touches[0].clientX:r.clientX,d=r.touches?r.touches[0].clientY:r.clientY,g={x:(o-i[0])/i[2],y:(d-i[1])/i[2]};return{xSnapped:c?s[0]*Math.round(g.x/s[0]):g.x,ySnapped:c?s[1]*Math.round(g.y/s[1]):g.y,...g}},[])}function vh(e){return(n,r,i)=>e==null?void 0:e(n,i)}function _w({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:i,nodeId:s,isSelectable:c,selectNodesOnDrag:o}){const d=Ct(),[g,m]=j.useState(!1),y=j.useRef([]),p=j.useRef({x:null,y:null}),v=j.useRef(0),x=j.useRef(null),A=j.useRef({x:0,y:0}),w=j.useRef(null),E=j.useRef(!1),R=j.useRef(!1),D=j.useRef(!1),z=KM();return j.useEffect(()=>{if(e!=null&&e.current){const C=Wt(e.current),U=({x:J,y:X})=>{const{nodeInternals:Z,onNodeDrag:P,onSelectionDrag:se,updateNodePositions:te,nodeExtent:N,snapGrid:I,snapToGrid:M,nodeOrigin:Y,onError:W}=d.getState();p.current={x:J,y:X};let $=!1,T={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&N){const Q=Mm(y.current,Y);T=Sm(Q)}if(y.current=y.current.map(Q=>{const ee={x:J-Q.distance.x,y:X-Q.distance.y};M&&(ee.x=I[0]*Math.round(ee.x/I[0]),ee.y=I[1]*Math.round(ee.y/I[1]));const re=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];y.current.length>1&&N&&!Q.extent&&(re[0][0]=Q.positionAbsolute.x-T.x+N[0][0],re[1][0]=Q.positionAbsolute.x+(Q.width??0)-T.x2+N[1][0],re[0][1]=Q.positionAbsolute.y-T.y+N[0][1],re[1][1]=Q.positionAbsolute.y+(Q.height??0)-T.y2+N[1][1]);const oe=vw(Q,ee,Z,re,Y,W);return $=$||Q.position.x!==oe.position.x||Q.position.y!==oe.position.y,Q.position=oe.position,Q.positionAbsolute=oe.positionAbsolute,Q}),!$)return;te(y.current,!0,!0),m(!0);const k=s?P:vh(se);if(k&&w.current){const[Q,ee]=ph({nodeId:s,dragItems:y.current,nodeInternals:Z});k(w.current,Q,ee)}},O=()=>{if(!x.current)return;const[J,X]=Xx(A.current,x.current);if(J!==0||X!==0){const{transform:Z,panBy:P}=d.getState();p.current.x=(p.current.x??0)-J/Z[2],p.current.y=(p.current.y??0)-X/Z[2],P({x:J,y:X})&&U(p.current)}v.current=requestAnimationFrame(O)},B=J=>{var Y;const{nodeInternals:X,multiSelectionActive:Z,nodesDraggable:P,unselectNodesAndEdges:se,onNodeDragStart:te,onSelectionDragStart:N}=d.getState();R.current=!0;const I=s?te:vh(N);(!o||!c)&&!Z&&s&&((Y=X.get(s))!=null&&Y.selected||se()),s&&c&&o&&Kh({id:s,store:d,nodeRef:e});const M=z(J);if(p.current=M,y.current=IM(X,P,M,s),I&&y.current){const[W,$]=ph({nodeId:s,dragItems:y.current,nodeInternals:X});I(J.sourceEvent,W,$)}};if(n)C.on(".drag",null);else{const J=WA().on("start",X=>{const{domNode:Z,nodeDragThreshold:P}=d.getState();P===0&&B(X),D.current=!1;const se=z(X);p.current=se,x.current=(Z==null?void 0:Z.getBoundingClientRect())||null,A.current=Sr(X.sourceEvent,x.current)}).on("drag",X=>{var te,N;const Z=z(X),{autoPanOnNodeDrag:P,nodeDragThreshold:se}=d.getState();if(X.sourceEvent.type==="touchmove"&&X.sourceEvent.touches.length>1&&(D.current=!0),!D.current){if(!E.current&&R.current&&P&&(E.current=!0,O()),!R.current){const I=Z.xSnapped-(((te=p==null?void 0:p.current)==null?void 0:te.x)??0),M=Z.ySnapped-(((N=p==null?void 0:p.current)==null?void 0:N.y)??0);Math.sqrt(I*I+M*M)>se&&B(X)}(p.current.x!==Z.xSnapped||p.current.y!==Z.ySnapped)&&y.current&&R.current&&(w.current=X.sourceEvent,A.current=Sr(X.sourceEvent,x.current),U(Z))}}).on("end",X=>{if(!(!R.current||D.current)&&(m(!1),E.current=!1,R.current=!1,cancelAnimationFrame(v.current),y.current)){const{updateNodePositions:Z,nodeInternals:P,onNodeDragStop:se,onSelectionDragStop:te}=d.getState(),N=s?se:vh(te);if(Z(y.current,!1,!1),N){const[I,M]=ph({nodeId:s,dragItems:y.current,nodeInternals:P});N(X.sourceEvent,I,M)}}}).filter(X=>{const Z=X.target;return!X.button&&(!r||!i_(Z,`.${r}`,e))&&(!i||i_(Z,i,e))});return C.call(J),()=>{C.on(".drag",null)}}}},[e,n,r,i,c,d,s,o,z]),g}function xw(){const e=Ct();return j.useCallback(r=>{const{nodeInternals:i,nodeExtent:s,updateNodePositions:c,getNodes:o,snapToGrid:d,snapGrid:g,onError:m,nodesDraggable:y}=e.getState(),p=o().filter(D=>D.selected&&(D.draggable||y&&typeof D.draggable>"u")),v=d?g[0]:5,x=d?g[1]:5,A=r.isShiftPressed?4:1,w=r.x*v*A,E=r.y*x*A,R=p.map(D=>{if(D.positionAbsolute){const z={x:D.positionAbsolute.x+w,y:D.positionAbsolute.y+E};d&&(z.x=g[0]*Math.round(z.x/g[0]),z.y=g[1]*Math.round(z.y/g[1]));const{positionAbsolute:C,position:U}=vw(D,z,i,s,void 0,m);D.position=U,D.positionAbsolute=C}return D});c(R,!0,!1)},[])}const fl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ms=e=>{const n=({id:r,type:i,data:s,xPos:c,yPos:o,xPosOrigin:d,yPosOrigin:g,selected:m,onClick:y,onMouseEnter:p,onMouseMove:v,onMouseLeave:x,onContextMenu:A,onDoubleClick:w,style:E,className:R,isDraggable:D,isSelectable:z,isConnectable:C,isFocusable:U,selectNodesOnDrag:O,sourcePosition:B,targetPosition:J,hidden:X,resizeObserver:Z,dragHandle:P,zIndex:se,isParent:te,noDragClassName:N,noPanClassName:I,initialized:M,disableKeyboardA11y:Y,ariaLabel:W,rfId:$,hasHandleBounds:T})=>{const k=Ct(),Q=j.useRef(null),ee=j.useRef(null),re=j.useRef(B),oe=j.useRef(J),fe=j.useRef(i),Ae=z||D||y||p||v||x,ve=xw(),ce=Cs(r,k.getState,p),de=Cs(r,k.getState,v),we=Cs(r,k.getState,x),ue=Cs(r,k.getState,A),qe=Cs(r,k.getState,w),Me=Te=>{const{nodeDragThreshold:me}=k.getState();if(z&&(!O||!D||me>0)&&Kh({id:r,store:k,nodeRef:Q}),y){const jt=k.getState().nodeInternals.get(r);jt&&y(Te,{...jt})}},He=Te=>{if(!Gh(Te)&&!Y)if(Gx.includes(Te.key)&&z){const me=Te.key==="Escape";Kh({id:r,store:k,unselect:me,nodeRef:Q})}else D&&m&&Object.prototype.hasOwnProperty.call(fl,Te.key)&&(k.setState({ariaLiveMessage:`Moved selected node ${Te.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~c}, y: ${~~o}`}),ve({x:fl[Te.key].x,y:fl[Te.key].y,isShiftPressed:Te.shiftKey}))};j.useEffect(()=>()=>{ee.current&&(Z==null||Z.unobserve(ee.current),ee.current=null)},[]),j.useEffect(()=>{if(Q.current&&!X){const Te=Q.current;(!M||!T||ee.current!==Te)&&(ee.current&&(Z==null||Z.unobserve(ee.current)),Z==null||Z.observe(Te),ee.current=Te)}},[X,M,T]),j.useEffect(()=>{const Te=fe.current!==i,me=re.current!==B,jt=oe.current!==J;Q.current&&(Te||me||jt)&&(Te&&(fe.current=i),me&&(re.current=B),jt&&(oe.current=J),k.getState().updateNodeDimensions([{id:r,nodeElement:Q.current,forceUpdate:!0}]))},[r,i,B,J]);const Ke=_w({nodeRef:Q,disabled:X||!D,noDragClassName:N,handleSelector:P,nodeId:r,isSelectable:z,selectNodesOnDrag:O});return X?null:ae.createElement("div",{className:Gt(["react-flow__node",`react-flow__node-${i}`,{[I]:D},R,{selected:m,selectable:z,parent:te,dragging:Ke}]),ref:Q,style:{zIndex:se,transform:`translate(${d}px,${g}px)`,pointerEvents:Ae?"all":"none",visibility:M?"visible":"hidden",...E},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:de,onMouseLeave:we,onContextMenu:ue,onClick:Me,onDoubleClick:qe,onKeyDown:U?He:void 0,tabIndex:U?0:void 0,role:U?"button":void 0,"aria-describedby":Y?void 0:`${fw}-${$}`,"aria-label":W},ae.createElement(cM,{value:r},ae.createElement(e,{id:r,data:s,type:i,xPos:c,yPos:o,selected:m,isConnectable:C,sourcePosition:B,targetPosition:J,dragging:Ke,dragHandle:P,zIndex:se})))};return n.displayName="NodeWrapper",j.memo(n)};const JM=e=>{const n=e.getNodes().filter(r=>r.selected);return{...Mm(n,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function PM({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const i=Ct(),{width:s,height:c,x:o,y:d,transformString:g,userSelectionActive:m}=nt(JM,Yt),y=xw(),p=j.useRef(null);if(j.useEffect(()=>{var A;r||(A=p.current)==null||A.focus({preventScroll:!0})},[r]),_w({nodeRef:p}),m||!s||!c)return null;const v=e?A=>{const w=i.getState().getNodes().filter(E=>E.selected);e(A,w)}:void 0,x=A=>{Object.prototype.hasOwnProperty.call(fl,A.key)&&y({x:fl[A.key].x,y:fl[A.key].y,isShiftPressed:A.shiftKey})};return ae.createElement("div",{className:Gt(["react-flow__nodesselection","react-flow__container",n]),style:{transform:g}},ae.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:r?void 0:-1,onKeyDown:r?void 0:x,style:{width:s,height:c,top:d,left:o}}))}var WM=j.memo(PM);const eR=e=>e.nodesSelectionActive,ww=({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:o,deleteKeyCode:d,onMove:g,onMoveStart:m,onMoveEnd:y,selectionKeyCode:p,selectionOnDrag:v,selectionMode:x,onSelectionStart:A,onSelectionEnd:w,multiSelectionKeyCode:E,panActivationKeyCode:R,zoomActivationKeyCode:D,elementsSelectable:z,zoomOnScroll:C,zoomOnPinch:U,panOnScroll:O,panOnScrollSpeed:B,panOnScrollMode:J,zoomOnDoubleClick:X,panOnDrag:Z,defaultViewport:P,translateExtent:se,minZoom:te,maxZoom:N,preventScrolling:I,onSelectionContextMenu:M,noWheelClassName:Y,noPanClassName:W,disableKeyboardA11y:$})=>{const T=nt(eR),k=Ks(p),Q=Ks(R),ee=Q||Z,re=Q||O,oe=k||v&&ee!==!0;return LM({deleteKeyCode:d,multiSelectionKeyCode:E}),ae.createElement(qM,{onMove:g,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:c,elementsSelectable:z,zoomOnScroll:C,zoomOnPinch:U,panOnScroll:re,panOnScrollSpeed:B,panOnScrollMode:J,zoomOnDoubleClick:X,panOnDrag:!k&&ee,defaultViewport:P,translateExtent:se,minZoom:te,maxZoom:N,zoomActivationKeyCode:D,preventScrolling:I,noWheelClassName:Y,noPanClassName:W},ae.createElement(yw,{onSelectionStart:A,onSelectionEnd:w,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:o,panOnDrag:ee,isSelecting:!!oe,selectionMode:x},e,T&&ae.createElement(WM,{onSelectionContextMenu:M,noPanClassName:W,disableKeyboardA11y:$})))};ww.displayName="FlowRenderer";var tR=j.memo(ww);function nR(e){return nt(j.useCallback(r=>e?Px(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function aR(e){const n={input:Ms(e.input||sw),default:Ms(e.default||Fh),output:Ms(e.output||cw),group:Ms(e.group||Dm)},r={},i=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,c)=>(s[c]=Ms(e[c]||Fh),s),r);return{...n,...i}}const rR=({x:e,y:n,width:r,height:i,origin:s})=>!r||!i?{x:e,y:n}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:n}:{x:e-r*s[0],y:n-i*s[1]},iR=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),bw=e=>{const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:i,elementsSelectable:s,updateNodeDimensions:c,onError:o}=nt(iR,Yt),d=nR(e.onlyRenderVisibleElements),g=j.useRef(),m=j.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(p=>{const v=p.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));c(v)});return g.current=y,y},[]);return j.useEffect(()=>()=>{var y;(y=g==null?void 0:g.current)==null||y.disconnect()},[]),ae.createElement("div",{className:"react-flow__nodes",style:Om},d.map(y=>{var U,O,B;let p=y.type||"default";e.nodeTypes[p]||(o==null||o("003",Ha.error003(p)),p="default");const v=e.nodeTypes[p]||e.nodeTypes.default,x=!!(y.draggable||n&&typeof y.draggable>"u"),A=!!(y.selectable||s&&typeof y.selectable>"u"),w=!!(y.connectable||r&&typeof y.connectable>"u"),E=!!(y.focusable||i&&typeof y.focusable>"u"),R=e.nodeExtent?bm(y.positionAbsolute,e.nodeExtent):y.positionAbsolute,D=(R==null?void 0:R.x)??0,z=(R==null?void 0:R.y)??0,C=rR({x:D,y:z,width:y.width??0,height:y.height??0,origin:e.nodeOrigin});return ae.createElement(v,{key:y.id,id:y.id,className:y.className,style:y.style,type:p,data:y.data,sourcePosition:y.sourcePosition||pe.Bottom,targetPosition:y.targetPosition||pe.Top,hidden:y.hidden,xPos:D,yPos:z,xPosOrigin:C.x,yPosOrigin:C.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!y.selected,isDraggable:x,isSelectable:A,isConnectable:w,isFocusable:E,resizeObserver:m,dragHandle:y.dragHandle,zIndex:((U=y[lt])==null?void 0:U.z)??0,isParent:!!((O=y[lt])!=null&&O.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!y.width&&!!y.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!((B=y[lt])!=null&&B.handleBounds)})}))};bw.displayName="NodeRenderer";var lR=j.memo(bw);const sR=(e,n,r)=>r===pe.Left?e-n:r===pe.Right?e+n:e,uR=(e,n,r)=>r===pe.Top?e-n:r===pe.Bottom?e+n:e,s_="react-flow__edgeupdater",u_=({position:e,centerX:n,centerY:r,radius:i=10,onMouseDown:s,onMouseEnter:c,onMouseOut:o,type:d})=>ae.createElement("circle",{onMouseDown:s,onMouseEnter:c,onMouseOut:o,className:Gt([s_,`${s_}-${d}`]),cx:sR(n,i,e),cy:uR(r,i,e),r:i,stroke:"transparent",fill:"transparent"}),cR=()=>!0;var Ki=e=>{const n=({id:r,className:i,type:s,data:c,onClick:o,onEdgeDoubleClick:d,selected:g,animated:m,label:y,labelStyle:p,labelShowBg:v,labelBgStyle:x,labelBgPadding:A,labelBgBorderRadius:w,style:E,source:R,target:D,sourceX:z,sourceY:C,targetX:U,targetY:O,sourcePosition:B,targetPosition:J,elementsSelectable:X,hidden:Z,sourceHandleId:P,targetHandleId:se,onContextMenu:te,onMouseEnter:N,onMouseMove:I,onMouseLeave:M,reconnectRadius:Y,onReconnect:W,onReconnectStart:$,onReconnectEnd:T,markerEnd:k,markerStart:Q,rfId:ee,ariaLabel:re,isFocusable:oe,isReconnectable:fe,pathOptions:Ae,interactionWidth:ve,disableKeyboardA11y:ce})=>{const de=j.useRef(null),[we,ue]=j.useState(!1),[qe,Me]=j.useState(!1),He=Ct(),Ke=j.useMemo(()=>`url('#${Zh(Q,ee)}')`,[Q,ee]),Te=j.useMemo(()=>`url('#${Zh(k,ee)}')`,[k,ee]);if(Z)return null;const me=wt=>{var Ht;const{edges:rn,addSelectedEdges:vn,unselectNodesAndEdges:_n,multiSelectionActive:Xt}=He.getState(),Qt=rn.find(Mr=>Mr.id===r);Qt&&(X&&(He.setState({nodesSelectionActive:!1}),Qt.selected&&Xt?(_n({nodes:[],edges:[Qt]}),(Ht=de.current)==null||Ht.blur()):vn([r])),o&&o(wt,Qt))},jt=Ts(r,He.getState,d),Qn=Ts(r,He.getState,te),Zn=Ts(r,He.getState,N),ka=Ts(r,He.getState,I),fa=Ts(r,He.getState,M),zn=(wt,rn)=>{if(wt.button!==0)return;const{edges:vn,isValidConnection:_n}=He.getState(),Xt=rn?D:R,Qt=(rn?se:P)||null,Ht=rn?"target":"source",Mr=_n||cR,oi=rn,Ya=vn.find(da=>da.id===r);Me(!0),$==null||$(wt,Ya,Ht);const Rr=da=>{Me(!1),T==null||T(da,Ya,Ht)};aw({event:wt,handleId:Qt,nodeId:Xt,onConnect:da=>W==null?void 0:W(Ya,da),isTarget:oi,getState:He.getState,setState:He.setState,isValidConnection:Mr,edgeUpdaterType:Ht,onReconnectEnd:Rr})},$a=wt=>zn(wt,!0),an=wt=>zn(wt,!1),st=()=>ue(!0),qt=()=>ue(!1),ot=!X&&!o,Cr=wt=>{var rn;if(!ce&&Gx.includes(wt.key)&&X){const{unselectNodesAndEdges:vn,addSelectedEdges:_n,edges:Xt}=He.getState();wt.key==="Escape"?((rn=de.current)==null||rn.blur(),vn({edges:[Xt.find(Ht=>Ht.id===r)]})):_n([r])}};return ae.createElement("g",{className:Gt(["react-flow__edge",`react-flow__edge-${s}`,i,{selected:g,animated:m,inactive:ot,updating:we}]),onClick:me,onDoubleClick:jt,onContextMenu:Qn,onMouseEnter:Zn,onMouseMove:ka,onMouseLeave:fa,onKeyDown:oe?Cr:void 0,tabIndex:oe?0:void 0,role:oe?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":re===null?void 0:re||`Edge from ${R} to ${D}`,"aria-describedby":oe?`${dw}-${ee}`:void 0,ref:de},!qe&&ae.createElement(e,{id:r,source:R,target:D,selected:g,animated:m,label:y,labelStyle:p,labelShowBg:v,labelBgStyle:x,labelBgPadding:A,labelBgBorderRadius:w,data:c,style:E,sourceX:z,sourceY:C,targetX:U,targetY:O,sourcePosition:B,targetPosition:J,sourceHandleId:P,targetHandleId:se,markerStart:Ke,markerEnd:Te,pathOptions:Ae,interactionWidth:ve}),fe&&ae.createElement(ae.Fragment,null,(fe==="source"||fe===!0)&&ae.createElement(u_,{position:B,centerX:z,centerY:C,radius:Y,onMouseDown:$a,onMouseEnter:st,onMouseOut:qt,type:"source"}),(fe==="target"||fe===!0)&&ae.createElement(u_,{position:J,centerX:U,centerY:O,radius:Y,onMouseDown:an,onMouseEnter:st,onMouseOut:qt,type:"target"})))};return n.displayName="EdgeWrapper",j.memo(n)};function oR(e){const n={default:Ki(e.default||go),straight:Ki(e.bezier||Tm),step:Ki(e.step||Am),smoothstep:Ki(e.step||Ro),simplebezier:Ki(e.simplebezier||Em)},r={},i=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,c)=>(s[c]=Ki(e[c]||go),s),r);return{...n,...i}}function c_(e,n,r=null){const i=((r==null?void 0:r.x)||0)+n.x,s=((r==null?void 0:r.y)||0)+n.y,c=(r==null?void 0:r.width)||n.width,o=(r==null?void 0:r.height)||n.height;switch(e){case pe.Top:return{x:i+c/2,y:s};case pe.Right:return{x:i+c,y:s+o/2};case pe.Bottom:return{x:i+c/2,y:s+o};case pe.Left:return{x:i,y:s+o/2}}}function o_(e,n){return e?e.length===1||!n?e[0]:n&&e.find(r=>r.id===n)||null:null}const fR=(e,n,r,i,s,c)=>{const o=c_(r,e,n),d=c_(c,i,s);return{sourceX:o.x,sourceY:o.y,targetX:d.x,targetY:d.y}};function dR({sourcePos:e,targetPos:n,sourceWidth:r,sourceHeight:i,targetWidth:s,targetHeight:c,width:o,height:d,transform:g}){const m={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x+r,n.x+s),y2:Math.max(e.y+i,n.y+c)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=Sm({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:o/g[2],height:d/g[2]}),p=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),v=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(p*v)>0}function f_(e){var i,s,c,o,d;const n=((i=e==null?void 0:e[lt])==null?void 0:i.handleBounds)||null,r=n&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((c=e==null?void 0:e.positionAbsolute)==null?void 0:c.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((d=e==null?void 0:e.positionAbsolute)==null?void 0:d.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},n,!!r]}const hR=[{level:0,isMaxLevel:!0,edges:[]}];function mR(e,n,r=!1){let i=-1;const s=e.reduce((o,d)=>{var y,p;const g=Nn(d.zIndex);let m=g?d.zIndex:0;if(r){const v=n.get(d.target),x=n.get(d.source),A=d.selected||(v==null?void 0:v.selected)||(x==null?void 0:x.selected),w=Math.max(((y=x==null?void 0:x[lt])==null?void 0:y.z)||0,((p=v==null?void 0:v[lt])==null?void 0:p.z)||0,1e3);m=(g?d.zIndex:0)+(A?w:0)}return o[m]?o[m].push(d):o[m]=[d],i=m>i?m:i,o},{}),c=Object.entries(s).map(([o,d])=>{const g=+o;return{edges:d,level:g,isMaxLevel:g===i}});return c.length===0?hR:c}function gR(e,n,r){const i=nt(j.useCallback(s=>e?s.edges.filter(c=>{const o=n.get(c.source),d=n.get(c.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(d==null?void 0:d.width)&&(d==null?void 0:d.height)&&dR({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:d.width,targetHeight:d.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,n]));return mR(i,n,r)}const yR=({color:e="none",strokeWidth:n=1})=>ae.createElement("polyline",{style:{stroke:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),pR=({color:e="none",strokeWidth:n=1})=>ae.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),d_={[Fs.Arrow]:yR,[Fs.ArrowClosed]:pR};function vR(e){const n=Ct();return j.useMemo(()=>{var s,c;return Object.prototype.hasOwnProperty.call(d_,e)?d_[e]:((c=(s=n.getState()).onError)==null||c.call(s,"009",Ha.error009(e)),null)},[e])}const _R=({id:e,type:n,color:r,width:i=12.5,height:s=12.5,markerUnits:c="strokeWidth",strokeWidth:o,orient:d="auto-start-reverse"})=>{const g=vR(n);return g?ae.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:d,refX:"0",refY:"0"},ae.createElement(g,{color:r,strokeWidth:o})):null},xR=({defaultColor:e,rfId:n})=>r=>{const i=[];return r.edges.reduce((s,c)=>([c.markerStart,c.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const d=Zh(o,n);i.includes(d)||(s.push({id:d,color:o.color||e,...o}),i.push(d))}}),s),[]).sort((s,c)=>s.id.localeCompare(c.id))},Sw=({defaultColor:e,rfId:n})=>{const r=nt(j.useCallback(xR({defaultColor:e,rfId:n}),[e,n]),(i,s)=>!(i.length!==s.length||i.some((c,o)=>c.id!==s[o].id)));return ae.createElement("defs",null,r.map(i=>ae.createElement(_R,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};Sw.displayName="MarkerDefinitions";var wR=j.memo(Sw);const bR=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Ew=({defaultMarkerColor:e,onlyRenderVisibleElements:n,elevateEdgesOnSelect:r,rfId:i,edgeTypes:s,noPanClassName:c,onEdgeContextMenu:o,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:p,onReconnect:v,onReconnectStart:x,onReconnectEnd:A,reconnectRadius:w,children:E,disableKeyboardA11y:R})=>{const{edgesFocusable:D,edgesUpdatable:z,elementsSelectable:C,width:U,height:O,connectionMode:B,nodeInternals:J,onError:X}=nt(bR,Yt),Z=gR(n,J,r);return U?ae.createElement(ae.Fragment,null,Z.map(({level:P,edges:se,isMaxLevel:te})=>ae.createElement("svg",{key:P,style:{zIndex:P},width:U,height:O,className:"react-flow__edges react-flow__container"},te&&ae.createElement(wR,{defaultColor:e,rfId:i}),ae.createElement("g",null,se.map(N=>{const[I,M,Y]=f_(J.get(N.source)),[W,$,T]=f_(J.get(N.target));if(!Y||!T)return null;let k=N.type||"default";s[k]||(X==null||X("011",Ha.error011(k)),k="default");const Q=s[k]||s.default,ee=B===ri.Strict?$.target:($.target??[]).concat($.source??[]),re=o_(M.source,N.sourceHandle),oe=o_(ee,N.targetHandle),fe=(re==null?void 0:re.position)||pe.Bottom,Ae=(oe==null?void 0:oe.position)||pe.Top,ve=!!(N.focusable||D&&typeof N.focusable>"u"),ce=N.reconnectable||N.updatable,de=typeof v<"u"&&(ce||z&&typeof ce>"u");if(!re||!oe)return X==null||X("008",Ha.error008(re,N)),null;const{sourceX:we,sourceY:ue,targetX:qe,targetY:Me}=fR(I,re,fe,W,oe,Ae);return ae.createElement(Q,{key:N.id,id:N.id,className:Gt([N.className,c]),type:k,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:we,sourceY:ue,targetX:qe,targetY:Me,sourcePosition:fe,targetPosition:Ae,elementsSelectable:C,onContextMenu:o,onMouseEnter:d,onMouseMove:g,onMouseLeave:m,onClick:y,onEdgeDoubleClick:p,onReconnect:v,onReconnectStart:x,onReconnectEnd:A,reconnectRadius:w,rfId:i,ariaLabel:N.ariaLabel,isFocusable:ve,isReconnectable:de,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth,disableKeyboardA11y:R})})))),E):null};Ew.displayName="EdgeRenderer";var SR=j.memo(Ew);const ER=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function AR({children:e}){const n=nt(ER);return ae.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},e)}function TR(e){const n=Nm(),r=j.useRef(!1);j.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const CR={[pe.Left]:pe.Right,[pe.Right]:pe.Left,[pe.Top]:pe.Bottom,[pe.Bottom]:pe.Top},Aw=({nodeId:e,handleType:n,style:r,type:i=wr.Bezier,CustomComponent:s,connectionStatus:c})=>{var O,B,J;const{fromNode:o,handleId:d,toX:g,toY:m,connectionMode:y}=nt(j.useCallback(X=>({fromNode:X.nodeInternals.get(e),handleId:X.connectionHandleId,toX:(X.connectionPosition.x-X.transform[0])/X.transform[2],toY:(X.connectionPosition.y-X.transform[1])/X.transform[2],connectionMode:X.connectionMode}),[e]),Yt),p=(O=o==null?void 0:o[lt])==null?void 0:O.handleBounds;let v=p==null?void 0:p[n];if(y===ri.Loose&&(v=v||(p==null?void 0:p[n==="source"?"target":"source"])),!o||!v)return null;const x=d?v.find(X=>X.id===d):v[0],A=x?x.x+x.width/2:(o.width??0)/2,w=x?x.y+x.height/2:o.height??0,E=(((B=o.positionAbsolute)==null?void 0:B.x)??0)+A,R=(((J=o.positionAbsolute)==null?void 0:J.y)??0)+w,D=x==null?void 0:x.position,z=D?CR[D]:null;if(!D||!z)return null;if(s)return ae.createElement(s,{connectionLineType:i,connectionLineStyle:r,fromNode:o,fromHandle:x,fromX:E,fromY:R,toX:g,toY:m,fromPosition:D,toPosition:z,connectionStatus:c});let C="";const U={sourceX:E,sourceY:R,sourcePosition:D,targetX:g,targetY:m,targetPosition:z};return i===wr.Bezier?[C]=Kx(U):i===wr.Step?[C]=Qh({...U,borderRadius:0}):i===wr.SmoothStep?[C]=Qh(U):i===wr.SimpleBezier?[C]=Fx(U):C=`M${E},${R} ${g},${m}`,ae.createElement("path",{d:C,fill:"none",className:"react-flow__connection-path",style:r})};Aw.displayName="ConnectionLine";const MR=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function RR({containerStyle:e,style:n,type:r,component:i}){const{nodeId:s,handleType:c,nodesConnectable:o,width:d,height:g,connectionStatus:m}=nt(MR,Yt);return!(s&&c&&d&&o)?null:ae.createElement("svg",{style:e,width:d,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},ae.createElement("g",{className:Gt(["react-flow__connection",m])},ae.createElement(Aw,{nodeId:s,handleType:c,style:n,type:r,CustomComponent:i,connectionStatus:m})))}function h_(e,n){return j.useRef(null),Ct(),j.useMemo(()=>n(e),[e])}const Tw=({nodeTypes:e,edgeTypes:n,onMove:r,onMoveStart:i,onMoveEnd:s,onInit:c,onNodeClick:o,onEdgeClick:d,onNodeDoubleClick:g,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:p,onNodeMouseLeave:v,onNodeContextMenu:x,onSelectionContextMenu:A,onSelectionStart:w,onSelectionEnd:E,connectionLineType:R,connectionLineStyle:D,connectionLineComponent:z,connectionLineContainerStyle:C,selectionKeyCode:U,selectionOnDrag:O,selectionMode:B,multiSelectionKeyCode:J,panActivationKeyCode:X,zoomActivationKeyCode:Z,deleteKeyCode:P,onlyRenderVisibleElements:se,elementsSelectable:te,selectNodesOnDrag:N,defaultViewport:I,translateExtent:M,minZoom:Y,maxZoom:W,preventScrolling:$,defaultMarkerColor:T,zoomOnScroll:k,zoomOnPinch:Q,panOnScroll:ee,panOnScrollSpeed:re,panOnScrollMode:oe,zoomOnDoubleClick:fe,panOnDrag:Ae,onPaneClick:ve,onPaneMouseEnter:ce,onPaneMouseMove:de,onPaneMouseLeave:we,onPaneScroll:ue,onPaneContextMenu:qe,onEdgeContextMenu:Me,onEdgeMouseEnter:He,onEdgeMouseMove:Ke,onEdgeMouseLeave:Te,onReconnect:me,onReconnectStart:jt,onReconnectEnd:Qn,reconnectRadius:Zn,noDragClassName:ka,noWheelClassName:fa,noPanClassName:zn,elevateEdgesOnSelect:$a,disableKeyboardA11y:an,nodeOrigin:st,nodeExtent:qt,rfId:ot})=>{const Cr=h_(e,aR),wt=h_(n,oR);return TR(c),ae.createElement(tR,{onPaneClick:ve,onPaneMouseEnter:ce,onPaneMouseMove:de,onPaneMouseLeave:we,onPaneContextMenu:qe,onPaneScroll:ue,deleteKeyCode:P,selectionKeyCode:U,selectionOnDrag:O,selectionMode:B,onSelectionStart:w,onSelectionEnd:E,multiSelectionKeyCode:J,panActivationKeyCode:X,zoomActivationKeyCode:Z,elementsSelectable:te,onMove:r,onMoveStart:i,onMoveEnd:s,zoomOnScroll:k,zoomOnPinch:Q,zoomOnDoubleClick:fe,panOnScroll:ee,panOnScrollSpeed:re,panOnScrollMode:oe,panOnDrag:Ae,defaultViewport:I,translateExtent:M,minZoom:Y,maxZoom:W,onSelectionContextMenu:A,preventScrolling:$,noDragClassName:ka,noWheelClassName:fa,noPanClassName:zn,disableKeyboardA11y:an},ae.createElement(AR,null,ae.createElement(SR,{edgeTypes:wt,onEdgeClick:d,onEdgeDoubleClick:m,onlyRenderVisibleElements:se,onEdgeContextMenu:Me,onEdgeMouseEnter:He,onEdgeMouseMove:Ke,onEdgeMouseLeave:Te,onReconnect:me,onReconnectStart:jt,onReconnectEnd:Qn,reconnectRadius:Zn,defaultMarkerColor:T,noPanClassName:zn,elevateEdgesOnSelect:!!$a,disableKeyboardA11y:an,rfId:ot},ae.createElement(RR,{style:D,type:R,component:z,containerStyle:C})),ae.createElement("div",{className:"react-flow__edgelabel-renderer"}),ae.createElement(lR,{nodeTypes:Cr,onNodeClick:o,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:p,onNodeMouseLeave:v,onNodeContextMenu:x,selectNodesOnDrag:N,onlyRenderVisibleElements:se,noPanClassName:zn,noDragClassName:ka,disableKeyboardA11y:an,nodeOrigin:st,nodeExtent:qt,rfId:ot})))};Tw.displayName="GraphView";var DR=j.memo(Tw);const Jh=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],yr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Jh,nodeExtent:Jh,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ri.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:aM,isValidConnection:void 0},NR=()=>f2((e,n)=>({...yr,setNodes:r=>{const{nodeInternals:i,nodeOrigin:s,elevateNodesOnSelect:c}=n();e({nodeInternals:gh(r,i,s,c)})},getNodes:()=>Array.from(n().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:i={}}=n();e({edges:r.map(s=>({...i,...s}))})},setDefaultNodesAndEdges:(r,i)=>{const s=typeof r<"u",c=typeof i<"u",o=s?gh(r,new Map,n().nodeOrigin,n().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:c?i:[],hasDefaultNodes:s,hasDefaultEdges:c})},updateNodeDimensions:r=>{const{onNodesChange:i,nodeInternals:s,fitViewOnInit:c,fitViewOnInitDone:o,fitViewOnInitOptions:d,domNode:g,nodeOrigin:m}=n(),y=g==null?void 0:g.querySelector(".react-flow__viewport");if(!y)return;const p=window.getComputedStyle(y),{m22:v}=new window.DOMMatrixReadOnly(p.transform),x=r.reduce((w,E)=>{const R=s.get(E.id);if(R!=null&&R.hidden)s.set(R.id,{...R,[lt]:{...R[lt],handleBounds:void 0}});else if(R){const D=wm(E.nodeElement);!!(D.width&&D.height&&(R.width!==D.width||R.height!==D.height||E.forceUpdate))&&(s.set(R.id,{...R,[lt]:{...R[lt],handleBounds:{source:l_(".source",E.nodeElement,v,m),target:l_(".target",E.nodeElement,v,m)}},...D}),w.push({id:R.id,type:"dimensions",dimensions:D}))}return w},[]);mw(s,m);const A=o||c&&!o&&gw(n,{initial:!0,...d});e({nodeInternals:new Map(s),fitViewOnInitDone:A}),(x==null?void 0:x.length)>0&&(i==null||i(x))},updateNodePositions:(r,i=!0,s=!1)=>{const{triggerNodeChanges:c}=n(),o=r.map(d=>{const g={id:d.id,type:"position",dragging:s};return i&&(g.positionAbsolute=d.positionAbsolute,g.position=d.position),g});c(o)},triggerNodeChanges:r=>{const{onNodesChange:i,nodeInternals:s,hasDefaultNodes:c,nodeOrigin:o,getNodes:d,elevateNodesOnSelect:g}=n();if(r!=null&&r.length){if(c){const m=QM(r,d()),y=gh(m,s,o,g);e({nodeInternals:y})}i==null||i(r)}},addSelectedNodes:r=>{const{multiSelectionActive:i,edges:s,getNodes:c}=n();let o,d=null;i?o=r.map(g=>xr(g,!0)):(o=rl(c(),r),d=rl(s,[])),Hc({changedNodes:o,changedEdges:d,get:n,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:i,edges:s,getNodes:c}=n();let o,d=null;i?o=r.map(g=>xr(g,!0)):(o=rl(s,r),d=rl(c(),[])),Hc({changedNodes:d,changedEdges:o,get:n,set:e})},unselectNodesAndEdges:({nodes:r,edges:i}={})=>{const{edges:s,getNodes:c}=n(),o=r||c(),d=i||s,g=o.map(y=>(y.selected=!1,xr(y.id,!1))),m=d.map(y=>xr(y.id,!1));Hc({changedNodes:g,changedEdges:m,get:n,set:e})},setMinZoom:r=>{const{d3Zoom:i,maxZoom:s}=n();i==null||i.scaleExtent([r,s]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:i,minZoom:s}=n();i==null||i.scaleExtent([s,r]),e({maxZoom:r})},setTranslateExtent:r=>{var i;(i=n().d3Zoom)==null||i.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:i}=n(),c=i().filter(d=>d.selected).map(d=>xr(d.id,!1)),o=r.filter(d=>d.selected).map(d=>xr(d.id,!1));Hc({changedNodes:c,changedEdges:o,get:n,set:e})},setNodeExtent:r=>{const{nodeInternals:i}=n();i.forEach(s=>{s.positionAbsolute=bm(s.position,r)}),e({nodeExtent:r,nodeInternals:new Map(i)})},panBy:r=>{const{transform:i,width:s,height:c,d3Zoom:o,d3Selection:d,translateExtent:g}=n();if(!o||!d||!r.x&&!r.y)return!1;const m=br.translate(i[0]+r.x,i[1]+r.y).scale(i[2]),y=[[0,0],[s,c]],p=o==null?void 0:o.constrain()(m,y,g);return o.transform(d,p),i[0]!==p.x||i[1]!==p.y||i[2]!==p.k},cancelConnection:()=>e({connectionNodeId:yr.connectionNodeId,connectionHandleId:yr.connectionHandleId,connectionHandleType:yr.connectionHandleType,connectionStatus:yr.connectionStatus,connectionStartHandle:yr.connectionStartHandle,connectionEndHandle:yr.connectionEndHandle}),reset:()=>e({...yr})}),Object.is),Cw=({children:e})=>{const n=j.useRef(null);return n.current||(n.current=NR()),ae.createElement(FC,{value:n.current},e)};Cw.displayName="ReactFlowProvider";const Mw=({children:e})=>j.useContext(Mo)?ae.createElement(ae.Fragment,null,e):ae.createElement(Cw,null,e);Mw.displayName="ReactFlowWrapper";const OR={input:sw,default:Fh,output:cw,group:Dm},UR={default:go,straight:Tm,step:Am,smoothstep:Ro,simplebezier:Em},zR=[0,0],jR=[15,15],HR={x:0,y:0,zoom:1},BR={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Rw=j.forwardRef(({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,className:s,nodeTypes:c=OR,edgeTypes:o=UR,onNodeClick:d,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:p,onMoveEnd:v,onConnect:x,onConnectStart:A,onConnectEnd:w,onClickConnectStart:E,onClickConnectEnd:R,onNodeMouseEnter:D,onNodeMouseMove:z,onNodeMouseLeave:C,onNodeContextMenu:U,onNodeDoubleClick:O,onNodeDragStart:B,onNodeDrag:J,onNodeDragStop:X,onNodesDelete:Z,onEdgesDelete:P,onSelectionChange:se,onSelectionDragStart:te,onSelectionDrag:N,onSelectionDragStop:I,onSelectionContextMenu:M,onSelectionStart:Y,onSelectionEnd:W,connectionMode:$=ri.Strict,connectionLineType:T=wr.Bezier,connectionLineStyle:k,connectionLineComponent:Q,connectionLineContainerStyle:ee,deleteKeyCode:re="Backspace",selectionKeyCode:oe="Shift",selectionOnDrag:fe=!1,selectionMode:Ae=Is.Full,panActivationKeyCode:ve="Space",multiSelectionKeyCode:ce=mo()?"Meta":"Control",zoomActivationKeyCode:de=mo()?"Meta":"Control",snapToGrid:we=!1,snapGrid:ue=jR,onlyRenderVisibleElements:qe=!1,selectNodesOnDrag:Me=!0,nodesDraggable:He,nodesConnectable:Ke,nodesFocusable:Te,nodeOrigin:me=zR,edgesFocusable:jt,edgesUpdatable:Qn,elementsSelectable:Zn,defaultViewport:ka=HR,minZoom:fa=.5,maxZoom:zn=2,translateExtent:$a=Jh,preventScrolling:an=!0,nodeExtent:st,defaultMarkerColor:qt="#b1b1b7",zoomOnScroll:ot=!0,zoomOnPinch:Cr=!0,panOnScroll:wt=!1,panOnScrollSpeed:rn=.5,panOnScrollMode:vn=Wr.Free,zoomOnDoubleClick:_n=!0,panOnDrag:Xt=!0,onPaneClick:Qt,onPaneMouseEnter:Ht,onPaneMouseMove:Mr,onPaneMouseLeave:oi,onPaneScroll:Ya,onPaneContextMenu:Rr,children:qa,onEdgeContextMenu:da,onEdgeDoubleClick:fu,onEdgeMouseEnter:du,onEdgeMouseMove:El,onEdgeMouseLeave:Al,onEdgeUpdate:hu,onEdgeUpdateStart:Vo,onEdgeUpdateEnd:In,onReconnect:bt,onReconnectStart:Bt,onReconnectEnd:Xa,reconnectRadius:Tl=10,edgeUpdaterRadius:Go=10,onNodesChange:Qo,onEdgesChange:mu,noDragClassName:Dr="nodrag",noWheelClassName:Cl="nowheel",noPanClassName:ha="nopan",fitView:Va=!1,fitViewOptions:Nr,connectOnClick:Ga=!0,attributionPosition:ft,proOptions:gu,defaultEdgeOptions:yu,elevateNodesOnSelect:ma=!0,elevateEdgesOnSelect:Qa=!1,disableKeyboardA11y:pu=!1,autoPanOnConnect:vu=!0,autoPanOnNodeDrag:_u=!0,connectionRadius:Zo=20,isValidConnection:fi,onError:di,style:jn,id:hi,nodeDragThreshold:xu,...Za},Ml)=>{const Or=hi||"1";return ae.createElement("div",{...Za,style:{...jn,...BR},ref:Ml,className:Gt(["react-flow",s]),"data-testid":"rf__wrapper",id:hi},ae.createElement(Mw,null,ae.createElement(DR,{onInit:m,onMove:y,onMoveStart:p,onMoveEnd:v,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:D,onNodeMouseMove:z,onNodeMouseLeave:C,onNodeContextMenu:U,onNodeDoubleClick:O,nodeTypes:c,edgeTypes:o,connectionLineType:T,connectionLineStyle:k,connectionLineComponent:Q,connectionLineContainerStyle:ee,selectionKeyCode:oe,selectionOnDrag:fe,selectionMode:Ae,deleteKeyCode:re,multiSelectionKeyCode:ce,panActivationKeyCode:ve,zoomActivationKeyCode:de,onlyRenderVisibleElements:qe,selectNodesOnDrag:Me,defaultViewport:ka,translateExtent:$a,minZoom:fa,maxZoom:zn,preventScrolling:an,zoomOnScroll:ot,zoomOnPinch:Cr,zoomOnDoubleClick:_n,panOnScroll:wt,panOnScrollSpeed:rn,panOnScrollMode:vn,panOnDrag:Xt,onPaneClick:Qt,onPaneMouseEnter:Ht,onPaneMouseMove:Mr,onPaneMouseLeave:oi,onPaneScroll:Ya,onPaneContextMenu:Rr,onSelectionContextMenu:M,onSelectionStart:Y,onSelectionEnd:W,onEdgeContextMenu:da,onEdgeDoubleClick:fu,onEdgeMouseEnter:du,onEdgeMouseMove:El,onEdgeMouseLeave:Al,onReconnect:bt??hu,onReconnectStart:Bt??Vo,onReconnectEnd:Xa??In,reconnectRadius:Tl??Go,defaultMarkerColor:qt,noDragClassName:Dr,noWheelClassName:Cl,noPanClassName:ha,elevateEdgesOnSelect:Qa,rfId:Or,disableKeyboardA11y:pu,nodeOrigin:me,nodeExtent:st}),ae.createElement(TM,{nodes:e,edges:n,defaultNodes:r,defaultEdges:i,onConnect:x,onConnectStart:A,onConnectEnd:w,onClickConnectStart:E,onClickConnectEnd:R,nodesDraggable:He,nodesConnectable:Ke,nodesFocusable:Te,edgesFocusable:jt,edgesUpdatable:Qn,elementsSelectable:Zn,elevateNodesOnSelect:ma,minZoom:fa,maxZoom:zn,nodeExtent:st,onNodesChange:Qo,onEdgesChange:mu,snapToGrid:we,snapGrid:ue,connectionMode:$,translateExtent:$a,connectOnClick:Ga,defaultEdgeOptions:yu,fitView:Va,fitViewOptions:Nr,onNodesDelete:Z,onEdgesDelete:P,onNodeDragStart:B,onNodeDrag:J,onNodeDragStop:X,onSelectionDrag:N,onSelectionDragStart:te,onSelectionDragStop:I,noPanClassName:ha,nodeOrigin:me,rfId:Or,autoPanOnConnect:vu,autoPanOnNodeDrag:_u,onError:di,connectionRadius:Zo,isValidConnection:fi,nodeDragThreshold:xu}),ae.createElement(EM,{onSelectionChange:se}),qa,ae.createElement(JC,{proOptions:gu,position:ft}),ae.createElement(NM,{rfId:Or,disableKeyboardA11y:pu})))});Rw.displayName="ReactFlow";function LR(){return ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ae.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function kR(){return ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ae.createElement("path",{d:"M0 0h32v4.2H0z"}))}function $R(){return ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ae.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function YR(){return ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ae.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function qR(){return ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ae.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const zs=({children:e,className:n,...r})=>ae.createElement("button",{type:"button",className:Gt(["react-flow__controls-button",n]),...r},e);zs.displayName="ControlButton";const XR=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Dw=({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:i=!0,fitViewOptions:s,onZoomIn:c,onZoomOut:o,onFitView:d,onInteractiveChange:g,className:m,children:y,position:p="bottom-left"})=>{const v=Ct(),[x,A]=j.useState(!1),{isInteractive:w,minZoomReached:E,maxZoomReached:R}=nt(XR,Yt),{zoomIn:D,zoomOut:z,fitView:C}=Nm();if(j.useEffect(()=>{A(!0)},[]),!x)return null;const U=()=>{D(),c==null||c()},O=()=>{z(),o==null||o()},B=()=>{C(s),d==null||d()},J=()=>{v.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),g==null||g(!w)};return ae.createElement(qx,{className:Gt(["react-flow__controls",m]),position:p,style:e,"data-testid":"rf__controls"},n&&ae.createElement(ae.Fragment,null,ae.createElement(zs,{onClick:U,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:R},ae.createElement(LR,null)),ae.createElement(zs,{onClick:O,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},ae.createElement(kR,null))),r&&ae.createElement(zs,{className:"react-flow__controls-fitview",onClick:B,title:"fit view","aria-label":"fit view"},ae.createElement($R,null)),i&&ae.createElement(zs,{className:"react-flow__controls-interactive",onClick:J,title:"toggle interactivity","aria-label":"toggle interactivity"},w?ae.createElement(qR,null):ae.createElement(YR,null)),y)};Dw.displayName="Controls";var VR=j.memo(Dw),Vn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Vn||(Vn={}));function GR({color:e,dimensions:n,lineWidth:r}){return ae.createElement("path",{stroke:e,strokeWidth:r,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function QR({color:e,radius:n}){return ae.createElement("circle",{cx:n,cy:n,r:n,fill:e})}const ZR={[Vn.Dots]:"#91919a",[Vn.Lines]:"#eee",[Vn.Cross]:"#e2e2e2"},IR={[Vn.Dots]:1,[Vn.Lines]:1,[Vn.Cross]:6},FR=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Nw({id:e,variant:n=Vn.Dots,gap:r=20,size:i,lineWidth:s=1,offset:c=2,color:o,style:d,className:g}){const m=j.useRef(null),{transform:y,patternId:p}=nt(FR,Yt),v=o||ZR[n],x=i||IR[n],A=n===Vn.Dots,w=n===Vn.Cross,E=Array.isArray(r)?r:[r,r],R=[E[0]*y[2]||1,E[1]*y[2]||1],D=x*y[2],z=w?[D,D]:R,C=A?[D/c,D/c]:[z[0]/c,z[1]/c];return ae.createElement("svg",{className:Gt(["react-flow__background",g]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},ae.createElement("pattern",{id:p+e,x:y[0]%R[0],y:y[1]%R[1],width:R[0],height:R[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`},A?ae.createElement(QR,{color:v,radius:D/c}):ae.createElement(GR,{dimensions:z,color:v,lineWidth:s})),ae.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+e})`}))}Nw.displayName="Background";var KR=j.memo(Nw);const JR="_characterNode_1d4td_1",PR="_highlighted_1d4td_29",m_={characterNode:JR,highlighted:PR};function WR({data:e}){return b.jsxs("div",{className:`${m_.characterNode} ${e.highlighted?m_.highlighted:""}`.trim(),children:[e.label,b.jsx(vl,{type:"target",position:pe.Left}),b.jsx(vl,{type:"source",position:pe.Right})]})}const e3={character:WR};function t3(){const{query:e,setQuery:n}=We(),r=e.realmId,i=e.id,[s,c]=j.useState([]);j.useEffect(()=>{c(r?vt.readAll(r):[])},[r]);const{nodes:o,edges:d}=j.useMemo(()=>{const y=[],p=[],x={x:250,y:250},A=2*Math.PI/(s.length||1);return s.forEach((w,E)=>{const R=E*A,D=x.x+200*Math.cos(R),z=x.y+200*Math.sin(R);y.push({id:w.id,type:"character",position:{x:D,y:z},data:{label:w.name,character:w,highlighted:i===w.id}}),Object.entries(w.relations||{}).forEach(([C,U])=>{s.find(O=>O.id===U)&&p.push({id:`${w.id}-${U}-${C}`,source:w.id,target:U,label:C,style:{stroke:i===U?"#ff6b6b":"#000",strokeWidth:2},labelStyle:{fontSize:"10px",fontWeight:"bold"},markerEnd:{type:Fs.Arrow,color:i===U?"#ff6b6b":"#000"}})})}),{nodes:y,edges:p}},[s,i]),g=(y,p)=>{n({id:p.id})},m=(y,p)=>{n({id:p.target})};return b.jsx("div",{style:{width:"500px",height:"500px",border:"1px solid #ccc"},children:b.jsxs(Rw,{nodes:o,edges:d,nodeTypes:e3,onNodeClick:g,onEdgeClick:m,fitView:!0,proOptions:{hideAttribution:!0},children:[b.jsx(KR,{}),b.jsx(VR,{})]})})}function n3(){var g;const{query:e,setQuery:n}=We(),r=e.realmId,[i,s]=j.useState([]),[c]=j.useState(""),o=()=>{const m=prompt("Enter a name for the new character");if(!m)return;const y=vt.create({realmId:r,name:m,description:"new character",birth:new Date,death:new Date,properties:{},relations:{}});d(),n({id:y.id})},d=()=>{s(vt.readAll(r).filter(m=>m.realmId===r))};return j.useEffect(()=>{r&&d()},[r]),b.jsx(b.Fragment,{children:c?b.jsx(b.Fragment,{children:(g=i.find(m=>m.id===c))==null?void 0:g.name}):b.jsxs(b.Fragment,{children:[b.jsx("button",{onClick:o,children:je.PLUS}),b.jsx(t3,{})]})})}var Ye=(e=>(e.Character="character",e.Concept="concept",e.Item="item",e.Location="location",e.Event="event",e.Community="community",e.Input="input",e.Talk="talk",e.Data="data",e.Person="person",e.Timeline="timeline",e.Explore="explore",e))(Ye||{});function a3(){const{gotoState:e,query:n,setQuery:r}=We(),[i,s]=j.useState({id:"",created:new Date,updated:new Date,realmId:"",name:"",description:""}),c=n.id,o=()=>{e(Ye.Concept),r({id:""})},d=y=>{const p=Pt.read(y),v={id:"",created:new Date,updated:new Date,realmId:"",name:"",description:"",...p};s(v)},g=async y=>{prompt(`Type 'yes' to remove the ${i==null?void 0:i.name} concept?`)==="yes"&&Pt.remove(y),await nn(Pt,n.realmId),o()},m=async y=>{y.preventDefault(),Pt.update(i==null?void 0:i.id,i),await nn(Pt,n.realmId),o()};return j.useEffect(()=>{c?d(c):s({id:"",created:new Date,updated:new Date,realmId:"",name:"",description:""})},[c]),b.jsx(b.Fragment,{children:b.jsxs("form",{onSubmit:m,children:[b.jsx("label",{children:"Name"}),b.jsx("input",{type:"text",required:!0,name:"name",value:(i==null?void 0:i.name)||"",onChange:y=>s({...i,name:y.target.value})}),b.jsx("label",{children:"Description"}),b.jsx("textarea",{autoFocus:!0,name:"description",required:!0,value:(i==null?void 0:i.description)||"",onChange:y=>s({...i,description:y.target.value})}),b.jsx("span",{}),b.jsxs("span",{children:[b.jsx("button",{type:"button",onClick:o,children:je.DARROW_LEFT}),b.jsx("button",{type:"submit",children:je.FLOPPY_DISK}),b.jsx("button",{onClick:()=>g(i==null?void 0:i.id),children:je.RED_X})]})]})})}function Ow(e,n){if(!n)return!0;e=e.toLowerCase(),n=n.toLowerCase();let r=0;for(const i of n){if(r=e.indexOf(i,r),r===-1)return!1;r++}return!0}function r3(){var p;const{query:e,gotoState:n,setQuery:r}=We(),[i,s]=j.useState([]),[c]=j.useState(""),[o,d]=j.useState(""),g=e.realmId,m=()=>{const v=prompt("Enter a name for the new concept");if(!v)return;const x=Pt.create({realmId:g,name:v,description:"new concept"});y(),r({id:x.id})},y=()=>{const v=Pt.readAll(g).filter(x=>x.realmId===g).sort((x,A)=>x.name.localeCompare(A.name));s(v)};return j.useEffect(()=>{g&&y()},[g]),b.jsx(b.Fragment,{children:c?b.jsx(b.Fragment,{children:(p=i.find(v=>v.id===c))==null?void 0:p.id}):b.jsxs(b.Fragment,{children:[b.jsx("button",{onClick:m,children:je.PLUS}),b.jsx("input",{type:"text",placeholder:"Search",value:o,onChange:v=>d(v.target.value)}),b.jsx("ul",{children:i&&i.filter(v=>Ow(v.name,o)).map(v=>b.jsx("li",{children:b.jsx("button",{onClick:()=>{n(Ye.Concept),r({id:v.id})},children:v.name})},v.id))})]})})}function Uw(){var w;const{query:e,setQuery:n}=We(),r=e.id,i=ca(),[s,c]=j.useState({}),[o,d]=j.useState([]),[g,m]=j.useState([]),[y,p]=j.useState([]),v=E=>{const R=la.read(E);c({name:"",description:"",characters:[],items:[],locations:[],...R,start:R!=null&&R.start?wv(R.start):"",end:R!=null&&R.end?wv(R.end):""}),R!=null&&R.realmId&&(d(vt.readAll(R.realmId).sort((D,z)=>{const C=D.birth?new Date(D.birth).getTime():0,U=z.birth?new Date(z.birth).getTime():0;return C-U})),m(yn.readAll(R.realmId).sort((D,z)=>D.name.localeCompare(z.name))),p(en.readAll(R.realmId).sort((D,z)=>D.name.localeCompare(z.name))))},x=async E=>{prompt(`Type 'yes' to remove the ${s==null?void 0:s.name} event?`)==="yes"&&la.remove(E),await nn(i,e.realmId),n({id:""})},A=async E=>{E.preventDefault();const R={...s,start:s!=null&&s.start?new Date(s.start):void 0,end:s!=null&&s.end?new Date(s.end):void 0};la.update(s==null?void 0:s.id,R),await nn(i,e.realmId),n({id:""})};return j.useEffect(()=>{r?v(r):(c({}),d([]),m([]),p([]))},[r]),b.jsx(b.Fragment,{children:b.jsxs("form",{onSubmit:A,children:[b.jsx("label",{children:" Name "}),b.jsx("input",{type:"text",required:!0,name:"name",value:(s==null?void 0:s.name)||"",onChange:E=>c({...s,name:E.target.value})}),b.jsx("label",{children:" Description "}),b.jsx("textarea",{name:"description",required:!0,value:(s==null?void 0:s.description)||"",onChange:E=>c({...s,description:E.target.value})}),b.jsx("label",{children:" Start "}),b.jsx("input",{type:"datetime-local",name:"start",value:(s==null?void 0:s.start)||"",onChange:E=>c({...s,start:E.target.value})}),b.jsx("label",{children:" End "}),b.jsx("input",{type:"datetime-local",name:"end",value:(s==null?void 0:s.end)||"",onChange:E=>c({...s,end:E.target.value})}),b.jsx("label",{children:" Characters "}),b.jsx("select",{multiple:!0,value:(s==null?void 0:s.characters)||[],onChange:E=>c({...s,characters:Array.from(E.target.selectedOptions,R=>R.value)}),children:o.map(E=>b.jsx("option",{value:E.id,children:E.name},E.id))}),b.jsx("label",{children:" Items "}),b.jsx("select",{multiple:!0,value:(s==null?void 0:s.items)||[],onChange:E=>c({...s,items:Array.from(E.target.selectedOptions,R=>R.value)}),children:g.map(E=>b.jsx("option",{value:E.id,children:E.name},E.id))}),b.jsx("label",{children:" Location "}),b.jsxs("select",{value:((w=s==null?void 0:s.locations)==null?void 0:w[0])||"",onChange:E=>c({...s,locations:E.target.value?[E.target.value]:[]}),children:[b.jsx("option",{value:"",children:"None"}),y.map(E=>b.jsx("option",{value:E.id,children:E.name},E.id))]}),b.jsx("span",{}),b.jsxs("span",{children:[b.jsx("button",{type:"button",onClick:()=>n({id:""}),children:je.DARROW_LEFT}),b.jsx("button",{type:"submit",children:je.FLOPPY_DISK}),b.jsx("button",{onClick:()=>x(s==null?void 0:s.id),type:"button",children:je.RED_X})]})]})})}function Wc(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function i3(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Um(e){let n,r,i;e.length!==2?(n=Wc,r=(d,g)=>Wc(e(d),g),i=(d,g)=>e(d)-g):(n=e===Wc||e===i3?e:l3,r=e,i=e);function s(d,g,m=0,y=d.length){if(m<y){if(n(g,g)!==0)return y;do{const p=m+y>>>1;r(d[p],g)<0?m=p+1:y=p}while(m<y)}return m}function c(d,g,m=0,y=d.length){if(m<y){if(n(g,g)!==0)return y;do{const p=m+y>>>1;r(d[p],g)<=0?m=p+1:y=p}while(m<y)}return m}function o(d,g,m=0,y=d.length){const p=s(d,g,m,y-1);return p>m&&i(d[p-1],g)>-i(d[p],g)?p-1:p}return{left:s,center:o,right:c}}function l3(){return 0}function s3(e){return e===null?NaN:+e}const u3=Um(Wc),c3=u3.right;Um(s3).center;function zw(e,n){let r,i;for(const s of e)s!=null&&(r===void 0?s>=s&&(r=i=s):(r>s&&(r=s),i<s&&(i=s)));return[r,i]}class g_ extends Map{constructor(n,r=d3){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[i,s]of n)this.set(i,s)}get(n){return super.get(y_(this,n))}has(n){return super.has(y_(this,n))}set(n,r){return super.set(o3(this,n),r)}delete(n){return super.delete(f3(this,n))}}function y_({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):r}function o3({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):(e.set(i,r),r)}function f3({_intern:e,_key:n},r){const i=n(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}function d3(e){return e!==null&&typeof e=="object"?e.valueOf():e}const h3=Math.sqrt(50),m3=Math.sqrt(10),g3=Math.sqrt(2);function jw(e,n,r){const i=(n-e)/Math.max(0,r),s=Math.floor(Math.log10(i)),c=i/Math.pow(10,s),o=c>=h3?10:c>=m3?5:c>=g3?2:1;let d,g,m;return s<0?(m=Math.pow(10,-s)/o,d=Math.round(e*m),g=Math.round(n*m),d/m<e&&++d,g/m>n&&--g,m=-m):(m=Math.pow(10,s)*o,d=Math.round(e/m),g=Math.round(n/m),d*m<e&&++d,g*m>n&&--g),g<d&&.5<=r&&r<2?jw(e,n,r*2):[d,g,m]}function p_(e,n,r){return n=+n,e=+e,r=+r,jw(e,n,r)[2]}function v_(e,n,r){n=+n,e=+e,r=+r;const i=n<e,s=i?p_(n,e,r):p_(e,n,r);return(i?-1:1)*(s<0?1/-s:s)}function y3(e,n,r){e=+e,n=+n,r=(s=arguments.length)<2?(n=e,e=0,1):s<3?1:+r;for(var i=-1,s=Math.max(0,Math.ceil((n-e)/r))|0,c=new Array(s);++i<s;)c[i]=e+i*r;return c}function p3(e){return e}var v3=3,__=1e-6;function _3(e){return"translate("+e+",0)"}function x3(e){return n=>+e(n)}function w3(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),r=>+e(r)+n}function b3(){return!this.__axis}function S3(e,n){var r=[],i=null,s=null,c=6,o=6,d=3,g=typeof window<"u"&&window.devicePixelRatio>1?0:.5,m=1,y="y",p=_3;function v(x){var A=i??(n.ticks?n.ticks.apply(n,r):n.domain()),w=s??(n.tickFormat?n.tickFormat.apply(n,r):p3),E=Math.max(c,0)+d,R=n.range(),D=+R[0]+g,z=+R[R.length-1]+g,C=(n.bandwidth?w3:x3)(n.copy(),g),U=x.selection?x.selection():x,O=U.selectAll(".domain").data([null]),B=U.selectAll(".tick").data(A,n).order(),J=B.exit(),X=B.enter().append("g").attr("class","tick"),Z=B.select("line"),P=B.select("text");O=O.merge(O.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),B=B.merge(X),Z=Z.merge(X.append("line").attr("stroke","currentColor").attr(y+"2",m*c)),P=P.merge(X.append("text").attr("fill","currentColor").attr(y,m*E).attr("dy","0.71em")),x!==U&&(O=O.transition(x),B=B.transition(x),Z=Z.transition(x),P=P.transition(x),J=J.transition(x).attr("opacity",__).attr("transform",function(se){return isFinite(se=C(se))?p(se+g):this.getAttribute("transform")}),X.attr("opacity",__).attr("transform",function(se){var te=this.parentNode.__axis;return p((te&&isFinite(te=te(se))?te:C(se))+g)})),J.remove(),O.attr("d",o?"M"+D+","+m*o+"V"+g+"H"+z+"V"+m*o:"M"+D+","+g+"H"+z),B.attr("opacity",1).attr("transform",function(se){return p(C(se)+g)}),Z.attr(y+"2",m*c),P.attr(y,m*E).text(w),U.filter(b3).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),U.each(function(){this.__axis=C})}return v.scale=function(x){return arguments.length?(n=x,v):n},v.ticks=function(){return r=Array.from(arguments),v},v.tickArguments=function(x){return arguments.length?(r=x==null?[]:Array.from(x),v):r.slice()},v.tickValues=function(x){return arguments.length?(i=x==null?null:Array.from(x),v):i&&i.slice()},v.tickFormat=function(x){return arguments.length?(s=x,v):s},v.tickSize=function(x){return arguments.length?(c=o=+x,v):c},v.tickSizeInner=function(x){return arguments.length?(c=+x,v):c},v.tickSizeOuter=function(x){return arguments.length?(o=+x,v):o},v.tickPadding=function(x){return arguments.length?(d=+x,v):d},v.offset=function(x){return arguments.length?(g=+x,v):g},v}function Hw(e){return S3(v3,e)}function E3(e){var n=0,r=e.children,i=r&&r.length;if(!i)n=1;else for(;--i>=0;)n+=r[i].value;e.value=n}function A3(){return this.eachAfter(E3)}function T3(e,n){let r=-1;for(const i of this)e.call(n,i,++r,this);return this}function C3(e,n){for(var r=this,i=[r],s,c,o=-1;r=i.pop();)if(e.call(n,r,++o,this),s=r.children)for(c=s.length-1;c>=0;--c)i.push(s[c]);return this}function M3(e,n){for(var r=this,i=[r],s=[],c,o,d,g=-1;r=i.pop();)if(s.push(r),c=r.children)for(o=0,d=c.length;o<d;++o)i.push(c[o]);for(;r=s.pop();)e.call(n,r,++g,this);return this}function R3(e,n){let r=-1;for(const i of this)if(e.call(n,i,++r,this))return i}function D3(e){return this.eachAfter(function(n){for(var r=+e(n.data)||0,i=n.children,s=i&&i.length;--s>=0;)r+=i[s].value;n.value=r})}function N3(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function O3(e){for(var n=this,r=U3(n,e),i=[n];n!==r;)n=n.parent,i.push(n);for(var s=i.length;e!==r;)i.splice(s,0,e),e=e.parent;return i}function U3(e,n){if(e===n)return e;var r=e.ancestors(),i=n.ancestors(),s=null;for(e=r.pop(),n=i.pop();e===n;)s=e,e=r.pop(),n=i.pop();return s}function z3(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function j3(){return Array.from(this)}function H3(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function B3(){var e=this,n=[];return e.each(function(r){r!==e&&n.push({source:r.parent,target:r})}),n}function*L3(){var e=this,n,r=[e],i,s,c;do for(n=r.reverse(),r=[];e=n.pop();)if(yield e,i=e.children)for(s=0,c=i.length;s<c;++s)r.push(i[s]);while(r.length)}function zm(e,n){e instanceof Map?(e=[void 0,e],n===void 0&&(n=Y3)):n===void 0&&(n=$3);for(var r=new yo(e),i,s=[r],c,o,d,g;i=s.pop();)if((o=n(i.data))&&(g=(o=Array.from(o)).length))for(i.children=o,d=g-1;d>=0;--d)s.push(c=o[d]=new yo(o[d])),c.parent=i,c.depth=i.depth+1;return r.eachBefore(X3)}function k3(){return zm(this).eachBefore(q3)}function $3(e){return e.children}function Y3(e){return Array.isArray(e)?e[1]:null}function q3(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function X3(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function yo(e){this.data=e,this.depth=this.height=0,this.parent=null}yo.prototype=zm.prototype={constructor:yo,count:A3,each:T3,eachAfter:M3,eachBefore:C3,find:R3,sum:D3,sort:N3,path:O3,ancestors:z3,descendants:j3,leaves:H3,links:B3,copy:k3,[Symbol.iterator]:L3};function V3(e){return e==null?null:G3(e)}function G3(e){if(typeof e!="function")throw new Error;return e}function x_(){return 0}function Q3(e){return function(){return e}}const Z3=1664525,I3=1013904223,w_=4294967296;function F3(){let e=1;return()=>(e=(Z3*e+I3)%w_)/w_}function K3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function J3(e,n){let r=e.length,i,s;for(;r;)s=n()*r--|0,i=e[r],e[r]=e[s],e[s]=i;return e}function P3(e,n){for(var r=0,i=(e=J3(Array.from(e),n)).length,s=[],c,o;r<i;)c=e[r],o&&Bw(o,c)?++r:(o=eD(s=W3(s,c)),r=0);return o}function W3(e,n){var r,i;if(_h(n,e))return[n];for(r=0;r<e.length;++r)if(Lc(n,e[r])&&_h(js(e[r],n),e))return[e[r],n];for(r=0;r<e.length-1;++r)for(i=r+1;i<e.length;++i)if(Lc(js(e[r],e[i]),n)&&Lc(js(e[r],n),e[i])&&Lc(js(e[i],n),e[r])&&_h(Lw(e[r],e[i],n),e))return[e[r],e[i],n];throw new Error}function Lc(e,n){var r=e.r-n.r,i=n.x-e.x,s=n.y-e.y;return r<0||r*r<i*i+s*s}function Bw(e,n){var r=e.r-n.r+Math.max(e.r,n.r,1)*1e-9,i=n.x-e.x,s=n.y-e.y;return r>0&&r*r>i*i+s*s}function _h(e,n){for(var r=0;r<n.length;++r)if(!Bw(e,n[r]))return!1;return!0}function eD(e){switch(e.length){case 1:return tD(e[0]);case 2:return js(e[0],e[1]);case 3:return Lw(e[0],e[1],e[2])}}function tD(e){return{x:e.x,y:e.y,r:e.r}}function js(e,n){var r=e.x,i=e.y,s=e.r,c=n.x,o=n.y,d=n.r,g=c-r,m=o-i,y=d-s,p=Math.sqrt(g*g+m*m);return{x:(r+c+g/p*y)/2,y:(i+o+m/p*y)/2,r:(p+s+d)/2}}function Lw(e,n,r){var i=e.x,s=e.y,c=e.r,o=n.x,d=n.y,g=n.r,m=r.x,y=r.y,p=r.r,v=i-o,x=i-m,A=s-d,w=s-y,E=g-c,R=p-c,D=i*i+s*s-c*c,z=D-o*o-d*d+g*g,C=D-m*m-y*y+p*p,U=x*A-v*w,O=(A*C-w*z)/(U*2)-i,B=(w*E-A*R)/U,J=(x*z-v*C)/(U*2)-s,X=(v*R-x*E)/U,Z=B*B+X*X-1,P=2*(c+O*B+J*X),se=O*O+J*J-c*c,te=-(Math.abs(Z)>1e-6?(P+Math.sqrt(P*P-4*Z*se))/(2*Z):se/P);return{x:i+O+B*te,y:s+J+X*te,r:te}}function b_(e,n,r){var i=e.x-n.x,s,c,o=e.y-n.y,d,g,m=i*i+o*o;m?(c=n.r+r.r,c*=c,g=e.r+r.r,g*=g,c>g?(s=(m+g-c)/(2*m),d=Math.sqrt(Math.max(0,g/m-s*s)),r.x=e.x-s*i-d*o,r.y=e.y-s*o+d*i):(s=(m+c-g)/(2*m),d=Math.sqrt(Math.max(0,c/m-s*s)),r.x=n.x+s*i-d*o,r.y=n.y+s*o+d*i)):(r.x=n.x+r.r,r.y=n.y)}function S_(e,n){var r=e.r+n.r-1e-6,i=n.x-e.x,s=n.y-e.y;return r>0&&r*r>i*i+s*s}function E_(e){var n=e._,r=e.next._,i=n.r+r.r,s=(n.x*r.r+r.x*n.r)/i,c=(n.y*r.r+r.y*n.r)/i;return s*s+c*c}function kc(e){this._=e,this.next=null,this.previous=null}function nD(e,n){if(!(c=(e=K3(e)).length))return 0;var r,i,s,c,o,d,g,m,y,p,v;if(r=e[0],r.x=0,r.y=0,!(c>1))return r.r;if(i=e[1],r.x=-i.r,i.x=r.r,i.y=0,!(c>2))return r.r+i.r;b_(i,r,s=e[2]),r=new kc(r),i=new kc(i),s=new kc(s),r.next=s.previous=i,i.next=r.previous=s,s.next=i.previous=r;e:for(g=3;g<c;++g){b_(r._,i._,s=e[g]),s=new kc(s),m=i.next,y=r.previous,p=i._.r,v=r._.r;do if(p<=v){if(S_(m._,s._)){i=m,r.next=i,i.previous=r,--g;continue e}p+=m._.r,m=m.next}else{if(S_(y._,s._)){r=y,r.next=i,i.previous=r,--g;continue e}v+=y._.r,y=y.previous}while(m!==y.next);for(s.previous=r,s.next=i,r.next=i.previous=i=s,o=E_(r);(s=s.next)!==i;)(d=E_(s))<o&&(r=s,o=d);i=r.next}for(r=[i._],s=i;(s=s.next)!==i;)r.push(s._);for(s=P3(r,n),g=0;g<c;++g)r=e[g],r.x-=s.x,r.y-=s.y;return s.r}function aD(e){return Math.sqrt(e.value)}function rD(){var e=null,n=1,r=1,i=x_;function s(c){const o=F3();return c.x=n/2,c.y=r/2,e?c.eachBefore(A_(e)).eachAfter(xh(i,.5,o)).eachBefore(T_(1)):c.eachBefore(A_(aD)).eachAfter(xh(x_,1,o)).eachAfter(xh(i,c.r/Math.min(n,r),o)).eachBefore(T_(Math.min(n,r)/(2*c.r))),c}return s.radius=function(c){return arguments.length?(e=V3(c),s):e},s.size=function(c){return arguments.length?(n=+c[0],r=+c[1],s):[n,r]},s.padding=function(c){return arguments.length?(i=typeof c=="function"?c:Q3(+c),s):i},s}function A_(e){return function(n){n.children||(n.r=Math.max(0,+e(n)||0))}}function xh(e,n,r){return function(i){if(s=i.children){var s,c,o=s.length,d=e(i)*n||0,g;if(d)for(c=0;c<o;++c)s[c].r+=d;if(g=nD(s,r),d)for(c=0;c<o;++c)s[c].r-=d;i.r=g+d}}}function T_(e){return function(n){var r=n.parent;n.r*=e,r&&(n.x=r.x+e*n.x,n.y=r.y+e*n.y)}}function jm(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}const C_=Symbol("implicit");function kw(){var e=new g_,n=[],r=[],i=C_;function s(c){let o=e.get(c);if(o===void 0){if(i!==C_)return i;e.set(c,o=n.push(c)-1)}return r[o%r.length]}return s.domain=function(c){if(!arguments.length)return n.slice();n=[],e=new g_;for(const o of c)e.has(o)||e.set(o,n.push(o)-1);return s},s.range=function(c){return arguments.length?(r=Array.from(c),s):r.slice()},s.unknown=function(c){return arguments.length?(i=c,s):i},s.copy=function(){return kw(n,r).unknown(i)},jm.apply(s,arguments),s}function Hm(){var e=kw().unknown(void 0),n=e.domain,r=e.range,i=0,s=1,c,o,d=!1,g=0,m=0,y=.5;delete e.unknown;function p(){var v=n().length,x=s<i,A=x?s:i,w=x?i:s;c=(w-A)/Math.max(1,v-g+m*2),d&&(c=Math.floor(c)),A+=(w-A-c*(v-g))*y,o=c*(1-g),d&&(A=Math.round(A),o=Math.round(o));var E=y3(v).map(function(R){return A+c*R});return r(x?E.reverse():E)}return e.domain=function(v){return arguments.length?(n(v),p()):n()},e.range=function(v){return arguments.length?([i,s]=v,i=+i,s=+s,p()):[i,s]},e.rangeRound=function(v){return[i,s]=v,i=+i,s=+s,d=!0,p()},e.bandwidth=function(){return o},e.step=function(){return c},e.round=function(v){return arguments.length?(d=!!v,p()):d},e.padding=function(v){return arguments.length?(g=Math.min(1,m=+v),p()):g},e.paddingInner=function(v){return arguments.length?(g=Math.min(1,v),p()):g},e.paddingOuter=function(v){return arguments.length?(m=+v,p()):m},e.align=function(v){return arguments.length?(y=Math.max(0,Math.min(1,v)),p()):y},e.copy=function(){return Hm(n(),[i,s]).round(d).paddingInner(g).paddingOuter(m).align(y)},jm.apply(p(),arguments)}function iD(e){return function(){return e}}function lD(e){return+e}var M_=[0,1];function il(e){return e}function Ph(e,n){return(n-=e=+e)?function(r){return(r-e)/n}:iD(isNaN(n)?NaN:.5)}function sD(e,n){var r;return e>n&&(r=e,e=n,n=r),function(i){return Math.max(e,Math.min(n,i))}}function uD(e,n,r){var i=e[0],s=e[1],c=n[0],o=n[1];return s<i?(i=Ph(s,i),c=r(o,c)):(i=Ph(i,s),c=r(c,o)),function(d){return c(i(d))}}function cD(e,n,r){var i=Math.min(e.length,n.length)-1,s=new Array(i),c=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++o<i;)s[o]=Ph(e[o],e[o+1]),c[o]=r(n[o],n[o+1]);return function(d){var g=c3(e,d,1,i)-1;return c[g](s[g](d))}}function oD(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function fD(){var e=M_,n=M_,r=pm,i,s,c,o=il,d,g,m;function y(){var v=Math.min(e.length,n.length);return o!==il&&(o=sD(e[0],e[v-1])),d=v>2?cD:uD,g=m=null,p}function p(v){return v==null||isNaN(v=+v)?c:(g||(g=d(e.map(i),n,r)))(i(o(v)))}return p.invert=function(v){return o(s((m||(m=d(n,e.map(i),Yn)))(v)))},p.domain=function(v){return arguments.length?(e=Array.from(v,lD),y()):e.slice()},p.range=function(v){return arguments.length?(n=Array.from(v),y()):n.slice()},p.rangeRound=function(v){return n=Array.from(v),r=bT,y()},p.clamp=function(v){return arguments.length?(o=v?!0:il,y()):o!==il},p.interpolate=function(v){return arguments.length?(r=v,y()):r},p.unknown=function(v){return arguments.length?(c=v,p):c},function(v,x){return i=v,s=x,y()}}function dD(){return fD()(il,il)}function hD(e,n){e=e.slice();var r=0,i=e.length-1,s=e[r],c=e[i],o;return c<s&&(o=r,r=i,i=o,o=s,s=c,c=o),e[r]=n.floor(s),e[i]=n.ceil(c),e}const wh=new Date,bh=new Date;function _t(e,n,r,i){function s(c){return e(c=arguments.length===0?new Date:new Date(+c)),c}return s.floor=c=>(e(c=new Date(+c)),c),s.ceil=c=>(e(c=new Date(c-1)),n(c,1),e(c),c),s.round=c=>{const o=s(c),d=s.ceil(c);return c-o<d-c?o:d},s.offset=(c,o)=>(n(c=new Date(+c),o==null?1:Math.floor(o)),c),s.range=(c,o,d)=>{const g=[];if(c=s.ceil(c),d=d==null?1:Math.floor(d),!(c<o)||!(d>0))return g;let m;do g.push(m=new Date(+c)),n(c,d),e(c);while(m<c&&c<o);return g},s.filter=c=>_t(o=>{if(o>=o)for(;e(o),!c(o);)o.setTime(o-1)},(o,d)=>{if(o>=o)if(d<0)for(;++d<=0;)for(;n(o,-1),!c(o););else for(;--d>=0;)for(;n(o,1),!c(o););}),r&&(s.count=(c,o)=>(wh.setTime(+c),bh.setTime(+o),e(wh),e(bh),Math.floor(r(wh,bh))),s.every=c=>(c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?s.filter(i?o=>i(o)%c===0:o=>s.count(0,o)%c===0):s)),s}const po=_t(()=>{},(e,n)=>{e.setTime(+e+n)},(e,n)=>n-e);po.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_t(n=>{n.setTime(Math.floor(n/e)*e)},(n,r)=>{n.setTime(+n+r*e)},(n,r)=>(r-n)/e):po);po.range;const Ua=1e3,On=Ua*60,za=On*60,Ba=za*24,Bm=Ba*7,R_=Ba*30,Sh=Ba*365,ll=_t(e=>{e.setTime(e-e.getMilliseconds())},(e,n)=>{e.setTime(+e+n*Ua)},(e,n)=>(n-e)/Ua,e=>e.getUTCSeconds());ll.range;const Lm=_t(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua)},(e,n)=>{e.setTime(+e+n*On)},(e,n)=>(n-e)/On,e=>e.getMinutes());Lm.range;const mD=_t(e=>{e.setUTCSeconds(0,0)},(e,n)=>{e.setTime(+e+n*On)},(e,n)=>(n-e)/On,e=>e.getUTCMinutes());mD.range;const km=_t(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua-e.getMinutes()*On)},(e,n)=>{e.setTime(+e+n*za)},(e,n)=>(n-e)/za,e=>e.getHours());km.range;const gD=_t(e=>{e.setUTCMinutes(0,0,0)},(e,n)=>{e.setTime(+e+n*za)},(e,n)=>(n-e)/za,e=>e.getUTCHours());gD.range;const au=_t(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*On)/Ba,e=>e.getDate()-1);au.range;const $m=_t(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/Ba,e=>e.getUTCDate()-1);$m.range;const yD=_t(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/Ba,e=>Math.floor(e/Ba));yD.range;function ui(e){return _t(n=>{n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},(n,r)=>{n.setDate(n.getDate()+r*7)},(n,r)=>(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*On)/Bm)}const Do=ui(0),vo=ui(1),pD=ui(2),vD=ui(3),_l=ui(4),_D=ui(5),xD=ui(6);Do.range;vo.range;pD.range;vD.range;_l.range;_D.range;xD.range;function ci(e){return _t(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCDate(n.getUTCDate()+r*7)},(n,r)=>(r-n)/Bm)}const $w=ci(0),_o=ci(1),wD=ci(2),bD=ci(3),xl=ci(4),SD=ci(5),ED=ci(6);$w.range;_o.range;wD.range;bD.range;xl.range;SD.range;ED.range;const Ym=_t(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,n)=>{e.setMonth(e.getMonth()+n)},(e,n)=>n.getMonth()-e.getMonth()+(n.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ym.range;const AD=_t(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCMonth(e.getUTCMonth()+n)},(e,n)=>n.getUTCMonth()-e.getUTCMonth()+(n.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());AD.range;const La=_t(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n)},(e,n)=>n.getFullYear()-e.getFullYear(),e=>e.getFullYear());La.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_t(n=>{n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,r)=>{n.setFullYear(n.getFullYear()+r*e)});La.range;const ii=_t(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n)},(e,n)=>n.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ii.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_t(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCFullYear(n.getUTCFullYear()+r*e)});ii.range;function TD(e,n,r,i,s,c){const o=[[ll,1,Ua],[ll,5,5*Ua],[ll,15,15*Ua],[ll,30,30*Ua],[c,1,On],[c,5,5*On],[c,15,15*On],[c,30,30*On],[s,1,za],[s,3,3*za],[s,6,6*za],[s,12,12*za],[i,1,Ba],[i,2,2*Ba],[r,1,Bm],[n,1,R_],[n,3,3*R_],[e,1,Sh]];function d(m,y,p){const v=y<m;v&&([m,y]=[y,m]);const x=p&&typeof p.range=="function"?p:g(m,y,p),A=x?x.range(m,+y+1):[];return v?A.reverse():A}function g(m,y,p){const v=Math.abs(y-m)/p,x=Um(([,,E])=>E).right(o,v);if(x===o.length)return e.every(v_(m/Sh,y/Sh,p));if(x===0)return po.every(Math.max(v_(m,y,p),1));const[A,w]=o[v/o[x-1][2]<o[x][2]/v?x-1:x];return A.every(w)}return[d,g]}const[CD,MD]=TD(La,Ym,Do,au,km,Lm);function Eh(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ah(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Rs(e,n,r){return{y:e,m:n,d:r,H:0,M:0,S:0,L:0}}function RD(e){var n=e.dateTime,r=e.date,i=e.time,s=e.periods,c=e.days,o=e.shortDays,d=e.months,g=e.shortMonths,m=Ds(s),y=Ns(s),p=Ds(c),v=Ns(c),x=Ds(o),A=Ns(o),w=Ds(d),E=Ns(d),R=Ds(g),D=Ns(g),z={a:Y,A:W,b:$,B:T,c:null,d:j_,e:j_,f:PD,g:uN,G:oN,H:FD,I:KD,j:JD,L:Yw,m:WD,M:eN,p:k,q:Q,Q:L_,s:k_,S:tN,u:nN,U:aN,V:rN,w:iN,W:lN,x:null,X:null,y:sN,Y:cN,Z:fN,"%":B_},C={a:ee,A:re,b:oe,B:fe,c:null,d:H_,e:H_,f:gN,g:AN,G:CN,H:dN,I:hN,j:mN,L:Xw,m:yN,M:pN,p:Ae,q:ve,Q:L_,s:k_,S:vN,u:_N,U:xN,V:wN,w:bN,W:SN,x:null,X:null,y:EN,Y:TN,Z:MN,"%":B_},U={a:Z,A:P,b:se,B:te,c:N,d:U_,e:U_,f:GD,g:O_,G:N_,H:z_,I:z_,j:YD,L:VD,m:$D,M:qD,p:X,q:kD,Q:ZD,s:ID,S:XD,u:zD,U:jD,V:HD,w:UD,W:BD,x:I,X:M,y:O_,Y:N_,Z:LD,"%":QD};z.x=O(r,z),z.X=O(i,z),z.c=O(n,z),C.x=O(r,C),C.X=O(i,C),C.c=O(n,C);function O(ce,de){return function(we){var ue=[],qe=-1,Me=0,He=ce.length,Ke,Te,me;for(we instanceof Date||(we=new Date(+we));++qe<He;)ce.charCodeAt(qe)===37&&(ue.push(ce.slice(Me,qe)),(Te=D_[Ke=ce.charAt(++qe)])!=null?Ke=ce.charAt(++qe):Te=Ke==="e"?" ":"0",(me=de[Ke])&&(Ke=me(we,Te)),ue.push(Ke),Me=qe+1);return ue.push(ce.slice(Me,qe)),ue.join("")}}function B(ce,de){return function(we){var ue=Rs(1900,void 0,1),qe=J(ue,ce,we+="",0),Me,He;if(qe!=we.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(de&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(Me=Ah(Rs(ue.y,0,1)),He=Me.getUTCDay(),Me=He>4||He===0?_o.ceil(Me):_o(Me),Me=$m.offset(Me,(ue.V-1)*7),ue.y=Me.getUTCFullYear(),ue.m=Me.getUTCMonth(),ue.d=Me.getUTCDate()+(ue.w+6)%7):(Me=Eh(Rs(ue.y,0,1)),He=Me.getDay(),Me=He>4||He===0?vo.ceil(Me):vo(Me),Me=au.offset(Me,(ue.V-1)*7),ue.y=Me.getFullYear(),ue.m=Me.getMonth(),ue.d=Me.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),He="Z"in ue?Ah(Rs(ue.y,0,1)).getUTCDay():Eh(Rs(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(He+5)%7:ue.w+ue.U*7-(He+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,Ah(ue)):Eh(ue)}}function J(ce,de,we,ue){for(var qe=0,Me=de.length,He=we.length,Ke,Te;qe<Me;){if(ue>=He)return-1;if(Ke=de.charCodeAt(qe++),Ke===37){if(Ke=de.charAt(qe++),Te=U[Ke in D_?de.charAt(qe++):Ke],!Te||(ue=Te(ce,we,ue))<0)return-1}else if(Ke!=we.charCodeAt(ue++))return-1}return ue}function X(ce,de,we){var ue=m.exec(de.slice(we));return ue?(ce.p=y.get(ue[0].toLowerCase()),we+ue[0].length):-1}function Z(ce,de,we){var ue=x.exec(de.slice(we));return ue?(ce.w=A.get(ue[0].toLowerCase()),we+ue[0].length):-1}function P(ce,de,we){var ue=p.exec(de.slice(we));return ue?(ce.w=v.get(ue[0].toLowerCase()),we+ue[0].length):-1}function se(ce,de,we){var ue=R.exec(de.slice(we));return ue?(ce.m=D.get(ue[0].toLowerCase()),we+ue[0].length):-1}function te(ce,de,we){var ue=w.exec(de.slice(we));return ue?(ce.m=E.get(ue[0].toLowerCase()),we+ue[0].length):-1}function N(ce,de,we){return J(ce,n,de,we)}function I(ce,de,we){return J(ce,r,de,we)}function M(ce,de,we){return J(ce,i,de,we)}function Y(ce){return o[ce.getDay()]}function W(ce){return c[ce.getDay()]}function $(ce){return g[ce.getMonth()]}function T(ce){return d[ce.getMonth()]}function k(ce){return s[+(ce.getHours()>=12)]}function Q(ce){return 1+~~(ce.getMonth()/3)}function ee(ce){return o[ce.getUTCDay()]}function re(ce){return c[ce.getUTCDay()]}function oe(ce){return g[ce.getUTCMonth()]}function fe(ce){return d[ce.getUTCMonth()]}function Ae(ce){return s[+(ce.getUTCHours()>=12)]}function ve(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var de=O(ce+="",z);return de.toString=function(){return ce},de},parse:function(ce){var de=B(ce+="",!1);return de.toString=function(){return ce},de},utcFormat:function(ce){var de=O(ce+="",C);return de.toString=function(){return ce},de},utcParse:function(ce){var de=B(ce+="",!0);return de.toString=function(){return ce},de}}}var D_={"-":"",_:" ",0:"0"},Mt=/^\s*\d+/,DD=/^%/,ND=/[\\^$*+?|[\]().{}]/g;function ke(e,n,r){var i=e<0?"-":"",s=(i?-e:e)+"",c=s.length;return i+(c<r?new Array(r-c+1).join(n)+s:s)}function OD(e){return e.replace(ND,"\\$&")}function Ds(e){return new RegExp("^(?:"+e.map(OD).join("|")+")","i")}function Ns(e){return new Map(e.map((n,r)=>[n.toLowerCase(),r]))}function UD(e,n,r){var i=Mt.exec(n.slice(r,r+1));return i?(e.w=+i[0],r+i[0].length):-1}function zD(e,n,r){var i=Mt.exec(n.slice(r,r+1));return i?(e.u=+i[0],r+i[0].length):-1}function jD(e,n,r){var i=Mt.exec(n.slice(r,r+2));return i?(e.U=+i[0],r+i[0].length):-1}function HD(e,n,r){var i=Mt.exec(n.slice(r,r+2));return i?(e.V=+i[0],r+i[0].length):-1}function BD(e,n,r){var i=Mt.exec(n.slice(r,r+2));return i?(e.W=+i[0],r+i[0].length):-1}function N_(e,n,r){var i=Mt.exec(n.slice(r,r+4));return i?(e.y=+i[0],r+i[0].length):-1}function O_(e,n,r){var i=Mt.exec(n.slice(r,r+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function LD(e,n,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(r,r+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function kD(e,n,r){var i=Mt.exec(n.slice(r,r+1));return i?(e.q=i[0]*3-3,r+i[0].length):-1}function $D(e,n,r){var i=Mt.exec(n.slice(r,r+2));return i?(e.m=i[0]-1,r+i[0].length):-1}function U_(e,n,r){var i=Mt.exec(n.slice(r,r+2));return i?(e.d=+i[0],r+i[0].length):-1}function YD(e,n,r){var i=Mt.exec(n.slice(r,r+3));return i?(e.m=0,e.d=+i[0],r+i[0].length):-1}function z_(e,n,r){var i=Mt.exec(n.slice(r,r+2));return i?(e.H=+i[0],r+i[0].length):-1}function qD(e,n,r){var i=Mt.exec(n.slice(r,r+2));return i?(e.M=+i[0],r+i[0].length):-1}function XD(e,n,r){var i=Mt.exec(n.slice(r,r+2));return i?(e.S=+i[0],r+i[0].length):-1}function VD(e,n,r){var i=Mt.exec(n.slice(r,r+3));return i?(e.L=+i[0],r+i[0].length):-1}function GD(e,n,r){var i=Mt.exec(n.slice(r,r+6));return i?(e.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function QD(e,n,r){var i=DD.exec(n.slice(r,r+1));return i?r+i[0].length:-1}function ZD(e,n,r){var i=Mt.exec(n.slice(r));return i?(e.Q=+i[0],r+i[0].length):-1}function ID(e,n,r){var i=Mt.exec(n.slice(r));return i?(e.s=+i[0],r+i[0].length):-1}function j_(e,n){return ke(e.getDate(),n,2)}function FD(e,n){return ke(e.getHours(),n,2)}function KD(e,n){return ke(e.getHours()%12||12,n,2)}function JD(e,n){return ke(1+au.count(La(e),e),n,3)}function Yw(e,n){return ke(e.getMilliseconds(),n,3)}function PD(e,n){return Yw(e,n)+"000"}function WD(e,n){return ke(e.getMonth()+1,n,2)}function eN(e,n){return ke(e.getMinutes(),n,2)}function tN(e,n){return ke(e.getSeconds(),n,2)}function nN(e){var n=e.getDay();return n===0?7:n}function aN(e,n){return ke(Do.count(La(e)-1,e),n,2)}function qw(e){var n=e.getDay();return n>=4||n===0?_l(e):_l.ceil(e)}function rN(e,n){return e=qw(e),ke(_l.count(La(e),e)+(La(e).getDay()===4),n,2)}function iN(e){return e.getDay()}function lN(e,n){return ke(vo.count(La(e)-1,e),n,2)}function sN(e,n){return ke(e.getFullYear()%100,n,2)}function uN(e,n){return e=qw(e),ke(e.getFullYear()%100,n,2)}function cN(e,n){return ke(e.getFullYear()%1e4,n,4)}function oN(e,n){var r=e.getDay();return e=r>=4||r===0?_l(e):_l.ceil(e),ke(e.getFullYear()%1e4,n,4)}function fN(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+ke(n/60|0,"0",2)+ke(n%60,"0",2)}function H_(e,n){return ke(e.getUTCDate(),n,2)}function dN(e,n){return ke(e.getUTCHours(),n,2)}function hN(e,n){return ke(e.getUTCHours()%12||12,n,2)}function mN(e,n){return ke(1+$m.count(ii(e),e),n,3)}function Xw(e,n){return ke(e.getUTCMilliseconds(),n,3)}function gN(e,n){return Xw(e,n)+"000"}function yN(e,n){return ke(e.getUTCMonth()+1,n,2)}function pN(e,n){return ke(e.getUTCMinutes(),n,2)}function vN(e,n){return ke(e.getUTCSeconds(),n,2)}function _N(e){var n=e.getUTCDay();return n===0?7:n}function xN(e,n){return ke($w.count(ii(e)-1,e),n,2)}function Vw(e){var n=e.getUTCDay();return n>=4||n===0?xl(e):xl.ceil(e)}function wN(e,n){return e=Vw(e),ke(xl.count(ii(e),e)+(ii(e).getUTCDay()===4),n,2)}function bN(e){return e.getUTCDay()}function SN(e,n){return ke(_o.count(ii(e)-1,e),n,2)}function EN(e,n){return ke(e.getUTCFullYear()%100,n,2)}function AN(e,n){return e=Vw(e),ke(e.getUTCFullYear()%100,n,2)}function TN(e,n){return ke(e.getUTCFullYear()%1e4,n,4)}function CN(e,n){var r=e.getUTCDay();return e=r>=4||r===0?xl(e):xl.ceil(e),ke(e.getUTCFullYear()%1e4,n,4)}function MN(){return"+0000"}function B_(){return"%"}function L_(e){return+e}function k_(e){return Math.floor(+e/1e3)}var Ji,Gw;RN({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function RN(e){return Ji=RD(e),Gw=Ji.format,Ji.parse,Ji.utcFormat,Ji.utcParse,Ji}function DN(e){return new Date(e)}function NN(e){return e instanceof Date?+e:+new Date(+e)}function Qw(e,n,r,i,s,c,o,d,g,m){var y=dD(),p=y.invert,v=y.domain,x=m(".%L"),A=m(":%S"),w=m("%I:%M"),E=m("%I %p"),R=m("%a %d"),D=m("%b %d"),z=m("%B"),C=m("%Y");function U(O){return(g(O)<O?x:d(O)<O?A:o(O)<O?w:c(O)<O?E:i(O)<O?s(O)<O?R:D:r(O)<O?z:C)(O)}return y.invert=function(O){return new Date(p(O))},y.domain=function(O){return arguments.length?v(Array.from(O,NN)):v().map(DN)},y.ticks=function(O){var B=v();return e(B[0],B[B.length-1],O??10)},y.tickFormat=function(O,B){return B==null?U:m(B)},y.nice=function(O){var B=v();return(!O||typeof O.range!="function")&&(O=n(B[0],B[B.length-1],O??10)),O?v(hD(B,O)):y},y.copy=function(){return oD(y,Qw(e,n,r,i,s,c,o,d,g,m))},y}function Zw(){return jm.apply(Qw(CD,MD,La,Ym,Do,au,km,Lm,ll,Gw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ON({events:e=[]}){const{setQuery:n}=We(),r=j.useRef(null),[i,s]=j.useState(),[c,o]=j.useState(),d=ca(),[g,m]=j.useState(0),y=w=>w?new Date(w.getTime()-w.getTimezoneOffset()*6e4).toISOString().slice(0,16):"",p=w=>{if(!i||!c)return;const E=g*w;s(new Date(i.getTime()+E)),o(new Date(c.getTime()+E))},v=w=>{if(!i||!c)return;const E=i.getTime()+g/2,R=g*w;s(new Date(E-R/2)),o(new Date(E+R/2))},x=15*60*1e3,A=e.filter(w=>w.start&&w.end&&!isNaN(+w.start)&&!isNaN(+w.end)&&+w.end>=+w.start);return j.useEffect(()=>{!i||!c||(m(c.getTime()-i.getTime()),d.timelineMinimum=i?i.toISOString():void 0,d.timelineMaximum=c?c.toISOString():void 0)},[i,c]),j.useEffect(()=>{if(d.timelineMinimum){const w=new Date(d.timelineMinimum);isNaN(+w)||s(w)}if(d.timelineMaximum){const w=new Date(d.timelineMaximum);isNaN(+w)||o(w)}},[s,o]),j.useEffect(()=>{if(!A.length)return;const w=zw(A.flatMap(E=>[E.start,E.end]));s(w[0]),o(w[1])},[e]),j.useEffect(()=>{var X;if(!r.current||!A.length||!i||!c)return;const w=Wt(r.current);w.selectAll("*").remove();const E={top:20,right:20,bottom:20,left:100},D=(((X=r.current)==null?void 0:X.clientWidth)||600)-E.left-E.right,z=25,C=A.filter(Z=>Z.start<=c&&Z.end>=i),U=C.length*z,O=w.attr("height",U+E.top+E.bottom).append("g").attr("transform",`translate(${E.left},${E.top})`),B=Zw().domain([i,c]).range([0,D]),J=Hm().domain(C.map(Z=>Z.id)).range([0,U]).padding(.1);O.append("g").attr("transform",`translate(0,${U})`).call(Hw(B).ticks(5)),O.selectAll("rect").data(C).enter().append("rect").attr("x",Z=>B(Z.start)).attr("y",Z=>J(Z.id)??0).attr("width",Z=>{const P=B(new Date(Z.start.getTime()+x))-B(Z.start);return Math.max(P,B(Z.end)-B(Z.start))}).attr("height",J.bandwidth()).attr("fill","#69b3a2").attr("rx",4).on("click",(Z,P)=>n({id:P.id})),O.selectAll("text.label").data(C).enter().append("text").attr("class","label").attr("x",Z=>B(Z.start)+4).attr("y",Z=>(J(Z.id)??0)+J.bandwidth()/2).attr("dominant-baseline","middle").attr("fill","darkblue").attr("font-size","12px").text(Z=>Z.name).on("click",(Z,P)=>n({id:P.id}))},[A,i,c]),b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"8px",display:"flex",gap:"8px",alignItems:"center"},children:[b.jsxs("label",{children:["From:"," ",b.jsx("input",{type:"datetime-local",value:y(i),onChange:w=>s(w.target.value?new Date(w.target.value):void 0)})]}),b.jsxs("label",{children:["To:"," ",b.jsx("input",{type:"datetime-local",value:y(c),onChange:w=>o(w.target.value?new Date(w.target.value):void 0)})]}),b.jsxs("span",{style:{marginLeft:"auto",display:"flex",gap:"4px"},children:[b.jsx("button",{type:"button",onClick:()=>v(.5),children:"+"}),b.jsx("button",{type:"button",onClick:()=>v(2),children:"-"}),b.jsx("button",{type:"button",onClick:()=>p(-1),children:""}),b.jsx("button",{type:"button",onClick:()=>p(1),children:""})]})]}),b.jsx("svg",{ref:r,width:"100%"})]})}function UN(){var y;const{query:e,setQuery:n}=We(),r=e.realmId,i=e.id,[s,c]=j.useState([]),[o,d]=j.useState("list"),g=()=>{const p=prompt("Enter a name for the new event");if(!p)return;const v=la.create({realmId:r,characters:[],items:[],locationId:"",name:p,description:"new event",start:new Date,end:new Date});m(),n({id:v.id})},m=()=>{const p=la.readAll(r).filter(v=>v.realmId===r).sort((v,x)=>{const A=v.start?new Date(v.start).getTime():0,w=x.start?new Date(x.start).getTime():0;return A-w});c(p)};return j.useEffect(()=>{r&&m()},[r]),j.useEffect(()=>{!i&&r&&m()},[i,r]),b.jsx(b.Fragment,{children:i?b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"10px"},children:[b.jsxs("button",{onClick:()=>n({id:""}),style:{marginRight:"10px"},children:[" Back to ",o==="timeline"?"Timeline":"List"]}),b.jsxs("span",{children:["Editing: ",(y=s.find(p=>p.id===i))==null?void 0:y.name]})]}),b.jsx(Uw,{})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[b.jsxs("button",{onClick:g,children:[je.PLUS," New Event"]}),b.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"5px"},children:[b.jsx("button",{onClick:()=>d("list"),style:{backgroundColor:o==="list"?"#007bff":"#f8f9fa",color:o==="list"?"white":"black",border:"1px solid #ccc",padding:"5px 10px",borderRadius:"4px",cursor:"pointer"},children:" List"}),b.jsx("button",{onClick:()=>d("timeline"),style:{backgroundColor:o==="timeline"?"#007bff":"#f8f9fa",color:o==="timeline"?"white":"black",border:"1px solid #ccc",padding:"5px 10px",borderRadius:"4px",cursor:"pointer"},children:" Timeline"})]})]}),o==="list"?b.jsxs("select",{onChange:p=>n({id:p.target.value}),value:i,style:{width:"100%",padding:"8px"},children:[b.jsx("option",{value:"",children:"Select an event"}),s&&s.map(p=>b.jsx("option",{value:p.id,children:p.name},p.id))]}):b.jsx(ON,{events:s})]})})}function zN(){var y;const{query:e,setQuery:n}=We(),r=e.realmId,[i,s]=j.useState([]),[c]=j.useState(""),[o,d]=j.useState(""),g=()=>{const p=prompt("Enter a name for the new item");if(!p)return;const v=yn.create({realmId:r,name:p,description:"new item",properties:{}});m(),n({id:v.id})},m=()=>{const p=yn.readAll(r).filter(v=>v.realmId===r).sort((v,x)=>v.name.localeCompare(x.name));s(p)};return j.useEffect(()=>{r&&m()},[r]),b.jsx(b.Fragment,{children:c?b.jsx(b.Fragment,{children:(y=i.find(p=>p.id===c))==null?void 0:y.id}):b.jsxs(b.Fragment,{children:[b.jsx("button",{onClick:g,children:je.PLUS}),b.jsx("input",{type:"text",placeholder:"Search",value:o,onChange:p=>d(p.target.value)}),b.jsx("ul",{children:i&&i.filter(p=>Ow(p.name,o)).map(p=>b.jsx("li",{children:b.jsx("a",{href:"#",onClick:v=>{v.preventDefault(),n({id:p.id})},children:p.name})},p.id))})]})})}function jN({node:e,list:n,select:r}){const i=n.filter(o=>o.parentId===e.id),[s,c]=j.useState(!1);return b.jsxs("li",{children:[b.jsx("a",{href:"#",onClick:o=>{o.preventDefault(),r({id:e.id})},children:e.name}),i.length>0&&b.jsx("button",{style:{marginRight:"4px"},onClick:()=>c(o=>!o),children:s?"":""}),s&&i.length>0&&b.jsx(Iw,{list:n,parentId:e.id,select:r})]})}function Iw({list:e,parentId:n,select:r}){const i=e.filter(s=>s.parentId===n);return i.length?b.jsx("ul",{children:i.map(s=>b.jsx(jN,{node:s,list:e,select:r},s.id))}):null}function HN(){const{query:e,setQuery:n}=We(),r=e.realmId,[i,s]=j.useState([]),c=()=>{const d=prompt("Enter a name for the new location");if(!d)return;const g=en.create({realmId:r,parentId:"",name:d,description:"new location"});o(),n({id:g.id})},o=()=>{const d=en.readAll(r).filter(g=>g.realmId===r).sort((g,m)=>g.name.localeCompare(m.name));s(d)};return j.useEffect(()=>{r&&o()},[r]),b.jsx(b.Fragment,{children:b.jsxs(b.Fragment,{children:[b.jsx("button",{onClick:c,children:je.PLUS}),b.jsx(Iw,{list:i,parentId:"",select:n})]})})}function Fw(e,n){const r=e.split(/\n/).map(s=>s.trim()).filter(Boolean),i=[];for(const s of r){const c=/^(Character|Item|Location|Concept)\s+([^.,;:!-]+)[\s:,-]+(.+)$/i.exec(s);if(!c)continue;const[,o,d,g]=c,m=o.charAt(0).toUpperCase()+o.slice(1).toLowerCase(),y=d.trim(),p=g.trim();let v,x;switch(m){case"Character":v=vt.readAll(n).find(A=>A.name.toLowerCase()===y.toLowerCase()),v?x=()=>{vt.update(v.id,{description:p})}:x=()=>{vt.create({realmId:n,name:y,description:p,birth:new Date,death:new Date,relations:{},properties:{}})};break;case"Item":v=yn.readAll(n).find(A=>A.name.toLowerCase()===y.toLowerCase()),v?x=()=>{yn.update(v.id,{description:p})}:x=()=>{yn.create({realmId:n,name:y,description:p,properties:{}})};break;case"Location":v=en.readAll(n).find(A=>A.name.toLowerCase()===y.toLowerCase()),v?x=()=>{en.update(v.id,{description:p})}:x=()=>{en.create({realmId:n,parentId:"",name:y,description:p})};break;case"Concept":v=Pt.readAll(n).find(A=>A.name.toLowerCase()===y.toLowerCase()),v?x=()=>{Pt.update(v.id,{description:p})}:x=()=>{Pt.create({realmId:n,name:y,description:p})};break}i.push({type:m,name:y,description:p,existing:!!v,accept:x})}return i}function Kw({suggestions:e,setSuggestions:n}){const r=s=>{e[s].accept(),n(e.filter((o,d)=>d!==s))},i=s=>{n(e.filter((c,o)=>o!==s))};return e.length===0?null:b.jsx("ul",{children:e.map((s,c)=>b.jsxs("li",{children:[b.jsx("b",{children:s.type})," ",b.jsx("i",{children:s.name})," - ",s.description,s.existing?" (update)":" (create)",b.jsx("button",{onClick:()=>r(c),children:"accept"}),b.jsx("button",{onClick:()=>i(c),children:"dismiss"})]},c))})}function BN(){const{query:e}=We(),[n,r]=j.useState(""),[i,s]=j.useState([]);return j.useEffect(()=>{s(Fw(n,e.realmId))},[n,e.realmId]),b.jsxs("div",{className:"input-editor",children:[b.jsx("textarea",{placeholder:"Type notes...",value:n,onChange:c=>r(c.target.value),rows:10,cols:50}),b.jsx(Kw,{suggestions:i,setSuggestions:s})]})}function LN(){const{query:e}=We(),[n,r]=j.useState(""),[i,s]=j.useState([]),[c,o]=j.useState(!1),d=j.useRef(null);j.useEffect(()=>{const y=Fw(n,e.realmId);console.log(y),s(y)},[n,e.realmId]);const g=()=>{const y=window.SpeechRecognition||window.webkitSpeechRecognition;if(!y){alert("Speech recognition not supported");return}const p=new y;p.continuous=!0,p.interimResults=!1,p.onresult=v=>{let x="";for(let A=v.resultIndex;A<v.results.length;A++){const w=v.results[A];w.isFinal&&(x+=w[0].transcript)}x&&r(A=>(A+" "+x).trim())},p.onend=()=>o(!1),p.start(),d.current=p,o(!0)},m=()=>{var y;(y=d.current)==null||y.stop()};return b.jsxs("div",{className:"talk-editor",children:[b.jsxs("button",{onClick:c?m:g,children:[c?"Stop":"Start"," Talking"]}),b.jsx("textarea",{value:n,rows:10,cols:50,onChange:y=>r(y.target.value)}),b.jsx(Kw,{suggestions:i,setSuggestions:s})]})}function kN(){const{query:e,setQuery:n}=We(),r=e.id,i=ca(),[s,c]=j.useState({}),[o,d]=j.useState([]),g=(x={})=>Object.entries(x).map(([A,w])=>({key:A,value:String(w)})),m=x=>{const A={};for(const{key:w,value:E}of x)w&&(A[w]=E);return A},y=x=>{const A=yn.read(x);c({name:"",description:"",properties:{},...A}),d(g((A==null?void 0:A.properties)||{}))},p=async x=>{prompt(`Type 'yes' to remove the ${s==null?void 0:s.name} item?`)==="yes"&&yn.remove(x),await nn(i,e.realmId),n({id:""})},v=async x=>{x.preventDefault();const A={...s,properties:m(o)};yn.update(s==null?void 0:s.id,A),await nn(i,e.realmId),n({id:""})};return j.useEffect(()=>{r?y(r):(c({}),d([]))},[r]),b.jsx(b.Fragment,{children:b.jsxs("form",{onSubmit:v,children:[b.jsx("label",{children:"Name"}),b.jsx("input",{type:"text",required:!0,name:"name",value:(s==null?void 0:s.name)||"",onChange:x=>c({...s,name:x.target.value})}),b.jsx("label",{children:"Description"}),b.jsx("textarea",{name:"description",required:!0,value:(s==null?void 0:s.description)||"",onChange:x=>c({...s,description:x.target.value})}),b.jsx("label",{children:"Properties"}),b.jsxs("div",{children:[o.map((x,A)=>b.jsxs("div",{className:"key-value",children:[b.jsx("input",{type:"text",placeholder:"Key",value:x.key,onChange:w=>{const E=[...o];E[A]={...E[A],key:w.target.value},d(E)}}),b.jsx("input",{type:"text",placeholder:"Value",value:x.value,onChange:w=>{const E=[...o];E[A]={...E[A],value:w.target.value},d(E)}}),b.jsx("button",{type:"button",onClick:()=>{const w=o.filter((E,R)=>R!==A);d(w)},children:"x"})]},A)),b.jsx("button",{type:"button",onClick:()=>d([...o,{key:"",value:""}]),children:"Add property"})]}),b.jsx("span",{}),b.jsxs("span",{children:[b.jsx("button",{type:"button",onClick:()=>n({id:""}),children:je.DARROW_LEFT}),b.jsx("button",{type:"submit",children:je.FLOPPY_DISK}),b.jsx("button",{onClick:()=>p(s==null?void 0:s.id),children:je.RED_X})]})]})})}function $N(){const{query:e,setQuery:n}=We(),r=e.id,i=ca(),[s,c]=j.useState({}),[o,d]=j.useState([]),g=p=>{const v=en.read(p);if(c({name:"",description:"",parentId:"",...v}),v!=null&&v.realmId){const x=en.readAll(v.realmId).filter(A=>A.id!==p);d(x)}},m=async p=>{prompt(`Type 'yes' to remove the ${s==null?void 0:s.name} location?`)==="yes"&&en.remove(p),await nn(i,e.realmId),n({id:""})},y=async p=>{p.preventDefault(),en.update(s==null?void 0:s.id,s),await nn(i,e.realmId),n({id:""})};return j.useEffect(()=>{r?g(r):c({})},[r]),b.jsx(b.Fragment,{children:b.jsxs("form",{onSubmit:y,children:[b.jsx("label",{children:"Name"}),b.jsx("input",{type:"text",required:!0,name:"name",value:(s==null?void 0:s.name)||"",onChange:p=>c({...s,name:p.target.value})}),b.jsx("label",{children:"Description"}),b.jsx("textarea",{name:"description",required:!0,value:(s==null?void 0:s.description)||"",onChange:p=>c({...s,description:p.target.value})}),b.jsx("label",{children:"Parent Location"}),b.jsxs("select",{name:"parentId",value:(s==null?void 0:s.parentId)||"",onChange:p=>c({...s,parentId:p.target.value}),children:[b.jsx("option",{value:"",children:"None"}),o.map(p=>b.jsx("option",{value:p.id,children:p.name},p.id))]}),b.jsx("span",{}),b.jsxs("span",{children:[b.jsx("button",{type:"button",onClick:()=>n({id:""}),children:je.DARROW_LEFT}),b.jsx("button",{type:"submit",children:je.FLOPPY_DISK}),b.jsx("button",{onClick:()=>m(s==null?void 0:s.id),children:je.RED_X})]})]})})}function YN(){const{query:e,setQuery:n}=We(),r=e.id,i=ca(),[s,c]=j.useState({}),[o,d]=j.useState([]),[g,m]=j.useState([]),y=x=>{const A=ra.read(x);if(c({name:"",description:"",parentId:"",members:((A==null?void 0:A.members)||[]).map(w=>typeof w=="string"?w:w.id),...A}),A!=null&&A.realmId){const w=ra.readAll(A.realmId).filter(E=>E.id!==x).sort((E,R)=>E.name.localeCompare(R.name));d(w),m(vt.readAll(A.realmId).sort((E,R)=>{const D=E.birth?new Date(E.birth).getTime():0,z=R.birth?new Date(R.birth).getTime():0;return D-z}))}},p=async x=>{prompt(`Type 'yes' to remove the ${s==null?void 0:s.name} community?`)==="yes"&&ra.remove(x),await nn(i,e.realmId),n({id:""})},v=async x=>{x.preventDefault(),ra.update(s==null?void 0:s.id,s),await nn(i,e.realmId),n({id:""})};return j.useEffect(()=>{r?y(r):(c({}),d([]),e.realmId?m(vt.readAll(e.realmId).sort((x,A)=>{const w=x.birth?new Date(x.birth).getTime():0,E=A.birth?new Date(A.birth).getTime():0;return w-E})):m([]))},[r]),b.jsx(b.Fragment,{children:b.jsxs("form",{onSubmit:v,children:[b.jsx("label",{children:"Name"}),b.jsx("input",{type:"text",required:!0,name:"name",value:(s==null?void 0:s.name)||"",onChange:x=>c({...s,name:x.target.value})}),b.jsx("label",{children:"Description"}),b.jsx("textarea",{name:"description",required:!0,value:(s==null?void 0:s.description)||"",onChange:x=>c({...s,description:x.target.value})}),b.jsx("label",{children:"Parent Community"}),b.jsxs("select",{name:"parentId",value:(s==null?void 0:s.parentId)||"",onChange:x=>c({...s,parentId:x.target.value}),children:[b.jsx("option",{value:"",children:"None"}),o.map(x=>b.jsx("option",{value:x.id,children:x.name},x.id))]}),b.jsx("label",{children:"Members"}),b.jsx("select",{multiple:!0,value:(s==null?void 0:s.members)||[],onChange:x=>c({...s,members:Array.from(x.target.selectedOptions,A=>A.value)}),children:g.map(x=>b.jsx("option",{value:x.id,children:x.name},x.id))}),b.jsx("span",{}),b.jsxs("span",{children:[b.jsx("button",{type:"button",onClick:()=>n({id:""}),children:je.DARROW_LEFT}),b.jsx("button",{type:"submit",children:je.FLOPPY_DISK}),b.jsx("button",{onClick:()=>p(s==null?void 0:s.id),children:je.RED_X})]})]})})}function qN(){const{query:e}=We(),n=e.realmId,r=j.useRef(null),[i,s]=j.useState(null);return j.useEffect(()=>{if(!n)return;const c=ra.readAll(n),o=vt.readAll(n),d=new Map(o.map(y=>[y.id,y])),g=new Map,m={name:"root",type:"community",children:[]};g.set("",m),c.forEach(y=>{const p={id:y.id,name:y.name,type:"community",children:[]};g.set(y.id,p)}),c.forEach(y=>{const p=g.get(y.parentId||"")||m,v=g.get(y.id);p.children.push(v),(Array.isArray(y.members)?y.members:[]).forEach(A=>{const w=typeof A=="string"?A:A.id,E=d.get(w);E&&v.children.push({id:E.id,name:E.name,type:"member"})})}),s(m)},[n]),j.useEffect(()=>{if(!i||!r.current)return;const c=500,o=500,d=zm(i).sum(p=>p.type==="member"?1:0).sort((p,v)=>(v.value||0)-(p.value||0));rD().size([c,o]).padding(5)(d);const m=Wt(r.current);m.selectAll("*").remove(),m.attr("viewBox",`0 0 ${c} ${o}`);const y=m.selectAll("g").data(d.descendants()).enter().append("g").attr("transform",p=>`translate(${p.x},${p.y})`);y.append("circle").attr("r",p=>p.r).attr("fill",p=>p.data.type==="community"?"#69b3a2":"#ccc").attr("stroke","#333"),y.filter(p=>p.children).append("text").attr("text-anchor","middle").attr("dy","0.3em").attr("font-size","10px").text(p=>p.depth===0?"":p.data.name),y.filter(p=>!p.children).append("text").attr("text-anchor","middle").attr("dy","0.3em").attr("font-size","8px").text(p=>p.data.name)},[i]),n?b.jsx("svg",{ref:r,width:"100%",height:"500"}):null}function XN({node:e,list:n,select:r}){const i=n.filter(o=>o.parentId===e.id),[s,c]=j.useState(!1);return b.jsxs("li",{children:[b.jsx("a",{href:"#",onClick:o=>{o.preventDefault(),r({id:e.id})},children:e.name}),i.length>0&&b.jsx("button",{style:{marginRight:"4px"},onClick:()=>c(o=>!o),children:s?"":""}),s&&i.length>0&&b.jsx(Jw,{list:n,parentId:e.id,select:r})]})}function Jw({list:e,parentId:n,select:r}){const i=e.filter(s=>s.parentId===n);return i.length?b.jsx("ul",{children:i.map(s=>b.jsx(XN,{node:s,list:e,select:r},s.id))}):null}function VN(){const{query:e,setQuery:n}=We(),r=e.realmId,[i,s]=j.useState([]),c=()=>{const d=prompt("Enter a name for the new community");if(!d)return;const g=ra.create({realmId:r,parentId:"",name:d,description:"new community",members:[]});o(),n({id:g.id})},o=()=>{const d=ra.readAll(r).filter(g=>g.realmId===r).sort((g,m)=>g.name.localeCompare(m.name));s(d)};return j.useEffect(()=>{r&&o()},[r]),b.jsxs(b.Fragment,{children:[b.jsx("button",{onClick:c,children:je.PLUS}),b.jsx(Jw,{list:i,parentId:"",select:n}),b.jsx(qN,{})]})}function GN(){const{gotoState:e,setQuery:n,query:r}=We(),i=ca(),s=j.useRef(null),[c,o]=j.useState([]),[d,g]=hv("globalTimelineMin",void 0),[m,y]=hv("globalTimelineMax",void 0),p=r.realmId;j.useEffect(()=>{const w=la.readAll(p),E=vt.readAll(p),R=[...w.map(D=>({id:D.id,name:D.name,start:D.start,end:D.end,type:"event"})),...E.map(D=>({id:D.id,name:D.name,start:D.birth,end:D.death,type:"character"}))].filter(D=>D.start&&D.end&&!isNaN(+D.start)&&!isNaN(+D.end)&&+D.end>=+D.start);if(o(R),R.length){const D=zw(R.flatMap(z=>[z.start,z.end]));g(D[0]),y(D[1])}},[p]);const v=w=>{if(!d||!m)return;const E=typeof d=="string"?new Date(d):d,R=typeof m=="string"?new Date(m):m,z=(R.getTime()-E.getTime())*w;g(new Date(E.getTime()+z)),y(new Date(R.getTime()+z))},x=w=>{if(!d||!m)return;const E=typeof d=="string"?new Date(d):d,D=(typeof m=="string"?new Date(m):m).getTime()-E.getTime(),z=E.getTime()+D/2,C=D*w;g(new Date(z-C/2)),y(new Date(z+C/2))};j.useEffect(()=>{var se;if(!s.current||!c.length||!d||!m)return;const w=typeof d=="string"?new Date(d):d,E=typeof m=="string"?new Date(m):m,R=Wt(s.current);R.selectAll("*").remove();const D={top:20,right:20,bottom:20,left:100},C=(((se=s.current)==null?void 0:se.clientWidth)||600)-D.left-D.right,U=25,O=c.filter(te=>te.start<=E&&te.end>=w),B=O.length*U,J=R.attr("height",B+D.top+D.bottom).append("g").attr("transform",`translate(${D.left},${D.top})`),X=Zw().domain([w,E]).range([0,C]),Z=Hm().domain(O.map(te=>te.id)).range([0,B]).padding(.1);J.append("g").attr("transform",`translate(0,${B})`).call(Hw(X).ticks(5));const P=15*60*1e3;J.selectAll("rect").data(O).enter().append("rect").attr("x",te=>X(te.start)).attr("y",te=>Z(te.id)??0).attr("width",te=>{const N=X(new Date(te.start.getTime()+P))-X(te.start);return Math.max(N,X(te.end)-X(te.start))}).attr("height",Z.bandwidth()).attr("fill",te=>te.type==="event"?"#69b3a2":"#a369b3").attr("rx",4).on("click",(te,N)=>{e(N.type==="event"?Ye.Event:Ye.Character),n({id:N.id,realmId:p})}),J.selectAll("text.label").data(O).enter().append("text").attr("class","label").attr("x",te=>X(te.start)+4).attr("y",te=>(Z(te.id)??0)+Z.bandwidth()/2).attr("dominant-baseline","middle").attr("fill","black").attr("font-size","12px").text(te=>te.name).on("click",(te,N)=>{e(N.type==="event"?Ye.Event:Ye.Character),n({id:N.id,realmId:p})})},[c,d,m,p]),j.useEffect(()=>{i.globalTimelineMin=d?typeof d=="string"?d:d.toISOString():void 0,i.globalTimelineMax=m?typeof m=="string"?m:m.toISOString():void 0},[d,m]);const A=w=>{if(!w)return"";const E=typeof w=="string"?new Date(w):w;return new Date(E.getTime()-E.getTimezoneOffset()*6e4).toISOString().slice(0,16)};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"8px",display:"flex",gap:"8px",alignItems:"center"},children:[b.jsxs("label",{children:["From:"," ",b.jsx("input",{type:"datetime-local",value:A(d),onChange:w=>g(w.target.value?new Date(w.target.value):void 0)})]}),b.jsxs("label",{children:["To:"," ",b.jsx("input",{type:"datetime-local",value:A(m),onChange:w=>y(w.target.value?new Date(w.target.value):void 0)})]}),b.jsxs("span",{style:{marginLeft:"auto",display:"flex",gap:"4px"},children:[b.jsx("button",{type:"button",onClick:()=>x(.5),children:"+"}),b.jsx("button",{type:"button",onClick:()=>x(2),children:"-"}),b.jsx("button",{type:"button",onClick:()=>v(-1),children:""}),b.jsx("button",{type:"button",onClick:()=>v(1),children:""})]})]}),b.jsx("svg",{ref:s,width:"100%"})]})}const Wh="RFC3986",em={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},QN="RFC1738",ZN=Array.isArray,ea=(()=>{const e=[];for(let n=0;n<256;++n)e.push("%"+((n<16?"0":"")+n.toString(16)).toUpperCase());return e})(),Th=1024,IN=(e,n,r,i,s)=>{if(e.length===0)return e;let c=e;if(typeof e=="symbol"?c=Symbol.prototype.toString.call(e):typeof e!="string"&&(c=String(e)),r==="iso-8859-1")return escape(c).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let o="";for(let d=0;d<c.length;d+=Th){const g=c.length>=Th?c.slice(d,d+Th):c,m=[];for(let y=0;y<g.length;++y){let p=g.charCodeAt(y);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===QN&&(p===40||p===41)){m[m.length]=g.charAt(y);continue}if(p<128){m[m.length]=ea[p];continue}if(p<2048){m[m.length]=ea[192|p>>6]+ea[128|p&63];continue}if(p<55296||p>=57344){m[m.length]=ea[224|p>>12]+ea[128|p>>6&63]+ea[128|p&63];continue}y+=1,p=65536+((p&1023)<<10|g.charCodeAt(y)&1023),m[m.length]=ea[240|p>>18]+ea[128|p>>12&63]+ea[128|p>>6&63]+ea[128|p&63]}o+=m.join("")}return o};function FN(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function $_(e,n){if(ZN(e)){const r=[];for(let i=0;i<e.length;i+=1)r.push(n(e[i]));return r}return n(e)}const KN=Object.prototype.hasOwnProperty,Pw={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,n){return String(e)+"["+n+"]"},repeat(e){return String(e)}},na=Array.isArray,JN=Array.prototype.push,Ww=function(e,n){JN.apply(e,na(n)?n:[n])},PN=Date.prototype.toISOString,pt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:IN,encodeValuesOnly:!1,format:Wh,formatter:em[Wh],indices:!1,serializeDate(e){return PN.call(e)},skipNulls:!1,strictNullHandling:!1};function WN(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const Ch={};function eb(e,n,r,i,s,c,o,d,g,m,y,p,v,x,A,w,E,R){let D=e,z=R,C=0,U=!1;for(;(z=z.get(Ch))!==void 0&&!U;){const Z=z.get(e);if(C+=1,typeof Z<"u"){if(Z===C)throw new RangeError("Cyclic object value");U=!0}typeof z.get(Ch)>"u"&&(C=0)}if(typeof m=="function"?D=m(n,D):D instanceof Date?D=v==null?void 0:v(D):r==="comma"&&na(D)&&(D=$_(D,function(Z){return Z instanceof Date?v==null?void 0:v(Z):Z})),D===null){if(c)return g&&!w?g(n,pt.encoder,E,"key",x):n;D=""}if(WN(D)||FN(D)){if(g){const Z=w?n:g(n,pt.encoder,E,"key",x);return[(A==null?void 0:A(Z))+"="+(A==null?void 0:A(g(D,pt.encoder,E,"value",x)))]}return[(A==null?void 0:A(n))+"="+(A==null?void 0:A(String(D)))]}const O=[];if(typeof D>"u")return O;let B;if(r==="comma"&&na(D))w&&g&&(D=$_(D,g)),B=[{value:D.length>0?D.join(",")||null:void 0}];else if(na(m))B=m;else{const Z=Object.keys(D);B=y?Z.sort(y):Z}const J=d?String(n).replace(/\./g,"%2E"):String(n),X=i&&na(D)&&D.length===1?J+"[]":J;if(s&&na(D)&&D.length===0)return X+"[]";for(let Z=0;Z<B.length;++Z){const P=B[Z],se=typeof P=="object"&&typeof P.value<"u"?P.value:D[P];if(o&&se===null)continue;const te=p&&d?P.replace(/\./g,"%2E"):P,N=na(D)?typeof r=="function"?r(X,te):X:X+(p?"."+te:"["+te+"]");R.set(e,C);const I=new WeakMap;I.set(Ch,R),Ww(O,eb(se,N,r,i,s,c,o,d,r==="comma"&&w&&na(D)?null:g,m,y,p,v,x,A,w,E,I))}return O}function eO(e=pt){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const n=e.charset||pt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=Wh;if(typeof e.format<"u"){if(!KN.call(em,e.format))throw new TypeError("Unknown format option provided.");r=e.format}const i=em[r];let s=pt.filter;(typeof e.filter=="function"||na(e.filter))&&(s=e.filter);let c;if(e.arrayFormat&&e.arrayFormat in Pw?c=e.arrayFormat:"indices"in e?c=e.indices?"indices":"repeat":c=pt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:pt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:pt.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:pt.allowEmptyArrays,arrayFormat:c,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:pt.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?pt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:pt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:pt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:pt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:pt.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:pt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:pt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:pt.strictNullHandling}}function tO(e,n={}){let r=e;const i=eO(n);let s,c;typeof i.filter=="function"?(c=i.filter,r=c("",r)):na(i.filter)&&(c=i.filter,s=c);const o=[];if(typeof r!="object"||r===null)return"";const d=Pw[i.arrayFormat],g=d==="comma"&&i.commaRoundTrip;s||(s=Object.keys(r)),i.sort&&s.sort(i.sort);const m=new WeakMap;for(let v=0;v<s.length;++v){const x=s[v];i.skipNulls&&r[x]===null||Ww(o,eb(r[x],x,d,g,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,m))}const y=o.join(i.delimiter);let p=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),y.length>0?p+y:""}const nl="4.104.0";let Y_=!1,qs,tb,nb,tm,ab,rb,ib,lb,sb;function nO(e,n={auto:!1}){if(Y_)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(qs)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${qs}'\``);Y_=n.auto,qs=e.kind,tb=e.fetch,nb=e.FormData,tm=e.File,ab=e.ReadableStream,rb=e.getMultipartRequestOptions,ib=e.getDefaultAgent,lb=e.fileFromPath,sb=e.isFsReadStream}class aO{constructor(n){this.body=n}get[Symbol.toStringTag](){return"MultipartBody"}}function rO({manuallyImported:e}={}){const n=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,i,s,c;try{r=fetch,i=Request,s=Response,c=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${n}`)}return{kind:"web",fetch:r,Request:i,Response:s,Headers:c,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${n}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${n}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${n}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${n}`)}},getMultipartRequestOptions:async(o,d)=>({...d,body:new aO(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}const ub=()=>{qs||nO(rO(),{auto:!0})};ub();class be extends Error{}class zt extends be{constructor(n,r,i,s){super(`${zt.makeMessage(n,r,i)}`),this.status=n,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"],this.error=r;const c=r;this.code=c==null?void 0:c.code,this.param=c==null?void 0:c.param,this.type=c==null?void 0:c.type}static makeMessage(n,r,i){const s=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):i;return n&&s?`${n} ${s}`:n?`${n} status code (no body)`:s||"(no status code or body)"}static generate(n,r,i,s){if(!n||!s)return new No({message:i,cause:am(r)});const c=r==null?void 0:r.error;return n===400?new cb(n,c,i,s):n===401?new ob(n,c,i,s):n===403?new fb(n,c,i,s):n===404?new db(n,c,i,s):n===409?new hb(n,c,i,s):n===422?new mb(n,c,i,s):n===429?new gb(n,c,i,s):n>=500?new yb(n,c,i,s):new zt(n,c,i,s)}}class Un extends zt{constructor({message:n}={}){super(void 0,void 0,n||"Request was aborted.",void 0)}}class No extends zt{constructor({message:n,cause:r}){super(void 0,void 0,n||"Connection error.",void 0),r&&(this.cause=r)}}class qm extends No{constructor({message:n}={}){super({message:n??"Request timed out."})}}class cb extends zt{}class ob extends zt{}class fb extends zt{}class db extends zt{}class hb extends zt{}class mb extends zt{}class gb extends zt{}class yb extends zt{}class pb extends be{constructor(){super("Could not parse response content as the length limit was reached")}}class vb extends be{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var $c=function(e,n,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!s:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,r):s?s.value=r:n.set(e,r),r},Fr=function(e,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:n.get(e)},mn;class Oo{constructor(){mn.set(this,void 0),this.buffer=new Uint8Array,$c(this,mn,null,"f")}decode(n){if(n==null)return[];const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(this.buffer.length+r.length);i.set(this.buffer),i.set(r,this.buffer.length),this.buffer=i;const s=[];let c;for(;(c=iO(this.buffer,Fr(this,mn,"f")))!=null;){if(c.carriage&&Fr(this,mn,"f")==null){$c(this,mn,c.index,"f");continue}if(Fr(this,mn,"f")!=null&&(c.index!==Fr(this,mn,"f")+1||c.carriage)){s.push(this.decodeText(this.buffer.slice(0,Fr(this,mn,"f")-1))),this.buffer=this.buffer.slice(Fr(this,mn,"f")),$c(this,mn,null,"f");continue}const o=Fr(this,mn,"f")!==null?c.preceding-1:c.preceding,d=this.decodeText(this.buffer.slice(0,o));s.push(d),this.buffer=this.buffer.slice(c.index),$c(this,mn,null,"f")}return s}decodeText(n){if(n==null)return"";if(typeof n=="string")return n;if(typeof Buffer<"u"){if(n instanceof Buffer)return n.toString();if(n instanceof Uint8Array)return Buffer.from(n).toString();throw new be(`Unexpected: received non-Uint8Array (${n.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(n instanceof Uint8Array||n instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(n);throw new be(`Unexpected: received non-Uint8Array/ArrayBuffer (${n.constructor.name}) in a web platform. Please report this error.`)}throw new be("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}mn=new WeakMap;Oo.NEWLINE_CHARS=new Set([`
`,"\r"]);Oo.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function iO(e,n){for(let s=n??0;s<e.length;s++){if(e[s]===10)return{preceding:s,index:s+1,carriage:!1};if(e[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function lO(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}function _b(e){if(e[Symbol.asyncIterator])return e;const n=e.getReader();return{async next(){try{const r=await n.read();return r!=null&&r.done&&n.releaseLock(),r}catch(r){throw n.releaseLock(),r}},async return(){const r=n.cancel();return n.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class ia{constructor(n,r){this.iterator=n,this.controller=r}static fromSSEResponse(n,r){let i=!1;async function*s(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(const o of sO(n,r))if(!c){if(o.data.startsWith("[DONE]")){c=!0;continue}if(o.event===null||o.event.startsWith("response.")||o.event.startsWith("transcript.")){let d;try{d=JSON.parse(o.data)}catch(g){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),g}if(d&&d.error)throw new zt(void 0,d.error,void 0,Tb(n.headers));yield d}else{let d;try{d=JSON.parse(o.data)}catch(g){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),g}if(o.event=="error")throw new zt(void 0,d.error,d.message,void 0);yield{event:o.event,data:d}}}c=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{c||r.abort()}}return new ia(s,r)}static fromReadableStream(n,r){let i=!1;async function*s(){const o=new Oo,d=_b(n);for await(const g of d)for(const m of o.decode(g))yield m;for(const g of o.flush())yield g}async function*c(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const d of s())o||d&&(yield JSON.parse(d));o=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return;throw d}finally{o||r.abort()}}return new ia(c,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const n=[],r=[],i=this.iterator(),s=c=>({next:()=>{if(c.length===0){const o=i.next();n.push(o),r.push(o)}return c.shift()}});return[new ia(()=>s(n),this.controller),new ia(()=>s(r),this.controller)]}toReadableStream(){const n=this;let r;const i=new TextEncoder;return new ab({async start(){r=n[Symbol.asyncIterator]()},async pull(s){try{const{value:c,done:o}=await r.next();if(o)return s.close();const d=i.encode(JSON.stringify(c)+`
`);s.enqueue(d)}catch(c){s.error(c)}},async cancel(){var s;await((s=r.return)==null?void 0:s.call(r))}})}}async function*sO(e,n){if(!e.body)throw n.abort(),new be("Attempted to iterate over a response with no body");const r=new cO,i=new Oo,s=_b(e.body);for await(const c of uO(s))for(const o of i.decode(c)){const d=r.decode(o);d&&(yield d)}for(const c of i.flush()){const o=r.decode(c);o&&(yield o)}}async function*uO(e){let n=new Uint8Array;for await(const r of e){if(r==null)continue;const i=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r;let s=new Uint8Array(n.length+i.length);s.set(n),s.set(i,n.length),n=s;let c;for(;(c=lO(n))!==-1;)yield n.slice(0,c),n=n.slice(c)}n.length>0&&(yield n)}class cO{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(n){if(n.endsWith("\r")&&(n=n.substring(0,n.length-1)),!n){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(n),n.startsWith(":"))return null;let[r,i,s]=oO(n,":");return s.startsWith(" ")&&(s=s.substring(1)),r==="event"?this.event=s:r==="data"&&this.data.push(s),null}}function oO(e,n){const r=e.indexOf(n);return r!==-1?[e.substring(0,r),n,e.substring(r+n.length)]:[e,"",""]}const xb=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",wb=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Uo(e),Uo=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",fO=e=>wb(e)||xb(e)||sb(e);async function bb(e,n,r){var s;if(e=await e,wb(e))return e;if(xb(e)){const c=await e.blob();n||(n=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=Uo(c)?[await c.arrayBuffer()]:[c];return new tm(o,n,r)}const i=await dO(e);if(n||(n=mO(e)??"unknown_file"),!(r!=null&&r.type)){const c=(s=i[0])==null?void 0:s.type;typeof c=="string"&&(r={...r,type:c})}return new tm(i,n,r)}async function dO(e){var r;let n=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)n.push(e);else if(Uo(e))n.push(await e.arrayBuffer());else if(gO(e))for await(const i of e)n.push(i);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(r=e==null?void 0:e.constructor)==null?void 0:r.name}; props: ${hO(e)}`);return n}function hO(e){return`[${Object.getOwnPropertyNames(e).map(r=>`"${r}"`).join(", ")}]`}function mO(e){var n;return Mh(e.name)||Mh(e.filename)||((n=Mh(e.path))==null?void 0:n.split(/[\\/]/).pop())}const Mh=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},gO=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",q_=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",li=async e=>{const n=await yO(e.body);return rb(n,e)},yO=async e=>{const n=new nb;return await Promise.all(Object.entries(e||{}).map(([r,i])=>nm(n,r,i))),n},nm=async(e,n,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${n}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")e.append(n,String(r));else if(fO(r)){const i=await bb(r);e.append(n,i)}else if(Array.isArray(r))await Promise.all(r.map(i=>nm(e,n+"[]",i)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([i,s])=>nm(e,`${n}[${i}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var dl={},pO=function(e,n,r,i,s){if(typeof n=="function"?e!==n||!0:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n.set(e,r),r},vO=function(e,n,r,i){if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:n.get(e)},Yc;ub();async function Sb(e){var o;const{response:n}=e;if(e.options.stream)return Er("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller):ia.fromSSEResponse(n,e.controller);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const r=n.headers.get("content-type"),i=(o=r==null?void 0:r.split(";")[0])==null?void 0:o.trim();if((i==null?void 0:i.includes("application/json"))||(i==null?void 0:i.endsWith("+json"))){const d=await n.json();return Er("response",n.status,n.url,n.headers,d),Eb(d,n)}const c=await n.text();return Er("response",n.status,n.url,n.headers,c),c}function Eb(e,n){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:n.headers.get("x-request-id"),enumerable:!1})}class zo extends Promise{constructor(n,r=Sb){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r}_thenUnwrap(n){return new zo(this.responsePromise,async r=>Eb(n(await this.parseResponse(r),r),r.response))}asResponse(){return this.responsePromise.then(n=>n.response)}async withResponse(){const[n,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:n,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(n,r){return this.parse().then(n,r)}catch(n){return this.parse().catch(n)}finally(n){return this.parse().finally(n)}}class _O{constructor({baseURL:n,maxRetries:r=2,timeout:i=6e5,httpAgent:s,fetch:c}){this.baseURL=n,this.maxRetries=Rh("maxRetries",r),this.timeout=Rh("timeout",i),this.httpAgent=s,this.fetch=c??tb}authHeaders(n){return{}}defaultHeaders(n){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...EO(),...this.authHeaders(n)}}validateHeaders(n,r){}defaultIdempotencyKey(){return`stainless-node-retry-${MO()}`}get(n,r){return this.methodRequest("get",n,r)}post(n,r){return this.methodRequest("post",n,r)}patch(n,r){return this.methodRequest("patch",n,r)}put(n,r){return this.methodRequest("put",n,r)}delete(n,r){return this.methodRequest("delete",n,r)}methodRequest(n,r,i){return this.request(Promise.resolve(i).then(async s=>{const c=s&&Uo(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:n,path:r,...s,body:c}}))}getAPIList(n,r,i){return this.requestAPIList(r,{method:"get",path:n,...i})}calculateContentLength(n){if(typeof n=="string"){if(typeof Buffer<"u")return Buffer.byteLength(n,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(n).length.toString()}else if(ArrayBuffer.isView(n))return n.byteLength.toString();return null}buildRequest(n,{retryCount:r=0}={}){var w;const i={...n},{method:s,path:c,query:o,headers:d={}}=i,g=ArrayBuffer.isView(i.body)||i.__binaryRequest&&typeof i.body=="string"?i.body:q_(i.body)?i.body.body:i.body?JSON.stringify(i.body,null,2):null,m=this.calculateContentLength(g),y=this.buildURL(c,o);"timeout"in i&&Rh("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const p=i.httpAgent??this.httpAgent??ib(y),v=i.timeout+1e3;typeof((w=p==null?void 0:p.options)==null?void 0:w.timeout)=="number"&&v>(p.options.timeout??0)&&(p.options.timeout=v),this.idempotencyHeader&&s!=="get"&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=n.idempotencyKey);const x=this.buildHeaders({options:i,headers:d,contentLength:m,retryCount:r});return{req:{method:s,...g&&{body:g},headers:x,...p&&{agent:p},signal:i.signal??null},url:y,timeout:i.timeout}}buildHeaders({options:n,headers:r,contentLength:i,retryCount:s}){const c={};i&&(c["content-length"]=i);const o=this.defaultHeaders(n);return Q_(c,o),Q_(c,r),q_(n.body)&&qs!=="node"&&delete c["content-type"],Xc(o,"x-stainless-retry-count")===void 0&&Xc(r,"x-stainless-retry-count")===void 0&&(c["x-stainless-retry-count"]=String(s)),Xc(o,"x-stainless-timeout")===void 0&&Xc(r,"x-stainless-timeout")===void 0&&n.timeout&&(c["x-stainless-timeout"]=String(Math.trunc(n.timeout/1e3))),this.validateHeaders(c,r),c}async prepareOptions(n){}async prepareRequest(n,{url:r,options:i}){}parseHeaders(n){return n?Symbol.iterator in n?Object.fromEntries(Array.from(n).map(r=>[...r])):{...n}:{}}makeStatusError(n,r,i,s){return zt.generate(n,r,i,s)}request(n,r=null){return new zo(this.makeRequest(n,r))}async makeRequest(n,r){var p,v;const i=await n,s=i.maxRetries??this.maxRetries;r==null&&(r=s),await this.prepareOptions(i);const{req:c,url:o,timeout:d}=this.buildRequest(i,{retryCount:s-r});if(await this.prepareRequest(c,{url:o,options:i}),Er("request",o,i,c.headers),(p=i.signal)!=null&&p.aborted)throw new Un;const g=new AbortController,m=await this.fetchWithTimeout(o,c,d,g).catch(am);if(m instanceof Error){if((v=i.signal)!=null&&v.aborted)throw new Un;if(r)return this.retryRequest(i,r);throw m.name==="AbortError"?new qm:new No({cause:m})}const y=Tb(m.headers);if(!m.ok){if(r&&this.shouldRetry(m)){const D=`retrying, ${r} attempts remaining`;return Er(`response (error; ${D})`,m.status,o,y),this.retryRequest(i,r,y)}const x=await m.text().catch(D=>am(D).message),A=AO(x),w=A?void 0:x;throw Er(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,m.status,o,y,w),this.makeStatusError(m.status,A,w,y)}return{response:m,options:i,controller:g}}requestAPIList(n,r){const i=this.makeRequest(r,null);return new xO(this,i,n)}buildURL(n,r){const i=CO(n)?new URL(n):new URL(this.baseURL+(this.baseURL.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),s=this.defaultQuery();return Cb(s)||(r={...s,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(i.search=this.stringifyQuery(r)),i.toString()}stringifyQuery(n){return Object.entries(n).filter(([r,i])=>typeof i<"u").map(([r,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(r)}=`;throw new be(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(n,r,i,s){const{signal:c,...o}=r||{};c&&c.addEventListener("abort",()=>s.abort());const d=setTimeout(()=>s.abort(),i),g={signal:s.signal,...o};return g.method&&(g.method=g.method.toUpperCase()),this.fetch.call(void 0,n,g).finally(()=>{clearTimeout(d)})}shouldRetry(n){const r=n.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:n.status===408||n.status===409||n.status===429||n.status>=500}async retryRequest(n,r,i){let s;const c=i==null?void 0:i["retry-after-ms"];if(c){const d=parseFloat(c);Number.isNaN(d)||(s=d)}const o=i==null?void 0:i["retry-after"];if(o&&!s){const d=parseFloat(o);Number.isNaN(d)?s=Date.parse(o)-Date.now():s=d*1e3}if(!(s&&0<=s&&s<60*1e3)){const d=n.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(r,d)}return await ru(s),this.makeRequest(n,r-1)}calculateDefaultRetryTimeoutMillis(n,r){const c=r-n,o=Math.min(.5*Math.pow(2,c),8),d=1-Math.random()*.25;return o*d*1e3}getUserAgent(){return`${this.constructor.name}/JS ${nl}`}}class Ab{constructor(n,r,i,s){Yc.set(this,void 0),pO(this,Yc,n),this.options=s,this.response=r,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const n=this.nextPageInfo();if(!n)throw new be("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in n&&typeof r.query=="object")r.query={...r.query,...n.params};else if("url"in n){const i=[...Object.entries(r.query||{}),...n.url.searchParams.entries()];for(const[s,c]of i)n.url.searchParams.set(s,c);r.query=void 0,r.path=n.url.toString()}return await vO(this,Yc,"f").requestAPIList(this.constructor,r)}async*iterPages(){let n=this;for(yield n;n.hasNextPage();)n=await n.getNextPage(),yield n}async*[(Yc=new WeakMap,Symbol.asyncIterator)](){for await(const n of this.iterPages())for(const r of n.getPaginatedItems())yield r}}class xO extends zo{constructor(n,r,i){super(r,async s=>new i(n,s.response,await Sb(s),s.options))}async*[Symbol.asyncIterator](){const n=await this;for await(const r of n)yield r}}const Tb=e=>new Proxy(Object.fromEntries(e.entries()),{get(n,r){const i=r.toString();return n[i.toLowerCase()]||n[i]}}),wO={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},at=e=>typeof e=="object"&&e!==null&&!Cb(e)&&Object.keys(e).every(n=>Mb(wO,n)),bO=()=>{var n;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nl,"X-Stainless-OS":V_(Deno.build.os),"X-Stainless-Arch":X_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nl,"X-Stainless-OS":V_(process.platform),"X-Stainless-Arch":X_(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=SO();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function SO(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:n,pattern:r}of e){const i=r.exec(navigator.userAgent);if(i){const s=i[1]||0,c=i[2]||0,o=i[3]||0;return{browser:n,version:`${s}.${c}.${o}`}}}return null}const X_=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",V_=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let G_;const EO=()=>G_??(G_=bO()),AO=e=>{try{return JSON.parse(e)}catch{return}},TO=/^[a-z][a-z0-9+.-]*:/i,CO=e=>TO.test(e),ru=e=>new Promise(n=>setTimeout(n,e)),Rh=(e,n)=>{if(typeof n!="number"||!Number.isInteger(n))throw new be(`${e} must be an integer`);if(n<0)throw new be(`${e} must be a positive integer`);return n},am=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},qc=e=>{var n,r,i,s;if(typeof process<"u")return((n=dl==null?void 0:dl[e])==null?void 0:n.trim())??void 0;if(typeof Deno<"u")return(s=(i=(r=Deno.env)==null?void 0:r.get)==null?void 0:i.call(r,e))==null?void 0:s.trim()};function Cb(e){if(!e)return!0;for(const n in e)return!1;return!0}function Mb(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function Q_(e,n){for(const r in n){if(!Mb(n,r))continue;const i=r.toLowerCase();if(!i)continue;const s=n[r];s===null?delete e[i]:s!==void 0&&(e[i]=s)}}const Z_=new Set(["authorization","api-key"]);function Er(e,...n){if(typeof process<"u"&&(dl==null?void 0:dl.DEBUG)==="true"){const r=n.map(i=>{if(!i)return i;if(i.headers){const c={...i,headers:{...i.headers}};for(const o in i.headers)Z_.has(o.toLowerCase())&&(c.headers[o]="REDACTED");return c}let s=null;for(const c in i)Z_.has(c.toLowerCase())&&(s??(s={...i}),s[c]="REDACTED");return s??i});console.log(`OpenAI:DEBUG:${e}`,...r)}}const MO=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)}),RO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",DO=e=>typeof(e==null?void 0:e.get)=="function",Xc=(e,n)=>{var i;const r=n.toLowerCase();if(DO(e)){const s=((i=n[0])==null?void 0:i.toUpperCase())+n.substring(1).replace(/([^\w])(\w)/g,(c,o,d)=>o+d.toUpperCase());for(const c of[n,r,n.toUpperCase(),s]){const o=e.get(c);if(o)return o}}for(const[s,c]of Object.entries(e))if(s.toLowerCase()===r)return Array.isArray(c)?(c.length<=1||console.warn(`Received ${c.length} entries for the ${n} header, using the first entry.`),c[0]):c},NO=e=>{if(typeof Buffer<"u"){const n=Buffer.from(e,"base64");return Array.from(new Float32Array(n.buffer,n.byteOffset,n.length/Float32Array.BYTES_PER_ELEMENT))}else{const n=atob(e),r=n.length,i=new Uint8Array(r);for(let s=0;s<r;s++)i[s]=n.charCodeAt(s);return Array.from(new Float32Array(i.buffer))}};function Dh(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class jo extends Ab{constructor(n,r,i,s){super(n,r,i,s),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class xt extends Ab{constructor(n,r,i,s){super(n,r,i,s),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const n=this.nextPageInfo();if(!n)return null;if("params"in n)return n.params;const r=Object.fromEntries(n.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var i;const n=this.getPaginatedItems();if(!n.length)return null;const r=(i=n[n.length-1])==null?void 0:i.id;return r?{params:{after:r}}:null}}class Ee{constructor(n){this._client=n}}let Rb=class extends Ee{list(n,r={},i){return at(r)?this.list(n,{},r):this._client.getAPIList(`/chat/completions/${n}/messages`,OO,{query:r,...i})}},Ho=class extends Ee{constructor(){super(...arguments),this.messages=new Rb(this._client)}create(n,r){return this._client.post("/chat/completions",{body:n,...r,stream:n.stream??!1})}retrieve(n,r){return this._client.get(`/chat/completions/${n}`,r)}update(n,r,i){return this._client.post(`/chat/completions/${n}`,{body:r,...i})}list(n={},r){return at(n)?this.list({},n):this._client.getAPIList("/chat/completions",Bo,{query:n,...r})}del(n,r){return this._client.delete(`/chat/completions/${n}`,r)}};class Bo extends xt{}class OO extends xt{}Ho.ChatCompletionsPage=Bo;Ho.Messages=Rb;let Lo=class extends Ee{constructor(){super(...arguments),this.completions=new Ho(this._client)}};Lo.Completions=Ho;Lo.ChatCompletionsPage=Bo;class Db extends Ee{create(n,r){return this._client.post("/audio/speech",{body:n,...r,headers:{Accept:"application/octet-stream",...r==null?void 0:r.headers},__binaryResponse:!0})}}class Nb extends Ee{create(n,r){return this._client.post("/audio/transcriptions",li({body:n,...r,stream:n.stream??!1,__metadata:{model:n.model}}))}}class Ob extends Ee{create(n,r){return this._client.post("/audio/translations",li({body:n,...r,__metadata:{model:n.model}}))}}class iu extends Ee{constructor(){super(...arguments),this.transcriptions=new Nb(this._client),this.translations=new Ob(this._client),this.speech=new Db(this._client)}}iu.Transcriptions=Nb;iu.Translations=Ob;iu.Speech=Db;class Xm extends Ee{create(n,r){return this._client.post("/batches",{body:n,...r})}retrieve(n,r){return this._client.get(`/batches/${n}`,r)}list(n={},r){return at(n)?this.list({},n):this._client.getAPIList("/batches",Vm,{query:n,...r})}cancel(n,r){return this._client.post(`/batches/${n}/cancel`,r)}}class Vm extends xt{}Xm.BatchesPage=Vm;var kn=function(e,n,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!s:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,r):s?s.value=r:n.set(e,r),r},tt=function(e,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:n.get(e)},rm,eo,to,Hs,Bs,no,Ls,Na,ks,xo,wo,al,Ub;class Gm{constructor(){rm.add(this),this.controller=new AbortController,eo.set(this,void 0),to.set(this,()=>{}),Hs.set(this,()=>{}),Bs.set(this,void 0),no.set(this,()=>{}),Ls.set(this,()=>{}),Na.set(this,{}),ks.set(this,!1),xo.set(this,!1),wo.set(this,!1),al.set(this,!1),kn(this,eo,new Promise((n,r)=>{kn(this,to,n,"f"),kn(this,Hs,r,"f")}),"f"),kn(this,Bs,new Promise((n,r)=>{kn(this,no,n,"f"),kn(this,Ls,r,"f")}),"f"),tt(this,eo,"f").catch(()=>{}),tt(this,Bs,"f").catch(()=>{})}_run(n){setTimeout(()=>{n().then(()=>{this._emitFinal(),this._emit("end")},tt(this,rm,"m",Ub).bind(this))},0)}_connected(){this.ended||(tt(this,to,"f").call(this),this._emit("connect"))}get ended(){return tt(this,ks,"f")}get errored(){return tt(this,xo,"f")}get aborted(){return tt(this,wo,"f")}abort(){this.controller.abort()}on(n,r){return(tt(this,Na,"f")[n]||(tt(this,Na,"f")[n]=[])).push({listener:r}),this}off(n,r){const i=tt(this,Na,"f")[n];if(!i)return this;const s=i.findIndex(c=>c.listener===r);return s>=0&&i.splice(s,1),this}once(n,r){return(tt(this,Na,"f")[n]||(tt(this,Na,"f")[n]=[])).push({listener:r,once:!0}),this}emitted(n){return new Promise((r,i)=>{kn(this,al,!0,"f"),n!=="error"&&this.once("error",i),this.once(n,r)})}async done(){kn(this,al,!0,"f"),await tt(this,Bs,"f")}_emit(n,...r){if(tt(this,ks,"f"))return;n==="end"&&(kn(this,ks,!0,"f"),tt(this,no,"f").call(this));const i=tt(this,Na,"f")[n];if(i&&(tt(this,Na,"f")[n]=i.filter(s=>!s.once),i.forEach(({listener:s})=>s(...r))),n==="abort"){const s=r[0];!tt(this,al,"f")&&!(i!=null&&i.length)&&Promise.reject(s),tt(this,Hs,"f").call(this,s),tt(this,Ls,"f").call(this,s),this._emit("end");return}if(n==="error"){const s=r[0];!tt(this,al,"f")&&!(i!=null&&i.length)&&Promise.reject(s),tt(this,Hs,"f").call(this,s),tt(this,Ls,"f").call(this,s),this._emit("end")}}_emitFinal(){}}eo=new WeakMap,to=new WeakMap,Hs=new WeakMap,Bs=new WeakMap,no=new WeakMap,Ls=new WeakMap,Na=new WeakMap,ks=new WeakMap,xo=new WeakMap,wo=new WeakMap,al=new WeakMap,rm=new WeakSet,Ub=function(n){if(kn(this,xo,!0,"f"),n instanceof Error&&n.name==="AbortError"&&(n=new Un),n instanceof Un)return kn(this,wo,!0,"f"),this._emit("abort",n);if(n instanceof be)return this._emit("error",n);if(n instanceof Error){const r=new be(n.message);return r.cause=n,this._emit("error",r)}return this._emit("error",new be(String(n)))};var ye=function(e,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:n.get(e)},hn=function(e,n,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!s:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,r):s?s.value=r:n.set(e,r),r},Ut,im,aa,ao,$n,ei,sl,Jr,bo,gn,ro,io,Xs,$s,Ys,I_,F_,K_,J_,P_,W_,ex;class Xn extends Gm{constructor(){super(...arguments),Ut.add(this),im.set(this,[]),aa.set(this,{}),ao.set(this,{}),$n.set(this,void 0),ei.set(this,void 0),sl.set(this,void 0),Jr.set(this,void 0),bo.set(this,void 0),gn.set(this,void 0),ro.set(this,void 0),io.set(this,void 0),Xs.set(this,void 0)}[(im=new WeakMap,aa=new WeakMap,ao=new WeakMap,$n=new WeakMap,ei=new WeakMap,sl=new WeakMap,Jr=new WeakMap,bo=new WeakMap,gn=new WeakMap,ro=new WeakMap,io=new WeakMap,Xs=new WeakMap,Ut=new WeakSet,Symbol.asyncIterator)](){const n=[],r=[];let i=!1;return this.on("event",s=>{const c=r.shift();c?c.resolve(s):n.push(s)}),this.on("end",()=>{i=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),this.on("error",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),{next:async()=>n.length?{value:n.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((c,o)=>r.push({resolve:c,reject:o})).then(c=>c?{value:c,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(n){const r=new Xn;return r._run(()=>r._fromReadableStream(n)),r}async _fromReadableStream(n,r){var c;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=ia.fromReadableStream(n,this.controller);for await(const o of s)ye(this,Ut,"m",$s).call(this,o);if((c=s.controller.signal)!=null&&c.aborted)throw new Un;return this._addRun(ye(this,Ut,"m",Ys).call(this))}toReadableStream(){return new ia(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(n,r,i,s,c){const o=new Xn;return o._run(()=>o._runToolAssistantStream(n,r,i,s,{...c,headers:{...c==null?void 0:c.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(n,r,i,s,c){var m;const o=c==null?void 0:c.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const d={...s,stream:!0},g=await n.submitToolOutputs(r,i,d,{...c,signal:this.controller.signal});this._connected();for await(const y of g)ye(this,Ut,"m",$s).call(this,y);if((m=g.controller.signal)!=null&&m.aborted)throw new Un;return this._addRun(ye(this,Ut,"m",Ys).call(this))}static createThreadAssistantStream(n,r,i){const s=new Xn;return s._run(()=>s._threadAssistantStream(n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(n,r,i,s){const c=new Xn;return c._run(()=>c._runAssistantStream(n,r,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),c}currentEvent(){return ye(this,ro,"f")}currentRun(){return ye(this,io,"f")}currentMessageSnapshot(){return ye(this,$n,"f")}currentRunStepSnapshot(){return ye(this,Xs,"f")}async finalRunSteps(){return await this.done(),Object.values(ye(this,aa,"f"))}async finalMessages(){return await this.done(),Object.values(ye(this,ao,"f"))}async finalRun(){if(await this.done(),!ye(this,ei,"f"))throw Error("Final run was not received.");return ye(this,ei,"f")}async _createThreadAssistantStream(n,r,i){var d;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const c={...r,stream:!0},o=await n.createAndRun(c,{...i,signal:this.controller.signal});this._connected();for await(const g of o)ye(this,Ut,"m",$s).call(this,g);if((d=o.controller.signal)!=null&&d.aborted)throw new Un;return this._addRun(ye(this,Ut,"m",Ys).call(this))}async _createAssistantStream(n,r,i,s){var g;const c=s==null?void 0:s.signal;c&&(c.aborted&&this.controller.abort(),c.addEventListener("abort",()=>this.controller.abort()));const o={...i,stream:!0},d=await n.create(r,o,{...s,signal:this.controller.signal});this._connected();for await(const m of d)ye(this,Ut,"m",$s).call(this,m);if((g=d.controller.signal)!=null&&g.aborted)throw new Un;return this._addRun(ye(this,Ut,"m",Ys).call(this))}static accumulateDelta(n,r){for(const[i,s]of Object.entries(r)){if(!n.hasOwnProperty(i)){n[i]=s;continue}let c=n[i];if(c==null){n[i]=s;continue}if(i==="index"||i==="type"){n[i]=s;continue}if(typeof c=="string"&&typeof s=="string")c+=s;else if(typeof c=="number"&&typeof s=="number")c+=s;else if(Dh(c)&&Dh(s))c=this.accumulateDelta(c,s);else if(Array.isArray(c)&&Array.isArray(s)){if(c.every(o=>typeof o=="string"||typeof o=="number")){c.push(...s);continue}for(const o of s){if(!Dh(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const d=o.index;if(d==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const g=c[d];g==null?c.push(o):c[d]=this.accumulateDelta(g,o)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${s}, accValue: ${c}`);n[i]=c}return n}_addRun(n){return n}async _threadAssistantStream(n,r,i){return await this._createThreadAssistantStream(r,n,i)}async _runAssistantStream(n,r,i,s){return await this._createAssistantStream(r,n,i,s)}async _runToolAssistantStream(n,r,i,s,c){return await this._createToolAssistantStream(i,n,r,s,c)}}$s=function(n){if(!this.ended)switch(hn(this,ro,n,"f"),ye(this,Ut,"m",K_).call(this,n),n.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ye(this,Ut,"m",ex).call(this,n);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ye(this,Ut,"m",F_).call(this,n);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ye(this,Ut,"m",I_).call(this,n);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ys=function(){if(this.ended)throw new be("stream has ended, this shouldn't happen");if(!ye(this,ei,"f"))throw Error("Final run has not been received");return ye(this,ei,"f")},I_=function(n){const[r,i]=ye(this,Ut,"m",P_).call(this,n,ye(this,$n,"f"));hn(this,$n,r,"f"),ye(this,ao,"f")[r.id]=r;for(const s of i){const c=r.content[s.index];(c==null?void 0:c.type)=="text"&&this._emit("textCreated",c.text)}switch(n.event){case"thread.message.created":this._emit("messageCreated",n.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",n.data.delta,r),n.data.delta.content)for(const s of n.data.delta.content){if(s.type=="text"&&s.text){let c=s.text,o=r.content[s.index];if(o&&o.type=="text")this._emit("textDelta",c,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=ye(this,sl,"f")){if(ye(this,Jr,"f"))switch(ye(this,Jr,"f").type){case"text":this._emit("textDone",ye(this,Jr,"f").text,ye(this,$n,"f"));break;case"image_file":this._emit("imageFileDone",ye(this,Jr,"f").image_file,ye(this,$n,"f"));break}hn(this,sl,s.index,"f")}hn(this,Jr,r.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(ye(this,sl,"f")!==void 0){const s=n.data.content[ye(this,sl,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,ye(this,$n,"f"));break;case"text":this._emit("textDone",s.text,ye(this,$n,"f"));break}}ye(this,$n,"f")&&this._emit("messageDone",n.data),hn(this,$n,void 0,"f")}},F_=function(n){const r=ye(this,Ut,"m",J_).call(this,n);switch(hn(this,Xs,r,"f"),n.event){case"thread.run.step.created":this._emit("runStepCreated",n.data);break;case"thread.run.step.delta":const i=n.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const c of i.step_details.tool_calls)c.index==ye(this,bo,"f")?this._emit("toolCallDelta",c,r.step_details.tool_calls[c.index]):(ye(this,gn,"f")&&this._emit("toolCallDone",ye(this,gn,"f")),hn(this,bo,c.index,"f"),hn(this,gn,r.step_details.tool_calls[c.index],"f"),ye(this,gn,"f")&&this._emit("toolCallCreated",ye(this,gn,"f")));this._emit("runStepDelta",n.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":hn(this,Xs,void 0,"f"),n.data.step_details.type=="tool_calls"&&ye(this,gn,"f")&&(this._emit("toolCallDone",ye(this,gn,"f")),hn(this,gn,void 0,"f")),this._emit("runStepDone",n.data,r);break}},K_=function(n){ye(this,im,"f").push(n),this._emit("event",n)},J_=function(n){switch(n.event){case"thread.run.step.created":return ye(this,aa,"f")[n.data.id]=n.data,n.data;case"thread.run.step.delta":let r=ye(this,aa,"f")[n.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let i=n.data;if(i.delta){const s=Xn.accumulateDelta(r,i.delta);ye(this,aa,"f")[n.data.id]=s}return ye(this,aa,"f")[n.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ye(this,aa,"f")[n.data.id]=n.data;break}if(ye(this,aa,"f")[n.data.id])return ye(this,aa,"f")[n.data.id];throw new Error("No snapshot available")},P_=function(n,r){let i=[];switch(n.event){case"thread.message.created":return[n.data,i];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=n.data;if(s.delta.content)for(const c of s.delta.content)if(c.index in r.content){let o=r.content[c.index];r.content[c.index]=ye(this,Ut,"m",W_).call(this,c,o)}else r.content[c.index]=c,i.push(c);return[r,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},W_=function(n,r){return Xn.accumulateDelta(r,n)},ex=function(n){switch(hn(this,io,n.data,"f"),n.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":hn(this,ei,n.data,"f"),ye(this,gn,"f")&&(this._emit("toolCallDone",ye(this,gn,"f")),hn(this,gn,void 0,"f"));break}};class Qm extends Ee{create(n,r){return this._client.post("/assistants",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(n,r){return this._client.get(`/assistants/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(n,r,i){return this._client.post(`/assistants/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(n={},r){return at(n)?this.list({},n):this._client.getAPIList("/assistants",Zm,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(n,r){return this._client.delete(`/assistants/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Zm extends xt{}Qm.AssistantsPage=Zm;function tx(e){return typeof e.parse=="function"}const hl=e=>(e==null?void 0:e.role)==="assistant",zb=e=>(e==null?void 0:e.role)==="function",jb=e=>(e==null?void 0:e.role)==="tool";function Im(e){return(e==null?void 0:e.$brand)==="auto-parseable-response-format"}function lu(e){return(e==null?void 0:e.$brand)==="auto-parseable-tool"}function UO(e,n){return!n||!Hb(n)?{...e,choices:e.choices.map(r=>({...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:Fm(e,n)}function Fm(e,n){const r=e.choices.map(i=>{var s;if(i.finish_reason==="length")throw new pb;if(i.finish_reason==="content_filter")throw new vb;return{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:((s=i.message.tool_calls)==null?void 0:s.map(c=>jO(n,c)))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?zO(n,i.message.content):null}}});return{...e,choices:r}}function zO(e,n){var r,i;return((r=e.response_format)==null?void 0:r.type)!=="json_schema"?null:((i=e.response_format)==null?void 0:i.type)==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(n):JSON.parse(n):null}function jO(e,n){var i;const r=(i=e.tools)==null?void 0:i.find(s=>{var c;return((c=s.function)==null?void 0:c.name)===n.function.name});return{...n,function:{...n.function,parsed_arguments:lu(r)?r.$parseRaw(n.function.arguments):r!=null&&r.function.strict?JSON.parse(n.function.arguments):null}}}function HO(e,n){var i;if(!e)return!1;const r=(i=e.tools)==null?void 0:i.find(s=>{var c;return((c=s.function)==null?void 0:c.name)===n.function.name});return lu(r)||(r==null?void 0:r.function.strict)||!1}function Hb(e){var n;return Im(e.response_format)?!0:((n=e.tools)==null?void 0:n.some(r=>lu(r)||r.type==="function"&&r.function.strict===!0))??!1}function BO(e){for(const n of e??[]){if(n.type!=="function")throw new be(`Currently only \`function\` tool types support auto-parsing; Received \`${n.type}\``);if(n.function.strict!==!0)throw new be(`The \`${n.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Jt=function(e,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:n.get(e)},$t,lm,So,sm,um,cm,Bb,om;const nx=10;class Lb extends Gm{constructor(){super(...arguments),$t.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(n){var i;this._chatCompletions.push(n),this._emit("chatCompletion",n);const r=(i=n.choices[0])==null?void 0:i.message;return r&&this._addMessage(r),n}_addMessage(n,r=!0){if("content"in n||(n.content=null),this.messages.push(n),r){if(this._emit("message",n),(zb(n)||jb(n))&&n.content)this._emit("functionCallResult",n.content);else if(hl(n)&&n.function_call)this._emit("functionCall",n.function_call);else if(hl(n)&&n.tool_calls)for(const i of n.tool_calls)i.type==="function"&&this._emit("functionCall",i.function)}}async finalChatCompletion(){await this.done();const n=this._chatCompletions[this._chatCompletions.length-1];if(!n)throw new be("stream ended without producing a ChatCompletion");return n}async finalContent(){return await this.done(),Jt(this,$t,"m",lm).call(this)}async finalMessage(){return await this.done(),Jt(this,$t,"m",So).call(this)}async finalFunctionCall(){return await this.done(),Jt(this,$t,"m",sm).call(this)}async finalFunctionCallResult(){return await this.done(),Jt(this,$t,"m",um).call(this)}async totalUsage(){return await this.done(),Jt(this,$t,"m",cm).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const n=this._chatCompletions[this._chatCompletions.length-1];n&&this._emit("finalChatCompletion",n);const r=Jt(this,$t,"m",So).call(this);r&&this._emit("finalMessage",r);const i=Jt(this,$t,"m",lm).call(this);i&&this._emit("finalContent",i);const s=Jt(this,$t,"m",sm).call(this);s&&this._emit("finalFunctionCall",s);const c=Jt(this,$t,"m",um).call(this);c!=null&&this._emit("finalFunctionCallResult",c),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Jt(this,$t,"m",cm).call(this))}async _createChatCompletion(n,r,i){const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Jt(this,$t,"m",Bb).call(this,r);const c=await n.chat.completions.create({...r,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Fm(c,r))}async _runChatCompletion(n,r,i){for(const s of r.messages)this._addMessage(s,!1);return await this._createChatCompletion(n,r,i)}async _runFunctions(n,r,i){var v;const s="function",{function_call:c="auto",stream:o,...d}=r,g=typeof c!="string"&&(c==null?void 0:c.name),{maxChatCompletions:m=nx}=i||{},y={};for(const x of r.functions)y[x.name||x.function.name]=x;const p=r.functions.map(x=>({name:x.name||x.function.name,parameters:x.parameters,description:x.description}));for(const x of r.messages)this._addMessage(x,!1);for(let x=0;x<m;++x){const w=(v=(await this._createChatCompletion(n,{...d,function_call:c,functions:p,messages:[...this.messages]},i)).choices[0])==null?void 0:v.message;if(!w)throw new be("missing message in ChatCompletion response");if(!w.function_call)return;const{name:E,arguments:R}=w.function_call,D=y[E];if(D){if(g&&g!==E){const O=`Invalid function_call: ${JSON.stringify(E)}. ${JSON.stringify(g)} requested. Please try again`;this._addMessage({role:s,name:E,content:O});continue}}else{const O=`Invalid function_call: ${JSON.stringify(E)}. Available options are: ${p.map(B=>JSON.stringify(B.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:E,content:O});continue}let z;try{z=tx(D)?await D.parse(R):R}catch(O){this._addMessage({role:s,name:E,content:O instanceof Error?O.message:String(O)});continue}const C=await D.function(z,this),U=Jt(this,$t,"m",om).call(this,C);if(this._addMessage({role:s,name:E,content:U}),g)return}}async _runTools(n,r,i){var x,A,w;const s="tool",{tool_choice:c="auto",stream:o,...d}=r,g=typeof c!="string"&&((x=c==null?void 0:c.function)==null?void 0:x.name),{maxChatCompletions:m=nx}=i||{},y=r.tools.map(E=>{if(lu(E)){if(!E.$callback)throw new be("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:E.$callback,name:E.function.name,description:E.function.description||"",parameters:E.function.parameters,parse:E.$parseRaw,strict:!0}}}return E}),p={};for(const E of y)E.type==="function"&&(p[E.function.name||E.function.function.name]=E.function);const v="tools"in r?y.map(E=>E.type==="function"?{type:"function",function:{name:E.function.name||E.function.function.name,parameters:E.function.parameters,description:E.function.description,strict:E.function.strict}}:E):void 0;for(const E of r.messages)this._addMessage(E,!1);for(let E=0;E<m;++E){const D=(A=(await this._createChatCompletion(n,{...d,tool_choice:c,tools:v,messages:[...this.messages]},i)).choices[0])==null?void 0:A.message;if(!D)throw new be("missing message in ChatCompletion response");if(!((w=D.tool_calls)!=null&&w.length))return;for(const z of D.tool_calls){if(z.type!=="function")continue;const C=z.id,{name:U,arguments:O}=z.function,B=p[U];if(B){if(g&&g!==U){const P=`Invalid tool_call: ${JSON.stringify(U)}. ${JSON.stringify(g)} requested. Please try again`;this._addMessage({role:s,tool_call_id:C,content:P});continue}}else{const P=`Invalid tool_call: ${JSON.stringify(U)}. Available options are: ${Object.keys(p).map(se=>JSON.stringify(se)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:C,content:P});continue}let J;try{J=tx(B)?await B.parse(O):O}catch(P){const se=P instanceof Error?P.message:String(P);this._addMessage({role:s,tool_call_id:C,content:se});continue}const X=await B.function(J,this),Z=Jt(this,$t,"m",om).call(this,X);if(this._addMessage({role:s,tool_call_id:C,content:Z}),g)return}}}}$t=new WeakSet,lm=function(){return Jt(this,$t,"m",So).call(this).content??null},So=function(){let n=this.messages.length;for(;n-- >0;){const r=this.messages[n];if(hl(r)){const{function_call:i,...s}=r,c={...s,content:r.content??null,refusal:r.refusal??null};return i&&(c.function_call=i),c}}throw new be("stream ended without producing a ChatCompletionMessage with role=assistant")},sm=function(){var n,r;for(let i=this.messages.length-1;i>=0;i--){const s=this.messages[i];if(hl(s)&&(s!=null&&s.function_call))return s.function_call;if(hl(s)&&((n=s==null?void 0:s.tool_calls)!=null&&n.length))return(r=s.tool_calls.at(-1))==null?void 0:r.function}},um=function(){for(let n=this.messages.length-1;n>=0;n--){const r=this.messages[n];if(zb(r)&&r.content!=null||jb(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(i=>{var s;return i.role==="assistant"&&((s=i.tool_calls)==null?void 0:s.some(c=>c.type==="function"&&c.id===r.tool_call_id))}))return r.content}},cm=function(){const n={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(n.completion_tokens+=r.completion_tokens,n.prompt_tokens+=r.prompt_tokens,n.total_tokens+=r.total_tokens);return n},Bb=function(n){if(n.n!=null&&n.n>1)throw new be("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},om=function(n){return typeof n=="string"?n:n===void 0?"undefined":JSON.stringify(n)};class Js extends Lb{static runFunctions(n,r,i){const s=new Js,c={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(n,r,c)),s}static runTools(n,r,i){const s=new Js,c={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(n,r,c)),s}_addMessage(n,r=!0){super._addMessage(n,r),hl(n)&&n.content&&this._emit("content",n.content)}}const kb=1,$b=2,Yb=4,qb=8,Xb=16,Vb=32,Gb=64,Qb=128,Zb=256,Ib=Qb|Zb,Fb=Xb|Vb|Ib|Gb,Kb=kb|$b|Fb,Jb=Yb|qb,LO=Kb|Jb,Tt={STR:kb,NUM:$b,ARR:Yb,OBJ:qb,NULL:Xb,BOOL:Vb,NAN:Gb,INFINITY:Qb,MINUS_INFINITY:Zb,INF:Ib,SPECIAL:Fb,ATOM:Kb,COLLECTION:Jb,ALL:LO};class kO extends Error{}class $O extends Error{}function YO(e,n=Tt.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return qO(e.trim(),n)}const qO=(e,n)=>{const r=e.length;let i=0;const s=v=>{throw new kO(`${v} at position ${i}`)},c=v=>{throw new $O(`${v} at position ${i}`)},o=()=>(p(),i>=r&&s("Unexpected end of input"),e[i]==='"'?d():e[i]==="{"?g():e[i]==="["?m():e.substring(i,i+4)==="null"||Tt.NULL&n&&r-i<4&&"null".startsWith(e.substring(i))?(i+=4,null):e.substring(i,i+4)==="true"||Tt.BOOL&n&&r-i<4&&"true".startsWith(e.substring(i))?(i+=4,!0):e.substring(i,i+5)==="false"||Tt.BOOL&n&&r-i<5&&"false".startsWith(e.substring(i))?(i+=5,!1):e.substring(i,i+8)==="Infinity"||Tt.INFINITY&n&&r-i<8&&"Infinity".startsWith(e.substring(i))?(i+=8,1/0):e.substring(i,i+9)==="-Infinity"||Tt.MINUS_INFINITY&n&&1<r-i&&r-i<9&&"-Infinity".startsWith(e.substring(i))?(i+=9,-1/0):e.substring(i,i+3)==="NaN"||Tt.NAN&n&&r-i<3&&"NaN".startsWith(e.substring(i))?(i+=3,NaN):y()),d=()=>{const v=i;let x=!1;for(i++;i<r&&(e[i]!=='"'||x&&e[i-1]==="\\");)x=e[i]==="\\"?!x:!1,i++;if(e.charAt(i)=='"')try{return JSON.parse(e.substring(v,++i-Number(x)))}catch(A){c(String(A))}else if(Tt.STR&n)try{return JSON.parse(e.substring(v,i-Number(x))+'"')}catch{return JSON.parse(e.substring(v,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},g=()=>{i++,p();const v={};try{for(;e[i]!=="}";){if(p(),i>=r&&Tt.OBJ&n)return v;const x=d();p(),i++;try{const A=o();Object.defineProperty(v,x,{value:A,writable:!0,enumerable:!0,configurable:!0})}catch(A){if(Tt.OBJ&n)return v;throw A}p(),e[i]===","&&i++}}catch{if(Tt.OBJ&n)return v;s("Expected '}' at end of object")}return i++,v},m=()=>{i++;const v=[];try{for(;e[i]!=="]";)v.push(o()),p(),e[i]===","&&i++}catch{if(Tt.ARR&n)return v;s("Expected ']' at end of array")}return i++,v},y=()=>{if(i===0){e==="-"&&Tt.NUM&n&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(x){if(Tt.NUM&n)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}c(String(x))}}const v=i;for(e[i]==="-"&&i++;e[i]&&!",]}".includes(e[i]);)i++;i==r&&!(Tt.NUM&n)&&s("Unterminated number literal");try{return JSON.parse(e.substring(v,i))}catch{e.substring(v,i)==="-"&&Tt.NUM&n&&s("Not sure what '-' is");try{return JSON.parse(e.substring(v,e.lastIndexOf("e")))}catch(A){c(String(A))}}},p=()=>{for(;i<r&&` 
\r	`.includes(e[i]);)i++};return o()},ax=e=>YO(e,Tt.ALL^Tt.NUM);var Pi=function(e,n,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!s:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,r):s?s.value=r:n.set(e,r),r},Ie=function(e,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:n.get(e)},yt,Da,Wi,pr,Nh,Vc,Oh,Uh,zh,Gc,jh,rx;class Ps extends Lb{constructor(n){super(),yt.add(this),Da.set(this,void 0),Wi.set(this,void 0),pr.set(this,void 0),Pi(this,Da,n,"f"),Pi(this,Wi,[],"f")}get currentChatCompletionSnapshot(){return Ie(this,pr,"f")}static fromReadableStream(n){const r=new Ps(null);return r._run(()=>r._fromReadableStream(n)),r}static createChatCompletion(n,r,i){const s=new Ps(r);return s._run(()=>s._runChatCompletion(n,{...r,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(n,r,i){var o;super._createChatCompletion;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Ie(this,yt,"m",Nh).call(this);const c=await n.chat.completions.create({...r,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const d of c)Ie(this,yt,"m",Oh).call(this,d);if((o=c.controller.signal)!=null&&o.aborted)throw new Un;return this._addChatCompletion(Ie(this,yt,"m",Gc).call(this))}async _fromReadableStream(n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ie(this,yt,"m",Nh).call(this),this._connected();const s=ia.fromReadableStream(n,this.controller);let c;for await(const d of s)c&&c!==d.id&&this._addChatCompletion(Ie(this,yt,"m",Gc).call(this)),Ie(this,yt,"m",Oh).call(this,d),c=d.id;if((o=s.controller.signal)!=null&&o.aborted)throw new Un;return this._addChatCompletion(Ie(this,yt,"m",Gc).call(this))}[(Da=new WeakMap,Wi=new WeakMap,pr=new WeakMap,yt=new WeakSet,Nh=function(){this.ended||Pi(this,pr,void 0,"f")},Vc=function(r){let i=Ie(this,Wi,"f")[r.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Ie(this,Wi,"f")[r.index]=i,i)},Oh=function(r){var s,c,o,d,g,m,y,p,v,x,A,w,E,R,D;if(this.ended)return;const i=Ie(this,yt,"m",rx).call(this,r);this._emit("chunk",r,i);for(const z of r.choices){const C=i.choices[z.index];z.delta.content!=null&&((s=C.message)==null?void 0:s.role)==="assistant"&&((c=C.message)!=null&&c.content)&&(this._emit("content",z.delta.content,C.message.content),this._emit("content.delta",{delta:z.delta.content,snapshot:C.message.content,parsed:C.message.parsed})),z.delta.refusal!=null&&((o=C.message)==null?void 0:o.role)==="assistant"&&((d=C.message)!=null&&d.refusal)&&this._emit("refusal.delta",{delta:z.delta.refusal,snapshot:C.message.refusal}),((g=z.logprobs)==null?void 0:g.content)!=null&&((m=C.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(y=z.logprobs)==null?void 0:y.content,snapshot:((p=C.logprobs)==null?void 0:p.content)??[]}),((v=z.logprobs)==null?void 0:v.refusal)!=null&&((x=C.message)==null?void 0:x.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(A=z.logprobs)==null?void 0:A.refusal,snapshot:((w=C.logprobs)==null?void 0:w.refusal)??[]});const U=Ie(this,yt,"m",Vc).call(this,C);C.finish_reason&&(Ie(this,yt,"m",zh).call(this,C),U.current_tool_call_index!=null&&Ie(this,yt,"m",Uh).call(this,C,U.current_tool_call_index));for(const O of z.delta.tool_calls??[])U.current_tool_call_index!==O.index&&(Ie(this,yt,"m",zh).call(this,C),U.current_tool_call_index!=null&&Ie(this,yt,"m",Uh).call(this,C,U.current_tool_call_index)),U.current_tool_call_index=O.index;for(const O of z.delta.tool_calls??[]){const B=(E=C.message.tool_calls)==null?void 0:E[O.index];B!=null&&B.type&&((B==null?void 0:B.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(R=B.function)==null?void 0:R.name,index:O.index,arguments:B.function.arguments,parsed_arguments:B.function.parsed_arguments,arguments_delta:((D=O.function)==null?void 0:D.arguments)??""}):(B==null||B.type,void 0))}}},Uh=function(r,i){var o,d,g;if(Ie(this,yt,"m",Vc).call(this,r).done_tool_calls.has(i))return;const c=(o=r.message.tool_calls)==null?void 0:o[i];if(!c)throw new Error("no tool call snapshot");if(!c.type)throw new Error("tool call snapshot missing `type`");if(c.type==="function"){const m=(g=(d=Ie(this,Da,"f"))==null?void 0:d.tools)==null?void 0:g.find(y=>y.type==="function"&&y.function.name===c.function.name);this._emit("tool_calls.function.arguments.done",{name:c.function.name,index:i,arguments:c.function.arguments,parsed_arguments:lu(m)?m.$parseRaw(c.function.arguments):m!=null&&m.function.strict?JSON.parse(c.function.arguments):null})}else c.type},zh=function(r){var s,c;const i=Ie(this,yt,"m",Vc).call(this,r);if(r.message.content&&!i.content_done){i.content_done=!0;const o=Ie(this,yt,"m",jh).call(this);this._emit("content.done",{content:r.message.content,parsed:o?o.$parseRaw(r.message.content):null})}r.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),(s=r.logprobs)!=null&&s.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),(c=r.logprobs)!=null&&c.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},Gc=function(){if(this.ended)throw new be("stream has ended, this shouldn't happen");const r=Ie(this,pr,"f");if(!r)throw new be("request ended without sending any chunks");return Pi(this,pr,void 0,"f"),Pi(this,Wi,[],"f"),XO(r,Ie(this,Da,"f"))},jh=function(){var i;const r=(i=Ie(this,Da,"f"))==null?void 0:i.response_format;return Im(r)?r:null},rx=function(r){var i,s,c,o;let d=Ie(this,pr,"f");const{choices:g,...m}=r;d?Object.assign(d,m):d=Pi(this,pr,{...m,choices:[]},"f");for(const{delta:y,finish_reason:p,index:v,logprobs:x=null,...A}of r.choices){let w=d.choices[v];if(w||(w=d.choices[v]={finish_reason:p,index:v,message:{},logprobs:x,...A}),x)if(!w.logprobs)w.logprobs=Object.assign({},x);else{const{content:O,refusal:B,...J}=x;Object.assign(w.logprobs,J),O&&((i=w.logprobs).content??(i.content=[]),w.logprobs.content.push(...O)),B&&((s=w.logprobs).refusal??(s.refusal=[]),w.logprobs.refusal.push(...B))}if(p&&(w.finish_reason=p,Ie(this,Da,"f")&&Hb(Ie(this,Da,"f")))){if(p==="length")throw new pb;if(p==="content_filter")throw new vb}if(Object.assign(w,A),!y)continue;const{content:E,refusal:R,function_call:D,role:z,tool_calls:C,...U}=y;if(Object.assign(w.message,U),R&&(w.message.refusal=(w.message.refusal||"")+R),z&&(w.message.role=z),D&&(w.message.function_call?(D.name&&(w.message.function_call.name=D.name),D.arguments&&((c=w.message.function_call).arguments??(c.arguments=""),w.message.function_call.arguments+=D.arguments)):w.message.function_call=D),E&&(w.message.content=(w.message.content||"")+E,!w.message.refusal&&Ie(this,yt,"m",jh).call(this)&&(w.message.parsed=ax(w.message.content))),C){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:O,id:B,type:J,function:X,...Z}of C){const P=(o=w.message.tool_calls)[O]??(o[O]={});Object.assign(P,Z),B&&(P.id=B),J&&(P.type=J),X&&(P.function??(P.function={name:X.name??"",arguments:""})),X!=null&&X.name&&(P.function.name=X.name),X!=null&&X.arguments&&(P.function.arguments+=X.arguments,HO(Ie(this,Da,"f"),P)&&(P.function.parsed_arguments=ax(P.function.arguments)))}}}return d},Symbol.asyncIterator)](){const n=[],r=[];let i=!1;return this.on("chunk",s=>{const c=r.shift();c?c.resolve(s):n.push(s)}),this.on("end",()=>{i=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),this.on("error",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),{next:async()=>n.length?{value:n.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((c,o)=>r.push({resolve:c,reject:o})).then(c=>c?{value:c,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ia(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function XO(e,n){const{id:r,choices:i,created:s,model:c,system_fingerprint:o,...d}=e,g={...d,id:r,choices:i.map(({message:m,finish_reason:y,index:p,logprobs:v,...x})=>{if(!y)throw new be(`missing finish_reason for choice ${p}`);const{content:A=null,function_call:w,tool_calls:E,...R}=m,D=m.role;if(!D)throw new be(`missing role for choice ${p}`);if(w){const{arguments:z,name:C}=w;if(z==null)throw new be(`missing function_call.arguments for choice ${p}`);if(!C)throw new be(`missing function_call.name for choice ${p}`);return{...x,message:{content:A,function_call:{arguments:z,name:C},role:D,refusal:m.refusal??null},finish_reason:y,index:p,logprobs:v}}return E?{...x,index:p,finish_reason:y,logprobs:v,message:{...R,role:D,content:A,refusal:m.refusal??null,tool_calls:E.map((z,C)=>{const{function:U,type:O,id:B,...J}=z,{arguments:X,name:Z,...P}=U||{};if(B==null)throw new be(`missing choices[${p}].tool_calls[${C}].id
${Qc(e)}`);if(O==null)throw new be(`missing choices[${p}].tool_calls[${C}].type
${Qc(e)}`);if(Z==null)throw new be(`missing choices[${p}].tool_calls[${C}].function.name
${Qc(e)}`);if(X==null)throw new be(`missing choices[${p}].tool_calls[${C}].function.arguments
${Qc(e)}`);return{...J,id:B,type:O,function:{...P,name:Z,arguments:X}}})}}:{...x,message:{...R,content:A,role:D,refusal:m.refusal??null},finish_reason:y,index:p,logprobs:v}}),created:s,model:c,object:"chat.completion",...o?{system_fingerprint:o}:{}};return UO(g,n)}function Qc(e){return JSON.stringify(e)}class ml extends Ps{static fromReadableStream(n){const r=new ml(null);return r._run(()=>r._fromReadableStream(n)),r}static runFunctions(n,r,i){const s=new ml(null),c={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(n,r,c)),s}static runTools(n,r,i){const s=new ml(r),c={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(n,r,c)),s}}let Pb=class extends Ee{parse(n,r){return BO(n.tools),this._client.chat.completions.create(n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(i=>Fm(i,n))}runFunctions(n,r){return n.stream?ml.runFunctions(this._client,n,r):Js.runFunctions(this._client,n,r)}runTools(n,r){return n.stream?ml.runTools(this._client,n,r):Js.runTools(this._client,n,r)}stream(n,r){return Ps.createChatCompletion(this._client,n,r)}};class fm extends Ee{constructor(){super(...arguments),this.completions=new Pb(this._client)}}(function(e){e.Completions=Pb})(fm||(fm={}));class Wb extends Ee{create(n,r){return this._client.post("/realtime/sessions",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class e1 extends Ee{create(n,r){return this._client.post("/realtime/transcription_sessions",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class ko extends Ee{constructor(){super(...arguments),this.sessions=new Wb(this._client),this.transcriptionSessions=new e1(this._client)}}ko.Sessions=Wb;ko.TranscriptionSessions=e1;class Km extends Ee{create(n,r,i){return this._client.post(`/threads/${n}/messages`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(n,r,i){return this._client.get(`/threads/${n}/messages/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(n,r,i,s){return this._client.post(`/threads/${n}/messages/${r}`,{body:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(n,r={},i){return at(r)?this.list(n,{},r):this._client.getAPIList(`/threads/${n}/messages`,Jm,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(n,r,i){return this._client.delete(`/threads/${n}/messages/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class Jm extends xt{}Km.MessagesPage=Jm;class Pm extends Ee{retrieve(n,r,i,s={},c){return at(s)?this.retrieve(n,r,i,{},s):this._client.get(`/threads/${n}/runs/${r}/steps/${i}`,{query:s,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}list(n,r,i={},s){return at(i)?this.list(n,r,{},i):this._client.getAPIList(`/threads/${n}/runs/${r}/steps`,Wm,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Wm extends xt{}Pm.RunStepsPage=Wm;let su=class extends Ee{constructor(){super(...arguments),this.steps=new Pm(this._client)}create(n,r,i){const{include:s,...c}=r;return this._client.post(`/threads/${n}/runs`,{query:{include:s},body:c,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}retrieve(n,r,i){return this._client.get(`/threads/${n}/runs/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(n,r,i,s){return this._client.post(`/threads/${n}/runs/${r}`,{body:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(n,r={},i){return at(r)?this.list(n,{},r):this._client.getAPIList(`/threads/${n}/runs`,eg,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}cancel(n,r,i){return this._client.post(`/threads/${n}/runs/${r}/cancel`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(n,r,i){const s=await this.create(n,r,i);return await this.poll(n,s.id,i)}createAndStream(n,r,i){return Xn.createAssistantStream(n,this._client.beta.threads.runs,r,i)}async poll(n,r,i){const s={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const{data:c,response:o}=await this.retrieve(n,r,{...i,headers:{...i==null?void 0:i.headers,...s}}).withResponse();switch(c.status){case"queued":case"in_progress":case"cancelling":let d=5e3;if(i!=null&&i.pollIntervalMs)d=i.pollIntervalMs;else{const g=o.headers.get("openai-poll-after-ms");if(g){const m=parseInt(g);isNaN(m)||(d=m)}}await ru(d);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return c}}}stream(n,r,i){return Xn.createAssistantStream(n,this._client.beta.threads.runs,r,i)}submitToolOutputs(n,r,i,s){return this._client.post(`/threads/${n}/runs/${r}/submit_tool_outputs`,{body:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:i.stream??!1})}async submitToolOutputsAndPoll(n,r,i,s){const c=await this.submitToolOutputs(n,r,i,s);return await this.poll(n,c.id,s)}submitToolOutputsStream(n,r,i,s){return Xn.createToolAssistantStream(n,r,this._client.beta.threads.runs,i,s)}};class eg extends xt{}su.RunsPage=eg;su.Steps=Pm;su.RunStepsPage=Wm;class wl extends Ee{constructor(){super(...arguments),this.runs=new su(this._client),this.messages=new Km(this._client)}create(n={},r){return at(n)?this.create({},n):this._client.post("/threads",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(n,r){return this._client.get(`/threads/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(n,r,i){return this._client.post(`/threads/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(n,r){return this._client.delete(`/threads/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}createAndRun(n,r){return this._client.post("/threads/runs",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}async createAndRunPoll(n,r){const i=await this.createAndRun(n,r);return await this.runs.poll(i.thread_id,i.id,r)}createAndRunStream(n,r){return Xn.createThreadAssistantStream(n,this._client.beta.threads,r)}}wl.Runs=su;wl.RunsPage=eg;wl.Messages=Km;wl.MessagesPage=Jm;class bl extends Ee{constructor(){super(...arguments),this.realtime=new ko(this._client),this.chat=new fm(this._client),this.assistants=new Qm(this._client),this.threads=new wl(this._client)}}bl.Realtime=ko;bl.Assistants=Qm;bl.AssistantsPage=Zm;bl.Threads=wl;class t1 extends Ee{create(n,r){return this._client.post("/completions",{body:n,...r,stream:n.stream??!1})}}class n1 extends Ee{retrieve(n,r,i){return this._client.get(`/containers/${n}/files/${r}/content`,{...i,headers:{Accept:"application/binary",...i==null?void 0:i.headers},__binaryResponse:!0})}}let $o=class extends Ee{constructor(){super(...arguments),this.content=new n1(this._client)}create(n,r,i){return this._client.post(`/containers/${n}/files`,li({body:r,...i}))}retrieve(n,r,i){return this._client.get(`/containers/${n}/files/${r}`,i)}list(n,r={},i){return at(r)?this.list(n,{},r):this._client.getAPIList(`/containers/${n}/files`,tg,{query:r,...i})}del(n,r,i){return this._client.delete(`/containers/${n}/files/${r}`,{...i,headers:{Accept:"*/*",...i==null?void 0:i.headers}})}};class tg extends xt{}$o.FileListResponsesPage=tg;$o.Content=n1;class uu extends Ee{constructor(){super(...arguments),this.files=new $o(this._client)}create(n,r){return this._client.post("/containers",{body:n,...r})}retrieve(n,r){return this._client.get(`/containers/${n}`,r)}list(n={},r){return at(n)?this.list({},n):this._client.getAPIList("/containers",ng,{query:n,...r})}del(n,r){return this._client.delete(`/containers/${n}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}}class ng extends xt{}uu.ContainerListResponsesPage=ng;uu.Files=$o;uu.FileListResponsesPage=tg;class a1 extends Ee{create(n,r){const i=!!n.encoding_format;let s=i?n.encoding_format:"base64";i&&Er("Request","User defined encoding_format:",n.encoding_format);const c=this._client.post("/embeddings",{body:{...n,encoding_format:s},...r});return i?c:(Er("response","Decoding base64 embeddings to float32 array"),c._thenUnwrap(o=>(o&&o.data&&o.data.forEach(d=>{const g=d.embedding;d.embedding=NO(g)}),o)))}}class ag extends Ee{retrieve(n,r,i,s){return this._client.get(`/evals/${n}/runs/${r}/output_items/${i}`,s)}list(n,r,i={},s){return at(i)?this.list(n,r,{},i):this._client.getAPIList(`/evals/${n}/runs/${r}/output_items`,rg,{query:i,...s})}}class rg extends xt{}ag.OutputItemListResponsesPage=rg;class cu extends Ee{constructor(){super(...arguments),this.outputItems=new ag(this._client)}create(n,r,i){return this._client.post(`/evals/${n}/runs`,{body:r,...i})}retrieve(n,r,i){return this._client.get(`/evals/${n}/runs/${r}`,i)}list(n,r={},i){return at(r)?this.list(n,{},r):this._client.getAPIList(`/evals/${n}/runs`,ig,{query:r,...i})}del(n,r,i){return this._client.delete(`/evals/${n}/runs/${r}`,i)}cancel(n,r,i){return this._client.post(`/evals/${n}/runs/${r}`,i)}}class ig extends xt{}cu.RunListResponsesPage=ig;cu.OutputItems=ag;cu.OutputItemListResponsesPage=rg;class ou extends Ee{constructor(){super(...arguments),this.runs=new cu(this._client)}create(n,r){return this._client.post("/evals",{body:n,...r})}retrieve(n,r){return this._client.get(`/evals/${n}`,r)}update(n,r,i){return this._client.post(`/evals/${n}`,{body:r,...i})}list(n={},r){return at(n)?this.list({},n):this._client.getAPIList("/evals",lg,{query:n,...r})}del(n,r){return this._client.delete(`/evals/${n}`,r)}}class lg extends xt{}ou.EvalListResponsesPage=lg;ou.Runs=cu;ou.RunListResponsesPage=ig;let sg=class extends Ee{create(n,r){return this._client.post("/files",li({body:n,...r}))}retrieve(n,r){return this._client.get(`/files/${n}`,r)}list(n={},r){return at(n)?this.list({},n):this._client.getAPIList("/files",ug,{query:n,...r})}del(n,r){return this._client.delete(`/files/${n}`,r)}content(n,r){return this._client.get(`/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}retrieveContent(n,r){return this._client.get(`/files/${n}/content`,r)}async waitForProcessing(n,{pollInterval:r=5e3,maxWait:i=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),c=Date.now();let o=await this.retrieve(n);for(;!o.status||!s.has(o.status);)if(await ru(r),o=await this.retrieve(n),Date.now()-c>i)throw new qm({message:`Giving up on waiting for file ${n} to finish processing after ${i} milliseconds.`});return o}};class ug extends xt{}sg.FileObjectsPage=ug;class r1 extends Ee{}let i1=class extends Ee{run(n,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:n,...r})}validate(n,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:n,...r})}};class cg extends Ee{constructor(){super(...arguments),this.graders=new i1(this._client)}}cg.Graders=i1;class og extends Ee{create(n,r,i){return this._client.getAPIList(`/fine_tuning/checkpoints/${n}/permissions`,fg,{body:r,method:"post",...i})}retrieve(n,r={},i){return at(r)?this.retrieve(n,{},r):this._client.get(`/fine_tuning/checkpoints/${n}/permissions`,{query:r,...i})}del(n,r,i){return this._client.delete(`/fine_tuning/checkpoints/${n}/permissions/${r}`,i)}}class fg extends jo{}og.PermissionCreateResponsesPage=fg;let Yo=class extends Ee{constructor(){super(...arguments),this.permissions=new og(this._client)}};Yo.Permissions=og;Yo.PermissionCreateResponsesPage=fg;class dg extends Ee{list(n,r={},i){return at(r)?this.list(n,{},r):this._client.getAPIList(`/fine_tuning/jobs/${n}/checkpoints`,hg,{query:r,...i})}}class hg extends xt{}dg.FineTuningJobCheckpointsPage=hg;class Sl extends Ee{constructor(){super(...arguments),this.checkpoints=new dg(this._client)}create(n,r){return this._client.post("/fine_tuning/jobs",{body:n,...r})}retrieve(n,r){return this._client.get(`/fine_tuning/jobs/${n}`,r)}list(n={},r){return at(n)?this.list({},n):this._client.getAPIList("/fine_tuning/jobs",mg,{query:n,...r})}cancel(n,r){return this._client.post(`/fine_tuning/jobs/${n}/cancel`,r)}listEvents(n,r={},i){return at(r)?this.listEvents(n,{},r):this._client.getAPIList(`/fine_tuning/jobs/${n}/events`,gg,{query:r,...i})}pause(n,r){return this._client.post(`/fine_tuning/jobs/${n}/pause`,r)}resume(n,r){return this._client.post(`/fine_tuning/jobs/${n}/resume`,r)}}class mg extends xt{}class gg extends xt{}Sl.FineTuningJobsPage=mg;Sl.FineTuningJobEventsPage=gg;Sl.Checkpoints=dg;Sl.FineTuningJobCheckpointsPage=hg;class Ar extends Ee{constructor(){super(...arguments),this.methods=new r1(this._client),this.jobs=new Sl(this._client),this.checkpoints=new Yo(this._client),this.alpha=new cg(this._client)}}Ar.Methods=r1;Ar.Jobs=Sl;Ar.FineTuningJobsPage=mg;Ar.FineTuningJobEventsPage=gg;Ar.Checkpoints=Yo;Ar.Alpha=cg;class l1 extends Ee{}class yg extends Ee{constructor(){super(...arguments),this.graderModels=new l1(this._client)}}yg.GraderModels=l1;class s1 extends Ee{createVariation(n,r){return this._client.post("/images/variations",li({body:n,...r}))}edit(n,r){return this._client.post("/images/edits",li({body:n,...r}))}generate(n,r){return this._client.post("/images/generations",{body:n,...r})}}class pg extends Ee{retrieve(n,r){return this._client.get(`/models/${n}`,r)}list(n){return this._client.getAPIList("/models",vg,n)}del(n,r){return this._client.delete(`/models/${n}`,r)}}class vg extends jo{}pg.ModelsPage=vg;class u1 extends Ee{create(n,r){return this._client.post("/moderations",{body:n,...r})}}function VO(e,n){return!n||!QO(n)?{...e,output_parsed:null,output:e.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(i=>({...i,parsed:null}))}:r)}:c1(e,n)}function c1(e,n){const r=e.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:FO(n,s)};if(s.type==="message"){const c=s.content.map(o=>o.type==="output_text"?{...o,parsed:GO(n,o.text)}:o);return{...s,content:c}}return s}),i=Object.assign({},e,{output:r});return Object.getOwnPropertyDescriptor(e,"output_text")||o1(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(const s of i.output)if(s.type==="message"){for(const c of s.content)if(c.type==="output_text"&&c.parsed!==null)return c.parsed}return null}}),i}function GO(e,n){var r,i,s,c;return((i=(r=e.text)==null?void 0:r.format)==null?void 0:i.type)!=="json_schema"?null:"$parseRaw"in((s=e.text)==null?void 0:s.format)?((c=e.text)==null?void 0:c.format).$parseRaw(n):JSON.parse(n)}function QO(e){var n;return!!Im((n=e.text)==null?void 0:n.format)}function ZO(e){return(e==null?void 0:e.$brand)==="auto-parseable-tool"}function IO(e,n){return e.find(r=>r.type==="function"&&r.name===n)}function FO(e,n){const r=IO(e.tools??[],n.name);return{...n,...n,parsed_arguments:ZO(r)?r.$parseRaw(n.arguments):r!=null&&r.strict?JSON.parse(n.arguments):null}}function o1(e){const n=[];for(const r of e.output)if(r.type==="message")for(const i of r.content)i.type==="output_text"&&n.push(i.text);e.output_text=n.join("")}class f1 extends Ee{list(n,r={},i){return at(r)?this.list(n,{},r):this._client.getAPIList(`/responses/${n}/input_items`,JO,{query:r,...i})}}var el=function(e,n,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!s:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,r):s?s.value=r:n.set(e,r),r},vr=function(e,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:n.get(e)},tl,Zc,_r,Ic,ix,lx,sx,ux;class _g extends Gm{constructor(n){super(),tl.add(this),Zc.set(this,void 0),_r.set(this,void 0),Ic.set(this,void 0),el(this,Zc,n,"f")}static createResponse(n,r,i){const s=new _g(r);return s._run(()=>s._createOrRetrieveResponse(n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(n,r,i){var d;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),vr(this,tl,"m",ix).call(this);let c,o=null;"response_id"in r?(c=await n.responses.retrieve(r.response_id,{stream:!0},{...i,signal:this.controller.signal,stream:!0}),o=r.starting_after??null):c=await n.responses.create({...r,stream:!0},{...i,signal:this.controller.signal}),this._connected();for await(const g of c)vr(this,tl,"m",lx).call(this,g,o);if((d=c.controller.signal)!=null&&d.aborted)throw new Un;return vr(this,tl,"m",sx).call(this)}[(Zc=new WeakMap,_r=new WeakMap,Ic=new WeakMap,tl=new WeakSet,ix=function(){this.ended||el(this,_r,void 0,"f")},lx=function(r,i){if(this.ended)return;const s=(o,d)=>{(i==null||d.sequence_number>i)&&this._emit(o,d)},c=vr(this,tl,"m",ux).call(this,r);switch(s("event",r),r.type){case"response.output_text.delta":{const o=c.output[r.output_index];if(!o)throw new be(`missing output at index ${r.output_index}`);if(o.type==="message"){const d=o.content[r.content_index];if(!d)throw new be(`missing content at index ${r.content_index}`);if(d.type!=="output_text")throw new be(`expected content to be 'output_text', got ${d.type}`);s("response.output_text.delta",{...r,snapshot:d.text})}break}case"response.function_call_arguments.delta":{const o=c.output[r.output_index];if(!o)throw new be(`missing output at index ${r.output_index}`);o.type==="function_call"&&s("response.function_call_arguments.delta",{...r,snapshot:o.arguments});break}default:s(r.type,r);break}},sx=function(){if(this.ended)throw new be("stream has ended, this shouldn't happen");const r=vr(this,_r,"f");if(!r)throw new be("request ended without sending any events");el(this,_r,void 0,"f");const i=KO(r,vr(this,Zc,"f"));return el(this,Ic,i,"f"),i},ux=function(r){let i=vr(this,_r,"f");if(!i){if(r.type!=="response.created")throw new be(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return i=el(this,_r,r.response,"f"),i}switch(r.type){case"response.output_item.added":{i.output.push(r.item);break}case"response.content_part.added":{const s=i.output[r.output_index];if(!s)throw new be(`missing output at index ${r.output_index}`);s.type==="message"&&s.content.push(r.part);break}case"response.output_text.delta":{const s=i.output[r.output_index];if(!s)throw new be(`missing output at index ${r.output_index}`);if(s.type==="message"){const c=s.content[r.content_index];if(!c)throw new be(`missing content at index ${r.content_index}`);if(c.type!=="output_text")throw new be(`expected content to be 'output_text', got ${c.type}`);c.text+=r.delta}break}case"response.function_call_arguments.delta":{const s=i.output[r.output_index];if(!s)throw new be(`missing output at index ${r.output_index}`);s.type==="function_call"&&(s.arguments+=r.delta);break}case"response.completed":{el(this,_r,r.response,"f");break}}return i},Symbol.asyncIterator)](){const n=[],r=[];let i=!1;return this.on("event",s=>{const c=r.shift();c?c.resolve(s):n.push(s)}),this.on("end",()=>{i=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),this.on("error",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),{next:async()=>n.length?{value:n.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((c,o)=>r.push({resolve:c,reject:o})).then(c=>c?{value:c,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const n=vr(this,Ic,"f");if(!n)throw new be("stream ended without producing a ChatCompletion");return n}}function KO(e,n){return VO(e,n)}class xg extends Ee{constructor(){super(...arguments),this.inputItems=new f1(this._client)}create(n,r){return this._client.post("/responses",{body:n,...r,stream:n.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&o1(i),i))}retrieve(n,r={},i){return this._client.get(`/responses/${n}`,{query:r,...i,stream:(r==null?void 0:r.stream)??!1})}del(n,r){return this._client.delete(`/responses/${n}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}parse(n,r){return this._client.responses.create(n,r)._thenUnwrap(i=>c1(i,n))}stream(n,r){return _g.createResponse(this._client,n,r)}cancel(n,r){return this._client.post(`/responses/${n}/cancel`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}}class JO extends xt{}xg.InputItems=f1;class d1 extends Ee{create(n,r,i){return this._client.post(`/uploads/${n}/parts`,li({body:r,...i}))}}class wg extends Ee{constructor(){super(...arguments),this.parts=new d1(this._client)}create(n,r){return this._client.post("/uploads",{body:n,...r})}cancel(n,r){return this._client.post(`/uploads/${n}/cancel`,r)}complete(n,r,i){return this._client.post(`/uploads/${n}/complete`,{body:r,...i})}}wg.Parts=d1;const PO=async e=>{const n=await Promise.allSettled(e),r=n.filter(s=>s.status==="rejected");if(r.length){for(const s of r)console.error(s.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const i=[];for(const s of n)s.status==="fulfilled"&&i.push(s.value);return i};class qo extends Ee{create(n,r,i){return this._client.post(`/vector_stores/${n}/files`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(n,r,i){return this._client.get(`/vector_stores/${n}/files/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(n,r,i,s){return this._client.post(`/vector_stores/${n}/files/${r}`,{body:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(n,r={},i){return at(r)?this.list(n,{},r):this._client.getAPIList(`/vector_stores/${n}/files`,Xo,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(n,r,i){return this._client.delete(`/vector_stores/${n}/files/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(n,r,i){const s=await this.create(n,r,i);return await this.poll(n,s.id,i)}async poll(n,r,i){const s={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const c=await this.retrieve(n,r,{...i,headers:s}).withResponse(),o=c.data;switch(o.status){case"in_progress":let d=5e3;if(i!=null&&i.pollIntervalMs)d=i.pollIntervalMs;else{const g=c.response.headers.get("openai-poll-after-ms");if(g){const m=parseInt(g);isNaN(m)||(d=m)}}await ru(d);break;case"failed":case"completed":return o}}}async upload(n,r,i){const s=await this._client.files.create({file:r,purpose:"assistants"},i);return this.create(n,{file_id:s.id},i)}async uploadAndPoll(n,r,i){const s=await this.upload(n,r,i);return await this.poll(n,s.id,i)}content(n,r,i){return this._client.getAPIList(`/vector_stores/${n}/files/${r}/content`,bg,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class Xo extends xt{}class bg extends jo{}qo.VectorStoreFilesPage=Xo;qo.FileContentResponsesPage=bg;class h1 extends Ee{create(n,r,i){return this._client.post(`/vector_stores/${n}/file_batches`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(n,r,i){return this._client.get(`/vector_stores/${n}/file_batches/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}cancel(n,r,i){return this._client.post(`/vector_stores/${n}/file_batches/${r}/cancel`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(n,r,i){const s=await this.create(n,r);return await this.poll(n,s.id,i)}listFiles(n,r,i={},s){return at(i)?this.listFiles(n,r,{},i):this._client.getAPIList(`/vector_stores/${n}/file_batches/${r}/files`,Xo,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(n,r,i){const s={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const{data:c,response:o}=await this.retrieve(n,r,{...i,headers:s}).withResponse();switch(c.status){case"in_progress":let d=5e3;if(i!=null&&i.pollIntervalMs)d=i.pollIntervalMs;else{const g=o.headers.get("openai-poll-after-ms");if(g){const m=parseInt(g);isNaN(m)||(d=m)}}await ru(d);break;case"failed":case"cancelled":case"completed":return c}}}async uploadAndPoll(n,{files:r,fileIds:i=[]},s){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const c=(s==null?void 0:s.maxConcurrency)??5,o=Math.min(c,r.length),d=this._client,g=r.values(),m=[...i];async function y(v){for(let x of v){const A=await d.files.create({file:x,purpose:"assistants"},s);m.push(A.id)}}const p=Array(o).fill(g).map(y);return await PO(p),await this.createAndPoll(n,{file_ids:m})}}class Tr extends Ee{constructor(){super(...arguments),this.files=new qo(this._client),this.fileBatches=new h1(this._client)}create(n,r){return this._client.post("/vector_stores",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(n,r){return this._client.get(`/vector_stores/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(n,r,i){return this._client.post(`/vector_stores/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(n={},r){return at(n)?this.list({},n):this._client.getAPIList("/vector_stores",Sg,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(n,r){return this._client.delete(`/vector_stores/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}search(n,r,i){return this._client.getAPIList(`/vector_stores/${n}/search`,Eg,{body:r,method:"post",...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class Sg extends xt{}class Eg extends jo{}Tr.VectorStoresPage=Sg;Tr.VectorStoreSearchResponsesPage=Eg;Tr.Files=qo;Tr.VectorStoreFilesPage=Xo;Tr.FileContentResponsesPage=bg;Tr.FileBatches=h1;var m1;class Ce extends _O{constructor({baseURL:n=qc("OPENAI_BASE_URL"),apiKey:r=qc("OPENAI_API_KEY"),organization:i=qc("OPENAI_ORG_ID")??null,project:s=qc("OPENAI_PROJECT_ID")??null,...c}={}){if(r===void 0)throw new be("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:r,organization:i,project:s,...c,baseURL:n||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&RO())throw new be(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new t1(this),this.chat=new Lo(this),this.embeddings=new a1(this),this.files=new sg(this),this.images=new s1(this),this.audio=new iu(this),this.moderations=new u1(this),this.models=new pg(this),this.fineTuning=new Ar(this),this.graders=new yg(this),this.vectorStores=new Tr(this),this.beta=new bl(this),this.batches=new Xm(this),this.uploads=new wg(this),this.responses=new xg(this),this.evals=new ou(this),this.containers=new uu(this),this._options=o,this.apiKey=r,this.organization=i,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(n){return{...super.defaultHeaders(n),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(n){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(n){return tO(n,{arrayFormat:"brackets"})}}m1=Ce;Ce.OpenAI=m1;Ce.DEFAULT_TIMEOUT=6e5;Ce.OpenAIError=be;Ce.APIError=zt;Ce.APIConnectionError=No;Ce.APIConnectionTimeoutError=qm;Ce.APIUserAbortError=Un;Ce.NotFoundError=db;Ce.ConflictError=hb;Ce.RateLimitError=gb;Ce.BadRequestError=cb;Ce.AuthenticationError=ob;Ce.InternalServerError=yb;Ce.PermissionDeniedError=fb;Ce.UnprocessableEntityError=mb;Ce.toFile=bb;Ce.fileFromPath=lb;Ce.Completions=t1;Ce.Chat=Lo;Ce.ChatCompletionsPage=Bo;Ce.Embeddings=a1;Ce.Files=sg;Ce.FileObjectsPage=ug;Ce.Images=s1;Ce.Audio=iu;Ce.Moderations=u1;Ce.Models=pg;Ce.ModelsPage=vg;Ce.FineTuning=Ar;Ce.Graders=yg;Ce.VectorStores=Tr;Ce.VectorStoresPage=Sg;Ce.VectorStoreSearchResponsesPage=Eg;Ce.Beta=bl;Ce.Batches=Xm;Ce.BatchesPage=Vm;Ce.Uploads=wg;Ce.Responses=xg;Ce.Evals=ou;Ce.EvalListResponsesPage=lg;Ce.Containers=uu;Ce.ContainerListResponsesPage=ng;async function WO(e,n,r,i="o4-mini"){var d,g,m;const s=new Ce({apiKey:e,dangerouslyAllowBrowser:!0}),c=[{role:"system",content:"You are a helpful assistant for exploring a fictional realm."},{role:"user",content:`Here is the realm data: ${JSON.stringify(n)}

Question: ${r}`}];return((m=(g=(d=(await s.chat.completions.create({model:i,messages:c})).choices)==null?void 0:d[0])==null?void 0:g.message)==null?void 0:m.content)||""}function e4(){const{query:e}=We(),[n,r]=j.useState(""),[i,s]=j.useState(""),c=async o=>{const d=window.localStorage.getItem("openaiKey")||"";if(!d){alert("Please enter your OpenAI API key in the Account page.");return}const g=dm(e.realmId);if(g){s("Loading...");try{const m=await WO(d,g,n,o);s(m)}catch(m){console.error(m),s("Error: "+((m==null?void 0:m.message)||m))}}};return b.jsxs("div",{className:"explore-page",children:[b.jsx("textarea",{rows:5,cols:50,value:n,placeholder:"Ask about this realm...",onChange:o=>r(o.target.value)}),b.jsx("br",{}),b.jsx("button",{onClick:()=>c("o4-mini"),children:"Quick"}),b.jsx("button",{onClick:()=>c("o3"),children:"In Depth"}),b.jsx("pre",{children:i})]})}function t4(){const{query:e,setQuery:n}=We(),r=ca(),i=e.realmId,[s,c]=j.useState({id:"",created:new Date,updated:new Date,name:"",description:""}),o=m=>{const y=sa.read(m),p={id:"",created:new Date,updated:new Date,name:"",description:"",...y};c(p)},d=async m=>{prompt(`Type 'yes' to remove the ${s==null?void 0:s.name} realm?`)==="yes"&&(sa.remove(m),vt.remove(m),Pt.remove(m),la.remove(m),yn.remove(m),en.remove(m),n({realmId:""})),await nn(r,e.realmId)},g=async m=>{m.preventDefault(),sa.update(s==null?void 0:s.id,s),await nn(r,e.realmId)};return j.useEffect(()=>{i?o(i):c({id:"",created:new Date,updated:new Date,name:"",description:""})},[i]),b.jsx(b.Fragment,{children:b.jsxs("form",{className:"horiz",onSubmit:g,children:[b.jsx("label",{children:"RealmName"}),b.jsx("input",{type:"text",required:!0,name:"name",value:s==null?void 0:s.name,onChange:m=>c({...s,name:m.target.value})}),b.jsxs("span",{children:[" ",b.jsx("button",{type:"submit",children:je.FLOPPY_DISK})," "]}),b.jsx("label",{children:"Description"}),b.jsx("textarea",{name:"description",required:!0,value:s==null?void 0:s.description,onChange:m=>c({...s,description:m.target.value})}),b.jsx("span",{children:b.jsx("button",{onClick:()=>d(s==null?void 0:s.id),type:"button",children:je.RED_X})})]})})}function n4(){var c;const{query:e,currentState:n}=We(),[r,i]=j.useState(!0),s=e.realmId?(c=sa.read(e.realmId))==null?void 0:c.name:"";return j.useEffect(()=>{console.log("QUERY",e)},[e]),b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"realm banner",children:[b.jsx("button",{className:"plain",onClick:()=>i(!r),children:r?"":""}),r?b.jsxs(b.Fragment,{children:[b.jsx(PE,{}),(e==null?void 0:e.realmId)&&b.jsx(t4,{}),b.jsx("div",{children:n})]}):b.jsx("span",{children:s})]}),b.jsxs("main",{children:[e.realmId&&b.jsx(b.Fragment,{children:b.jsxs("div",{className:"mode-select",children:[b.jsx(Dn,{to:Ye.Concept,children:"concepts"}),b.jsx(Dn,{to:Ye.Character,children:"characters"}),b.jsx(Dn,{to:Ye.Item,children:"items"}),b.jsx(Dn,{to:Ye.Location,children:"locations"}),b.jsx(Dn,{to:Ye.Event,children:"events"}),b.jsx(Dn,{to:Ye.Community,children:"communities"}),b.jsx(Dn,{to:Ye.Timeline,children:"timeline"}),b.jsx(Dn,{to:Ye.Input,children:"input"}),b.jsx(Dn,{to:Ye.Talk,children:"talk"}),b.jsx(Dn,{to:Ye.Explore,children:"explore"})]})}),b.jsxs("div",{className:"viewport",children:[b.jsx(Rn,{name:Ye.Concept,children:e.id?b.jsx(a3,{}):b.jsx(r3,{})}),b.jsx(Rn,{name:Ye.Character,children:e.id?b.jsx(WE,{}):b.jsx(n3,{})}),b.jsx(Rn,{name:Ye.Item,children:e.id?b.jsx(kN,{}):b.jsx(zN,{})}),b.jsx(Rn,{name:Ye.Location,children:e.id?b.jsx($N,{}):b.jsx(HN,{})}),b.jsx(Rn,{name:Ye.Community,children:e.id?b.jsx(YN,{}):b.jsx(VN,{})}),b.jsx(Rn,{name:Ye.Event,children:e.id?b.jsx(Uw,{}):b.jsx(UN,{})}),b.jsx(Rn,{name:Ye.Timeline,children:e.realmId?b.jsx(GN,{}):null}),b.jsx(Rn,{name:Ye.Input,children:b.jsx(BN,{})}),b.jsx(Rn,{name:Ye.Talk,children:b.jsx(LN,{})}),b.jsx(Rn,{name:Ye.Explore,children:b.jsx(e4,{})}),b.jsx(Rn,{name:Ye.Person,children:b.jsx(BE,{})}),b.jsx(Rn,{name:Ye.Data,children:b.jsx(JE,{})})]})]}),b.jsxs("footer",{children:[b.jsx(Dn,{to:Ye.Data,children:je.FLOPPY_DISK}),b.jsx(Dn,{to:Ye.Person,children:je.PERSON})]})]})}function a4(){return b.jsxs(b.Fragment,{children:[b.jsx(jE,{}),b.jsx(DE,{name:"main",children:b.jsx(n4,{})})]})}RE.createRoot(document.getElementById("root")).render(b.jsx(j.StrictMode,{children:b.jsx(a4,{})}));
