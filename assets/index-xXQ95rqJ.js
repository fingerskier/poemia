(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();function G_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zd={exports:{}},vs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp;function lE(){if(Fp)return vs;Fp=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,s,c){var f=null;if(c!==void 0&&(f=""+c),s.key!==void 0&&(f=""+s.key),"key"in s){c={};for(var h in s)h!=="key"&&(c[h]=s[h])}else c=s;return s=c.ref,{$$typeof:t,type:i,key:f,ref:s!==void 0?s:null,props:c}}return vs.Fragment=n,vs.jsx=r,vs.jsxs=r,vs}var Ip;function sE(){return Ip||(Ip=1,Zd.exports=lE()),Zd.exports}var E=sE(),Fd={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kp;function uE(){if(Kp)return Re;Kp=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),p=Symbol.iterator;function v(A){return A===null||typeof A!="object"?null:(A=p&&A[p]||A["@@iterator"],typeof A=="function"?A:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function C(A,L,G){this.props=A,this.context=L,this.refs=w,this.updater=G||b}C.prototype.isReactComponent={},C.prototype.setState=function(A,L){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,L,"setState")},C.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function N(){}N.prototype=C.prototype;function T(A,L,G){this.props=A,this.context=L,this.refs=w,this.updater=G||b}var O=T.prototype=new N;O.constructor=T,S(O,C.prototype),O.isPureReactComponent=!0;var M=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function k(A,L,G,P,re,oe){return G=oe.ref,{$$typeof:t,type:A,key:L,ref:G!==void 0?G:null,props:oe}}function F(A,L){return k(A.type,L,void 0,void 0,void 0,A.props)}function X(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function ee(A){var L={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(G){return L[G]})}var W=/\/+/g;function ne(A,L){return typeof A=="object"&&A!==null&&A.key!=null?ee(""+A.key):L.toString(36)}function ue(){}function D(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(ue,ue):(A.status="pending",A.then(function(L){A.status==="pending"&&(A.status="fulfilled",A.value=L)},function(L){A.status==="pending"&&(A.status="rejected",A.reason=L)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function Z(A,L,G,P,re){var oe=typeof A;(oe==="undefined"||oe==="boolean")&&(A=null);var fe=!1;if(A===null)fe=!0;else switch(oe){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(A.$$typeof){case t:case n:fe=!0;break;case y:return fe=A._init,Z(fe(A._payload),L,G,P,re)}}if(fe)return re=re(A),fe=P===""?"."+ne(A,0):P,M(re)?(G="",fe!=null&&(G=fe.replace(W,"$&/")+"/"),Z(re,L,G,"",function(ce){return ce})):re!=null&&(X(re)&&(re=F(re,G+(re.key==null||A&&A.key===re.key?"":(""+re.key).replace(W,"$&/")+"/")+fe)),L.push(re)),1;fe=0;var be=P===""?".":P+":";if(M(A))for(var ye=0;ye<A.length;ye++)P=A[ye],oe=be+ne(P,ye),fe+=Z(P,L,G,oe,re);else if(ye=v(A),typeof ye=="function")for(A=ye.call(A),ye=0;!(P=A.next()).done;)P=P.value,oe=be+ne(P,ye++),fe+=Z(P,L,G,oe,re);else if(oe==="object"){if(typeof A.then=="function")return Z(D(A),L,G,P,re);throw L=String(A),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return fe}function R(A,L,G){if(A==null)return A;var P=[],re=0;return Z(A,P,"","",function(oe){return L.call(G,oe,re++)}),P}function Y(A){if(A._status===-1){var L=A._result;L=L(),L.then(function(G){(A._status===0||A._status===-1)&&(A._status=1,A._result=G)},function(G){(A._status===0||A._status===-1)&&(A._status=2,A._result=G)}),A._status===-1&&(A._status=0,A._result=L)}if(A._status===1)return A._result.default;throw A._result}var J=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function $(){}return Re.Children={map:R,forEach:function(A,L,G){R(A,function(){L.apply(this,arguments)},G)},count:function(A){var L=0;return R(A,function(){L++}),L},toArray:function(A){return R(A,function(L){return L})||[]},only:function(A){if(!X(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Re.Component=C,Re.Fragment=r,Re.Profiler=s,Re.PureComponent=T,Re.StrictMode=i,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Re.__COMPILER_RUNTIME={__proto__:null,c:function(A){return H.H.useMemoCache(A)}},Re.cache=function(A){return function(){return A.apply(null,arguments)}},Re.cloneElement=function(A,L,G){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var P=S({},A.props),re=A.key,oe=void 0;if(L!=null)for(fe in L.ref!==void 0&&(oe=void 0),L.key!==void 0&&(re=""+L.key),L)!j.call(L,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&L.ref===void 0||(P[fe]=L[fe]);var fe=arguments.length-2;if(fe===1)P.children=G;else if(1<fe){for(var be=Array(fe),ye=0;ye<fe;ye++)be[ye]=arguments[ye+2];P.children=be}return k(A.type,re,void 0,void 0,oe,P)},Re.createContext=function(A){return A={$$typeof:f,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:c,_context:A},A},Re.createElement=function(A,L,G){var P,re={},oe=null;if(L!=null)for(P in L.key!==void 0&&(oe=""+L.key),L)j.call(L,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(re[P]=L[P]);var fe=arguments.length-2;if(fe===1)re.children=G;else if(1<fe){for(var be=Array(fe),ye=0;ye<fe;ye++)be[ye]=arguments[ye+2];re.children=be}if(A&&A.defaultProps)for(P in fe=A.defaultProps,fe)re[P]===void 0&&(re[P]=fe[P]);return k(A,oe,void 0,void 0,null,re)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(A){return{$$typeof:h,render:A}},Re.isValidElement=X,Re.lazy=function(A){return{$$typeof:y,_payload:{_status:-1,_result:A},_init:Y}},Re.memo=function(A,L){return{$$typeof:m,type:A,compare:L===void 0?null:L}},Re.startTransition=function(A){var L=H.T,G={};H.T=G;try{var P=A(),re=H.S;re!==null&&re(G,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then($,J)}catch(oe){J(oe)}finally{H.T=L}},Re.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Re.use=function(A){return H.H.use(A)},Re.useActionState=function(A,L,G){return H.H.useActionState(A,L,G)},Re.useCallback=function(A,L){return H.H.useCallback(A,L)},Re.useContext=function(A){return H.H.useContext(A)},Re.useDebugValue=function(){},Re.useDeferredValue=function(A,L){return H.H.useDeferredValue(A,L)},Re.useEffect=function(A,L,G){var P=H.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return P.useEffect(A,L)},Re.useId=function(){return H.H.useId()},Re.useImperativeHandle=function(A,L,G){return H.H.useImperativeHandle(A,L,G)},Re.useInsertionEffect=function(A,L){return H.H.useInsertionEffect(A,L)},Re.useLayoutEffect=function(A,L){return H.H.useLayoutEffect(A,L)},Re.useMemo=function(A,L){return H.H.useMemo(A,L)},Re.useOptimistic=function(A,L){return H.H.useOptimistic(A,L)},Re.useReducer=function(A,L,G){return H.H.useReducer(A,L,G)},Re.useRef=function(A){return H.H.useRef(A)},Re.useState=function(A){return H.H.useState(A)},Re.useSyncExternalStore=function(A,L,G){return H.H.useSyncExternalStore(A,L,G)},Re.useTransition=function(){return H.H.useTransition()},Re.version="19.1.0",Re}var Jp;function Ks(){return Jp||(Jp=1,Fd.exports=uE()),Fd.exports}var U=Ks();const te=G_(U);var Id={exports:{}},_s={},Kd={exports:{}},Jd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function cE(){return Pp||(Pp=1,function(t){function n(R,Y){var J=R.length;R.push(Y);e:for(;0<J;){var $=J-1>>>1,A=R[$];if(0<s(A,Y))R[$]=Y,R[J]=A,J=$;else break e}}function r(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var Y=R[0],J=R.pop();if(J!==Y){R[0]=J;e:for(var $=0,A=R.length,L=A>>>1;$<L;){var G=2*($+1)-1,P=R[G],re=G+1,oe=R[re];if(0>s(P,J))re<A&&0>s(oe,P)?(R[$]=oe,R[re]=J,$=re):(R[$]=P,R[G]=J,$=G);else if(re<A&&0>s(oe,J))R[$]=oe,R[re]=J,$=re;else break e}}return Y}function s(R,Y){var J=R.sortIndex-Y.sortIndex;return J!==0?J:R.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var f=Date,h=f.now();t.unstable_now=function(){return f.now()-h}}var g=[],m=[],y=1,p=null,v=3,b=!1,S=!1,w=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function M(R){for(var Y=r(m);Y!==null;){if(Y.callback===null)i(m);else if(Y.startTime<=R)i(m),Y.sortIndex=Y.expirationTime,n(g,Y);else break;Y=r(m)}}function H(R){if(w=!1,M(R),!S)if(r(g)!==null)S=!0,j||(j=!0,ne());else{var Y=r(m);Y!==null&&Z(H,Y.startTime-R)}}var j=!1,k=-1,F=5,X=-1;function ee(){return C?!0:!(t.unstable_now()-X<F)}function W(){if(C=!1,j){var R=t.unstable_now();X=R;var Y=!0;try{e:{S=!1,w&&(w=!1,T(k),k=-1),b=!0;var J=v;try{t:{for(M(R),p=r(g);p!==null&&!(p.expirationTime>R&&ee());){var $=p.callback;if(typeof $=="function"){p.callback=null,v=p.priorityLevel;var A=$(p.expirationTime<=R);if(R=t.unstable_now(),typeof A=="function"){p.callback=A,M(R),Y=!0;break t}p===r(g)&&i(g),M(R)}else i(g);p=r(g)}if(p!==null)Y=!0;else{var L=r(m);L!==null&&Z(H,L.startTime-R),Y=!1}}break e}finally{p=null,v=J,b=!1}Y=void 0}}finally{Y?ne():j=!1}}}var ne;if(typeof O=="function")ne=function(){O(W)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,D=ue.port2;ue.port1.onmessage=W,ne=function(){D.postMessage(null)}}else ne=function(){N(W,0)};function Z(R,Y){k=N(function(){R(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(R){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var J=v;v=Y;try{return R()}finally{v=J}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(R,Y){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var J=v;v=R;try{return Y()}finally{v=J}},t.unstable_scheduleCallback=function(R,Y,J){var $=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?$+J:$):J=$,R){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=J+A,R={id:y++,callback:Y,priorityLevel:R,startTime:J,expirationTime:A,sortIndex:-1},J>$?(R.sortIndex=J,n(m,R),r(g)===null&&R===r(m)&&(w?(T(k),k=-1):w=!0,Z(H,J-$))):(R.sortIndex=A,n(g,R),S||b||(S=!0,j||(j=!0,ne()))),R},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(R){var Y=v;return function(){var J=v;v=Y;try{return R.apply(this,arguments)}finally{v=J}}}}(Jd)),Jd}var Wp;function oE(){return Wp||(Wp=1,Kd.exports=cE()),Kd.exports}var Pd={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function fE(){if(ev)return $t;ev=1;var t=Ks();function n(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(g,m,y){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:g,containerInfo:m,implementation:y}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$t.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return c(g,m,null,y)},$t.flushSync=function(g){var m=f.T,y=i.p;try{if(f.T=null,i.p=2,g)return g()}finally{f.T=m,i.p=y,i.d.f()}},$t.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(g,m))},$t.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},$t.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,p=h(y,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?i.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:b}):y==="script"&&i.d.X(g,{crossOrigin:p,integrity:v,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},$t.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=h(m.as,m.crossOrigin);i.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(g)},$t.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,p=h(y,m.crossOrigin);i.d.L(g,y,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},$t.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=h(m.as,m.crossOrigin);i.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(g)},$t.requestFormReset=function(g){i.d.r(g)},$t.unstable_batchedUpdates=function(g,m){return g(m)},$t.useFormState=function(g,m,y){return f.H.useFormState(g,m,y)},$t.useFormStatus=function(){return f.H.useHostTransitionStatus()},$t.version="19.1.0",$t}var tv;function Q_(){if(tv)return Pd.exports;tv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Pd.exports=fE(),Pd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function dE(){if(nv)return _s;nv=1;var t=oE(),n=Ks(),r=Q_();function i(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var a=e,l=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(l=a.return),e=a.return;while(e)}return a.tag===3?l:null}function f(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function h(e){if(c(e)!==e)throw Error(i(188))}function g(e){var a=e.alternate;if(!a){if(a=c(e),a===null)throw Error(i(188));return a!==e?null:e}for(var l=e,u=a;;){var o=l.return;if(o===null)break;var d=o.alternate;if(d===null){if(u=o.return,u!==null){l=u;continue}break}if(o.child===d.child){for(d=o.child;d;){if(d===l)return h(o),e;if(d===u)return h(o),a;d=d.sibling}throw Error(i(188))}if(l.return!==u.return)l=o,u=d;else{for(var _=!1,x=o.child;x;){if(x===l){_=!0,l=o,u=d;break}if(x===u){_=!0,u=o,l=d;break}x=x.sibling}if(!_){for(x=d.child;x;){if(x===l){_=!0,l=d,u=o;break}if(x===u){_=!0,u=d,l=o;break}x=x.sibling}if(!_)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?e:a}function m(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=m(e),a!==null)return a;e=e.sibling}return null}var y=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Symbol.for("react.client.reference");function D(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ue?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case C:return"Profiler";case w:return"StrictMode";case H:return"Suspense";case j:return"SuspenseList";case X:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case b:return"Portal";case O:return(e.displayName||"Context")+".Provider";case T:return(e._context.displayName||"Context")+".Consumer";case M:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return a=e.displayName||null,a!==null?a:D(e.type)||"Memo";case F:a=e._payload,e=e._init;try{return D(e(a))}catch{}}return null}var Z=Array.isArray,R=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},$=[],A=-1;function L(e){return{current:e}}function G(e){0>A||(e.current=$[A],$[A]=null,A--)}function P(e,a){A++,$[A]=e.current,e.current=a}var re=L(null),oe=L(null),fe=L(null),be=L(null);function ye(e,a){switch(P(fe,a),P(oe,e),P(re,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?xp(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=xp(a),e=Sp(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(re),P(re,e)}function ce(){G(re),G(oe),G(fe)}function de(e){e.memoizedState!==null&&P(be,e);var a=re.current,l=Sp(a,e.type);a!==l&&(P(oe,e),P(re,l))}function _e(e){oe.current===e&&(G(re),G(oe)),be.current===e&&(G(be),hs._currentValue=J)}var le=Object.prototype.hasOwnProperty,He=t.unstable_scheduleCallback,Te=t.unstable_cancelCallback,ze=t.unstable_shouldYield,Ye=t.unstable_requestPaint,Me=t.unstable_now,me=t.unstable_getCurrentPriorityLevel,wt=t.unstable_ImmediatePriority,yn=t.unstable_UserBlockingPriority,Zn=t.unstable_NormalPriority,Ba=t.unstable_LowPriority,sa=t.unstable_IdlePriority,On=t.log,La=t.unstable_setDisableYieldValue,tn=null,lt=null;function Xt(e){if(typeof On=="function"&&La(e),lt&&typeof lt.setStrictMode=="function")try{lt.setStrictMode(tn,e)}catch{}}var ot=Math.clz32?Math.clz32:nn,Er=Math.log,xt=Math.LN2;function nn(e){return e>>>=0,e===0?32:31-(Er(e)/xt|0)|0}var pn=256,vn=4194304;function Vt(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Qt(e,a,l){var u=e.pendingLanes;if(u===0)return 0;var o=0,d=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var x=u&134217727;return x!==0?(u=x&~d,u!==0?o=Vt(u):(_&=x,_!==0?o=Vt(_):l||(l=x&~e,l!==0&&(o=Vt(l))))):(x=u&~d,x!==0?o=Vt(x):_!==0?o=Vt(_):l||(l=u&~e,l!==0&&(o=Vt(l)))),o===0?0:a!==0&&a!==o&&(a&d)===0&&(d=o&-o,l=a&-a,d>=l||d===32&&(l&4194048)!==0)?a:o}function Bt(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function Ar(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ui(){var e=pn;return pn<<=1,(pn&4194048)===0&&(pn=256),e}function ka(){var e=vn;return vn<<=1,(vn&62914560)===0&&(vn=4194304),e}function Tr(e){for(var a=[],l=0;31>l;l++)a.push(e);return a}function $a(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ua(e,a,l,u,o,d){var _=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var x=e.entanglements,z=e.expirationTimes,Q=e.hiddenUpdates;for(l=_&~l;0<l;){var ae=31-ot(l),se=1<<ae;x[ae]=0,z[ae]=-1;var I=Q[ae];if(I!==null)for(Q[ae]=null,ae=0;ae<I.length;ae++){var K=I[ae];K!==null&&(K.lane&=-536870913)}l&=~se}u!==0&&uu(e,u,0),d!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=d&~(_&~a))}function uu(e,a,l){e.pendingLanes|=a,e.suspendedLanes&=~a;var u=31-ot(a);e.entangledLanes|=a,e.entanglements[u]=e.entanglements[u]|1073741824|l&4194090}function cu(e,a){var l=e.entangledLanes|=a;for(e=e.entanglements;l;){var u=31-ot(l),o=1<<u;o&a|e[u]&a&&(e[u]|=a),l&=~o}}function wl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ou(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:qp(e.type))}function ko(e,a){var l=Y.p;try{return Y.p=e,a()}finally{Y.p=l}}var Fn=Math.random().toString(36).slice(2),St="__reactFiber$"+Fn,Lt="__reactProps$"+Fn,Ya="__reactContainer$"+Fn,Sl="__reactEvents$"+Fn,$o="__reactListeners$"+Fn,Yo="__reactHandles$"+Fn,fu="__reactResources$"+Fn,Mr="__reactMarker$"+Fn;function El(e){delete e[St],delete e[Lt],delete e[Sl],delete e[$o],delete e[Yo]}function ca(e){var a=e[St];if(a)return a;for(var l=e.parentNode;l;){if(a=l[Ya]||l[St]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(e=Mp(e);e!==null;){if(l=e[St])return l;e=Mp(e)}return a}e=l,l=e.parentNode}return null}function qa(e){if(e=e[St]||e[Ya]){var a=e.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return e}return null}function Cr(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(i(33))}function Xa(e){var a=e[fu];return a||(a=e[fu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ft(e){e[Mr]=!0}var du=new Set,hu={};function oa(e,a){Va(e,a),Va(e+"Capture",a)}function Va(e,a){for(hu[e]=a,e=0;e<a.length;e++)du.add(a[e])}var mu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gu={},yu={};function qo(e){return le.call(yu,e)?!0:le.call(gu,e)?!1:mu.test(e)?yu[e]=!0:(gu[e]=!0,!1)}function ci(e,a,l){if(qo(a))if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+l)}}function oi(e,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+l)}}function zn(e,a,l,u){if(u===null)e.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(a,l,""+u)}}var fi,pu;function Ga(e){if(fi===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);fi=a&&a[1]||"",pu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fi+e+pu}var Al=!1;function Rr(e,a){if(!e||Al)return"";Al=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(K){var I=K}Reflect.construct(e,[],se)}else{try{se.call()}catch(K){I=K}e.call(se.prototype)}}else{try{throw Error()}catch(K){I=K}(se=e())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(K){if(K&&I&&typeof K.stack=="string")return[K.stack,I.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=u.DetermineComponentFrameRoot(),_=d[0],x=d[1];if(_&&x){var z=_.split(`
`),Q=x.split(`
`);for(o=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;o<Q.length&&!Q[o].includes("DetermineComponentFrameRoot");)o++;if(u===z.length||o===Q.length)for(u=z.length-1,o=Q.length-1;1<=u&&0<=o&&z[u]!==Q[o];)o--;for(;1<=u&&0<=o;u--,o--)if(z[u]!==Q[o]){if(u!==1||o!==1)do if(u--,o--,0>o||z[u]!==Q[o]){var ae=`
`+z[u].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=u&&0<=o);break}}}finally{Al=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?Ga(l):""}function ex(e){switch(e.tag){case 26:case 27:case 5:return Ga(e.type);case 16:return Ga("Lazy");case 13:return Ga("Suspense");case 19:return Ga("SuspenseList");case 0:case 15:return Rr(e.type,!1);case 11:return Rr(e.type.render,!1);case 1:return Rr(e.type,!0);case 31:return Ga("Activity");default:return""}}function yg(e){try{var a="";do a+=ex(e),e=e.return;while(e);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function _n(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pg(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function tx(e){var a=pg(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,a),u=""+e[a];if(!e.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,d=l.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return o.call(this)},set:function(_){u=""+_,d.call(this,_)}}),Object.defineProperty(e,a,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function vu(e){e._valueTracker||(e._valueTracker=tx(e))}function vg(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return e&&(u=pg(e)?e.checked?"true":"false":e.value),e=u,e!==l?(a.setValue(e),!0):!1}function _u(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var nx=/[\n"\\]/g;function bn(e){return e.replace(nx,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Xo(e,a,l,u,o,d,_,x){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),a!=null?_==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+_n(a)):e.value!==""+_n(a)&&(e.value=""+_n(a)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),a!=null?Vo(e,_,_n(a)):l!=null?Vo(e,_,_n(l)):u!=null&&e.removeAttribute("value"),o==null&&d!=null&&(e.defaultChecked=!!d),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+_n(x):e.removeAttribute("name")}function _g(e,a,l,u,o,d,_,x){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),a!=null||l!=null){if(!(d!=="submit"&&d!=="reset"||a!=null))return;l=l!=null?""+_n(l):"",a=a!=null?""+_n(a):l,x||a===e.value||(e.value=a),e.defaultValue=a}u=u??o,u=typeof u!="function"&&typeof u!="symbol"&&!!u,e.checked=x?e.checked:!!u,e.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_)}function Vo(e,a,l){a==="number"&&_u(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function di(e,a,l,u){if(e=e.options,a){a={};for(var o=0;o<l.length;o++)a["$"+l[o]]=!0;for(l=0;l<e.length;l++)o=a.hasOwnProperty("$"+e[l].value),e[l].selected!==o&&(e[l].selected=o),o&&u&&(e[l].defaultSelected=!0)}else{for(l=""+_n(l),a=null,o=0;o<e.length;o++){if(e[o].value===l){e[o].selected=!0,u&&(e[o].defaultSelected=!0);return}a!==null||e[o].disabled||(a=e[o])}a!==null&&(a.selected=!0)}}function bg(e,a,l){if(a!=null&&(a=""+_n(a),a!==e.value&&(e.value=a),l==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=l!=null?""+_n(l):""}function wg(e,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if(Z(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=_n(a),e.defaultValue=l,u=e.textContent,u===l&&u!==""&&u!==null&&(e.value=u)}function hi(e,a){if(a){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=a;return}}e.textContent=a}var ax=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xg(e,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":u?e.setProperty(a,l):typeof l!="number"||l===0||ax.has(a)?a==="float"?e.cssFloat=l:e[a]=(""+l).trim():e[a]=l+"px"}function Sg(e,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(e=e.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?e.setProperty(u,""):u==="float"?e.cssFloat="":e[u]="");for(var o in a)u=a[o],a.hasOwnProperty(o)&&l[o]!==u&&xg(e,o,u)}else for(var d in a)a.hasOwnProperty(d)&&xg(e,d,a[d])}function Go(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ix=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bu(e){return ix.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Qo=null;function Zo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mi=null,gi=null;function Eg(e){var a=qa(e);if(a&&(e=a.stateNode)){var l=e[Lt]||null;e:switch(e=a.stateNode,a.type){case"input":if(Xo(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+bn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==e&&u.form===e.form){var o=u[Lt]||null;if(!o)throw Error(i(90));Xo(u,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===e.form&&vg(u)}break e;case"textarea":bg(e,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&di(e,!!l.multiple,a,!1)}}}var Fo=!1;function Ag(e,a,l){if(Fo)return e(a,l);Fo=!0;try{var u=e(a);return u}finally{if(Fo=!1,(mi!==null||gi!==null)&&(ic(),mi&&(a=mi,e=gi,gi=mi=null,Eg(a),e)))for(a=0;a<e.length;a++)Eg(e[a])}}function Tl(e,a){var l=e.stateNode;if(l===null)return null;var u=l[Lt]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Io=!1;if(fa)try{var Ml={};Object.defineProperty(Ml,"passive",{get:function(){Io=!0}}),window.addEventListener("test",Ml,Ml),window.removeEventListener("test",Ml,Ml)}catch{Io=!1}var Qa=null,Ko=null,wu=null;function Tg(){if(wu)return wu;var e,a=Ko,l=a.length,u,o="value"in Qa?Qa.value:Qa.textContent,d=o.length;for(e=0;e<l&&a[e]===o[e];e++);var _=l-e;for(u=1;u<=_&&a[l-u]===o[d-u];u++);return wu=o.slice(e,1<u?1-u:void 0)}function xu(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function Su(){return!0}function Mg(){return!1}function Zt(e){function a(l,u,o,d,_){this._reactName=l,this._targetInst=o,this.type=u,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(l=e[x],this[x]=l?l(d):d[x]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Su:Mg,this.isPropagationStopped=Mg,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Su)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Su)},persist:function(){},isPersistent:Su}),a}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eu=Zt(Nr),Cl=y({},Nr,{view:0,detail:0}),lx=Zt(Cl),Jo,Po,Rl,Au=y({},Cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ef,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rl&&(Rl&&e.type==="mousemove"?(Jo=e.screenX-Rl.screenX,Po=e.screenY-Rl.screenY):Po=Jo=0,Rl=e),Jo)},movementY:function(e){return"movementY"in e?e.movementY:Po}}),Cg=Zt(Au),sx=y({},Au,{dataTransfer:0}),ux=Zt(sx),cx=y({},Cl,{relatedTarget:0}),Wo=Zt(cx),ox=y({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),fx=Zt(ox),dx=y({},Nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hx=Zt(dx),mx=y({},Nr,{data:0}),Rg=Zt(mx),gx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},px={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vx(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=px[e])?!!a[e]:!1}function ef(){return vx}var _x=y({},Cl,{key:function(e){if(e.key){var a=gx[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=xu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ef,charCode:function(e){return e.type==="keypress"?xu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bx=Zt(_x),wx=y({},Au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ng=Zt(wx),xx=y({},Cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ef}),Sx=Zt(xx),Ex=y({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ax=Zt(Ex),Tx=y({},Au,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mx=Zt(Tx),Cx=y({},Nr,{newState:0,oldState:0}),Rx=Zt(Cx),Nx=[9,13,27,32],tf=fa&&"CompositionEvent"in window,Nl=null;fa&&"documentMode"in document&&(Nl=document.documentMode);var Dx=fa&&"TextEvent"in window&&!Nl,Dg=fa&&(!tf||Nl&&8<Nl&&11>=Nl),Og=" ",zg=!1;function Ug(e,a){switch(e){case"keyup":return Nx.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yi=!1;function Ox(e,a){switch(e){case"compositionend":return jg(a);case"keypress":return a.which!==32?null:(zg=!0,Og);case"textInput":return e=a.data,e===Og&&zg?null:e;default:return null}}function zx(e,a){if(yi)return e==="compositionend"||!tf&&Ug(e,a)?(e=Tg(),wu=Ko=Qa=null,yi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Dg&&a.locale!=="ko"?null:a.data;default:return null}}var Ux={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hg(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!Ux[e.type]:a==="textarea"}function Bg(e,a,l,u){mi?gi?gi.push(u):gi=[u]:mi=u,a=fc(a,"onChange"),0<a.length&&(l=new Eu("onChange","change",null,l,u),e.push({event:l,listeners:a}))}var Dl=null,Ol=null;function jx(e){pp(e,0)}function Tu(e){var a=Cr(e);if(vg(a))return e}function Lg(e,a){if(e==="change")return a}var kg=!1;if(fa){var nf;if(fa){var af="oninput"in document;if(!af){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),af=typeof $g.oninput=="function"}nf=af}else nf=!1;kg=nf&&(!document.documentMode||9<document.documentMode)}function Yg(){Dl&&(Dl.detachEvent("onpropertychange",qg),Ol=Dl=null)}function qg(e){if(e.propertyName==="value"&&Tu(Ol)){var a=[];Bg(a,Ol,e,Zo(e)),Ag(jx,a)}}function Hx(e,a,l){e==="focusin"?(Yg(),Dl=a,Ol=l,Dl.attachEvent("onpropertychange",qg)):e==="focusout"&&Yg()}function Bx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tu(Ol)}function Lx(e,a){if(e==="click")return Tu(a)}function kx(e,a){if(e==="input"||e==="change")return Tu(a)}function $x(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var an=typeof Object.is=="function"?Object.is:$x;function zl(e,a){if(an(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var l=Object.keys(e),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var o=l[u];if(!le.call(a,o)||!an(e[o],a[o]))return!1}return!0}function Xg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vg(e,a){var l=Xg(e);e=0;for(var u;l;){if(l.nodeType===3){if(u=e+l.textContent.length,e<=a&&u>=a)return{node:l,offset:a-e};e=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Xg(l)}}function Gg(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Gg(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Qg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=_u(e.document);a instanceof e.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)e=a.contentWindow;else break;a=_u(e.document)}return a}function rf(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var Yx=fa&&"documentMode"in document&&11>=document.documentMode,pi=null,lf=null,Ul=null,sf=!1;function Zg(e,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;sf||pi==null||pi!==_u(u)||(u=pi,"selectionStart"in u&&rf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ul&&zl(Ul,u)||(Ul=u,u=fc(lf,"onSelect"),0<u.length&&(a=new Eu("onSelect","select",null,a,l),e.push({event:a,listeners:u}),a.target=pi)))}function Dr(e,a){var l={};return l[e.toLowerCase()]=a.toLowerCase(),l["Webkit"+e]="webkit"+a,l["Moz"+e]="moz"+a,l}var vi={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionrun:Dr("Transition","TransitionRun"),transitionstart:Dr("Transition","TransitionStart"),transitioncancel:Dr("Transition","TransitionCancel"),transitionend:Dr("Transition","TransitionEnd")},uf={},Fg={};fa&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function Or(e){if(uf[e])return uf[e];if(!vi[e])return e;var a=vi[e],l;for(l in a)if(a.hasOwnProperty(l)&&l in Fg)return uf[e]=a[l];return e}var Ig=Or("animationend"),Kg=Or("animationiteration"),Jg=Or("animationstart"),qx=Or("transitionrun"),Xx=Or("transitionstart"),Vx=Or("transitioncancel"),Pg=Or("transitionend"),Wg=new Map,cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cf.push("scrollEnd");function Un(e,a){Wg.set(e,a),oa(a,[e])}var e0=new WeakMap;function wn(e,a){if(typeof e=="object"&&e!==null){var l=e0.get(e);return l!==void 0?l:(a={value:e,source:a,stack:yg(a)},e0.set(e,a),a)}return{value:e,source:a,stack:yg(a)}}var xn=[],_i=0,of=0;function Mu(){for(var e=_i,a=of=_i=0;a<e;){var l=xn[a];xn[a++]=null;var u=xn[a];xn[a++]=null;var o=xn[a];xn[a++]=null;var d=xn[a];if(xn[a++]=null,u!==null&&o!==null){var _=u.pending;_===null?o.next=o:(o.next=_.next,_.next=o),u.pending=o}d!==0&&t0(l,o,d)}}function Cu(e,a,l,u){xn[_i++]=e,xn[_i++]=a,xn[_i++]=l,xn[_i++]=u,of|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function ff(e,a,l,u){return Cu(e,a,l,u),Ru(e)}function bi(e,a){return Cu(e,null,null,a),Ru(e)}function t0(e,a,l){e.lanes|=l;var u=e.alternate;u!==null&&(u.lanes|=l);for(var o=!1,d=e.return;d!==null;)d.childLanes|=l,u=d.alternate,u!==null&&(u.childLanes|=l),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(o=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,o&&a!==null&&(o=31-ot(l),e=d.hiddenUpdates,u=e[o],u===null?e[o]=[a]:u.push(a),a.lane=l|536870912),d):null}function Ru(e){if(50<is)throw is=0,pd=null,Error(i(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var wi={};function Gx(e,a,l,u){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(e,a,l,u){return new Gx(e,a,l,u)}function df(e){return e=e.prototype,!(!e||!e.isReactComponent)}function da(e,a){var l=e.alternate;return l===null?(l=rn(e.tag,a,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=a,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,a=e.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function n0(e,a){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,a=l.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Nu(e,a,l,u,o,d){var _=0;if(u=e,typeof e=="function")df(e)&&(_=1);else if(typeof e=="string")_=ZS(e,l,re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case X:return e=rn(31,l,a,o),e.elementType=X,e.lanes=d,e;case S:return zr(l.children,o,d,a);case w:_=8,o|=24;break;case C:return e=rn(12,l,a,o|2),e.elementType=C,e.lanes=d,e;case H:return e=rn(13,l,a,o),e.elementType=H,e.lanes=d,e;case j:return e=rn(19,l,a,o),e.elementType=j,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:case O:_=10;break e;case T:_=9;break e;case M:_=11;break e;case k:_=14;break e;case F:_=16,u=null;break e}_=29,l=Error(i(130,e===null?"null":typeof e,"")),u=null}return a=rn(_,l,a,o),a.elementType=e,a.type=u,a.lanes=d,a}function zr(e,a,l,u){return e=rn(7,e,u,a),e.lanes=l,e}function hf(e,a,l){return e=rn(6,e,null,a),e.lanes=l,e}function mf(e,a,l){return a=rn(4,e.children!==null?e.children:[],e.key,a),a.lanes=l,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var xi=[],Si=0,Du=null,Ou=0,Sn=[],En=0,Ur=null,ha=1,ma="";function jr(e,a){xi[Si++]=Ou,xi[Si++]=Du,Du=e,Ou=a}function a0(e,a,l){Sn[En++]=ha,Sn[En++]=ma,Sn[En++]=Ur,Ur=e;var u=ha;e=ma;var o=32-ot(u)-1;u&=~(1<<o),l+=1;var d=32-ot(a)+o;if(30<d){var _=o-o%5;d=(u&(1<<_)-1).toString(32),u>>=_,o-=_,ha=1<<32-ot(a)+o|l<<o|u,ma=d+e}else ha=1<<d|l<<o|u,ma=e}function gf(e){e.return!==null&&(jr(e,1),a0(e,1,0))}function yf(e){for(;e===Du;)Du=xi[--Si],xi[Si]=null,Ou=xi[--Si],xi[Si]=null;for(;e===Ur;)Ur=Sn[--En],Sn[En]=null,ma=Sn[--En],Sn[En]=null,ha=Sn[--En],Sn[En]=null}var Gt=null,at=null,$e=!1,Hr=null,In=!1,pf=Error(i(519));function Br(e){var a=Error(i(418,""));throw Bl(wn(a,e)),pf}function r0(e){var a=e.stateNode,l=e.type,u=e.memoizedProps;switch(a[St]=e,a[Lt]=u,l){case"dialog":je("cancel",a),je("close",a);break;case"iframe":case"object":case"embed":je("load",a);break;case"video":case"audio":for(l=0;l<ss.length;l++)je(ss[l],a);break;case"source":je("error",a);break;case"img":case"image":case"link":je("error",a),je("load",a);break;case"details":je("toggle",a);break;case"input":je("invalid",a),_g(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),vu(a);break;case"select":je("invalid",a);break;case"textarea":je("invalid",a),wg(a,u.value,u.defaultValue,u.children),vu(a)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||wp(a.textContent,l)?(u.popover!=null&&(je("beforetoggle",a),je("toggle",a)),u.onScroll!=null&&je("scroll",a),u.onScrollEnd!=null&&je("scrollend",a),u.onClick!=null&&(a.onclick=dc),a=!0):a=!1,a||Br(e)}function i0(e){for(Gt=e.return;Gt;)switch(Gt.tag){case 5:case 13:In=!1;return;case 27:case 3:In=!0;return;default:Gt=Gt.return}}function jl(e){if(e!==Gt)return!1;if(!$e)return i0(e),$e=!0,!1;var a=e.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||zd(e.type,e.memoizedProps)),l=!l),l&&at&&Br(e),i0(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,a=0;e;){if(e.nodeType===8)if(l=e.data,l==="/$"){if(a===0){at=Hn(e.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;e=e.nextSibling}at=null}}else a===27?(a=at,ur(e.type)?(e=Bd,Bd=null,at=e):at=a):at=Gt?Hn(e.stateNode.nextSibling):null;return!0}function Hl(){at=Gt=null,$e=!1}function l0(){var e=Hr;return e!==null&&(Kt===null?Kt=e:Kt.push.apply(Kt,e),Hr=null),e}function Bl(e){Hr===null?Hr=[e]:Hr.push(e)}var vf=L(null),Lr=null,ga=null;function Za(e,a,l){P(vf,a._currentValue),a._currentValue=l}function ya(e){e._currentValue=vf.current,G(vf)}function _f(e,a,l){for(;e!==null;){var u=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),e===l)break;e=e.return}}function bf(e,a,l,u){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){var _=o.child;d=d.firstContext;e:for(;d!==null;){var x=d;d=o;for(var z=0;z<a.length;z++)if(x.context===a[z]){d.lanes|=l,x=d.alternate,x!==null&&(x.lanes|=l),_f(d.return,l,e),u||(_=null);break e}d=x.next}}else if(o.tag===18){if(_=o.return,_===null)throw Error(i(341));_.lanes|=l,d=_.alternate,d!==null&&(d.lanes|=l),_f(_,l,e),_=null}else _=o.child;if(_!==null)_.return=o;else for(_=o;_!==null;){if(_===e){_=null;break}if(o=_.sibling,o!==null){o.return=_.return,_=o;break}_=_.return}o=_}}function Ll(e,a,l,u){e=null;for(var o=a,d=!1;o!==null;){if(!d){if((o.flags&524288)!==0)d=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var _=o.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var x=o.type;an(o.pendingProps.value,_.value)||(e!==null?e.push(x):e=[x])}}else if(o===be.current){if(_=o.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(hs):e=[hs])}o=o.return}e!==null&&bf(a,e,l,u),a.flags|=262144}function zu(e){for(e=e.firstContext;e!==null;){if(!an(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function kr(e){Lr=e,ga=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function kt(e){return s0(Lr,e)}function Uu(e,a){return Lr===null&&kr(e),s0(e,a)}function s0(e,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},ga===null){if(e===null)throw Error(i(308));ga=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else ga=ga.next=a;return l}var Qx=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(l,u){e.push(u)}};this.abort=function(){a.aborted=!0,e.forEach(function(l){return l()})}},Zx=t.unstable_scheduleCallback,Fx=t.unstable_NormalPriority,mt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wf(){return{controller:new Qx,data:new Map,refCount:0}}function kl(e){e.refCount--,e.refCount===0&&Zx(Fx,function(){e.controller.abort()})}var $l=null,xf=0,Ei=0,Ai=null;function Ix(e,a){if($l===null){var l=$l=[];xf=0,Ei=Ed(),Ai={status:"pending",value:void 0,then:function(u){l.push(u)}}}return xf++,a.then(u0,u0),a}function u0(){if(--xf===0&&$l!==null){Ai!==null&&(Ai.status="fulfilled");var e=$l;$l=null,Ei=0,Ai=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function Kx(e,a){var l=[],u={status:"pending",value:null,reason:null,then:function(o){l.push(o)}};return e.then(function(){u.status="fulfilled",u.value=a;for(var o=0;o<l.length;o++)(0,l[o])(a)},function(o){for(u.status="rejected",u.reason=o,o=0;o<l.length;o++)(0,l[o])(void 0)}),u}var c0=R.S;R.S=function(e,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Ix(e,a),c0!==null&&c0(e,a)};var $r=L(null);function Sf(){var e=$r.current;return e!==null?e:Je.pooledCache}function ju(e,a){a===null?P($r,$r.current):P($r,a.pool)}function o0(){var e=Sf();return e===null?null:{parent:mt._currentValue,pool:e}}var Yl=Error(i(460)),f0=Error(i(474)),Hu=Error(i(542)),Ef={then:function(){}};function d0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Bu(){}function h0(e,a,l){switch(l=e[l],l===void 0?e.push(a):l!==a&&(a.then(Bu,Bu),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,g0(e),e;default:if(typeof a.status=="string")a.then(Bu,Bu);else{if(e=Je,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=a,e.status="pending",e.then(function(u){if(a.status==="pending"){var o=a;o.status="fulfilled",o.value=u}},function(u){if(a.status==="pending"){var o=a;o.status="rejected",o.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,g0(e),e}throw ql=a,Yl}}var ql=null;function m0(){if(ql===null)throw Error(i(459));var e=ql;return ql=null,e}function g0(e){if(e===Yl||e===Hu)throw Error(i(483))}var Fa=!1;function Af(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ka(e,a,l){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(qe&2)!==0){var o=u.pending;return o===null?a.next=a:(a.next=o.next,o.next=a),u.pending=a,a=Ru(e),t0(e,null,l),a}return Cu(e,u,a,l),Ru(e)}function Xl(e,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=e.pendingLanes,l|=u,a.lanes=l,cu(e,l)}}function Mf(e,a){var l=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var o=null,d=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};d===null?o=d=_:d=d.next=_,l=l.next}while(l!==null);d===null?o=d=a:d=d.next=a}else o=d=a;l={baseState:u.baseState,firstBaseUpdate:o,lastBaseUpdate:d,shared:u.shared,callbacks:u.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=a:e.next=a,l.lastBaseUpdate=a}var Cf=!1;function Vl(){if(Cf){var e=Ai;if(e!==null)throw e}}function Gl(e,a,l,u){Cf=!1;var o=e.updateQueue;Fa=!1;var d=o.firstBaseUpdate,_=o.lastBaseUpdate,x=o.shared.pending;if(x!==null){o.shared.pending=null;var z=x,Q=z.next;z.next=null,_===null?d=Q:_.next=Q,_=z;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,x=ae.lastBaseUpdate,x!==_&&(x===null?ae.firstBaseUpdate=Q:x.next=Q,ae.lastBaseUpdate=z))}if(d!==null){var se=o.baseState;_=0,ae=Q=z=null,x=d;do{var I=x.lane&-536870913,K=I!==x.lane;if(K?(Be&I)===I:(u&I)===I){I!==0&&I===Ei&&(Cf=!0),ae!==null&&(ae=ae.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Ee=e,we=x;I=a;var Ze=l;switch(we.tag){case 1:if(Ee=we.payload,typeof Ee=="function"){se=Ee.call(Ze,se,I);break e}se=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=we.payload,I=typeof Ee=="function"?Ee.call(Ze,se,I):Ee,I==null)break e;se=y({},se,I);break e;case 2:Fa=!0}}I=x.callback,I!==null&&(e.flags|=64,K&&(e.flags|=8192),K=o.callbacks,K===null?o.callbacks=[I]:K.push(I))}else K={lane:I,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ae===null?(Q=ae=K,z=se):ae=ae.next=K,_|=I;if(x=x.next,x===null){if(x=o.shared.pending,x===null)break;K=x,x=K.next,K.next=null,o.lastBaseUpdate=K,o.shared.pending=null}}while(!0);ae===null&&(z=se),o.baseState=z,o.firstBaseUpdate=Q,o.lastBaseUpdate=ae,d===null&&(o.shared.lanes=0),rr|=_,e.lanes=_,e.memoizedState=se}}function y0(e,a){if(typeof e!="function")throw Error(i(191,e));e.call(a)}function p0(e,a){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)y0(l[e],a)}var Ti=L(null),Lu=L(0);function v0(e,a){e=Sa,P(Lu,e),P(Ti,a),Sa=e|a.baseLanes}function Rf(){P(Lu,Sa),P(Ti,Ti.current)}function Nf(){Sa=Lu.current,G(Ti),G(Lu)}var Ja=0,Ne=null,Ge=null,dt=null,ku=!1,Mi=!1,Yr=!1,$u=0,Ql=0,Ci=null,Jx=0;function st(){throw Error(i(321))}function Df(e,a){if(a===null)return!1;for(var l=0;l<a.length&&l<e.length;l++)if(!an(e[l],a[l]))return!1;return!0}function Of(e,a,l,u,o,d){return Ja=d,Ne=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,R.H=e===null||e.memoizedState===null?ty:ny,Yr=!1,d=l(u,o),Yr=!1,Mi&&(d=b0(a,l,u,o)),_0(e),d}function _0(e){R.H=Qu;var a=Ge!==null&&Ge.next!==null;if(Ja=0,dt=Ge=Ne=null,ku=!1,Ql=0,Ci=null,a)throw Error(i(300));e===null||Et||(e=e.dependencies,e!==null&&zu(e)&&(Et=!0))}function b0(e,a,l,u){Ne=e;var o=0;do{if(Mi&&(Ci=null),Ql=0,Mi=!1,25<=o)throw Error(i(301));if(o+=1,dt=Ge=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}R.H=rS,d=a(l,u)}while(Mi);return d}function Px(){var e=R.H,a=e.useState()[0];return a=typeof a.then=="function"?Zl(a):a,e=e.useState()[0],(Ge!==null?Ge.memoizedState:null)!==e&&(Ne.flags|=1024),a}function zf(){var e=$u!==0;return $u=0,e}function Uf(e,a,l){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~l}function jf(e){if(ku){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}ku=!1}Ja=0,dt=Ge=Ne=null,Mi=!1,Ql=$u=0,Ci=null}function Ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ne.memoizedState=dt=e:dt=dt.next=e,dt}function ht(){if(Ge===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var a=dt===null?Ne.memoizedState:dt.next;if(a!==null)dt=a,Ge=e;else{if(e===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},dt===null?Ne.memoizedState=dt=e:dt=dt.next=e}return dt}function Hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(e){var a=Ql;return Ql+=1,Ci===null&&(Ci=[]),e=h0(Ci,e,a),a=Ne,(dt===null?a.memoizedState:dt.next)===null&&(a=a.alternate,R.H=a===null||a.memoizedState===null?ty:ny),e}function Yu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Zl(e);if(e.$$typeof===O)return kt(e)}throw Error(i(438,String(e)))}function Bf(e){var a=null,l=Ne.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(o){return o.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Hf(),Ne.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(e),u=0;u<e;u++)l[u]=ee;return a.index++,l}function pa(e,a){return typeof a=="function"?a(e):a}function qu(e){var a=ht();return Lf(a,Ge,e)}function Lf(e,a,l){var u=e.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var o=e.baseQueue,d=u.pending;if(d!==null){if(o!==null){var _=o.next;o.next=d.next,d.next=_}a.baseQueue=o=d,u.pending=null}if(d=e.baseState,o===null)e.memoizedState=d;else{a=o.next;var x=_=null,z=null,Q=a,ae=!1;do{var se=Q.lane&-536870913;if(se!==Q.lane?(Be&se)===se:(Ja&se)===se){var I=Q.revertLane;if(I===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),se===Ei&&(ae=!0);else if((Ja&I)===I){Q=Q.next,I===Ei&&(ae=!0);continue}else se={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(x=z=se,_=d):z=z.next=se,Ne.lanes|=I,rr|=I;se=Q.action,Yr&&l(d,se),d=Q.hasEagerState?Q.eagerState:l(d,se)}else I={lane:se,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(x=z=I,_=d):z=z.next=I,Ne.lanes|=se,rr|=se;Q=Q.next}while(Q!==null&&Q!==a);if(z===null?_=d:z.next=x,!an(d,e.memoizedState)&&(Et=!0,ae&&(l=Ai,l!==null)))throw l;e.memoizedState=d,e.baseState=_,e.baseQueue=z,u.lastRenderedState=d}return o===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function kf(e){var a=ht(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=e;var u=l.dispatch,o=l.pending,d=a.memoizedState;if(o!==null){l.pending=null;var _=o=o.next;do d=e(d,_.action),_=_.next;while(_!==o);an(d,a.memoizedState)||(Et=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),l.lastRenderedState=d}return[d,u]}function w0(e,a,l){var u=Ne,o=ht(),d=$e;if(d){if(l===void 0)throw Error(i(407));l=l()}else l=a();var _=!an((Ge||o).memoizedState,l);_&&(o.memoizedState=l,Et=!0),o=o.queue;var x=E0.bind(null,u,o,e);if(Fl(2048,8,x,[e]),o.getSnapshot!==a||_||dt!==null&&dt.memoizedState.tag&1){if(u.flags|=2048,Ri(9,Xu(),S0.bind(null,u,o,l,a),null),Je===null)throw Error(i(349));d||(Ja&124)!==0||x0(u,a,l)}return l}function x0(e,a,l){e.flags|=16384,e={getSnapshot:a,value:l},a=Ne.updateQueue,a===null?(a=Hf(),Ne.updateQueue=a,a.stores=[e]):(l=a.stores,l===null?a.stores=[e]:l.push(e))}function S0(e,a,l,u){a.value=l,a.getSnapshot=u,A0(a)&&T0(e)}function E0(e,a,l){return l(function(){A0(a)&&T0(e)})}function A0(e){var a=e.getSnapshot;e=e.value;try{var l=a();return!an(e,l)}catch{return!0}}function T0(e){var a=bi(e,2);a!==null&&on(a,e,2)}function $f(e){var a=Ft();if(typeof e=="function"){var l=e;if(e=l(),Yr){Xt(!0);try{l()}finally{Xt(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:e},a}function M0(e,a,l,u){return e.baseState=l,Lf(e,Ge,typeof u=="function"?u:pa)}function Wx(e,a,l,u,o){if(Gu(e))throw Error(i(485));if(e=a.action,e!==null){var d={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};R.T!==null?l(!0):d.isTransition=!1,u(d),l=a.pending,l===null?(d.next=a.pending=d,C0(a,d)):(d.next=l.next,a.pending=l.next=d)}}function C0(e,a){var l=a.action,u=a.payload,o=e.state;if(a.isTransition){var d=R.T,_={};R.T=_;try{var x=l(o,u),z=R.S;z!==null&&z(_,x),R0(e,a,x)}catch(Q){Yf(e,a,Q)}finally{R.T=d}}else try{d=l(o,u),R0(e,a,d)}catch(Q){Yf(e,a,Q)}}function R0(e,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){N0(e,a,u)},function(u){return Yf(e,a,u)}):N0(e,a,l)}function N0(e,a,l){a.status="fulfilled",a.value=l,D0(a),e.state=l,a=e.pending,a!==null&&(l=a.next,l===a?e.pending=null:(l=l.next,a.next=l,C0(e,l)))}function Yf(e,a,l){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,D0(a),a=a.next;while(a!==u)}e.action=null}function D0(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function O0(e,a){return a}function z0(e,a){if($e){var l=Je.formState;if(l!==null){e:{var u=Ne;if($e){if(at){t:{for(var o=at,d=In;o.nodeType!==8;){if(!d){o=null;break t}if(o=Hn(o.nextSibling),o===null){o=null;break t}}d=o.data,o=d==="F!"||d==="F"?o:null}if(o){at=Hn(o.nextSibling),u=o.data==="F!";break e}}Br(u)}u=!1}u&&(a=l[0])}}return l=Ft(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:O0,lastRenderedState:a},l.queue=u,l=P0.bind(null,Ne,u),u.dispatch=l,u=$f(!1),d=Qf.bind(null,Ne,!1,u.queue),u=Ft(),o={state:a,dispatch:null,action:e,pending:null},u.queue=o,l=Wx.bind(null,Ne,o,d,l),o.dispatch=l,u.memoizedState=e,[a,l,!1]}function U0(e){var a=ht();return j0(a,Ge,e)}function j0(e,a,l){if(a=Lf(e,a,O0)[0],e=qu(pa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Zl(a)}catch(_){throw _===Yl?Hu:_}else u=a;a=ht();var o=a.queue,d=o.dispatch;return l!==a.memoizedState&&(Ne.flags|=2048,Ri(9,Xu(),eS.bind(null,o,l),null)),[u,d,e]}function eS(e,a){e.action=a}function H0(e){var a=ht(),l=Ge;if(l!==null)return j0(a,l,e);ht(),a=a.memoizedState,l=ht();var u=l.queue.dispatch;return l.memoizedState=e,[a,u,!1]}function Ri(e,a,l,u){return e={tag:e,create:l,deps:u,inst:a,next:null},a=Ne.updateQueue,a===null&&(a=Hf(),Ne.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=e.next=e:(u=l.next,l.next=e,e.next=u,a.lastEffect=e),e}function Xu(){return{destroy:void 0,resource:void 0}}function B0(){return ht().memoizedState}function Vu(e,a,l,u){var o=Ft();u=u===void 0?null:u,Ne.flags|=e,o.memoizedState=Ri(1|a,Xu(),l,u)}function Fl(e,a,l,u){var o=ht();u=u===void 0?null:u;var d=o.memoizedState.inst;Ge!==null&&u!==null&&Df(u,Ge.memoizedState.deps)?o.memoizedState=Ri(a,d,l,u):(Ne.flags|=e,o.memoizedState=Ri(1|a,d,l,u))}function L0(e,a){Vu(8390656,8,e,a)}function k0(e,a){Fl(2048,8,e,a)}function $0(e,a){return Fl(4,2,e,a)}function Y0(e,a){return Fl(4,4,e,a)}function q0(e,a){if(typeof a=="function"){e=e();var l=a(e);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function X0(e,a,l){l=l!=null?l.concat([e]):null,Fl(4,4,q0.bind(null,a,e),l)}function qf(){}function V0(e,a){var l=ht();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Df(a,u[1])?u[0]:(l.memoizedState=[e,a],e)}function G0(e,a){var l=ht();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Df(a,u[1]))return u[0];if(u=e(),Yr){Xt(!0);try{e()}finally{Xt(!1)}}return l.memoizedState=[u,a],u}function Xf(e,a,l){return l===void 0||(Ja&1073741824)!==0?e.memoizedState=a:(e.memoizedState=l,e=Fy(),Ne.lanes|=e,rr|=e,l)}function Q0(e,a,l,u){return an(l,a)?l:Ti.current!==null?(e=Xf(e,l,u),an(e,a)||(Et=!0),e):(Ja&42)===0?(Et=!0,e.memoizedState=l):(e=Fy(),Ne.lanes|=e,rr|=e,a)}function Z0(e,a,l,u,o){var d=Y.p;Y.p=d!==0&&8>d?d:8;var _=R.T,x={};R.T=x,Qf(e,!1,a,l);try{var z=o(),Q=R.S;if(Q!==null&&Q(x,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ae=Kx(z,u);Il(e,a,ae,cn(e))}else Il(e,a,u,cn(e))}catch(se){Il(e,a,{then:function(){},status:"rejected",reason:se},cn())}finally{Y.p=d,R.T=_}}function tS(){}function Vf(e,a,l,u){if(e.tag!==5)throw Error(i(476));var o=F0(e).queue;Z0(e,o,a,J,l===null?tS:function(){return I0(e),l(u)})}function F0(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:J},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:l},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function I0(e){var a=F0(e).next.queue;Il(e,a,{},cn())}function Gf(){return kt(hs)}function K0(){return ht().memoizedState}function J0(){return ht().memoizedState}function nS(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var l=cn();e=Ia(l);var u=Ka(a,e,l);u!==null&&(on(u,a,l),Xl(u,a,l)),a={cache:wf()},e.payload=a;return}a=a.return}}function aS(e,a,l){var u=cn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Gu(e)?W0(a,l):(l=ff(e,a,l,u),l!==null&&(on(l,e,u),ey(l,a,u)))}function P0(e,a,l){var u=cn();Il(e,a,l,u)}function Il(e,a,l,u){var o={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Gu(e))W0(a,o);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var _=a.lastRenderedState,x=d(_,l);if(o.hasEagerState=!0,o.eagerState=x,an(x,_))return Cu(e,a,o,0),Je===null&&Mu(),!1}catch{}finally{}if(l=ff(e,a,o,u),l!==null)return on(l,e,u),ey(l,a,u),!0}return!1}function Qf(e,a,l,u){if(u={lane:2,revertLane:Ed(),action:u,hasEagerState:!1,eagerState:null,next:null},Gu(e)){if(a)throw Error(i(479))}else a=ff(e,l,u,2),a!==null&&on(a,e,2)}function Gu(e){var a=e.alternate;return e===Ne||a!==null&&a===Ne}function W0(e,a){Mi=ku=!0;var l=e.pending;l===null?a.next=a:(a.next=l.next,l.next=a),e.pending=a}function ey(e,a,l){if((l&4194048)!==0){var u=a.lanes;u&=e.pendingLanes,l|=u,a.lanes=l,cu(e,l)}}var Qu={readContext:kt,use:Yu,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st},ty={readContext:kt,use:Yu,useCallback:function(e,a){return Ft().memoizedState=[e,a===void 0?null:a],e},useContext:kt,useEffect:L0,useImperativeHandle:function(e,a,l){l=l!=null?l.concat([e]):null,Vu(4194308,4,q0.bind(null,a,e),l)},useLayoutEffect:function(e,a){return Vu(4194308,4,e,a)},useInsertionEffect:function(e,a){Vu(4,2,e,a)},useMemo:function(e,a){var l=Ft();a=a===void 0?null:a;var u=e();if(Yr){Xt(!0);try{e()}finally{Xt(!1)}}return l.memoizedState=[u,a],u},useReducer:function(e,a,l){var u=Ft();if(l!==void 0){var o=l(a);if(Yr){Xt(!0);try{l(a)}finally{Xt(!1)}}}else o=a;return u.memoizedState=u.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},u.queue=e,e=e.dispatch=aS.bind(null,Ne,e),[u.memoizedState,e]},useRef:function(e){var a=Ft();return e={current:e},a.memoizedState=e},useState:function(e){e=$f(e);var a=e.queue,l=P0.bind(null,Ne,a);return a.dispatch=l,[e.memoizedState,l]},useDebugValue:qf,useDeferredValue:function(e,a){var l=Ft();return Xf(l,e,a)},useTransition:function(){var e=$f(!1);return e=Z0.bind(null,Ne,e.queue,!0,!1),Ft().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,l){var u=Ne,o=Ft();if($e){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),Je===null)throw Error(i(349));(Be&124)!==0||x0(u,a,l)}o.memoizedState=l;var d={value:l,getSnapshot:a};return o.queue=d,L0(E0.bind(null,u,d,e),[e]),u.flags|=2048,Ri(9,Xu(),S0.bind(null,u,d,l,a),null),l},useId:function(){var e=Ft(),a=Je.identifierPrefix;if($e){var l=ma,u=ha;l=(u&~(1<<32-ot(u)-1)).toString(32)+l,a="«"+a+"R"+l,l=$u++,0<l&&(a+="H"+l.toString(32)),a+="»"}else l=Jx++,a="«"+a+"r"+l.toString(32)+"»";return e.memoizedState=a},useHostTransitionStatus:Gf,useFormState:z0,useActionState:z0,useOptimistic:function(e){var a=Ft();a.memoizedState=a.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Qf.bind(null,Ne,!0,l),l.dispatch=a,[e,a]},useMemoCache:Bf,useCacheRefresh:function(){return Ft().memoizedState=nS.bind(null,Ne)}},ny={readContext:kt,use:Yu,useCallback:V0,useContext:kt,useEffect:k0,useImperativeHandle:X0,useInsertionEffect:$0,useLayoutEffect:Y0,useMemo:G0,useReducer:qu,useRef:B0,useState:function(){return qu(pa)},useDebugValue:qf,useDeferredValue:function(e,a){var l=ht();return Q0(l,Ge.memoizedState,e,a)},useTransition:function(){var e=qu(pa)[0],a=ht().memoizedState;return[typeof e=="boolean"?e:Zl(e),a]},useSyncExternalStore:w0,useId:K0,useHostTransitionStatus:Gf,useFormState:U0,useActionState:U0,useOptimistic:function(e,a){var l=ht();return M0(l,Ge,e,a)},useMemoCache:Bf,useCacheRefresh:J0},rS={readContext:kt,use:Yu,useCallback:V0,useContext:kt,useEffect:k0,useImperativeHandle:X0,useInsertionEffect:$0,useLayoutEffect:Y0,useMemo:G0,useReducer:kf,useRef:B0,useState:function(){return kf(pa)},useDebugValue:qf,useDeferredValue:function(e,a){var l=ht();return Ge===null?Xf(l,e,a):Q0(l,Ge.memoizedState,e,a)},useTransition:function(){var e=kf(pa)[0],a=ht().memoizedState;return[typeof e=="boolean"?e:Zl(e),a]},useSyncExternalStore:w0,useId:K0,useHostTransitionStatus:Gf,useFormState:H0,useActionState:H0,useOptimistic:function(e,a){var l=ht();return Ge!==null?M0(l,Ge,e,a):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Bf,useCacheRefresh:J0},Ni=null,Kl=0;function Zu(e){var a=Kl;return Kl+=1,Ni===null&&(Ni=[]),h0(Ni,e,a)}function Jl(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Fu(e,a){throw a.$$typeof===p?Error(i(525)):(e=Object.prototype.toString.call(a),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function ay(e){var a=e._init;return a(e._payload)}function ry(e){function a(q,B){if(e){var V=q.deletions;V===null?(q.deletions=[B],q.flags|=16):V.push(B)}}function l(q,B){if(!e)return null;for(;B!==null;)a(q,B),B=B.sibling;return null}function u(q){for(var B=new Map;q!==null;)q.key!==null?B.set(q.key,q):B.set(q.index,q),q=q.sibling;return B}function o(q,B){return q=da(q,B),q.index=0,q.sibling=null,q}function d(q,B,V){return q.index=V,e?(V=q.alternate,V!==null?(V=V.index,V<B?(q.flags|=67108866,B):V):(q.flags|=67108866,B)):(q.flags|=1048576,B)}function _(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function x(q,B,V,ie){return B===null||B.tag!==6?(B=hf(V,q.mode,ie),B.return=q,B):(B=o(B,V),B.return=q,B)}function z(q,B,V,ie){var he=V.type;return he===S?ae(q,B,V.props.children,ie,V.key):B!==null&&(B.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===F&&ay(he)===B.type)?(B=o(B,V.props),Jl(B,V),B.return=q,B):(B=Nu(V.type,V.key,V.props,null,q.mode,ie),Jl(B,V),B.return=q,B)}function Q(q,B,V,ie){return B===null||B.tag!==4||B.stateNode.containerInfo!==V.containerInfo||B.stateNode.implementation!==V.implementation?(B=mf(V,q.mode,ie),B.return=q,B):(B=o(B,V.children||[]),B.return=q,B)}function ae(q,B,V,ie,he){return B===null||B.tag!==7?(B=zr(V,q.mode,ie,he),B.return=q,B):(B=o(B,V),B.return=q,B)}function se(q,B,V){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=hf(""+B,q.mode,V),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case v:return V=Nu(B.type,B.key,B.props,null,q.mode,V),Jl(V,B),V.return=q,V;case b:return B=mf(B,q.mode,V),B.return=q,B;case F:var ie=B._init;return B=ie(B._payload),se(q,B,V)}if(Z(B)||ne(B))return B=zr(B,q.mode,V,null),B.return=q,B;if(typeof B.then=="function")return se(q,Zu(B),V);if(B.$$typeof===O)return se(q,Uu(q,B),V);Fu(q,B)}return null}function I(q,B,V,ie){var he=B!==null?B.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return he!==null?null:x(q,B,""+V,ie);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return V.key===he?z(q,B,V,ie):null;case b:return V.key===he?Q(q,B,V,ie):null;case F:return he=V._init,V=he(V._payload),I(q,B,V,ie)}if(Z(V)||ne(V))return he!==null?null:ae(q,B,V,ie,null);if(typeof V.then=="function")return I(q,B,Zu(V),ie);if(V.$$typeof===O)return I(q,B,Uu(q,V),ie);Fu(q,V)}return null}function K(q,B,V,ie,he){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return q=q.get(V)||null,x(B,q,""+ie,he);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case v:return q=q.get(ie.key===null?V:ie.key)||null,z(B,q,ie,he);case b:return q=q.get(ie.key===null?V:ie.key)||null,Q(B,q,ie,he);case F:var De=ie._init;return ie=De(ie._payload),K(q,B,V,ie,he)}if(Z(ie)||ne(ie))return q=q.get(V)||null,ae(B,q,ie,he,null);if(typeof ie.then=="function")return K(q,B,V,Zu(ie),he);if(ie.$$typeof===O)return K(q,B,V,Uu(B,ie),he);Fu(B,ie)}return null}function Ee(q,B,V,ie){for(var he=null,De=null,ge=B,xe=B=0,Tt=null;ge!==null&&xe<V.length;xe++){ge.index>xe?(Tt=ge,ge=null):Tt=ge.sibling;var Le=I(q,ge,V[xe],ie);if(Le===null){ge===null&&(ge=Tt);break}e&&ge&&Le.alternate===null&&a(q,ge),B=d(Le,B,xe),De===null?he=Le:De.sibling=Le,De=Le,ge=Tt}if(xe===V.length)return l(q,ge),$e&&jr(q,xe),he;if(ge===null){for(;xe<V.length;xe++)ge=se(q,V[xe],ie),ge!==null&&(B=d(ge,B,xe),De===null?he=ge:De.sibling=ge,De=ge);return $e&&jr(q,xe),he}for(ge=u(ge);xe<V.length;xe++)Tt=K(ge,q,xe,V[xe],ie),Tt!==null&&(e&&Tt.alternate!==null&&ge.delete(Tt.key===null?xe:Tt.key),B=d(Tt,B,xe),De===null?he=Tt:De.sibling=Tt,De=Tt);return e&&ge.forEach(function(hr){return a(q,hr)}),$e&&jr(q,xe),he}function we(q,B,V,ie){if(V==null)throw Error(i(151));for(var he=null,De=null,ge=B,xe=B=0,Tt=null,Le=V.next();ge!==null&&!Le.done;xe++,Le=V.next()){ge.index>xe?(Tt=ge,ge=null):Tt=ge.sibling;var hr=I(q,ge,Le.value,ie);if(hr===null){ge===null&&(ge=Tt);break}e&&ge&&hr.alternate===null&&a(q,ge),B=d(hr,B,xe),De===null?he=hr:De.sibling=hr,De=hr,ge=Tt}if(Le.done)return l(q,ge),$e&&jr(q,xe),he;if(ge===null){for(;!Le.done;xe++,Le=V.next())Le=se(q,Le.value,ie),Le!==null&&(B=d(Le,B,xe),De===null?he=Le:De.sibling=Le,De=Le);return $e&&jr(q,xe),he}for(ge=u(ge);!Le.done;xe++,Le=V.next())Le=K(ge,q,xe,Le.value,ie),Le!==null&&(e&&Le.alternate!==null&&ge.delete(Le.key===null?xe:Le.key),B=d(Le,B,xe),De===null?he=Le:De.sibling=Le,De=Le);return e&&ge.forEach(function(iE){return a(q,iE)}),$e&&jr(q,xe),he}function Ze(q,B,V,ie){if(typeof V=="object"&&V!==null&&V.type===S&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case v:e:{for(var he=V.key;B!==null;){if(B.key===he){if(he=V.type,he===S){if(B.tag===7){l(q,B.sibling),ie=o(B,V.props.children),ie.return=q,q=ie;break e}}else if(B.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===F&&ay(he)===B.type){l(q,B.sibling),ie=o(B,V.props),Jl(ie,V),ie.return=q,q=ie;break e}l(q,B);break}else a(q,B);B=B.sibling}V.type===S?(ie=zr(V.props.children,q.mode,ie,V.key),ie.return=q,q=ie):(ie=Nu(V.type,V.key,V.props,null,q.mode,ie),Jl(ie,V),ie.return=q,q=ie)}return _(q);case b:e:{for(he=V.key;B!==null;){if(B.key===he)if(B.tag===4&&B.stateNode.containerInfo===V.containerInfo&&B.stateNode.implementation===V.implementation){l(q,B.sibling),ie=o(B,V.children||[]),ie.return=q,q=ie;break e}else{l(q,B);break}else a(q,B);B=B.sibling}ie=mf(V,q.mode,ie),ie.return=q,q=ie}return _(q);case F:return he=V._init,V=he(V._payload),Ze(q,B,V,ie)}if(Z(V))return Ee(q,B,V,ie);if(ne(V)){if(he=ne(V),typeof he!="function")throw Error(i(150));return V=he.call(V),we(q,B,V,ie)}if(typeof V.then=="function")return Ze(q,B,Zu(V),ie);if(V.$$typeof===O)return Ze(q,B,Uu(q,V),ie);Fu(q,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,B!==null&&B.tag===6?(l(q,B.sibling),ie=o(B,V),ie.return=q,q=ie):(l(q,B),ie=hf(V,q.mode,ie),ie.return=q,q=ie),_(q)):l(q,B)}return function(q,B,V,ie){try{Kl=0;var he=Ze(q,B,V,ie);return Ni=null,he}catch(ge){if(ge===Yl||ge===Hu)throw ge;var De=rn(29,ge,null,q.mode);return De.lanes=ie,De.return=q,De}finally{}}}var Di=ry(!0),iy=ry(!1),An=L(null),Kn=null;function Pa(e){var a=e.alternate;P(gt,gt.current&1),P(An,e),Kn===null&&(a===null||Ti.current!==null||a.memoizedState!==null)&&(Kn=e)}function ly(e){if(e.tag===22){if(P(gt,gt.current),P(An,e),Kn===null){var a=e.alternate;a!==null&&a.memoizedState!==null&&(Kn=e)}}else Wa()}function Wa(){P(gt,gt.current),P(An,An.current)}function va(e){G(An),Kn===e&&(Kn=null),G(gt)}var gt=L(0);function Iu(e){for(var a=e;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Hd(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Zf(e,a,l,u){a=e.memoizedState,l=l(u,a),l=l==null?a:y({},a,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Ff={enqueueSetState:function(e,a,l){e=e._reactInternals;var u=cn(),o=Ia(u);o.payload=a,l!=null&&(o.callback=l),a=Ka(e,o,u),a!==null&&(on(a,e,u),Xl(a,e,u))},enqueueReplaceState:function(e,a,l){e=e._reactInternals;var u=cn(),o=Ia(u);o.tag=1,o.payload=a,l!=null&&(o.callback=l),a=Ka(e,o,u),a!==null&&(on(a,e,u),Xl(a,e,u))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var l=cn(),u=Ia(l);u.tag=2,a!=null&&(u.callback=a),a=Ka(e,u,l),a!==null&&(on(a,e,l),Xl(a,e,l))}};function sy(e,a,l,u,o,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,d,_):a.prototype&&a.prototype.isPureReactComponent?!zl(l,u)||!zl(o,d):!0}function uy(e,a,l,u){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==e&&Ff.enqueueReplaceState(a,a.state,null)}function qr(e,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(e=e.defaultProps){l===a&&(l=y({},l));for(var o in e)l[o]===void 0&&(l[o]=e[o])}return l}var Ku=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function cy(e){Ku(e)}function oy(e){console.error(e)}function fy(e){Ku(e)}function Ju(e,a){try{var l=e.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function dy(e,a,l){try{var u=e.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function If(e,a,l){return l=Ia(l),l.tag=3,l.payload={element:null},l.callback=function(){Ju(e,a)},l}function hy(e){return e=Ia(e),e.tag=3,e}function my(e,a,l,u){var o=l.type.getDerivedStateFromError;if(typeof o=="function"){var d=u.value;e.payload=function(){return o(d)},e.callback=function(){dy(a,l,u)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){dy(a,l,u),typeof o!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var x=u.stack;this.componentDidCatch(u.value,{componentStack:x!==null?x:""})})}function iS(e,a,l,u,o){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&Ll(a,l,o,!0),l=An.current,l!==null){switch(l.tag){case 13:return Kn===null?_d():l.alternate===null&&rt===0&&(rt=3),l.flags&=-257,l.flags|=65536,l.lanes=o,u===Ef?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),wd(e,u,o)),!1;case 22:return l.flags|=65536,u===Ef?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),wd(e,u,o)),!1}throw Error(i(435,l.tag))}return wd(e,u,o),_d(),!1}if($e)return a=An.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=o,u!==pf&&(e=Error(i(422),{cause:u}),Bl(wn(e,l)))):(u!==pf&&(a=Error(i(423),{cause:u}),Bl(wn(a,l))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,u=wn(u,l),o=If(e.stateNode,u,o),Mf(e,o),rt!==4&&(rt=2)),!1;var d=Error(i(520),{cause:u});if(d=wn(d,l),rs===null?rs=[d]:rs.push(d),rt!==4&&(rt=2),a===null)return!0;u=wn(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,e=o&-o,l.lanes|=e,e=If(l.stateNode,u,e),Mf(l,e),!1;case 1:if(a=l.type,d=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ir===null||!ir.has(d))))return l.flags|=65536,o&=-o,l.lanes|=o,o=hy(o),my(o,e,l,u),Mf(l,o),!1}l=l.return}while(l!==null);return!1}var gy=Error(i(461)),Et=!1;function Nt(e,a,l,u){a.child=e===null?iy(a,null,l,u):Di(a,e.child,l,u)}function yy(e,a,l,u,o){l=l.render;var d=a.ref;if("ref"in u){var _={};for(var x in u)x!=="ref"&&(_[x]=u[x])}else _=u;return kr(a),u=Of(e,a,l,_,d,o),x=zf(),e!==null&&!Et?(Uf(e,a,o),_a(e,a,o)):($e&&x&&gf(a),a.flags|=1,Nt(e,a,u,o),a.child)}function py(e,a,l,u,o){if(e===null){var d=l.type;return typeof d=="function"&&!df(d)&&d.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=d,vy(e,a,d,u,o)):(e=Nu(l.type,null,u,a,a.mode,o),e.ref=a.ref,e.return=a,a.child=e)}if(d=e.child,!ad(e,o)){var _=d.memoizedProps;if(l=l.compare,l=l!==null?l:zl,l(_,u)&&e.ref===a.ref)return _a(e,a,o)}return a.flags|=1,e=da(d,u),e.ref=a.ref,e.return=a,a.child=e}function vy(e,a,l,u,o){if(e!==null){var d=e.memoizedProps;if(zl(d,u)&&e.ref===a.ref)if(Et=!1,a.pendingProps=u=d,ad(e,o))(e.flags&131072)!==0&&(Et=!0);else return a.lanes=e.lanes,_a(e,a,o)}return Kf(e,a,l,u,o)}function _y(e,a,l){var u=a.pendingProps,o=u.children,d=e!==null?e.memoizedState:null;if(u.mode==="hidden"){if((a.flags&128)!==0){if(u=d!==null?d.baseLanes|l:l,e!==null){for(o=a.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;a.childLanes=d&~u}else a.childLanes=0,a.child=null;return by(e,a,u,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&ju(a,d!==null?d.cachePool:null),d!==null?v0(a,d):Rf(),ly(a);else return a.lanes=a.childLanes=536870912,by(e,a,d!==null?d.baseLanes|l:l,l)}else d!==null?(ju(a,d.cachePool),v0(a,d),Wa(),a.memoizedState=null):(e!==null&&ju(a,null),Rf(),Wa());return Nt(e,a,o,l),a.child}function by(e,a,l,u){var o=Sf();return o=o===null?null:{parent:mt._currentValue,pool:o},a.memoizedState={baseLanes:l,cachePool:o},e!==null&&ju(a,null),Rf(),ly(a),e!==null&&Ll(e,a,u,!0),null}function Pu(e,a){var l=a.ref;if(l===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(e===null||e.ref!==l)&&(a.flags|=4194816)}}function Kf(e,a,l,u,o){return kr(a),l=Of(e,a,l,u,void 0,o),u=zf(),e!==null&&!Et?(Uf(e,a,o),_a(e,a,o)):($e&&u&&gf(a),a.flags|=1,Nt(e,a,l,o),a.child)}function wy(e,a,l,u,o,d){return kr(a),a.updateQueue=null,l=b0(a,u,l,o),_0(e),u=zf(),e!==null&&!Et?(Uf(e,a,d),_a(e,a,d)):($e&&u&&gf(a),a.flags|=1,Nt(e,a,l,d),a.child)}function xy(e,a,l,u,o){if(kr(a),a.stateNode===null){var d=wi,_=l.contextType;typeof _=="object"&&_!==null&&(d=kt(_)),d=new l(u,d),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ff,a.stateNode=d,d._reactInternals=a,d=a.stateNode,d.props=u,d.state=a.memoizedState,d.refs={},Af(a),_=l.contextType,d.context=typeof _=="object"&&_!==null?kt(_):wi,d.state=a.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(Zf(a,l,_,u),d.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Ff.enqueueReplaceState(d,d.state,null),Gl(a,u,d,o),Vl(),d.state=a.memoizedState),typeof d.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(e===null){d=a.stateNode;var x=a.memoizedProps,z=qr(l,x);d.props=z;var Q=d.context,ae=l.contextType;_=wi,typeof ae=="object"&&ae!==null&&(_=kt(ae));var se=l.getDerivedStateFromProps;ae=typeof se=="function"||typeof d.getSnapshotBeforeUpdate=="function",x=a.pendingProps!==x,ae||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(x||Q!==_)&&uy(a,d,u,_),Fa=!1;var I=a.memoizedState;d.state=I,Gl(a,u,d,o),Vl(),Q=a.memoizedState,x||I!==Q||Fa?(typeof se=="function"&&(Zf(a,l,se,u),Q=a.memoizedState),(z=Fa||sy(a,l,z,u,I,Q,_))?(ae||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(a.flags|=4194308)):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Q),d.props=u,d.state=Q,d.context=_,u=z):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{d=a.stateNode,Tf(e,a),_=a.memoizedProps,ae=qr(l,_),d.props=ae,se=a.pendingProps,I=d.context,Q=l.contextType,z=wi,typeof Q=="object"&&Q!==null&&(z=kt(Q)),x=l.getDerivedStateFromProps,(Q=typeof x=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==se||I!==z)&&uy(a,d,u,z),Fa=!1,I=a.memoizedState,d.state=I,Gl(a,u,d,o),Vl();var K=a.memoizedState;_!==se||I!==K||Fa||e!==null&&e.dependencies!==null&&zu(e.dependencies)?(typeof x=="function"&&(Zf(a,l,x,u),K=a.memoizedState),(ae=Fa||sy(a,l,ae,u,I,K,z)||e!==null&&e.dependencies!==null&&zu(e.dependencies))?(Q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(u,K,z),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(u,K,z)),typeof d.componentDidUpdate=="function"&&(a.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&I===e.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&I===e.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=K),d.props=u,d.state=K,d.context=z,u=ae):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&I===e.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&I===e.memoizedState||(a.flags|=1024),u=!1)}return d=u,Pu(e,a),u=(a.flags&128)!==0,d||u?(d=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:d.render(),a.flags|=1,e!==null&&u?(a.child=Di(a,e.child,null,o),a.child=Di(a,null,l,o)):Nt(e,a,l,o),a.memoizedState=d.state,e=a.child):e=_a(e,a,o),e}function Sy(e,a,l,u){return Hl(),a.flags|=256,Nt(e,a,l,u),a.child}var Jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pf(e){return{baseLanes:e,cachePool:o0()}}function Wf(e,a,l){return e=e!==null?e.childLanes&~l:0,a&&(e|=Tn),e}function Ey(e,a,l){var u=a.pendingProps,o=!1,d=(a.flags&128)!==0,_;if((_=d)||(_=e!==null&&e.memoizedState===null?!1:(gt.current&2)!==0),_&&(o=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,e===null){if($e){if(o?Pa(a):Wa(),$e){var x=at,z;if(z=x){e:{for(z=x,x=In;z.nodeType!==8;){if(!x){x=null;break e}if(z=Hn(z.nextSibling),z===null){x=null;break e}}x=z}x!==null?(a.memoizedState={dehydrated:x,treeContext:Ur!==null?{id:ha,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},z=rn(18,null,null,0),z.stateNode=x,z.return=a,a.child=z,Gt=a,at=null,z=!0):z=!1}z||Br(a)}if(x=a.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return Hd(x)?a.lanes=32:a.lanes=536870912,null;va(a)}return x=u.children,u=u.fallback,o?(Wa(),o=a.mode,x=Wu({mode:"hidden",children:x},o),u=zr(u,o,l,null),x.return=a,u.return=a,x.sibling=u,a.child=x,o=a.child,o.memoizedState=Pf(l),o.childLanes=Wf(e,_,l),a.memoizedState=Jf,u):(Pa(a),ed(a,x))}if(z=e.memoizedState,z!==null&&(x=z.dehydrated,x!==null)){if(d)a.flags&256?(Pa(a),a.flags&=-257,a=td(e,a,l)):a.memoizedState!==null?(Wa(),a.child=e.child,a.flags|=128,a=null):(Wa(),o=u.fallback,x=a.mode,u=Wu({mode:"visible",children:u.children},x),o=zr(o,x,l,null),o.flags|=2,u.return=a,o.return=a,u.sibling=o,a.child=u,Di(a,e.child,null,l),u=a.child,u.memoizedState=Pf(l),u.childLanes=Wf(e,_,l),a.memoizedState=Jf,a=o);else if(Pa(a),Hd(x)){if(_=x.nextSibling&&x.nextSibling.dataset,_)var Q=_.dgst;_=Q,u=Error(i(419)),u.stack="",u.digest=_,Bl({value:u,source:null,stack:null}),a=td(e,a,l)}else if(Et||Ll(e,a,l,!1),_=(l&e.childLanes)!==0,Et||_){if(_=Je,_!==null&&(u=l&-l,u=(u&42)!==0?1:wl(u),u=(u&(_.suspendedLanes|l))!==0?0:u,u!==0&&u!==z.retryLane))throw z.retryLane=u,bi(e,u),on(_,e,u),gy;x.data==="$?"||_d(),a=td(e,a,l)}else x.data==="$?"?(a.flags|=192,a.child=e.child,a=null):(e=z.treeContext,at=Hn(x.nextSibling),Gt=a,$e=!0,Hr=null,In=!1,e!==null&&(Sn[En++]=ha,Sn[En++]=ma,Sn[En++]=Ur,ha=e.id,ma=e.overflow,Ur=a),a=ed(a,u.children),a.flags|=4096);return a}return o?(Wa(),o=u.fallback,x=a.mode,z=e.child,Q=z.sibling,u=da(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,Q!==null?o=da(Q,o):(o=zr(o,x,l,null),o.flags|=2),o.return=a,u.return=a,u.sibling=o,a.child=u,u=o,o=a.child,x=e.child.memoizedState,x===null?x=Pf(l):(z=x.cachePool,z!==null?(Q=mt._currentValue,z=z.parent!==Q?{parent:Q,pool:Q}:z):z=o0(),x={baseLanes:x.baseLanes|l,cachePool:z}),o.memoizedState=x,o.childLanes=Wf(e,_,l),a.memoizedState=Jf,u):(Pa(a),l=e.child,e=l.sibling,l=da(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,e!==null&&(_=a.deletions,_===null?(a.deletions=[e],a.flags|=16):_.push(e)),a.child=l,a.memoizedState=null,l)}function ed(e,a){return a=Wu({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Wu(e,a){return e=rn(22,e,null,a),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function td(e,a,l){return Di(a,e.child,null,l),e=ed(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Ay(e,a,l){e.lanes|=a;var u=e.alternate;u!==null&&(u.lanes|=a),_f(e.return,a,l)}function nd(e,a,l,u,o){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:o}:(d.isBackwards=a,d.rendering=null,d.renderingStartTime=0,d.last=u,d.tail=l,d.tailMode=o)}function Ty(e,a,l){var u=a.pendingProps,o=u.revealOrder,d=u.tail;if(Nt(e,a,u.children,l),u=gt.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ay(e,l,a);else if(e.tag===19)Ay(e,l,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}switch(P(gt,u),o){case"forwards":for(l=a.child,o=null;l!==null;)e=l.alternate,e!==null&&Iu(e)===null&&(o=l),l=l.sibling;l=o,l===null?(o=a.child,a.child=null):(o=l.sibling,l.sibling=null),nd(a,!1,o,l,d);break;case"backwards":for(l=null,o=a.child,a.child=null;o!==null;){if(e=o.alternate,e!==null&&Iu(e)===null){a.child=o;break}e=o.sibling,o.sibling=l,l=o,o=e}nd(a,!0,l,null,d);break;case"together":nd(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function _a(e,a,l){if(e!==null&&(a.dependencies=e.dependencies),rr|=a.lanes,(l&a.childLanes)===0)if(e!==null){if(Ll(e,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(i(153));if(a.child!==null){for(e=a.child,l=da(e,e.pendingProps),a.child=l,l.return=a;e.sibling!==null;)e=e.sibling,l=l.sibling=da(e,e.pendingProps),l.return=a;l.sibling=null}return a.child}function ad(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&zu(e)))}function lS(e,a,l){switch(a.tag){case 3:ye(a,a.stateNode.containerInfo),Za(a,mt,e.memoizedState.cache),Hl();break;case 27:case 5:de(a);break;case 4:ye(a,a.stateNode.containerInfo);break;case 10:Za(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Pa(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Ey(e,a,l):(Pa(a),e=_a(e,a,l),e!==null?e.sibling:null);Pa(a);break;case 19:var o=(e.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(Ll(e,a,l,!1),u=(l&a.childLanes)!==0),o){if(u)return Ty(e,a,l);a.flags|=128}if(o=a.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),P(gt,gt.current),u)break;return null;case 22:case 23:return a.lanes=0,_y(e,a,l);case 24:Za(a,mt,e.memoizedState.cache)}return _a(e,a,l)}function My(e,a,l){if(e!==null)if(e.memoizedProps!==a.pendingProps)Et=!0;else{if(!ad(e,l)&&(a.flags&128)===0)return Et=!1,lS(e,a,l);Et=(e.flags&131072)!==0}else Et=!1,$e&&(a.flags&1048576)!==0&&a0(a,Ou,a.index);switch(a.lanes=0,a.tag){case 16:e:{e=a.pendingProps;var u=a.elementType,o=u._init;if(u=o(u._payload),a.type=u,typeof u=="function")df(u)?(e=qr(u,e),a.tag=1,a=xy(null,a,u,e,l)):(a.tag=0,a=Kf(null,a,u,e,l));else{if(u!=null){if(o=u.$$typeof,o===M){a.tag=11,a=yy(null,a,u,e,l);break e}else if(o===k){a.tag=14,a=py(null,a,u,e,l);break e}}throw a=D(u)||u,Error(i(306,a,""))}}return a;case 0:return Kf(e,a,a.type,a.pendingProps,l);case 1:return u=a.type,o=qr(u,a.pendingProps),xy(e,a,u,o,l);case 3:e:{if(ye(a,a.stateNode.containerInfo),e===null)throw Error(i(387));u=a.pendingProps;var d=a.memoizedState;o=d.element,Tf(e,a),Gl(a,u,null,l);var _=a.memoizedState;if(u=_.cache,Za(a,mt,u),u!==d.cache&&bf(a,[mt],l,!0),Vl(),u=_.element,d.isDehydrated)if(d={element:u,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=d,a.memoizedState=d,a.flags&256){a=Sy(e,a,u,l);break e}else if(u!==o){o=wn(Error(i(424)),a),Bl(o),a=Sy(e,a,u,l);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(at=Hn(e.firstChild),Gt=a,$e=!0,Hr=null,In=!0,l=iy(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Hl(),u===o){a=_a(e,a,l);break e}Nt(e,a,u,l)}a=a.child}return a;case 26:return Pu(e,a),e===null?(l=Dp(a.type,null,a.pendingProps,null))?a.memoizedState=l:$e||(l=a.type,e=a.pendingProps,u=hc(fe.current).createElement(l),u[St]=a,u[Lt]=e,Ot(u,l,e),ft(u),a.stateNode=u):a.memoizedState=Dp(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return de(a),e===null&&$e&&(u=a.stateNode=Cp(a.type,a.pendingProps,fe.current),Gt=a,In=!0,o=at,ur(a.type)?(Bd=o,at=Hn(u.firstChild)):at=o),Nt(e,a,a.pendingProps.children,l),Pu(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&$e&&((o=u=at)&&(u=US(u,a.type,a.pendingProps,In),u!==null?(a.stateNode=u,Gt=a,at=Hn(u.firstChild),In=!1,o=!0):o=!1),o||Br(a)),de(a),o=a.type,d=a.pendingProps,_=e!==null?e.memoizedProps:null,u=d.children,zd(o,d)?u=null:_!==null&&zd(o,_)&&(a.flags|=32),a.memoizedState!==null&&(o=Of(e,a,Px,null,null,l),hs._currentValue=o),Pu(e,a),Nt(e,a,u,l),a.child;case 6:return e===null&&$e&&((e=l=at)&&(l=jS(l,a.pendingProps,In),l!==null?(a.stateNode=l,Gt=a,at=null,e=!0):e=!1),e||Br(a)),null;case 13:return Ey(e,a,l);case 4:return ye(a,a.stateNode.containerInfo),u=a.pendingProps,e===null?a.child=Di(a,null,u,l):Nt(e,a,u,l),a.child;case 11:return yy(e,a,a.type,a.pendingProps,l);case 7:return Nt(e,a,a.pendingProps,l),a.child;case 8:return Nt(e,a,a.pendingProps.children,l),a.child;case 12:return Nt(e,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Za(a,a.type,u.value),Nt(e,a,u.children,l),a.child;case 9:return o=a.type._context,u=a.pendingProps.children,kr(a),o=kt(o),u=u(o),a.flags|=1,Nt(e,a,u,l),a.child;case 14:return py(e,a,a.type,a.pendingProps,l);case 15:return vy(e,a,a.type,a.pendingProps,l);case 19:return Ty(e,a,l);case 31:return u=a.pendingProps,l=a.mode,u={mode:u.mode,children:u.children},e===null?(l=Wu(u,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=da(e.child,u),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return _y(e,a,l);case 24:return kr(a),u=kt(mt),e===null?(o=Sf(),o===null&&(o=Je,d=wf(),o.pooledCache=d,d.refCount++,d!==null&&(o.pooledCacheLanes|=l),o=d),a.memoizedState={parent:u,cache:o},Af(a),Za(a,mt,o)):((e.lanes&l)!==0&&(Tf(e,a),Gl(a,null,null,l),Vl()),o=e.memoizedState,d=a.memoizedState,o.parent!==u?(o={parent:u,cache:u},a.memoizedState=o,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=o),Za(a,mt,u)):(u=d.cache,Za(a,mt,u),u!==o.cache&&bf(a,[mt],l,!0))),Nt(e,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function ba(e){e.flags|=4}function Cy(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Hp(a)){if(a=An.current,a!==null&&((Be&4194048)===Be?Kn!==null:(Be&62914560)!==Be&&(Be&536870912)===0||a!==Kn))throw ql=Ef,f0;e.flags|=8192}}function ec(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?ka():536870912,e.lanes|=a,ji|=a)}function Pl(e,a){if(!$e)switch(e.tailMode){case"hidden":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function et(e){var a=e.alternate!==null&&e.alternate.child===e.child,l=0,u=0;if(a)for(var o=e.child;o!==null;)l|=o.lanes|o.childLanes,u|=o.subtreeFlags&65011712,u|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)l|=o.lanes|o.childLanes,u|=o.subtreeFlags,u|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=u,e.childLanes=l,a}function sS(e,a,l){var u=a.pendingProps;switch(yf(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(a),null;case 1:return et(a),null;case 3:return l=a.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ya(mt),ce(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(jl(a)?ba(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,l0())),et(a),null;case 26:return l=a.memoizedState,e===null?(ba(a),l!==null?(et(a),Cy(a,l)):(et(a),a.flags&=-16777217)):l?l!==e.memoizedState?(ba(a),et(a),Cy(a,l)):(et(a),a.flags&=-16777217):(e.memoizedProps!==u&&ba(a),et(a),a.flags&=-16777217),null;case 27:_e(a),l=fe.current;var o=a.type;if(e!==null&&a.stateNode!=null)e.memoizedProps!==u&&ba(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return et(a),null}e=re.current,jl(a)?r0(a):(e=Cp(o,u,l),a.stateNode=e,ba(a))}return et(a),null;case 5:if(_e(a),l=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==u&&ba(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return et(a),null}if(e=re.current,jl(a))r0(a);else{switch(o=hc(fe.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof u.is=="string"?o.createElement("select",{is:u.is}):o.createElement("select"),u.multiple?e.multiple=!0:u.size&&(e.size=u.size);break;default:e=typeof u.is=="string"?o.createElement(l,{is:u.is}):o.createElement(l)}}e[St]=a,e[Lt]=u;e:for(o=a.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}a.stateNode=e;e:switch(Ot(e,l,u),l){case"button":case"input":case"select":case"textarea":e=!!u.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ba(a)}}return et(a),a.flags&=-16777217,null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==u&&ba(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(e=fe.current,jl(a)){if(e=a.stateNode,l=a.memoizedProps,u=null,o=Gt,o!==null)switch(o.tag){case 27:case 5:u=o.memoizedProps}e[St]=a,e=!!(e.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||wp(e.nodeValue,l)),e||Br(a)}else e=hc(e).createTextNode(u),e[St]=a,a.stateNode=e}return et(a),null;case 13:if(u=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=jl(a),u!==null&&u.dehydrated!==null){if(e===null){if(!o)throw Error(i(318));if(o=a.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));o[St]=a}else Hl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;et(a),o=!1}else o=l0(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return a.flags&256?(va(a),a):(va(a),null)}if(va(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=u!==null,e=e!==null&&e.memoizedState!==null,l){u=a.child,o=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(o=u.alternate.memoizedState.cachePool.pool);var d=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(d=u.memoizedState.cachePool.pool),d!==o&&(u.flags|=2048)}return l!==e&&l&&(a.child.flags|=8192),ec(a,a.updateQueue),et(a),null;case 4:return ce(),e===null&&Cd(a.stateNode.containerInfo),et(a),null;case 10:return ya(a.type),et(a),null;case 19:if(G(gt),o=a.memoizedState,o===null)return et(a),null;if(u=(a.flags&128)!==0,d=o.rendering,d===null)if(u)Pl(o,!1);else{if(rt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(d=Iu(e),d!==null){for(a.flags|=128,Pl(o,!1),e=d.updateQueue,a.updateQueue=e,ec(a,e),a.subtreeFlags=0,e=l,l=a.child;l!==null;)n0(l,e),l=l.sibling;return P(gt,gt.current&1|2),a.child}e=e.sibling}o.tail!==null&&Me()>ac&&(a.flags|=128,u=!0,Pl(o,!1),a.lanes=4194304)}else{if(!u)if(e=Iu(d),e!==null){if(a.flags|=128,u=!0,e=e.updateQueue,a.updateQueue=e,ec(a,e),Pl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!$e)return et(a),null}else 2*Me()-o.renderingStartTime>ac&&l!==536870912&&(a.flags|=128,u=!0,Pl(o,!1),a.lanes=4194304);o.isBackwards?(d.sibling=a.child,a.child=d):(e=o.last,e!==null?e.sibling=d:a.child=d,o.last=d)}return o.tail!==null?(a=o.tail,o.rendering=a,o.tail=a.sibling,o.renderingStartTime=Me(),a.sibling=null,e=gt.current,P(gt,u?e&1|2:e&1),a):(et(a),null);case 22:case 23:return va(a),Nf(),u=a.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(et(a),a.subtreeFlags&6&&(a.flags|=8192)):et(a),l=a.updateQueue,l!==null&&ec(a,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),e!==null&&G($r),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ya(mt),et(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function uS(e,a){switch(yf(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return ya(mt),ce(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return _e(a),null;case 13:if(va(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Hl()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return G(gt),null;case 4:return ce(),null;case 10:return ya(a.type),null;case 22:case 23:return va(a),Nf(),e!==null&&G($r),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return ya(mt),null;case 25:return null;default:return null}}function Ry(e,a){switch(yf(a),a.tag){case 3:ya(mt),ce();break;case 26:case 27:case 5:_e(a);break;case 4:ce();break;case 13:va(a);break;case 19:G(gt);break;case 10:ya(a.type);break;case 22:case 23:va(a),Nf(),e!==null&&G($r);break;case 24:ya(mt)}}function Wl(e,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var o=u.next;l=o;do{if((l.tag&e)===e){u=void 0;var d=l.create,_=l.inst;u=d(),_.destroy=u}l=l.next}while(l!==o)}}catch(x){Ke(a,a.return,x)}}function er(e,a,l){try{var u=a.updateQueue,o=u!==null?u.lastEffect:null;if(o!==null){var d=o.next;u=d;do{if((u.tag&e)===e){var _=u.inst,x=_.destroy;if(x!==void 0){_.destroy=void 0,o=a;var z=l,Q=x;try{Q()}catch(ae){Ke(o,z,ae)}}}u=u.next}while(u!==d)}}catch(ae){Ke(a,a.return,ae)}}function Ny(e){var a=e.updateQueue;if(a!==null){var l=e.stateNode;try{p0(a,l)}catch(u){Ke(e,e.return,u)}}}function Dy(e,a,l){l.props=qr(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(u){Ke(e,a,u)}}function es(e,a){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var u=e.stateNode;break;case 30:u=e.stateNode;break;default:u=e.stateNode}typeof l=="function"?e.refCleanup=l(u):l.current=u}}catch(o){Ke(e,a,o)}}function Jn(e,a){var l=e.ref,u=e.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(o){Ke(e,a,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(o){Ke(e,a,o)}else l.current=null}function Oy(e){var a=e.type,l=e.memoizedProps,u=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(o){Ke(e,e.return,o)}}function rd(e,a,l){try{var u=e.stateNode;RS(u,e.type,l,a),u[Lt]=a}catch(o){Ke(e,e.return,o)}}function zy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ur(e.type)||e.tag===4}function id(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ur(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ld(e,a,l){var u=e.tag;if(u===5||u===6)e=e.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(e),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=dc));else if(u!==4&&(u===27&&ur(e.type)&&(l=e.stateNode,a=null),e=e.child,e!==null))for(ld(e,a,l),e=e.sibling;e!==null;)ld(e,a,l),e=e.sibling}function tc(e,a,l){var u=e.tag;if(u===5||u===6)e=e.stateNode,a?l.insertBefore(e,a):l.appendChild(e);else if(u!==4&&(u===27&&ur(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(tc(e,a,l),e=e.sibling;e!==null;)tc(e,a,l),e=e.sibling}function Uy(e){var a=e.stateNode,l=e.memoizedProps;try{for(var u=e.type,o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Ot(a,u,l),a[St]=e,a[Lt]=l}catch(d){Ke(e,e.return,d)}}var wa=!1,ut=!1,sd=!1,jy=typeof WeakSet=="function"?WeakSet:Set,At=null;function cS(e,a){if(e=e.containerInfo,Dd=_c,e=Qg(e),rf(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var o=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{l.nodeType,d.nodeType}catch{l=null;break e}var _=0,x=-1,z=-1,Q=0,ae=0,se=e,I=null;t:for(;;){for(var K;se!==l||o!==0&&se.nodeType!==3||(x=_+o),se!==d||u!==0&&se.nodeType!==3||(z=_+u),se.nodeType===3&&(_+=se.nodeValue.length),(K=se.firstChild)!==null;)I=se,se=K;for(;;){if(se===e)break t;if(I===l&&++Q===o&&(x=_),I===d&&++ae===u&&(z=_),(K=se.nextSibling)!==null)break;se=I,I=se.parentNode}se=K}l=x===-1||z===-1?null:{start:x,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Od={focusedElem:e,selectionRange:l},_c=!1,At=a;At!==null;)if(a=At,e=a.child,(a.subtreeFlags&1024)!==0&&e!==null)e.return=a,At=e;else for(;At!==null;){switch(a=At,d=a.alternate,e=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,l=a,o=d.memoizedProps,d=d.memoizedState,u=l.stateNode;try{var Ee=qr(l.type,o,l.elementType===l.type);e=u.getSnapshotBeforeUpdate(Ee,d),u.__reactInternalSnapshotBeforeUpdate=e}catch(we){Ke(l,l.return,we)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,l=e.nodeType,l===9)jd(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=a.sibling,e!==null){e.return=a.return,At=e;break}At=a.return}}function Hy(e,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:tr(e,l),u&4&&Wl(5,l);break;case 1:if(tr(e,l),u&4)if(e=l.stateNode,a===null)try{e.componentDidMount()}catch(_){Ke(l,l.return,_)}else{var o=qr(l.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(o,a,e.__reactInternalSnapshotBeforeUpdate)}catch(_){Ke(l,l.return,_)}}u&64&&Ny(l),u&512&&es(l,l.return);break;case 3:if(tr(e,l),u&64&&(e=l.updateQueue,e!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{p0(e,a)}catch(_){Ke(l,l.return,_)}}break;case 27:a===null&&u&4&&Uy(l);case 26:case 5:tr(e,l),a===null&&u&4&&Oy(l),u&512&&es(l,l.return);break;case 12:tr(e,l);break;case 13:tr(e,l),u&4&&ky(e,l),u&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=vS.bind(null,l),HS(e,l))));break;case 22:if(u=l.memoizedState!==null||wa,!u){a=a!==null&&a.memoizedState!==null||ut,o=wa;var d=ut;wa=u,(ut=a)&&!d?nr(e,l,(l.subtreeFlags&8772)!==0):tr(e,l),wa=o,ut=d}break;case 30:break;default:tr(e,l)}}function By(e){var a=e.alternate;a!==null&&(e.alternate=null,By(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&El(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var We=null,It=!1;function xa(e,a,l){for(l=l.child;l!==null;)Ly(e,a,l),l=l.sibling}function Ly(e,a,l){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(tn,l)}catch{}switch(l.tag){case 26:ut||Jn(l,a),xa(e,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ut||Jn(l,a);var u=We,o=It;ur(l.type)&&(We=l.stateNode,It=!1),xa(e,a,l),cs(l.stateNode),We=u,It=o;break;case 5:ut||Jn(l,a);case 6:if(u=We,o=It,We=null,xa(e,a,l),We=u,It=o,We!==null)if(It)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(l.stateNode)}catch(d){Ke(l,a,d)}else try{We.removeChild(l.stateNode)}catch(d){Ke(l,a,d)}break;case 18:We!==null&&(It?(e=We,Tp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),ps(e)):Tp(We,l.stateNode));break;case 4:u=We,o=It,We=l.stateNode.containerInfo,It=!0,xa(e,a,l),We=u,It=o;break;case 0:case 11:case 14:case 15:ut||er(2,l,a),ut||er(4,l,a),xa(e,a,l);break;case 1:ut||(Jn(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Dy(l,a,u)),xa(e,a,l);break;case 21:xa(e,a,l);break;case 22:ut=(u=ut)||l.memoizedState!==null,xa(e,a,l),ut=u;break;default:xa(e,a,l)}}function ky(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ps(e)}catch(l){Ke(a,a.return,l)}}function oS(e){switch(e.tag){case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new jy),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new jy),a;default:throw Error(i(435,e.tag))}}function ud(e,a){var l=oS(e);a.forEach(function(u){var o=_S.bind(null,e,u);l.has(u)||(l.add(u),u.then(o,o))})}function ln(e,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var o=l[u],d=e,_=a,x=_;e:for(;x!==null;){switch(x.tag){case 27:if(ur(x.type)){We=x.stateNode,It=!1;break e}break;case 5:We=x.stateNode,It=!1;break e;case 3:case 4:We=x.stateNode.containerInfo,It=!0;break e}x=x.return}if(We===null)throw Error(i(160));Ly(d,_,o),We=null,It=!1,d=o.alternate,d!==null&&(d.return=null),o.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)$y(a,e),a=a.sibling}var jn=null;function $y(e,a){var l=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ln(a,e),sn(e),u&4&&(er(3,e,e.return),Wl(3,e),er(5,e,e.return));break;case 1:ln(a,e),sn(e),u&512&&(ut||l===null||Jn(l,l.return)),u&64&&wa&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var o=jn;if(ln(a,e),sn(e),u&512&&(ut||l===null||Jn(l,l.return)),u&4){var d=l!==null?l.memoizedState:null;if(u=e.memoizedState,l===null)if(u===null)if(e.stateNode===null){e:{u=e.type,l=e.memoizedProps,o=o.ownerDocument||o;t:switch(u){case"title":d=o.getElementsByTagName("title")[0],(!d||d[Mr]||d[St]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=o.createElement(u),o.head.insertBefore(d,o.querySelector("head > title"))),Ot(d,u,l),d[St]=e,ft(d),u=d;break e;case"link":var _=Up("link","href",o).get(u+(l.href||""));if(_){for(var x=0;x<_.length;x++)if(d=_[x],d.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&d.getAttribute("rel")===(l.rel==null?null:l.rel)&&d.getAttribute("title")===(l.title==null?null:l.title)&&d.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(x,1);break t}}d=o.createElement(u),Ot(d,u,l),o.head.appendChild(d);break;case"meta":if(_=Up("meta","content",o).get(u+(l.content||""))){for(x=0;x<_.length;x++)if(d=_[x],d.getAttribute("content")===(l.content==null?null:""+l.content)&&d.getAttribute("name")===(l.name==null?null:l.name)&&d.getAttribute("property")===(l.property==null?null:l.property)&&d.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&d.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(x,1);break t}}d=o.createElement(u),Ot(d,u,l),o.head.appendChild(d);break;default:throw Error(i(468,u))}d[St]=e,ft(d),u=d}e.stateNode=u}else jp(o,e.type,e.stateNode);else e.stateNode=zp(o,u,e.memoizedProps);else d!==u?(d===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):d.count--,u===null?jp(o,e.type,e.stateNode):zp(o,u,e.memoizedProps)):u===null&&e.stateNode!==null&&rd(e,e.memoizedProps,l.memoizedProps)}break;case 27:ln(a,e),sn(e),u&512&&(ut||l===null||Jn(l,l.return)),l!==null&&u&4&&rd(e,e.memoizedProps,l.memoizedProps);break;case 5:if(ln(a,e),sn(e),u&512&&(ut||l===null||Jn(l,l.return)),e.flags&32){o=e.stateNode;try{hi(o,"")}catch(K){Ke(e,e.return,K)}}u&4&&e.stateNode!=null&&(o=e.memoizedProps,rd(e,o,l!==null?l.memoizedProps:o)),u&1024&&(sd=!0);break;case 6:if(ln(a,e),sn(e),u&4){if(e.stateNode===null)throw Error(i(162));u=e.memoizedProps,l=e.stateNode;try{l.nodeValue=u}catch(K){Ke(e,e.return,K)}}break;case 3:if(yc=null,o=jn,jn=mc(a.containerInfo),ln(a,e),jn=o,sn(e),u&4&&l!==null&&l.memoizedState.isDehydrated)try{ps(a.containerInfo)}catch(K){Ke(e,e.return,K)}sd&&(sd=!1,Yy(e));break;case 4:u=jn,jn=mc(e.stateNode.containerInfo),ln(a,e),sn(e),jn=u;break;case 12:ln(a,e),sn(e);break;case 13:ln(a,e),sn(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(md=Me()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,ud(e,u)));break;case 22:o=e.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,Q=wa,ae=ut;if(wa=Q||o,ut=ae||z,ln(a,e),ut=ae,wa=Q,sn(e),u&8192)e:for(a=e.stateNode,a._visibility=o?a._visibility&-2:a._visibility|1,o&&(l===null||z||wa||ut||Xr(e)),l=null,a=e;;){if(a.tag===5||a.tag===26){if(l===null){z=l=a;try{if(d=z.stateNode,o)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{x=z.stateNode;var se=z.memoizedProps.style,I=se!=null&&se.hasOwnProperty("display")?se.display:null;x.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(K){Ke(z,z.return,K)}}}else if(a.tag===6){if(l===null){z=a;try{z.stateNode.nodeValue=o?"":z.memoizedProps}catch(K){Ke(z,z.return,K)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=e.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,ud(e,l))));break;case 19:ln(a,e),sn(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,ud(e,u)));break;case 30:break;case 21:break;default:ln(a,e),sn(e)}}function sn(e){var a=e.flags;if(a&2){try{for(var l,u=e.return;u!==null;){if(zy(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var o=l.stateNode,d=id(e);tc(e,d,o);break;case 5:var _=l.stateNode;l.flags&32&&(hi(_,""),l.flags&=-33);var x=id(e);tc(e,x,_);break;case 3:case 4:var z=l.stateNode.containerInfo,Q=id(e);ld(e,Q,z);break;default:throw Error(i(161))}}catch(ae){Ke(e,e.return,ae)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Yy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Yy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function tr(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Hy(e,a.alternate,a),a=a.sibling}function Xr(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:er(4,a,a.return),Xr(a);break;case 1:Jn(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Dy(a,a.return,l),Xr(a);break;case 27:cs(a.stateNode);case 26:case 5:Jn(a,a.return),Xr(a);break;case 22:a.memoizedState===null&&Xr(a);break;case 30:Xr(a);break;default:Xr(a)}e=e.sibling}}function nr(e,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,o=e,d=a,_=d.flags;switch(d.tag){case 0:case 11:case 15:nr(o,d,l),Wl(4,d);break;case 1:if(nr(o,d,l),u=d,o=u.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(Q){Ke(u,u.return,Q)}if(u=d,o=u.updateQueue,o!==null){var x=u.stateNode;try{var z=o.shared.hiddenCallbacks;if(z!==null)for(o.shared.hiddenCallbacks=null,o=0;o<z.length;o++)y0(z[o],x)}catch(Q){Ke(u,u.return,Q)}}l&&_&64&&Ny(d),es(d,d.return);break;case 27:Uy(d);case 26:case 5:nr(o,d,l),l&&u===null&&_&4&&Oy(d),es(d,d.return);break;case 12:nr(o,d,l);break;case 13:nr(o,d,l),l&&_&4&&ky(o,d);break;case 22:d.memoizedState===null&&nr(o,d,l),es(d,d.return);break;case 30:break;default:nr(o,d,l)}a=a.sibling}}function cd(e,a){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&kl(l))}function od(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&kl(e))}function Pn(e,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)qy(e,a,l,u),a=a.sibling}function qy(e,a,l,u){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Pn(e,a,l,u),o&2048&&Wl(9,a);break;case 1:Pn(e,a,l,u);break;case 3:Pn(e,a,l,u),o&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&kl(e)));break;case 12:if(o&2048){Pn(e,a,l,u),e=a.stateNode;try{var d=a.memoizedProps,_=d.id,x=d.onPostCommit;typeof x=="function"&&x(_,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){Ke(a,a.return,z)}}else Pn(e,a,l,u);break;case 13:Pn(e,a,l,u);break;case 23:break;case 22:d=a.stateNode,_=a.alternate,a.memoizedState!==null?d._visibility&2?Pn(e,a,l,u):ts(e,a):d._visibility&2?Pn(e,a,l,u):(d._visibility|=2,Oi(e,a,l,u,(a.subtreeFlags&10256)!==0)),o&2048&&cd(_,a);break;case 24:Pn(e,a,l,u),o&2048&&od(a.alternate,a);break;default:Pn(e,a,l,u)}}function Oi(e,a,l,u,o){for(o=o&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var d=e,_=a,x=l,z=u,Q=_.flags;switch(_.tag){case 0:case 11:case 15:Oi(d,_,x,z,o),Wl(8,_);break;case 23:break;case 22:var ae=_.stateNode;_.memoizedState!==null?ae._visibility&2?Oi(d,_,x,z,o):ts(d,_):(ae._visibility|=2,Oi(d,_,x,z,o)),o&&Q&2048&&cd(_.alternate,_);break;case 24:Oi(d,_,x,z,o),o&&Q&2048&&od(_.alternate,_);break;default:Oi(d,_,x,z,o)}a=a.sibling}}function ts(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=e,u=a,o=u.flags;switch(u.tag){case 22:ts(l,u),o&2048&&cd(u.alternate,u);break;case 24:ts(l,u),o&2048&&od(u.alternate,u);break;default:ts(l,u)}a=a.sibling}}var ns=8192;function zi(e){if(e.subtreeFlags&ns)for(e=e.child;e!==null;)Xy(e),e=e.sibling}function Xy(e){switch(e.tag){case 26:zi(e),e.flags&ns&&e.memoizedState!==null&&IS(jn,e.memoizedState,e.memoizedProps);break;case 5:zi(e);break;case 3:case 4:var a=jn;jn=mc(e.stateNode.containerInfo),zi(e),jn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=ns,ns=16777216,zi(e),ns=a):zi(e));break;default:zi(e)}}function Vy(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function as(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];At=u,Qy(u,e)}Vy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gy(e),e=e.sibling}function Gy(e){switch(e.tag){case 0:case 11:case 15:as(e),e.flags&2048&&er(9,e,e.return);break;case 3:as(e);break;case 12:as(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,nc(e)):as(e);break;default:as(e)}}function nc(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];At=u,Qy(u,e)}Vy(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:er(8,a,a.return),nc(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,nc(a));break;default:nc(a)}e=e.sibling}}function Qy(e,a){for(;At!==null;){var l=At;switch(l.tag){case 0:case 11:case 15:er(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:kl(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,At=u;else e:for(l=e;At!==null;){u=At;var o=u.sibling,d=u.return;if(By(u),u===l){At=null;break e}if(o!==null){o.return=d,At=o;break e}At=d}}}var fS={getCacheForType:function(e){var a=kt(mt),l=a.data.get(e);return l===void 0&&(l=e(),a.data.set(e,l)),l}},dS=typeof WeakMap=="function"?WeakMap:Map,qe=0,Je=null,Ue=null,Be=0,Xe=0,un=null,ar=!1,Ui=!1,fd=!1,Sa=0,rt=0,rr=0,Vr=0,dd=0,Tn=0,ji=0,rs=null,Kt=null,hd=!1,md=0,ac=1/0,rc=null,ir=null,Dt=0,lr=null,Hi=null,Bi=0,gd=0,yd=null,Zy=null,is=0,pd=null;function cn(){if((qe&2)!==0&&Be!==0)return Be&-Be;if(R.T!==null){var e=Ei;return e!==0?e:Ed()}return ou()}function Fy(){Tn===0&&(Tn=(Be&536870912)===0||$e?ui():536870912);var e=An.current;return e!==null&&(e.flags|=32),Tn}function on(e,a,l){(e===Je&&(Xe===2||Xe===9)||e.cancelPendingCommit!==null)&&(Li(e,0),sr(e,Be,Tn,!1)),$a(e,l),((qe&2)===0||e!==Je)&&(e===Je&&((qe&2)===0&&(Vr|=l),rt===4&&sr(e,Be,Tn,!1)),Wn(e))}function Iy(e,a,l){if((qe&6)!==0)throw Error(i(327));var u=!l&&(a&124)===0&&(a&e.expiredLanes)===0||Bt(e,a),o=u?gS(e,a):bd(e,a,!0),d=u;do{if(o===0){Ui&&!u&&sr(e,a,0,!1);break}else{if(l=e.current.alternate,d&&!hS(l)){o=bd(e,a,!1),d=!1;continue}if(o===2){if(d=a,e.errorRecoveryDisabledLanes&d)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;e:{var x=e;o=rs;var z=x.current.memoizedState.isDehydrated;if(z&&(Li(x,_).flags|=256),_=bd(x,_,!1),_!==2){if(fd&&!z){x.errorRecoveryDisabledLanes|=d,Vr|=d,o=4;break e}d=Kt,Kt=o,d!==null&&(Kt===null?Kt=d:Kt.push.apply(Kt,d))}o=_}if(d=!1,o!==2)continue}}if(o===1){Li(e,0),sr(e,a,0,!0);break}e:{switch(u=e,d=o,d){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:sr(u,a,Tn,!ar);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(o=md+300-Me(),10<o)){if(sr(u,a,Tn,!ar),Qt(u,0,!0)!==0)break e;u.timeoutHandle=Ep(Ky.bind(null,u,l,Kt,rc,hd,a,Tn,Vr,ji,ar,d,2,-0,0),o);break e}Ky(u,l,Kt,rc,hd,a,Tn,Vr,ji,ar,d,0,-0,0)}}break}while(!0);Wn(e)}function Ky(e,a,l,u,o,d,_,x,z,Q,ae,se,I,K){if(e.timeoutHandle=-1,se=a.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(ds={stylesheets:null,count:0,unsuspend:FS},Xy(a),se=KS(),se!==null)){e.cancelPendingCommit=se(ap.bind(null,e,a,d,l,u,o,_,x,z,ae,1,I,K)),sr(e,d,_,!Q);return}ap(e,a,d,l,u,o,_,x,z)}function hS(e){for(var a=e;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var o=l[u],d=o.getSnapshot;o=o.value;try{if(!an(d(),o))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function sr(e,a,l,u){a&=~dd,a&=~Vr,e.suspendedLanes|=a,e.pingedLanes&=~a,u&&(e.warmLanes|=a),u=e.expirationTimes;for(var o=a;0<o;){var d=31-ot(o),_=1<<d;u[d]=-1,o&=~_}l!==0&&uu(e,l,a)}function ic(){return(qe&6)===0?(ls(0),!1):!0}function vd(){if(Ue!==null){if(Xe===0)var e=Ue.return;else e=Ue,ga=Lr=null,jf(e),Ni=null,Kl=0,e=Ue;for(;e!==null;)Ry(e.alternate,e),e=e.return;Ue=null}}function Li(e,a){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,DS(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),vd(),Je=e,Ue=l=da(e.current,null),Be=a,Xe=0,un=null,ar=!1,Ui=Bt(e,a),fd=!1,ji=Tn=dd=Vr=rr=rt=0,Kt=rs=null,hd=!1,(a&8)!==0&&(a|=a&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=a;0<u;){var o=31-ot(u),d=1<<o;a|=e[o],u&=~d}return Sa=a,Mu(),l}function Jy(e,a){Ne=null,R.H=Qu,a===Yl||a===Hu?(a=m0(),Xe=3):a===f0?(a=m0(),Xe=4):Xe=a===gy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,un=a,Ue===null&&(rt=1,Ju(e,wn(a,e.current)))}function Py(){var e=R.H;return R.H=Qu,e===null?Qu:e}function Wy(){var e=R.A;return R.A=fS,e}function _d(){rt=4,ar||(Be&4194048)!==Be&&An.current!==null||(Ui=!0),(rr&134217727)===0&&(Vr&134217727)===0||Je===null||sr(Je,Be,Tn,!1)}function bd(e,a,l){var u=qe;qe|=2;var o=Py(),d=Wy();(Je!==e||Be!==a)&&(rc=null,Li(e,a)),a=!1;var _=rt;e:do try{if(Xe!==0&&Ue!==null){var x=Ue,z=un;switch(Xe){case 8:vd(),_=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(a=!0);var Q=Xe;if(Xe=0,un=null,ki(e,x,z,Q),l&&Ui){_=0;break e}break;default:Q=Xe,Xe=0,un=null,ki(e,x,z,Q)}}mS(),_=rt;break}catch(ae){Jy(e,ae)}while(!0);return a&&e.shellSuspendCounter++,ga=Lr=null,qe=u,R.H=o,R.A=d,Ue===null&&(Je=null,Be=0,Mu()),_}function mS(){for(;Ue!==null;)ep(Ue)}function gS(e,a){var l=qe;qe|=2;var u=Py(),o=Wy();Je!==e||Be!==a?(rc=null,ac=Me()+500,Li(e,a)):Ui=Bt(e,a);e:do try{if(Xe!==0&&Ue!==null){a=Ue;var d=un;t:switch(Xe){case 1:Xe=0,un=null,ki(e,a,d,1);break;case 2:case 9:if(d0(d)){Xe=0,un=null,tp(a);break}a=function(){Xe!==2&&Xe!==9||Je!==e||(Xe=7),Wn(e)},d.then(a,a);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:d0(d)?(Xe=0,un=null,tp(a)):(Xe=0,un=null,ki(e,a,d,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var x=Ue;if(!_||Hp(_)){Xe=0,un=null;var z=x.sibling;if(z!==null)Ue=z;else{var Q=x.return;Q!==null?(Ue=Q,lc(Q)):Ue=null}break t}}Xe=0,un=null,ki(e,a,d,5);break;case 6:Xe=0,un=null,ki(e,a,d,6);break;case 8:vd(),rt=6;break e;default:throw Error(i(462))}}yS();break}catch(ae){Jy(e,ae)}while(!0);return ga=Lr=null,R.H=u,R.A=o,qe=l,Ue!==null?0:(Je=null,Be=0,Mu(),rt)}function yS(){for(;Ue!==null&&!ze();)ep(Ue)}function ep(e){var a=My(e.alternate,e,Sa);e.memoizedProps=e.pendingProps,a===null?lc(e):Ue=a}function tp(e){var a=e,l=a.alternate;switch(a.tag){case 15:case 0:a=wy(l,a,a.pendingProps,a.type,void 0,Be);break;case 11:a=wy(l,a,a.pendingProps,a.type.render,a.ref,Be);break;case 5:jf(a);default:Ry(l,a),a=Ue=n0(a,Sa),a=My(l,a,Sa)}e.memoizedProps=e.pendingProps,a===null?lc(e):Ue=a}function ki(e,a,l,u){ga=Lr=null,jf(a),Ni=null,Kl=0;var o=a.return;try{if(iS(e,o,a,l,Be)){rt=1,Ju(e,wn(l,e.current)),Ue=null;return}}catch(d){if(o!==null)throw Ue=o,d;rt=1,Ju(e,wn(l,e.current)),Ue=null;return}a.flags&32768?($e||u===1?e=!0:Ui||(Be&536870912)!==0?e=!1:(ar=e=!0,(u===2||u===9||u===3||u===6)&&(u=An.current,u!==null&&u.tag===13&&(u.flags|=16384))),np(a,e)):lc(a)}function lc(e){var a=e;do{if((a.flags&32768)!==0){np(a,ar);return}e=a.return;var l=sS(a.alternate,a,Sa);if(l!==null){Ue=l;return}if(a=a.sibling,a!==null){Ue=a;return}Ue=a=e}while(a!==null);rt===0&&(rt=5)}function np(e,a){do{var l=uS(e.alternate,e);if(l!==null){l.flags&=32767,Ue=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(e=e.sibling,e!==null)){Ue=e;return}Ue=e=l}while(e!==null);rt=6,Ue=null}function ap(e,a,l,u,o,d,_,x,z){e.cancelPendingCommit=null;do sc();while(Dt!==0);if((qe&6)!==0)throw Error(i(327));if(a!==null){if(a===e.current)throw Error(i(177));if(d=a.lanes|a.childLanes,d|=of,ua(e,l,d,_,x,z),e===Je&&(Ue=Je=null,Be=0),Hi=a,lr=e,Bi=l,gd=d,yd=o,Zy=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,bS(Zn,function(){return up(),null})):(e.callbackNode=null,e.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=R.T,R.T=null,o=Y.p,Y.p=2,_=qe,qe|=4;try{cS(e,a,l)}finally{qe=_,Y.p=o,R.T=u}}Dt=1,rp(),ip(),lp()}}function rp(){if(Dt===1){Dt=0;var e=lr,a=Hi,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var u=Y.p;Y.p=2;var o=qe;qe|=4;try{$y(a,e);var d=Od,_=Qg(e.containerInfo),x=d.focusedElem,z=d.selectionRange;if(_!==x&&x&&x.ownerDocument&&Gg(x.ownerDocument.documentElement,x)){if(z!==null&&rf(x)){var Q=z.start,ae=z.end;if(ae===void 0&&(ae=Q),"selectionStart"in x)x.selectionStart=Q,x.selectionEnd=Math.min(ae,x.value.length);else{var se=x.ownerDocument||document,I=se&&se.defaultView||window;if(I.getSelection){var K=I.getSelection(),Ee=x.textContent.length,we=Math.min(z.start,Ee),Ze=z.end===void 0?we:Math.min(z.end,Ee);!K.extend&&we>Ze&&(_=Ze,Ze=we,we=_);var q=Vg(x,we),B=Vg(x,Ze);if(q&&B&&(K.rangeCount!==1||K.anchorNode!==q.node||K.anchorOffset!==q.offset||K.focusNode!==B.node||K.focusOffset!==B.offset)){var V=se.createRange();V.setStart(q.node,q.offset),K.removeAllRanges(),we>Ze?(K.addRange(V),K.extend(B.node,B.offset)):(V.setEnd(B.node,B.offset),K.addRange(V))}}}}for(se=[],K=x;K=K.parentNode;)K.nodeType===1&&se.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<se.length;x++){var ie=se[x];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}_c=!!Dd,Od=Dd=null}finally{qe=o,Y.p=u,R.T=l}}e.current=a,Dt=2}}function ip(){if(Dt===2){Dt=0;var e=lr,a=Hi,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var u=Y.p;Y.p=2;var o=qe;qe|=4;try{Hy(e,a.alternate,a)}finally{qe=o,Y.p=u,R.T=l}}Dt=3}}function lp(){if(Dt===4||Dt===3){Dt=0,Ye();var e=lr,a=Hi,l=Bi,u=Zy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Dt=5:(Dt=0,Hi=lr=null,sp(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(ir=null),xl(l),a=a.stateNode,lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(tn,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=R.T,o=Y.p,Y.p=2,R.T=null;try{for(var d=e.onRecoverableError,_=0;_<u.length;_++){var x=u[_];d(x.value,{componentStack:x.stack})}}finally{R.T=a,Y.p=o}}(Bi&3)!==0&&sc(),Wn(e),o=e.pendingLanes,(l&4194090)!==0&&(o&42)!==0?e===pd?is++:(is=0,pd=e):is=0,ls(0)}}function sp(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,kl(a)))}function sc(e){return rp(),ip(),lp(),up()}function up(){if(Dt!==5)return!1;var e=lr,a=gd;gd=0;var l=xl(Bi),u=R.T,o=Y.p;try{Y.p=32>l?32:l,R.T=null,l=yd,yd=null;var d=lr,_=Bi;if(Dt=0,Hi=lr=null,Bi=0,(qe&6)!==0)throw Error(i(331));var x=qe;if(qe|=4,Gy(d.current),qy(d,d.current,_,l),qe=x,ls(0,!1),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(tn,d)}catch{}return!0}finally{Y.p=o,R.T=u,sp(e,a)}}function cp(e,a,l){a=wn(l,a),a=If(e.stateNode,a,2),e=Ka(e,a,2),e!==null&&($a(e,2),Wn(e))}function Ke(e,a,l){if(e.tag===3)cp(e,e,l);else for(;a!==null;){if(a.tag===3){cp(a,e,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ir===null||!ir.has(u))){e=wn(l,e),l=hy(2),u=Ka(a,l,2),u!==null&&(my(l,u,a,e),$a(u,2),Wn(u));break}}a=a.return}}function wd(e,a,l){var u=e.pingCache;if(u===null){u=e.pingCache=new dS;var o=new Set;u.set(a,o)}else o=u.get(a),o===void 0&&(o=new Set,u.set(a,o));o.has(l)||(fd=!0,o.add(l),e=pS.bind(null,e,a,l),a.then(e,e))}function pS(e,a,l){var u=e.pingCache;u!==null&&u.delete(a),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Je===e&&(Be&l)===l&&(rt===4||rt===3&&(Be&62914560)===Be&&300>Me()-md?(qe&2)===0&&Li(e,0):dd|=l,ji===Be&&(ji=0)),Wn(e)}function op(e,a){a===0&&(a=ka()),e=bi(e,a),e!==null&&($a(e,a),Wn(e))}function vS(e){var a=e.memoizedState,l=0;a!==null&&(l=a.retryLane),op(e,l)}function _S(e,a){var l=0;switch(e.tag){case 13:var u=e.stateNode,o=e.memoizedState;o!==null&&(l=o.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),op(e,l)}function bS(e,a){return He(e,a)}var uc=null,$i=null,xd=!1,cc=!1,Sd=!1,Gr=0;function Wn(e){e!==$i&&e.next===null&&($i===null?uc=$i=e:$i=$i.next=e),cc=!0,xd||(xd=!0,xS())}function ls(e,a){if(!Sd&&cc){Sd=!0;do for(var l=!1,u=uc;u!==null;){if(e!==0){var o=u.pendingLanes;if(o===0)var d=0;else{var _=u.suspendedLanes,x=u.pingedLanes;d=(1<<31-ot(42|e)+1)-1,d&=o&~(_&~x),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(l=!0,mp(u,d))}else d=Be,d=Qt(u,u===Je?d:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(d&3)===0||Bt(u,d)||(l=!0,mp(u,d));u=u.next}while(l);Sd=!1}}function wS(){fp()}function fp(){cc=xd=!1;var e=0;Gr!==0&&(NS()&&(e=Gr),Gr=0);for(var a=Me(),l=null,u=uc;u!==null;){var o=u.next,d=dp(u,a);d===0?(u.next=null,l===null?uc=o:l.next=o,o===null&&($i=l)):(l=u,(e!==0||(d&3)!==0)&&(cc=!0)),u=o}ls(e)}function dp(e,a){for(var l=e.suspendedLanes,u=e.pingedLanes,o=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var _=31-ot(d),x=1<<_,z=o[_];z===-1?((x&l)===0||(x&u)!==0)&&(o[_]=Ar(x,a)):z<=a&&(e.expiredLanes|=x),d&=~x}if(a=Je,l=Be,l=Qt(e,e===a?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u=e.callbackNode,l===0||e===a&&(Xe===2||Xe===9)||e.cancelPendingCommit!==null)return u!==null&&u!==null&&Te(u),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||Bt(e,l)){if(a=l&-l,a===e.callbackPriority)return a;switch(u!==null&&Te(u),xl(l)){case 2:case 8:l=yn;break;case 32:l=Zn;break;case 268435456:l=sa;break;default:l=Zn}return u=hp.bind(null,e),l=He(l,u),e.callbackPriority=a,e.callbackNode=l,a}return u!==null&&u!==null&&Te(u),e.callbackPriority=2,e.callbackNode=null,2}function hp(e,a){if(Dt!==0&&Dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(sc()&&e.callbackNode!==l)return null;var u=Be;return u=Qt(e,e===Je?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u===0?null:(Iy(e,u,a),dp(e,Me()),e.callbackNode!=null&&e.callbackNode===l?hp.bind(null,e):null)}function mp(e,a){if(sc())return null;Iy(e,a,!0)}function xS(){OS(function(){(qe&6)!==0?He(wt,wS):fp()})}function Ed(){return Gr===0&&(Gr=ui()),Gr}function gp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:bu(""+e)}function yp(e,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,e.id&&l.setAttribute("form",e.id),a.parentNode.insertBefore(l,a),e=new FormData(e),l.parentNode.removeChild(l),e}function SS(e,a,l,u,o){if(a==="submit"&&l&&l.stateNode===o){var d=gp((o[Lt]||null).action),_=u.submitter;_&&(a=(a=_[Lt]||null)?gp(a.formAction):_.getAttribute("formAction"),a!==null&&(d=a,_=null));var x=new Eu("action","action",null,u,o);e.push({event:x,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Gr!==0){var z=_?yp(o,_):new FormData(o);Vf(l,{pending:!0,data:z,method:o.method,action:d},null,z)}}else typeof d=="function"&&(x.preventDefault(),z=_?yp(o,_):new FormData(o),Vf(l,{pending:!0,data:z,method:o.method,action:d},d,z))},currentTarget:o}]})}}for(var Ad=0;Ad<cf.length;Ad++){var Td=cf[Ad],ES=Td.toLowerCase(),AS=Td[0].toUpperCase()+Td.slice(1);Un(ES,"on"+AS)}Un(Ig,"onAnimationEnd"),Un(Kg,"onAnimationIteration"),Un(Jg,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(qx,"onTransitionRun"),Un(Xx,"onTransitionStart"),Un(Vx,"onTransitionCancel"),Un(Pg,"onTransitionEnd"),Va("onMouseEnter",["mouseout","mouseover"]),Va("onMouseLeave",["mouseout","mouseover"]),Va("onPointerEnter",["pointerout","pointerover"]),Va("onPointerLeave",["pointerout","pointerover"]),oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oa("onBeforeInput",["compositionend","keypress","textInput","paste"]),oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ss));function pp(e,a){a=(a&4)!==0;for(var l=0;l<e.length;l++){var u=e[l],o=u.event;u=u.listeners;e:{var d=void 0;if(a)for(var _=u.length-1;0<=_;_--){var x=u[_],z=x.instance,Q=x.currentTarget;if(x=x.listener,z!==d&&o.isPropagationStopped())break e;d=x,o.currentTarget=Q;try{d(o)}catch(ae){Ku(ae)}o.currentTarget=null,d=z}else for(_=0;_<u.length;_++){if(x=u[_],z=x.instance,Q=x.currentTarget,x=x.listener,z!==d&&o.isPropagationStopped())break e;d=x,o.currentTarget=Q;try{d(o)}catch(ae){Ku(ae)}o.currentTarget=null,d=z}}}}function je(e,a){var l=a[Sl];l===void 0&&(l=a[Sl]=new Set);var u=e+"__bubble";l.has(u)||(vp(a,e,2,!1),l.add(u))}function Md(e,a,l){var u=0;a&&(u|=4),vp(l,e,u,a)}var oc="_reactListening"+Math.random().toString(36).slice(2);function Cd(e){if(!e[oc]){e[oc]=!0,du.forEach(function(l){l!=="selectionchange"&&(TS.has(l)||Md(l,!1,e),Md(l,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[oc]||(a[oc]=!0,Md("selectionchange",!1,a))}}function vp(e,a,l,u){switch(qp(a)){case 2:var o=WS;break;case 8:o=eE;break;default:o=qd}l=o.bind(null,a,l,e),o=void 0,!Io||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(o=!0),u?o!==void 0?e.addEventListener(a,l,{capture:!0,passive:o}):e.addEventListener(a,l,!0):o!==void 0?e.addEventListener(a,l,{passive:o}):e.addEventListener(a,l,!1)}function Rd(e,a,l,u,o){var d=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var x=u.stateNode.containerInfo;if(x===o)break;if(_===4)for(_=u.return;_!==null;){var z=_.tag;if((z===3||z===4)&&_.stateNode.containerInfo===o)return;_=_.return}for(;x!==null;){if(_=ca(x),_===null)return;if(z=_.tag,z===5||z===6||z===26||z===27){u=d=_;continue e}x=x.parentNode}}u=u.return}Ag(function(){var Q=d,ae=Zo(l),se=[];e:{var I=Wg.get(e);if(I!==void 0){var K=Eu,Ee=e;switch(e){case"keypress":if(xu(l)===0)break e;case"keydown":case"keyup":K=bx;break;case"focusin":Ee="focus",K=Wo;break;case"focusout":Ee="blur",K=Wo;break;case"beforeblur":case"afterblur":K=Wo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Cg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=ux;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Sx;break;case Ig:case Kg:case Jg:K=fx;break;case Pg:K=Ax;break;case"scroll":case"scrollend":K=lx;break;case"wheel":K=Mx;break;case"copy":case"cut":case"paste":K=hx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ng;break;case"toggle":case"beforetoggle":K=Rx}var we=(a&4)!==0,Ze=!we&&(e==="scroll"||e==="scrollend"),q=we?I!==null?I+"Capture":null:I;we=[];for(var B=Q,V;B!==null;){var ie=B;if(V=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||V===null||q===null||(ie=Tl(B,q),ie!=null&&we.push(us(B,ie,V))),Ze)break;B=B.return}0<we.length&&(I=new K(I,Ee,null,l,ae),se.push({event:I,listeners:we}))}}if((a&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",I&&l!==Qo&&(Ee=l.relatedTarget||l.fromElement)&&(ca(Ee)||Ee[Ya]))break e;if((K||I)&&(I=ae.window===ae?ae:(I=ae.ownerDocument)?I.defaultView||I.parentWindow:window,K?(Ee=l.relatedTarget||l.toElement,K=Q,Ee=Ee?ca(Ee):null,Ee!==null&&(Ze=c(Ee),we=Ee.tag,Ee!==Ze||we!==5&&we!==27&&we!==6)&&(Ee=null)):(K=null,Ee=Q),K!==Ee)){if(we=Cg,ie="onMouseLeave",q="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(we=Ng,ie="onPointerLeave",q="onPointerEnter",B="pointer"),Ze=K==null?I:Cr(K),V=Ee==null?I:Cr(Ee),I=new we(ie,B+"leave",K,l,ae),I.target=Ze,I.relatedTarget=V,ie=null,ca(ae)===Q&&(we=new we(q,B+"enter",Ee,l,ae),we.target=V,we.relatedTarget=Ze,ie=we),Ze=ie,K&&Ee)t:{for(we=K,q=Ee,B=0,V=we;V;V=Yi(V))B++;for(V=0,ie=q;ie;ie=Yi(ie))V++;for(;0<B-V;)we=Yi(we),B--;for(;0<V-B;)q=Yi(q),V--;for(;B--;){if(we===q||q!==null&&we===q.alternate)break t;we=Yi(we),q=Yi(q)}we=null}else we=null;K!==null&&_p(se,I,K,we,!1),Ee!==null&&Ze!==null&&_p(se,Ze,Ee,we,!0)}}e:{if(I=Q?Cr(Q):window,K=I.nodeName&&I.nodeName.toLowerCase(),K==="select"||K==="input"&&I.type==="file")var he=Lg;else if(Hg(I))if(kg)he=kx;else{he=Bx;var De=Hx}else K=I.nodeName,!K||K.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?Q&&Go(Q.elementType)&&(he=Lg):he=Lx;if(he&&(he=he(e,Q))){Bg(se,he,l,ae);break e}De&&De(e,I,Q),e==="focusout"&&Q&&I.type==="number"&&Q.memoizedProps.value!=null&&Vo(I,"number",I.value)}switch(De=Q?Cr(Q):window,e){case"focusin":(Hg(De)||De.contentEditable==="true")&&(pi=De,lf=Q,Ul=null);break;case"focusout":Ul=lf=pi=null;break;case"mousedown":sf=!0;break;case"contextmenu":case"mouseup":case"dragend":sf=!1,Zg(se,l,ae);break;case"selectionchange":if(Yx)break;case"keydown":case"keyup":Zg(se,l,ae)}var ge;if(tf)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else yi?Ug(e,l)&&(xe="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(Dg&&l.locale!=="ko"&&(yi||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&yi&&(ge=Tg()):(Qa=ae,Ko="value"in Qa?Qa.value:Qa.textContent,yi=!0)),De=fc(Q,xe),0<De.length&&(xe=new Rg(xe,e,null,l,ae),se.push({event:xe,listeners:De}),ge?xe.data=ge:(ge=jg(l),ge!==null&&(xe.data=ge)))),(ge=Dx?Ox(e,l):zx(e,l))&&(xe=fc(Q,"onBeforeInput"),0<xe.length&&(De=new Rg("onBeforeInput","beforeinput",null,l,ae),se.push({event:De,listeners:xe}),De.data=ge)),SS(se,e,Q,l,ae)}pp(se,a)})}function us(e,a,l){return{instance:e,listener:a,currentTarget:l}}function fc(e,a){for(var l=a+"Capture",u=[];e!==null;){var o=e,d=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||d===null||(o=Tl(e,l),o!=null&&u.unshift(us(e,o,d)),o=Tl(e,a),o!=null&&u.push(us(e,o,d))),e.tag===3)return u;e=e.return}return[]}function Yi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function _p(e,a,l,u,o){for(var d=a._reactName,_=[];l!==null&&l!==u;){var x=l,z=x.alternate,Q=x.stateNode;if(x=x.tag,z!==null&&z===u)break;x!==5&&x!==26&&x!==27||Q===null||(z=Q,o?(Q=Tl(l,d),Q!=null&&_.unshift(us(l,Q,z))):o||(Q=Tl(l,d),Q!=null&&_.push(us(l,Q,z)))),l=l.return}_.length!==0&&e.push({event:a,listeners:_})}var MS=/\r\n?/g,CS=/\u0000|\uFFFD/g;function bp(e){return(typeof e=="string"?e:""+e).replace(MS,`
`).replace(CS,"")}function wp(e,a){return a=bp(a),bp(e)===a}function dc(){}function Qe(e,a,l,u,o,d){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||hi(e,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&hi(e,""+u);break;case"className":oi(e,"class",u);break;case"tabIndex":oi(e,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(e,l,u);break;case"style":Sg(e,u,d);break;case"data":if(a!=="object"){oi(e,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){e.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(l);break}u=bu(""+u),e.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(l==="formAction"?(a!=="input"&&Qe(e,a,"name",o.name,o,null),Qe(e,a,"formEncType",o.formEncType,o,null),Qe(e,a,"formMethod",o.formMethod,o,null),Qe(e,a,"formTarget",o.formTarget,o,null)):(Qe(e,a,"encType",o.encType,o,null),Qe(e,a,"method",o.method,o,null),Qe(e,a,"target",o.target,o,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(l);break}u=bu(""+u),e.setAttribute(l,u);break;case"onClick":u!=null&&(e.onclick=dc);break;case"onScroll":u!=null&&je("scroll",e);break;case"onScrollEnd":u!=null&&je("scrollend",e);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=l}}break;case"multiple":e.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":e.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){e.removeAttribute("xlink:href");break}l=bu(""+u),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(l,""+u):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":u===!0?e.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(l,u):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?e.setAttribute(l,u):e.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?e.removeAttribute(l):e.setAttribute(l,u);break;case"popover":je("beforetoggle",e),je("toggle",e),ci(e,"popover",u);break;case"xlinkActuate":zn(e,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":zn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":zn(e,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":zn(e,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":zn(e,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":zn(e,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":zn(e,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":zn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":zn(e,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ci(e,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=rx.get(l)||l,ci(e,l,u))}}function Nd(e,a,l,u,o,d){switch(l){case"style":Sg(e,u,d);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=l}}break;case"children":typeof u=="string"?hi(e,u):(typeof u=="number"||typeof u=="bigint")&&hi(e,""+u);break;case"onScroll":u!=null&&je("scroll",e);break;case"onScrollEnd":u!=null&&je("scrollend",e);break;case"onClick":u!=null&&(e.onclick=dc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hu.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(o=l.endsWith("Capture"),a=l.slice(2,o?l.length-7:void 0),d=e[Lt]||null,d=d!=null?d[l]:null,typeof d=="function"&&e.removeEventListener(a,d,o),typeof u=="function")){typeof d!="function"&&d!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(a,u,o);break e}l in e?e[l]=u:u===!0?e.setAttribute(l,""):ci(e,l,u)}}}function Ot(e,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",e),je("load",e);var u=!1,o=!1,d;for(d in l)if(l.hasOwnProperty(d)){var _=l[d];if(_!=null)switch(d){case"src":u=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Qe(e,a,d,_,l,null)}}o&&Qe(e,a,"srcSet",l.srcSet,l,null),u&&Qe(e,a,"src",l.src,l,null);return;case"input":je("invalid",e);var x=d=_=o=null,z=null,Q=null;for(u in l)if(l.hasOwnProperty(u)){var ae=l[u];if(ae!=null)switch(u){case"name":o=ae;break;case"type":_=ae;break;case"checked":z=ae;break;case"defaultChecked":Q=ae;break;case"value":d=ae;break;case"defaultValue":x=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,a));break;default:Qe(e,a,u,ae,l,null)}}_g(e,d,x,z,Q,_,o,!1),vu(e);return;case"select":je("invalid",e),u=_=d=null;for(o in l)if(l.hasOwnProperty(o)&&(x=l[o],x!=null))switch(o){case"value":d=x;break;case"defaultValue":_=x;break;case"multiple":u=x;default:Qe(e,a,o,x,l,null)}a=d,l=_,e.multiple=!!u,a!=null?di(e,!!u,a,!1):l!=null&&di(e,!!u,l,!0);return;case"textarea":je("invalid",e),d=o=u=null;for(_ in l)if(l.hasOwnProperty(_)&&(x=l[_],x!=null))switch(_){case"value":u=x;break;case"defaultValue":o=x;break;case"children":d=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:Qe(e,a,_,x,l,null)}wg(e,u,o,d),vu(e);return;case"option":for(z in l)if(l.hasOwnProperty(z)&&(u=l[z],u!=null))switch(z){case"selected":e.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Qe(e,a,z,u,l,null)}return;case"dialog":je("beforetoggle",e),je("toggle",e),je("cancel",e),je("close",e);break;case"iframe":case"object":je("load",e);break;case"video":case"audio":for(u=0;u<ss.length;u++)je(ss[u],e);break;case"image":je("error",e),je("load",e);break;case"details":je("toggle",e);break;case"embed":case"source":case"link":je("error",e),je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in l)if(l.hasOwnProperty(Q)&&(u=l[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Qe(e,a,Q,u,l,null)}return;default:if(Go(a)){for(ae in l)l.hasOwnProperty(ae)&&(u=l[ae],u!==void 0&&Nd(e,a,ae,u,l,void 0));return}}for(x in l)l.hasOwnProperty(x)&&(u=l[x],u!=null&&Qe(e,a,x,u,l,null))}function RS(e,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,d=null,_=null,x=null,z=null,Q=null,ae=null;for(K in l){var se=l[K];if(l.hasOwnProperty(K)&&se!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":z=se;default:u.hasOwnProperty(K)||Qe(e,a,K,null,u,se)}}for(var I in u){var K=u[I];if(se=l[I],u.hasOwnProperty(I)&&(K!=null||se!=null))switch(I){case"type":d=K;break;case"name":o=K;break;case"checked":Q=K;break;case"defaultChecked":ae=K;break;case"value":_=K;break;case"defaultValue":x=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,a));break;default:K!==se&&Qe(e,a,I,K,u,se)}}Xo(e,_,x,z,Q,ae,d,o);return;case"select":K=_=x=I=null;for(d in l)if(z=l[d],l.hasOwnProperty(d)&&z!=null)switch(d){case"value":break;case"multiple":K=z;default:u.hasOwnProperty(d)||Qe(e,a,d,null,u,z)}for(o in u)if(d=u[o],z=l[o],u.hasOwnProperty(o)&&(d!=null||z!=null))switch(o){case"value":I=d;break;case"defaultValue":x=d;break;case"multiple":_=d;default:d!==z&&Qe(e,a,o,d,u,z)}a=x,l=_,u=K,I!=null?di(e,!!l,I,!1):!!u!=!!l&&(a!=null?di(e,!!l,a,!0):di(e,!!l,l?[]:"",!1));return;case"textarea":K=I=null;for(x in l)if(o=l[x],l.hasOwnProperty(x)&&o!=null&&!u.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Qe(e,a,x,null,u,o)}for(_ in u)if(o=u[_],d=l[_],u.hasOwnProperty(_)&&(o!=null||d!=null))switch(_){case"value":I=o;break;case"defaultValue":K=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(i(91));break;default:o!==d&&Qe(e,a,_,o,u,d)}bg(e,I,K);return;case"option":for(var Ee in l)if(I=l[Ee],l.hasOwnProperty(Ee)&&I!=null&&!u.hasOwnProperty(Ee))switch(Ee){case"selected":e.selected=!1;break;default:Qe(e,a,Ee,null,u,I)}for(z in u)if(I=u[z],K=l[z],u.hasOwnProperty(z)&&I!==K&&(I!=null||K!=null))switch(z){case"selected":e.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Qe(e,a,z,I,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in l)I=l[we],l.hasOwnProperty(we)&&I!=null&&!u.hasOwnProperty(we)&&Qe(e,a,we,null,u,I);for(Q in u)if(I=u[Q],K=l[Q],u.hasOwnProperty(Q)&&I!==K&&(I!=null||K!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(137,a));break;default:Qe(e,a,Q,I,u,K)}return;default:if(Go(a)){for(var Ze in l)I=l[Ze],l.hasOwnProperty(Ze)&&I!==void 0&&!u.hasOwnProperty(Ze)&&Nd(e,a,Ze,void 0,u,I);for(ae in u)I=u[ae],K=l[ae],!u.hasOwnProperty(ae)||I===K||I===void 0&&K===void 0||Nd(e,a,ae,I,u,K);return}}for(var q in l)I=l[q],l.hasOwnProperty(q)&&I!=null&&!u.hasOwnProperty(q)&&Qe(e,a,q,null,u,I);for(se in u)I=u[se],K=l[se],!u.hasOwnProperty(se)||I===K||I==null&&K==null||Qe(e,a,se,I,u,K)}var Dd=null,Od=null;function hc(e){return e.nodeType===9?e:e.ownerDocument}function xp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sp(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function zd(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ud=null;function NS(){var e=window.event;return e&&e.type==="popstate"?e===Ud?!1:(Ud=e,!0):(Ud=null,!1)}var Ep=typeof setTimeout=="function"?setTimeout:void 0,DS=typeof clearTimeout=="function"?clearTimeout:void 0,Ap=typeof Promise=="function"?Promise:void 0,OS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ap<"u"?function(e){return Ap.resolve(null).then(e).catch(zS)}:Ep;function zS(e){setTimeout(function(){throw e})}function ur(e){return e==="head"}function Tp(e,a){var l=a,u=0,o=0;do{var d=l.nextSibling;if(e.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(0<u&&8>u){l=u;var _=e.ownerDocument;if(l&1&&cs(_.documentElement),l&2&&cs(_.body),l&4)for(l=_.head,cs(l),_=l.firstChild;_;){var x=_.nextSibling,z=_.nodeName;_[Mr]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=x}}if(o===0){e.removeChild(d),ps(a);return}o--}else l==="$"||l==="$?"||l==="$!"?o++:u=l.charCodeAt(0)-48;else u=0;l=d}while(l);ps(a)}function jd(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":jd(l),El(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function US(e,a,l,u){for(;e.nodeType===1;){var o=l;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(u){if(!e[Mr])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var d=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Hn(e.nextSibling),e===null)break}return null}function jS(e,a,l){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Hn(e.nextSibling),e===null))return null;return e}function Hd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function HS(e,a){var l=e.ownerDocument;if(e.data!=="$?"||l.readyState==="complete")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),e._reactRetry=u}}function Hn(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return e}var Bd=null;function Mp(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return e;a--}else l==="/$"&&a++}e=e.previousSibling}return null}function Cp(e,a,l){switch(a=hc(l),e){case"html":if(e=a.documentElement,!e)throw Error(i(452));return e;case"head":if(e=a.head,!e)throw Error(i(453));return e;case"body":if(e=a.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function cs(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);El(e)}var Mn=new Map,Rp=new Set;function mc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ea=Y.d;Y.d={f:BS,r:LS,D:kS,C:$S,L:YS,m:qS,X:VS,S:XS,M:GS};function BS(){var e=Ea.f(),a=ic();return e||a}function LS(e){var a=qa(e);a!==null&&a.tag===5&&a.type==="form"?I0(a):Ea.r(e)}var qi=typeof document>"u"?null:document;function Np(e,a,l){var u=qi;if(u&&typeof a=="string"&&a){var o=bn(a);o='link[rel="'+e+'"][href="'+o+'"]',typeof l=="string"&&(o+='[crossorigin="'+l+'"]'),Rp.has(o)||(Rp.add(o),e={rel:e,crossOrigin:l,href:a},u.querySelector(o)===null&&(a=u.createElement("link"),Ot(a,"link",e),ft(a),u.head.appendChild(a)))}}function kS(e){Ea.D(e),Np("dns-prefetch",e,null)}function $S(e,a){Ea.C(e,a),Np("preconnect",e,a)}function YS(e,a,l){Ea.L(e,a,l);var u=qi;if(u&&e&&a){var o='link[rel="preload"][as="'+bn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(o+='[imagesrcset="'+bn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(o+='[imagesizes="'+bn(l.imageSizes)+'"]')):o+='[href="'+bn(e)+'"]';var d=o;switch(a){case"style":d=Xi(e);break;case"script":d=Vi(e)}Mn.has(d)||(e=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:e,as:a},l),Mn.set(d,e),u.querySelector(o)!==null||a==="style"&&u.querySelector(os(d))||a==="script"&&u.querySelector(fs(d))||(a=u.createElement("link"),Ot(a,"link",e),ft(a),u.head.appendChild(a)))}}function qS(e,a){Ea.m(e,a);var l=qi;if(l&&e){var u=a&&typeof a.as=="string"?a.as:"script",o='link[rel="modulepreload"][as="'+bn(u)+'"][href="'+bn(e)+'"]',d=o;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Vi(e)}if(!Mn.has(d)&&(e=y({rel:"modulepreload",href:e},a),Mn.set(d,e),l.querySelector(o)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(fs(d)))return}u=l.createElement("link"),Ot(u,"link",e),ft(u),l.head.appendChild(u)}}}function XS(e,a,l){Ea.S(e,a,l);var u=qi;if(u&&e){var o=Xa(u).hoistableStyles,d=Xi(e);a=a||"default";var _=o.get(d);if(!_){var x={loading:0,preload:null};if(_=u.querySelector(os(d)))x.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":a},l),(l=Mn.get(d))&&Ld(e,l);var z=_=u.createElement("link");ft(z),Ot(z,"link",e),z._p=new Promise(function(Q,ae){z.onload=Q,z.onerror=ae}),z.addEventListener("load",function(){x.loading|=1}),z.addEventListener("error",function(){x.loading|=2}),x.loading|=4,gc(_,a,u)}_={type:"stylesheet",instance:_,count:1,state:x},o.set(d,_)}}}function VS(e,a){Ea.X(e,a);var l=qi;if(l&&e){var u=Xa(l).hoistableScripts,o=Vi(e),d=u.get(o);d||(d=l.querySelector(fs(o)),d||(e=y({src:e,async:!0},a),(a=Mn.get(o))&&kd(e,a),d=l.createElement("script"),ft(d),Ot(d,"link",e),l.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(o,d))}}function GS(e,a){Ea.M(e,a);var l=qi;if(l&&e){var u=Xa(l).hoistableScripts,o=Vi(e),d=u.get(o);d||(d=l.querySelector(fs(o)),d||(e=y({src:e,async:!0,type:"module"},a),(a=Mn.get(o))&&kd(e,a),d=l.createElement("script"),ft(d),Ot(d,"link",e),l.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(o,d))}}function Dp(e,a,l,u){var o=(o=fe.current)?mc(o):null;if(!o)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Xi(l.href),l=Xa(o).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Xi(l.href);var d=Xa(o).hoistableStyles,_=d.get(e);if(_||(o=o.ownerDocument||o,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,_),(d=o.querySelector(os(e)))&&!d._p&&(_.instance=d,_.state.loading=5),Mn.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Mn.set(e,l),d||QS(o,e,l,_.state))),a&&u===null)throw Error(i(528,""));return _}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Vi(l),l=Xa(o).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Xi(e){return'href="'+bn(e)+'"'}function os(e){return'link[rel="stylesheet"]['+e+"]"}function Op(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function QS(e,a,l,u){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=e.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Ot(a,"link",l),ft(a),e.head.appendChild(a))}function Vi(e){return'[src="'+bn(e)+'"]'}function fs(e){return"script[async]"+e}function zp(e,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=e.querySelector('style[data-href~="'+bn(l.href)+'"]');if(u)return a.instance=u,ft(u),u;var o=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(e.ownerDocument||e).createElement("style"),ft(u),Ot(u,"style",o),gc(u,l.precedence,e),a.instance=u;case"stylesheet":o=Xi(l.href);var d=e.querySelector(os(o));if(d)return a.state.loading|=4,a.instance=d,ft(d),d;u=Op(l),(o=Mn.get(o))&&Ld(u,o),d=(e.ownerDocument||e).createElement("link"),ft(d);var _=d;return _._p=new Promise(function(x,z){_.onload=x,_.onerror=z}),Ot(d,"link",u),a.state.loading|=4,gc(d,l.precedence,e),a.instance=d;case"script":return d=Vi(l.src),(o=e.querySelector(fs(d)))?(a.instance=o,ft(o),o):(u=l,(o=Mn.get(d))&&(u=y({},l),kd(u,o)),e=e.ownerDocument||e,o=e.createElement("script"),ft(o),Ot(o,"link",u),e.head.appendChild(o),a.instance=o);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,gc(u,l.precedence,e));return a.instance}function gc(e,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=u.length?u[u.length-1]:null,d=o,_=0;_<u.length;_++){var x=u[_];if(x.dataset.precedence===a)d=x;else if(d!==o)break}d?d.parentNode.insertBefore(e,d.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(e,a.firstChild))}function Ld(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function kd(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var yc=null;function Up(e,a,l){if(yc===null){var u=new Map,o=yc=new Map;o.set(l,u)}else o=yc,u=o.get(l),u||(u=new Map,o.set(l,u));if(u.has(e))return u;for(u.set(e,null),l=l.getElementsByTagName(e),o=0;o<l.length;o++){var d=l[o];if(!(d[Mr]||d[St]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(a)||"";_=e+_;var x=u.get(_);x?x.push(d):u.set(_,[d])}}return u}function jp(e,a,l){e=e.ownerDocument||e,e.head.insertBefore(l,a==="title"?e.querySelector("head > title"):null)}function ZS(e,a,l){if(l===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Hp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ds=null;function FS(){}function IS(e,a,l){if(ds===null)throw Error(i(475));var u=ds;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=Xi(l.href),d=e.querySelector(os(o));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(u.count++,u=pc.bind(u),e.then(u,u)),a.state.loading|=4,a.instance=d,ft(d);return}d=e.ownerDocument||e,l=Op(l),(o=Mn.get(o))&&Ld(l,o),d=d.createElement("link"),ft(d);var _=d;_._p=new Promise(function(x,z){_.onload=x,_.onerror=z}),Ot(d,"link",l),a.instance=d}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,e),(e=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=pc.bind(u),e.addEventListener("load",a),e.addEventListener("error",a))}}function KS(){if(ds===null)throw Error(i(475));var e=ds;return e.stylesheets&&e.count===0&&$d(e,e.stylesheets),0<e.count?function(a){var l=setTimeout(function(){if(e.stylesheets&&$d(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l)}}:null}function pc(){if(this.count--,this.count===0){if(this.stylesheets)$d(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var vc=null;function $d(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,vc=new Map,a.forEach(JS,e),vc=null,pc.call(e))}function JS(e,a){if(!(a.state.loading&4)){var l=vc.get(e);if(l)var u=l.get(null);else{l=new Map,vc.set(e,l);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<o.length;d++){var _=o[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),u=_)}u&&l.set(null,u)}o=a.instance,_=o.getAttribute("data-precedence"),d=l.get(_)||u,d===u&&l.set(null,o),l.set(_,o),this.count++,u=pc.bind(this),o.addEventListener("load",u),o.addEventListener("error",u),d?d.parentNode.insertBefore(o,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),a.state.loading|=4}}var hs={$$typeof:O,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function PS(e,a,l,u,o,d,_,x){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tr(0),this.hiddenUpdates=Tr(null),this.identifierPrefix=u,this.onUncaughtError=o,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function Bp(e,a,l,u,o,d,_,x,z,Q,ae,se){return e=new PS(e,a,l,_,x,z,Q,se),a=1,d===!0&&(a|=24),d=rn(3,null,null,a),e.current=d,d.stateNode=e,a=wf(),a.refCount++,e.pooledCache=a,a.refCount++,d.memoizedState={element:u,isDehydrated:l,cache:a},Af(d),e}function Lp(e){return e?(e=wi,e):wi}function kp(e,a,l,u,o,d){o=Lp(o),u.context===null?u.context=o:u.pendingContext=o,u=Ia(a),u.payload={element:l},d=d===void 0?null:d,d!==null&&(u.callback=d),l=Ka(e,u,a),l!==null&&(on(l,e,a),Xl(l,e,a))}function $p(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<a?l:a}}function Yd(e,a){$p(e,a),(e=e.alternate)&&$p(e,a)}function Yp(e){if(e.tag===13){var a=bi(e,67108864);a!==null&&on(a,e,67108864),Yd(e,67108864)}}var _c=!0;function WS(e,a,l,u){var o=R.T;R.T=null;var d=Y.p;try{Y.p=2,qd(e,a,l,u)}finally{Y.p=d,R.T=o}}function eE(e,a,l,u){var o=R.T;R.T=null;var d=Y.p;try{Y.p=8,qd(e,a,l,u)}finally{Y.p=d,R.T=o}}function qd(e,a,l,u){if(_c){var o=Xd(u);if(o===null)Rd(e,a,u,bc,l),Xp(e,u);else if(nE(o,e,a,l,u))u.stopPropagation();else if(Xp(e,u),a&4&&-1<tE.indexOf(e)){for(;o!==null;){var d=qa(o);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Vt(d.pendingLanes);if(_!==0){var x=d;for(x.pendingLanes|=2,x.entangledLanes|=2;_;){var z=1<<31-ot(_);x.entanglements[1]|=z,_&=~z}Wn(d),(qe&6)===0&&(ac=Me()+500,ls(0))}}break;case 13:x=bi(d,2),x!==null&&on(x,d,2),ic(),Yd(d,2)}if(d=Xd(u),d===null&&Rd(e,a,u,bc,l),d===o)break;o=d}o!==null&&u.stopPropagation()}else Rd(e,a,u,null,l)}}function Xd(e){return e=Zo(e),Vd(e)}var bc=null;function Vd(e){if(bc=null,e=ca(e),e!==null){var a=c(e);if(a===null)e=null;else{var l=a.tag;if(l===13){if(e=f(a),e!==null)return e;e=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return bc=e,null}function qp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case wt:return 2;case yn:return 8;case Zn:case Ba:return 32;case sa:return 268435456;default:return 32}default:return 32}}var Gd=!1,cr=null,or=null,fr=null,ms=new Map,gs=new Map,dr=[],tE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xp(e,a){switch(e){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":ms.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":gs.delete(a.pointerId)}}function ys(e,a,l,u,o,d){return e===null||e.nativeEvent!==d?(e={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:d,targetContainers:[o]},a!==null&&(a=qa(a),a!==null&&Yp(a)),e):(e.eventSystemFlags|=u,a=e.targetContainers,o!==null&&a.indexOf(o)===-1&&a.push(o),e)}function nE(e,a,l,u,o){switch(a){case"focusin":return cr=ys(cr,e,a,l,u,o),!0;case"dragenter":return or=ys(or,e,a,l,u,o),!0;case"mouseover":return fr=ys(fr,e,a,l,u,o),!0;case"pointerover":var d=o.pointerId;return ms.set(d,ys(ms.get(d)||null,e,a,l,u,o)),!0;case"gotpointercapture":return d=o.pointerId,gs.set(d,ys(gs.get(d)||null,e,a,l,u,o)),!0}return!1}function Vp(e){var a=ca(e.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=f(l),a!==null){e.blockedOn=a,ko(e.priority,function(){if(l.tag===13){var u=cn();u=wl(u);var o=bi(l,u);o!==null&&on(o,l,u),Yd(l,u)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wc(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var l=Xd(e.nativeEvent);if(l===null){l=e.nativeEvent;var u=new l.constructor(l.type,l);Qo=u,l.target.dispatchEvent(u),Qo=null}else return a=qa(l),a!==null&&Yp(a),e.blockedOn=l,!1;a.shift()}return!0}function Gp(e,a,l){wc(e)&&l.delete(a)}function aE(){Gd=!1,cr!==null&&wc(cr)&&(cr=null),or!==null&&wc(or)&&(or=null),fr!==null&&wc(fr)&&(fr=null),ms.forEach(Gp),gs.forEach(Gp)}function xc(e,a){e.blockedOn===a&&(e.blockedOn=null,Gd||(Gd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,aE)))}var Sc=null;function Qp(e){Sc!==e&&(Sc=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Sc===e&&(Sc=null);for(var a=0;a<e.length;a+=3){var l=e[a],u=e[a+1],o=e[a+2];if(typeof u!="function"){if(Vd(u||l)===null)continue;break}var d=qa(l);d!==null&&(e.splice(a,3),a-=3,Vf(d,{pending:!0,data:o,method:l.method,action:u},u,o))}}))}function ps(e){function a(z){return xc(z,e)}cr!==null&&xc(cr,e),or!==null&&xc(or,e),fr!==null&&xc(fr,e),ms.forEach(a),gs.forEach(a);for(var l=0;l<dr.length;l++){var u=dr[l];u.blockedOn===e&&(u.blockedOn=null)}for(;0<dr.length&&(l=dr[0],l.blockedOn===null);)Vp(l),l.blockedOn===null&&dr.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var o=l[u],d=l[u+1],_=o[Lt]||null;if(typeof d=="function")_||Qp(l);else if(_){var x=null;if(d&&d.hasAttribute("formAction")){if(o=d,_=d[Lt]||null)x=_.formAction;else if(Vd(o)!==null)continue}else x=_.action;typeof x=="function"?l[u+1]=x:(l.splice(u,3),u-=3),Qp(l)}}}function Qd(e){this._internalRoot=e}Ec.prototype.render=Qd.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=cn();kp(l,u,e,a,null,null)},Ec.prototype.unmount=Qd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;kp(e.current,2,null,e,null,null),ic(),a[Ya]=null}};function Ec(e){this._internalRoot=e}Ec.prototype.unstable_scheduleHydration=function(e){if(e){var a=ou();e={blockedOn:null,target:e,priority:a};for(var l=0;l<dr.length&&a!==0&&a<dr[l].priority;l++);dr.splice(l,0,e),l===0&&Vp(e)}};var Zp=n.version;if(Zp!=="19.1.0")throw Error(i(527,Zp,"19.1.0"));Y.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=g(a),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var rE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{tn=Ac.inject(rE),lt=Ac}catch{}}return _s.createRoot=function(e,a){if(!s(e))throw Error(i(299));var l=!1,u="",o=cy,d=oy,_=fy,x=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks)),a=Bp(e,1,!1,null,null,l,u,o,d,_,x,null),e[Ya]=a.current,Cd(e),new Qd(a)},_s.hydrateRoot=function(e,a,l){if(!s(e))throw Error(i(299));var u=!1,o="",d=cy,_=oy,x=fy,z=null,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(o=l.identifierPrefix),l.onUncaughtError!==void 0&&(d=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(x=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(z=l.unstable_transitionCallbacks),l.formState!==void 0&&(Q=l.formState)),a=Bp(e,1,!0,a,l??null,u,o,d,_,x,z,Q),a.context=Lp(null),l=a.current,u=cn(),u=wl(u),o=Ia(u),o.callback=null,Ka(l,o,u),l=u,a.current.lanes=l,$a(a,l),Wn(a),e[Ya]=a.current,Cd(e),new Ec(a)},_s.version="19.1.0",_s}var av;function hE(){if(av)return Id.exports;av=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Id.exports=dE(),Id.exports}var mE=hE();const Z_=U.createContext(void 0),ct=()=>{const t=U.useContext(Z_);if(!t)throw new Error("useStateMachine must be used inside <StateMachine>");return t},Bn=({name:t,onEnter:n,onExit:r,transition:i,children:s})=>{const{registerState:c,unregisterState:f,currentState:h}=ct();return U.useEffect(()=>{const g={element:s||E.jsx(E.Fragment,{}),onEnter:n,onExit:r,transition:i};return c(t,g),()=>{f(t)}},[t,s,n,r,i,c,f]),h===t?E.jsx(E.Fragment,{children:s}):null},gE=({initial:t,children:n,name:r})=>{const i=`yg-${r??"#"}`,s=U.useCallback(()=>{const O=window.location.hash.startsWith("#?")?window.location.hash.slice(2):"";return new URLSearchParams(O).get(i)},[i]),c=U.useCallback(()=>{const O=new URLSearchParams(window.location.hash.startsWith("#?")?window.location.hash.slice(2):""),M=Array.from(O.entries()).map(([H,j])=>{const k=Number(j);return[H,!isNaN(k)&&j!==""?k:j]});return Object.fromEntries(M)},[]),[f,h]=U.useState(()=>s()??t),g=U.useRef(f);U.useEffect(()=>{g.current=f},[f]);const[m,y]=U.useState(()=>c()),p=U.useRef({}),v=U.useCallback((O,M)=>{p.current[O]=M},[]),b=U.useCallback(O=>{delete p.current[O]},[]),S=U.useCallback(O=>{h(M=>{var j,k,F,X,ee;if(M===O)return M;const H=M?(j=p.current[M])==null?void 0:j.transition:void 0;return H&&!H.includes(O)?(console.warn(`Transition from "${M}" to "${O}" not allowed.`),M):(M&&((F=(k=p.current[M])==null?void 0:k.onExit)==null||F.call(k)),(ee=(X=p.current[O])==null?void 0:X.onEnter)==null||ee.call(X),O)})},[]),w=U.useCallback(O=>{var X;const M=g.current;if(M===O)return;const H=M?(X=p.current[M])==null?void 0:X.transition:void 0;if(H&&!H.includes(O)){console.warn(`Transition from "${M}" to "${O}" not allowed.`);return}const j=window.location.hash.startsWith("#?")?window.location.hash.slice(2):"",k=new URLSearchParams(j);k.set(i,O);const F=`#?${k.toString()}`;window.history.pushState(null,"",F),window.dispatchEvent(new HashChangeEvent("hashchange"))},[i]),C=U.useCallback(()=>{const O=window.location.hash.startsWith("#?")?window.location.hash.slice(2):"",M=new URLSearchParams(O);M.delete(i);const H=M.toString()?`#?${M.toString()}`:"";window.history.pushState(null,"",H),window.dispatchEvent(new HashChangeEvent("hashchange"))},[i]),N=U.useCallback((O,M=!1)=>{y(H=>{const j=M?Object.fromEntries(Object.entries(H).filter(([X])=>X.startsWith("yg-"))):{...H};for(const[X,ee]of Object.entries(O))j[X]=ee;const k=Object.fromEntries(Object.entries(j).map(([X,ee])=>[X,String(ee)])),F=new URLSearchParams(k).toString();return window.location.hash=`?${F}`,j})},[]);U.useEffect(()=>{const O=()=>{const M=s();M?M!==g.current&&S(M):h(void 0),y(c())};return O(),window.addEventListener("hashchange",O),()=>window.removeEventListener("hashchange",O)},[S,s,c]);const T=U.useMemo(()=>{var O;return{currentState:f,gotoState:w,close:C,is:M=>M===f,availableTransitions:f?((O=p.current[f])==null?void 0:O.transition)??[]:[],query:m,setQuery:N,registerState:v,unregisterState:b}},[f,w,C,m,N,v,b]);return E.jsx(Z_.Provider,{value:T,children:f?n:null})};function Ln({data:t,replace:n,to:r,children:i,className:s,...c}){const{gotoState:f,is:h,setQuery:g}=ct(),m=[s,h(r)?"active":void 0].filter(Boolean).join(" ");return E.jsx("button",{...c,className:m,onClick:()=>{t&&g(t,n),f(r)},children:i??r})}function yE({data:t,machine:n,to:r,children:i,className:s,...c}){return E.jsx("button",{...c,className:s,onClick:()=>{const f=window.location.hash.startsWith("#?")?window.location.hash.slice(2):"",h=new URLSearchParams(f);if(h.set(`yg-${n}`,r),t)for(const[m,y]of Object.entries(t))h.set(m,String(y));const g=`#?${h.toString()}`;window.history.pushState(null,"",g),window.dispatchEvent(new HashChangeEvent("hashchange"))},children:i??r})}function pE(){return E.jsx("header",{children:E.jsx(yE,{className:"plain",machine:"main",to:"main",children:E.jsx("h1",{children:" Poemia "})})})}function vE(){const[t,n]=U.useState(()=>window.localStorage.getItem("openaiKey")||"");return U.useEffect(()=>{t?window.localStorage.setItem("openaiKey",t):window.localStorage.removeItem("openaiKey")},[t]),E.jsx("div",{children:E.jsxs("label",{children:["OpenAI API Key:"," ",E.jsx("input",{type:"password",value:t,onChange:r=>n(r.target.value),placeholder:"sk-..."})]})})}function _E(){return E.jsxs("div",{children:[E.jsx("h2",{children:"Settings"}),E.jsx(vE,{})]})}const zt=[];for(let t=0;t<256;++t)zt.push((t+256).toString(16).slice(1));function bE(t,n=0){return(zt[t[n+0]]+zt[t[n+1]]+zt[t[n+2]]+zt[t[n+3]]+"-"+zt[t[n+4]]+zt[t[n+5]]+"-"+zt[t[n+6]]+zt[t[n+7]]+"-"+zt[t[n+8]]+zt[t[n+9]]+"-"+zt[t[n+10]]+zt[t[n+11]]+zt[t[n+12]]+zt[t[n+13]]+zt[t[n+14]]+zt[t[n+15]]).toLowerCase()}let Wd;const wE=new Uint8Array(16);function xE(){if(!Wd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Wd=crypto.getRandomValues.bind(crypto)}return Wd(wE)}const SE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rv={randomUUID:SE};function EE(t,n,r){var s;if(rv.randomUUID&&!t)return rv.randomUUID();t=t||{};const i=t.random??((s=t.rng)==null?void 0:s.call(t))??xE();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,bE(i)}const AE=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:/;function F_(t){if(t&&typeof t=="object")for(const[n,r]of Object.entries(t))typeof r=="string"&&AE.test(r)?t[n]=new Date(r):typeof r=="object"&&r!==null&&(t[n]=F_(r));return t}function TE(t){try{const n=typeof window<"u"?window.localStorage.getItem(t):null;if(!n)return new Map;const r=JSON.parse(n),i=new Map;for(const s of r){const c=F_(s);i.set(c.id,c)}return i}catch{return new Map}}function eh(t,n){if(typeof window>"u")return;const r=Array.from(n.values());window.localStorage.setItem(t,JSON.stringify(r))}function ii(t){const n=TE(t),r=()=>new Date;return{create(i){const s=!i.id||i.id===""?EE():i.id,c=r(),f={...i,id:s,created:c,updated:c};return n.set(s,f),eh(t,n),f},read(i){return n.get(i)},readAll(i){const s=Array.from(n.values());return i?s.filter(c=>c.realmId===i):s},remove(i){const s=n.delete(i);return s&&eh(t,n),s},update(i,s){const c=n.get(i);if(!c)return;const f={...c,...s,updated:r()};return n.set(i,f),eh(t,n),f}}}function I_(t){const n=Da.read(t);if(!n){alert(`Realm ${t} not found`);return}return{realm:n,characters:qt.readAll(n.id),concepts:Dn.readAll(n.id),events:ra.readAll(n.id),items:mn.readAll(n.id),locations:Wt.readAll(n.id)}}function ME(t){if(!t.realm||!t.realm.id){alert("Invalid data for merge: missing realm");return}Da.update(t.realm.id,t.realm)||Da.create(t.realm),Array.isArray(t.characters)&&t.characters.forEach(r=>{qt.update(r.id,r)||qt.create(r)}),Array.isArray(t.concepts)&&t.concepts.forEach(r=>{Dn.update(r.id,r)||Dn.create(r)}),Array.isArray(t.events)&&t.events.forEach(r=>{ra.update(r.id,r)||ra.create(r)}),Array.isArray(t.items)&&t.items.forEach(r=>{mn.update(r.id,r)||mn.create(r)}),Array.isArray(t.locations)&&t.locations.forEach(r=>{Wt.update(r.id,r)||Wt.create(r)})}const qt=ii("characters");ii("communities");const Dn=ii("concepts"),ra=ii("events"),mn=ii("items"),Wt=ii("locations"),Da=ii("realms");function iv(t,n){const r=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=n,s.click(),URL.revokeObjectURL(i)}function CE(){return new Promise((t,n)=>{const r=document.createElement("input");r.type="file",r.accept=".json,application/json",r.onchange=i=>{var f;const s=(f=i.target.files)==null?void 0:f[0];if(!s){t(null);return}const c=new FileReader;c.onload=h=>{var g;try{const m=JSON.parse((g=h.target)==null?void 0:g.result);t(m)}catch(m){n(m)}},c.onerror=()=>n(new Error("Failed to read file")),c.readAsText(s)},r.click()})}async function RE(t,n){n.includes(".")||(n+=".json");try{if("showSaveFilePicker"in window){const i=await(await window.showSaveFilePicker({suggestedName:n,types:[{description:"JSON files",accept:{"application/json":[".json"]}}]})).createWritable();await i.write(JSON.stringify(t,null,2)),await i.close()}else iv(t,n)}catch{iv(t,n)}}const NE="_list_jj7og_1",DE={list:NE};function OE(){const[t]=U.useState([]),[n,r]=U.useState([]),[,i]=U.useState([]),s=async()=>{const h=await CE();await ME(h),c()},c=()=>{const h=Da.readAll();r(h)},f=async(h,g)=>{const m=I_(h);await RE(m,`${g}.json`)};return U.useEffect(()=>{c()},[]),U.useEffect(()=>{const h=[];for(const g of n)h.push({uuid:g.id,name:g.name});console.debug("DATA:NEWDATA",h),i(h)},[t,n]),E.jsxs("div",{children:[E.jsx("h2",{children:"Data"}),E.jsx("button",{onClick:s,children:"Load Data File"}),E.jsx("ul",{className:DE.list,children:n.map(h=>E.jsxs("li",{children:[h.name,E.jsx("button",{onClick:()=>f(h.id,h.name),children:"Save"})]},h.id))})]})}const Ie={DARROW_LEFT:"⇦",FLOPPY_DISK:"💾",PERSON:"👤",PLUS:"➕",RED_X:"❌"};function zE({className:t}){const{query:n,setQuery:r}=ct(),[i,s]=U.useState([]),c=()=>{const h=prompt("Enter a name for the new realm");if(!h)return;const g={name:h,description:"new realm"},m=Da.create(g);f(),r({realmId:m.id})},f=()=>{s(Da.readAll())};return U.useEffect(()=>{f()},[]),E.jsxs("div",{className:t,children:[E.jsx("button",{onClick:c,children:Ie.PLUS}),E.jsxs("select",{onChange:h=>r({realmId:h.target.value}),value:n.realmId,children:[E.jsx("option",{value:"",children:"Select a realm"}),i&&(i==null?void 0:i.map(h=>E.jsx("option",{value:h.id,children:h.name},h.id)))]})]})}function UE(){const{query:t,setQuery:n}=ct(),r=t.id,[i,s]=U.useState({}),[c,f]=U.useState([]),[h,g]=U.useState([]),[m,y]=U.useState([]),p=()=>{g([...h,{key:"",value:""}])},v=(N={})=>Object.entries(N).map(([T,O])=>({key:T,value:String(O)})),b=N=>{const T={};for(const{key:O,value:M}of N)O&&(T[O]=M);return T},S=N=>{const T=qt.read(N);s({name:"",description:"",properties:{},...T,birth:T!=null&&T.birth?new Date(T.birth).toISOString().slice(0,10):"",death:T!=null&&T.death?new Date(T.death).toISOString().slice(0,10):""}),f(v((T==null?void 0:T.properties)||{})),g(v((T==null?void 0:T.relations)||{})),T!=null&&T.realmId?y(qt.readAll(T.realmId)):y([])},w=N=>{prompt(`Type 'yes' to remove the ${i==null?void 0:i.name} character?`)==="yes"&&qt.remove(N),n({id:""})},C=N=>{N.preventDefault();const T={...i,birth:i!=null&&i.birth?new Date(i.birth):void 0,death:i!=null&&i.death?new Date(i.death):void 0,properties:b(c),relations:b(h)};qt.update(i==null?void 0:i.id,T),n({id:""})};return U.useEffect(()=>{r?S(r):(s({}),f([]),g([]),y([]))},[r]),E.jsx(E.Fragment,{children:E.jsxs("form",{onSubmit:C,children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",required:!0,name:"name",value:(i==null?void 0:i.name)||"",onChange:N=>s({...i,name:N.target.value})}),E.jsx("label",{children:"Description"}),E.jsx("textarea",{autoFocus:!0,name:"description",required:!0,value:(i==null?void 0:i.description)||"",onChange:N=>s({...i,description:N.target.value})}),E.jsx("label",{children:"Birth"}),E.jsx("input",{type:"date",name:"birth",value:(i==null?void 0:i.birth)||"",onChange:N=>s({...i,birth:N.target.value})}),E.jsx("label",{children:"Death"}),E.jsx("input",{type:"date",name:"death",value:(i==null?void 0:i.death)||"",onChange:N=>s({...i,death:N.target.value})}),E.jsx("label",{children:"Attributes"}),E.jsx("div",{children:c.map((N,T)=>E.jsxs("span",{className:"key-value",children:[E.jsx("input",{autoFocus:!0,type:"text",placeholder:"Key",value:N.key,onChange:O=>{const M=[...c];M[T]={...M[T],key:O.target.value},f(M)}}),E.jsx("input",{type:"text",placeholder:"Value",value:N.value,onChange:O=>{const M=[...c];M[T]={...M[T],value:O.target.value},f(M)}}),E.jsx("button",{type:"button",onClick:()=>{const O=c.filter((M,H)=>H!==T);f(O)},children:"x"})]},T))}),E.jsx("label",{children:"Add property"}),E.jsx("span",{children:E.jsx("button",{type:"button",onClick:()=>f([...c,{key:"",value:""}]),children:Ie.PLUS})}),E.jsx("label",{children:"Relations"}),E.jsx("div",{children:h.map((N,T)=>E.jsxs("span",{className:"key-value",children:[E.jsx("input",{autoFocus:!0,type:"text",placeholder:"Relation",value:N.key,onChange:O=>{const M=[...h];M[T]={...M[T],key:O.target.value},g(M)}}),E.jsxs("select",{value:N.value,onChange:O=>{const M=[...h];M[T]={...M[T],value:O.target.value},g(M)},children:[E.jsx("option",{value:"",children:"Select character"}),m.map(O=>E.jsx("option",{value:O.id,children:O.name},O.id))]}),E.jsx("button",{type:"button",onClick:()=>{const O=h.filter((M,H)=>H!==T);g(O)},children:Ie.RED_X})]},T))}),E.jsx("span",{children:"Add Relation"}),E.jsx("span",{children:E.jsx("button",{type:"button",onClick:p,children:Ie.PLUS})}),E.jsx("span",{}),E.jsxs("span",{children:[E.jsx("button",{type:"button",onClick:()=>n({id:""}),children:Ie.DARROW_LEFT}),E.jsx("button",{type:"submit",children:Ie.FLOPPY_DISK}),E.jsx("button",{onClick:()=>w(i==null?void 0:i.id),children:Ie.RED_X})]})]})})}function Ht(t){if(typeof t=="string"||typeof t=="number")return""+t;let n="";if(Array.isArray(t))for(let r=0,i;r<t.length;r++)(i=Ht(t[r]))!==""&&(n+=(n&&" ")+i);else for(let r in t)t[r]&&(n+=(n&&" ")+r);return n}var th={exports:{}},nh={},ah={exports:{}},rh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function jE(){if(lv)return rh;lv=1;var t=Ks();function n(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var r=typeof Object.is=="function"?Object.is:n,i=t.useState,s=t.useEffect,c=t.useLayoutEffect,f=t.useDebugValue;function h(p,v){var b=v(),S=i({inst:{value:b,getSnapshot:v}}),w=S[0].inst,C=S[1];return c(function(){w.value=b,w.getSnapshot=v,g(w)&&C({inst:w})},[p,b,v]),s(function(){return g(w)&&C({inst:w}),p(function(){g(w)&&C({inst:w})})},[p]),f(b),b}function g(p){var v=p.getSnapshot;p=p.value;try{var b=v();return!r(p,b)}catch{return!0}}function m(p,v){return v()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return rh.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,rh}var sv;function HE(){return sv||(sv=1,ah.exports=jE()),ah.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function BE(){if(uv)return nh;uv=1;var t=Ks(),n=HE();function r(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var i=typeof Object.is=="function"?Object.is:r,s=n.useSyncExternalStore,c=t.useRef,f=t.useEffect,h=t.useMemo,g=t.useDebugValue;return nh.useSyncExternalStoreWithSelector=function(m,y,p,v,b){var S=c(null);if(S.current===null){var w={hasValue:!1,value:null};S.current=w}else w=S.current;S=h(function(){function N(j){if(!T){if(T=!0,O=j,j=v(j),b!==void 0&&w.hasValue){var k=w.value;if(b(k,j))return M=k}return M=j}if(k=M,i(O,j))return k;var F=v(j);return b!==void 0&&b(k,F)?(O=j,k):(O=j,M=F)}var T=!1,O,M,H=p===void 0?null:p;return[function(){return N(y())},H===null?void 0:function(){return N(H())}]},[y,p,v,b]);var C=s(m,S[0],S[1]);return f(function(){w.hasValue=!0,w.value=C},[C]),g(C),C},nh}var cv;function LE(){return cv||(cv=1,th.exports=BE()),th.exports}var kE=LE();const $E=G_(kE),YE={},ov=t=>{let n;const r=new Set,i=(y,p)=>{const v=typeof y=="function"?y(n):y;if(!Object.is(v,n)){const b=n;n=p??(typeof v!="object"||v===null)?v:Object.assign({},n,v),r.forEach(S=>S(n,b))}},s=()=>n,g={setState:i,getState:s,getInitialState:()=>m,subscribe:y=>(r.add(y),()=>r.delete(y)),destroy:()=>{(YE?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},m=n=t(i,s,g);return g},qE=t=>t?ov(t):ov,{useDebugValue:XE}=te,{useSyncExternalStoreWithSelector:VE}=$E,GE=t=>t;function K_(t,n=GE,r){const i=VE(t.subscribe,t.getState,t.getServerState||t.getInitialState,n,r);return XE(i),i}const fv=(t,n)=>{const r=qE(t),i=(s,c=n)=>K_(r,s,c);return Object.assign(i,r),i},QE=(t,n)=>t?fv(t,n):fv;function Ct(t,n){if(Object.is(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(const[i,s]of t)if(!Object.is(s,n.get(i)))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(const i of t)if(!n.has(i))return!1;return!0}const r=Object.keys(t);if(r.length!==Object.keys(n).length)return!1;for(const i of r)if(!Object.prototype.hasOwnProperty.call(n,i)||!Object.is(t[i],n[i]))return!1;return!0}var ZE={value:()=>{}};function vo(){for(var t=0,n=arguments.length,r={},i;t<n;++t){if(!(i=arguments[t]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Vc(r)}function Vc(t){this._=t}function FE(t,n){return t.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Vc.prototype=vo.prototype={constructor:Vc,on:function(t,n){var r=this._,i=FE(t+"",r),s,c=-1,f=i.length;if(arguments.length<2){for(;++c<f;)if((s=(t=i[c]).type)&&(s=IE(r[s],t.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<f;)if(s=(t=i[c]).type)r[s]=dv(r[s],t.name,n);else if(n==null)for(s in r)r[s]=dv(r[s],t.name,null);return this},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new Vc(t)},call:function(t,n){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,c;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(c=this._[t],i=0,s=c.length;i<s;++i)c[i].value.apply(n,r)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,c=i.length;s<c;++s)i[s].value.apply(n,r)}};function IE(t,n){for(var r=0,i=t.length,s;r<i;++r)if((s=t[r]).name===n)return s.value}function dv(t,n,r){for(var i=0,s=t.length;i<s;++i)if(t[i].name===n){t[i]=ZE,t=t.slice(0,i).concat(t.slice(i+1));break}return r!=null&&t.push({name:n,value:r}),t}var Nh="http://www.w3.org/1999/xhtml";const hv={svg:"http://www.w3.org/2000/svg",xhtml:Nh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _o(t){var n=t+="",r=n.indexOf(":");return r>=0&&(n=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),hv.hasOwnProperty(n)?{space:hv[n],local:t}:t}function KE(t){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Nh&&n.documentElement.namespaceURI===Nh?n.createElement(t):n.createElementNS(r,t)}}function JE(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function J_(t){var n=_o(t);return(n.local?JE:KE)(n)}function PE(){}function lm(t){return t==null?PE:function(){return this.querySelector(t)}}function WE(t){typeof t!="function"&&(t=lm(t));for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s)for(var c=n[s],f=c.length,h=i[s]=new Array(f),g,m,y=0;y<f;++y)(g=c[y])&&(m=t.call(g,g.__data__,y,c))&&("__data__"in g&&(m.__data__=g.__data__),h[y]=m);return new gn(i,this._parents)}function e2(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function t2(){return[]}function P_(t){return t==null?t2:function(){return this.querySelectorAll(t)}}function n2(t){return function(){return e2(t.apply(this,arguments))}}function a2(t){typeof t=="function"?t=n2(t):t=P_(t);for(var n=this._groups,r=n.length,i=[],s=[],c=0;c<r;++c)for(var f=n[c],h=f.length,g,m=0;m<h;++m)(g=f[m])&&(i.push(t.call(g,g.__data__,m,f)),s.push(g));return new gn(i,s)}function W_(t){return function(){return this.matches(t)}}function eb(t){return function(n){return n.matches(t)}}var r2=Array.prototype.find;function i2(t){return function(){return r2.call(this.children,t)}}function l2(){return this.firstElementChild}function s2(t){return this.select(t==null?l2:i2(typeof t=="function"?t:eb(t)))}var u2=Array.prototype.filter;function c2(){return Array.from(this.children)}function o2(t){return function(){return u2.call(this.children,t)}}function f2(t){return this.selectAll(t==null?c2:o2(typeof t=="function"?t:eb(t)))}function d2(t){typeof t!="function"&&(t=W_(t));for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s)for(var c=n[s],f=c.length,h=i[s]=[],g,m=0;m<f;++m)(g=c[m])&&t.call(g,g.__data__,m,c)&&h.push(g);return new gn(i,this._parents)}function tb(t){return new Array(t.length)}function h2(){return new gn(this._enter||this._groups.map(tb),this._parents)}function to(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}to.prototype={constructor:to,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function m2(t){return function(){return t}}function g2(t,n,r,i,s,c){for(var f=0,h,g=n.length,m=c.length;f<m;++f)(h=n[f])?(h.__data__=c[f],i[f]=h):r[f]=new to(t,c[f]);for(;f<g;++f)(h=n[f])&&(s[f]=h)}function y2(t,n,r,i,s,c,f){var h,g,m=new Map,y=n.length,p=c.length,v=new Array(y),b;for(h=0;h<y;++h)(g=n[h])&&(v[h]=b=f.call(g,g.__data__,h,n)+"",m.has(b)?s[h]=g:m.set(b,g));for(h=0;h<p;++h)b=f.call(t,c[h],h,c)+"",(g=m.get(b))?(i[h]=g,g.__data__=c[h],m.delete(b)):r[h]=new to(t,c[h]);for(h=0;h<y;++h)(g=n[h])&&m.get(v[h])===g&&(s[h]=g)}function p2(t){return t.__data__}function v2(t,n){if(!arguments.length)return Array.from(this,p2);var r=n?y2:g2,i=this._parents,s=this._groups;typeof t!="function"&&(t=m2(t));for(var c=s.length,f=new Array(c),h=new Array(c),g=new Array(c),m=0;m<c;++m){var y=i[m],p=s[m],v=p.length,b=_2(t.call(y,y&&y.__data__,m,i)),S=b.length,w=h[m]=new Array(S),C=f[m]=new Array(S),N=g[m]=new Array(v);r(y,p,w,C,N,b,n);for(var T=0,O=0,M,H;T<S;++T)if(M=w[T]){for(T>=O&&(O=T+1);!(H=C[O])&&++O<S;);M._next=H||null}}return f=new gn(f,i),f._enter=h,f._exit=g,f}function _2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function b2(){return new gn(this._exit||this._groups.map(tb),this._parents)}function w2(t,n,r){var i=this.enter(),s=this,c=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?c.remove():r(c),i&&s?i.merge(s).order():s}function x2(t){for(var n=t.selection?t.selection():t,r=this._groups,i=n._groups,s=r.length,c=i.length,f=Math.min(s,c),h=new Array(s),g=0;g<f;++g)for(var m=r[g],y=i[g],p=m.length,v=h[g]=new Array(p),b,S=0;S<p;++S)(b=m[S]||y[S])&&(v[S]=b);for(;g<s;++g)h[g]=r[g];return new gn(h,this._parents)}function S2(){for(var t=this._groups,n=-1,r=t.length;++n<r;)for(var i=t[n],s=i.length-1,c=i[s],f;--s>=0;)(f=i[s])&&(c&&f.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(f,c),c=f);return this}function E2(t){t||(t=A2);function n(p,v){return p&&v?t(p.__data__,v.__data__):!p-!v}for(var r=this._groups,i=r.length,s=new Array(i),c=0;c<i;++c){for(var f=r[c],h=f.length,g=s[c]=new Array(h),m,y=0;y<h;++y)(m=f[y])&&(g[y]=m);g.sort(n)}return new gn(s,this._parents).order()}function A2(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function T2(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function M2(){return Array.from(this)}function C2(){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,c=i.length;s<c;++s){var f=i[s];if(f)return f}return null}function R2(){let t=0;for(const n of this)++t;return t}function N2(){return!this.node()}function D2(t){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var s=n[r],c=0,f=s.length,h;c<f;++c)(h=s[c])&&t.call(h,h.__data__,c,s);return this}function O2(t){return function(){this.removeAttribute(t)}}function z2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function U2(t,n){return function(){this.setAttribute(t,n)}}function j2(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function H2(t,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function B2(t,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function L2(t,n){var r=_o(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((n==null?r.local?z2:O2:typeof n=="function"?r.local?B2:H2:r.local?j2:U2)(r,n))}function nb(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function k2(t){return function(){this.style.removeProperty(t)}}function $2(t,n,r){return function(){this.style.setProperty(t,n,r)}}function Y2(t,n,r){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,r)}}function q2(t,n,r){return arguments.length>1?this.each((n==null?k2:typeof n=="function"?Y2:$2)(t,n,r??"")):dl(this.node(),t)}function dl(t,n){return t.style.getPropertyValue(n)||nb(t).getComputedStyle(t,null).getPropertyValue(n)}function X2(t){return function(){delete this[t]}}function V2(t,n){return function(){this[t]=n}}function G2(t,n){return function(){var r=n.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function Q2(t,n){return arguments.length>1?this.each((n==null?X2:typeof n=="function"?G2:V2)(t,n)):this.node()[t]}function ab(t){return t.trim().split(/^|\s+/)}function sm(t){return t.classList||new rb(t)}function rb(t){this._node=t,this._names=ab(t.getAttribute("class")||"")}rb.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ib(t,n){for(var r=sm(t),i=-1,s=n.length;++i<s;)r.add(n[i])}function lb(t,n){for(var r=sm(t),i=-1,s=n.length;++i<s;)r.remove(n[i])}function Z2(t){return function(){ib(this,t)}}function F2(t){return function(){lb(this,t)}}function I2(t,n){return function(){(n.apply(this,arguments)?ib:lb)(this,t)}}function K2(t,n){var r=ab(t+"");if(arguments.length<2){for(var i=sm(this.node()),s=-1,c=r.length;++s<c;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?I2:n?Z2:F2)(r,n))}function J2(){this.textContent=""}function P2(t){return function(){this.textContent=t}}function W2(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function eA(t){return arguments.length?this.each(t==null?J2:(typeof t=="function"?W2:P2)(t)):this.node().textContent}function tA(){this.innerHTML=""}function nA(t){return function(){this.innerHTML=t}}function aA(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function rA(t){return arguments.length?this.each(t==null?tA:(typeof t=="function"?aA:nA)(t)):this.node().innerHTML}function iA(){this.nextSibling&&this.parentNode.appendChild(this)}function lA(){return this.each(iA)}function sA(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uA(){return this.each(sA)}function cA(t){var n=typeof t=="function"?t:J_(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function oA(){return null}function fA(t,n){var r=typeof t=="function"?t:J_(t),i=n==null?oA:typeof n=="function"?n:lm(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function dA(){var t=this.parentNode;t&&t.removeChild(this)}function hA(){return this.each(dA)}function mA(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function gA(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function yA(t){return this.select(t?gA:mA)}function pA(t){return arguments.length?this.property("__data__",t):this.node().__data__}function vA(t){return function(n){t.call(this,n,this.__data__)}}function _A(t){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");return i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),{type:n,name:r}})}function bA(t){return function(){var n=this.__on;if(n){for(var r=0,i=-1,s=n.length,c;r<s;++r)c=n[r],(!t.type||c.type===t.type)&&c.name===t.name?this.removeEventListener(c.type,c.listener,c.options):n[++i]=c;++i?n.length=i:delete this.__on}}}function wA(t,n,r){return function(){var i=this.__on,s,c=vA(n);if(i){for(var f=0,h=i.length;f<h;++f)if((s=i[f]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=c,s.options=r),s.value=n;return}}this.addEventListener(t.type,c,r),s={type:t.type,name:t.name,value:n,listener:c,options:r},i?i.push(s):this.__on=[s]}}function xA(t,n,r){var i=_A(t+""),s,c=i.length,f;if(arguments.length<2){var h=this.node().__on;if(h){for(var g=0,m=h.length,y;g<m;++g)for(s=0,y=h[g];s<c;++s)if((f=i[s]).type===y.type&&f.name===y.name)return y.value}return}for(h=n?wA:bA,s=0;s<c;++s)this.each(h(i[s],n,r));return this}function sb(t,n,r){var i=nb(t),s=i.CustomEvent;typeof s=="function"?s=new s(n,r):(s=i.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),t.dispatchEvent(s)}function SA(t,n){return function(){return sb(this,t,n)}}function EA(t,n){return function(){return sb(this,t,n.apply(this,arguments))}}function AA(t,n){return this.each((typeof n=="function"?EA:SA)(t,n))}function*TA(){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,c=i.length,f;s<c;++s)(f=i[s])&&(yield f)}var ub=[null];function gn(t,n){this._groups=t,this._parents=n}function Js(){return new gn([[document.documentElement]],ub)}function MA(){return this}gn.prototype=Js.prototype={constructor:gn,select:WE,selectAll:a2,selectChild:s2,selectChildren:f2,filter:d2,data:v2,enter:h2,exit:b2,join:w2,merge:x2,selection:MA,order:S2,sort:E2,call:T2,nodes:M2,node:C2,size:R2,empty:N2,each:D2,attr:L2,style:q2,property:Q2,classed:K2,text:eA,html:rA,raise:lA,lower:uA,append:cA,insert:fA,remove:hA,clone:yA,datum:pA,on:xA,dispatch:AA,[Symbol.iterator]:TA};function Pt(t){return typeof t=="string"?new gn([[document.querySelector(t)]],[document.documentElement]):new gn([[t]],ub)}function CA(t){let n;for(;n=t.sourceEvent;)t=n;return t}function Yn(t,n){if(t=CA(t),n===void 0&&(n=t.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var s=n.getBoundingClientRect();return[t.clientX-s.left-n.clientLeft,t.clientY-s.top-n.clientTop]}}return[t.pageX,t.pageY]}const RA={passive:!1},$s={capture:!0,passive:!1};function ih(t){t.stopImmediatePropagation()}function ll(t){t.preventDefault(),t.stopImmediatePropagation()}function cb(t){var n=t.document.documentElement,r=Pt(t).on("dragstart.drag",ll,$s);"onselectstart"in n?r.on("selectstart.drag",ll,$s):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ob(t,n){var r=t.document.documentElement,i=Pt(t).on("dragstart.drag",null);n&&(i.on("click.drag",ll,$s),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Tc=t=>()=>t;function Dh(t,{sourceEvent:n,subject:r,target:i,identifier:s,active:c,x:f,y:h,dx:g,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Dh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function NA(t){return!t.ctrlKey&&!t.button}function DA(){return this.parentNode}function OA(t,n){return n??{x:t.x,y:t.y}}function zA(){return navigator.maxTouchPoints||"ontouchstart"in this}function UA(){var t=NA,n=DA,r=OA,i=zA,s={},c=vo("start","drag","end"),f=0,h,g,m,y,p=0;function v(M){M.on("mousedown.drag",b).filter(i).on("touchstart.drag",C).on("touchmove.drag",N,RA).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(M,H){if(!(y||!t.call(this,M,H))){var j=O(this,n.call(this,M,H),M,H,"mouse");j&&(Pt(M.view).on("mousemove.drag",S,$s).on("mouseup.drag",w,$s),cb(M.view),ih(M),m=!1,h=M.clientX,g=M.clientY,j("start",M))}}function S(M){if(ll(M),!m){var H=M.clientX-h,j=M.clientY-g;m=H*H+j*j>p}s.mouse("drag",M)}function w(M){Pt(M.view).on("mousemove.drag mouseup.drag",null),ob(M.view,m),ll(M),s.mouse("end",M)}function C(M,H){if(t.call(this,M,H)){var j=M.changedTouches,k=n.call(this,M,H),F=j.length,X,ee;for(X=0;X<F;++X)(ee=O(this,k,M,H,j[X].identifier,j[X]))&&(ih(M),ee("start",M,j[X]))}}function N(M){var H=M.changedTouches,j=H.length,k,F;for(k=0;k<j;++k)(F=s[H[k].identifier])&&(ll(M),F("drag",M,H[k]))}function T(M){var H=M.changedTouches,j=H.length,k,F;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),k=0;k<j;++k)(F=s[H[k].identifier])&&(ih(M),F("end",M,H[k]))}function O(M,H,j,k,F,X){var ee=c.copy(),W=Yn(X||j,H),ne,ue,D;if((D=r.call(M,new Dh("beforestart",{sourceEvent:j,target:v,identifier:F,active:f,x:W[0],y:W[1],dx:0,dy:0,dispatch:ee}),k))!=null)return ne=D.x-W[0]||0,ue=D.y-W[1]||0,function Z(R,Y,J){var $=W,A;switch(R){case"start":s[F]=Z,A=f++;break;case"end":delete s[F],--f;case"drag":W=Yn(J||Y,H),A=f;break}ee.call(R,M,new Dh(R,{sourceEvent:Y,subject:D,target:v,identifier:F,active:A,x:W[0]+ne,y:W[1]+ue,dx:W[0]-$[0],dy:W[1]-$[1],dispatch:ee}),k)}}return v.filter=function(M){return arguments.length?(t=typeof M=="function"?M:Tc(!!M),v):t},v.container=function(M){return arguments.length?(n=typeof M=="function"?M:Tc(M),v):n},v.subject=function(M){return arguments.length?(r=typeof M=="function"?M:Tc(M),v):r},v.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:Tc(!!M),v):i},v.on=function(){var M=c.on.apply(c,arguments);return M===c?v:M},v.clickDistance=function(M){return arguments.length?(p=(M=+M)*M,v):Math.sqrt(p)},v}function um(t,n,r){t.prototype=n.prototype=r,r.constructor=t}function fb(t,n){var r=Object.create(t.prototype);for(var i in n)r[i]=n[i];return r}function Ps(){}var Ys=.7,no=1/Ys,sl="\\s*([+-]?\\d+)\\s*",qs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ia="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jA=/^#([0-9a-f]{3,8})$/,HA=new RegExp(`^rgb\\(${sl},${sl},${sl}\\)$`),BA=new RegExp(`^rgb\\(${ia},${ia},${ia}\\)$`),LA=new RegExp(`^rgba\\(${sl},${sl},${sl},${qs}\\)$`),kA=new RegExp(`^rgba\\(${ia},${ia},${ia},${qs}\\)$`),$A=new RegExp(`^hsl\\(${qs},${ia},${ia}\\)$`),YA=new RegExp(`^hsla\\(${qs},${ia},${ia},${qs}\\)$`),mv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};um(Ps,ei,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gv,formatHex:gv,formatHex8:qA,formatHsl:XA,formatRgb:yv,toString:yv});function gv(){return this.rgb().formatHex()}function qA(){return this.rgb().formatHex8()}function XA(){return db(this).formatHsl()}function yv(){return this.rgb().formatRgb()}function ei(t){var n,r;return t=(t+"").trim().toLowerCase(),(n=jA.exec(t))?(r=n[1].length,n=parseInt(n[1],16),r===6?pv(n):r===3?new en(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Mc(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Mc(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=HA.exec(t))?new en(n[1],n[2],n[3],1):(n=BA.exec(t))?new en(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=LA.exec(t))?Mc(n[1],n[2],n[3],n[4]):(n=kA.exec(t))?Mc(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=$A.exec(t))?bv(n[1],n[2]/100,n[3]/100,1):(n=YA.exec(t))?bv(n[1],n[2]/100,n[3]/100,n[4]):mv.hasOwnProperty(t)?pv(mv[t]):t==="transparent"?new en(NaN,NaN,NaN,0):null}function pv(t){return new en(t>>16&255,t>>8&255,t&255,1)}function Mc(t,n,r,i){return i<=0&&(t=n=r=NaN),new en(t,n,r,i)}function VA(t){return t instanceof Ps||(t=ei(t)),t?(t=t.rgb(),new en(t.r,t.g,t.b,t.opacity)):new en}function Oh(t,n,r,i){return arguments.length===1?VA(t):new en(t,n,r,i??1)}function en(t,n,r,i){this.r=+t,this.g=+n,this.b=+r,this.opacity=+i}um(en,Oh,fb(Ps,{brighter(t){return t=t==null?no:Math.pow(no,t),new en(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ys:Math.pow(Ys,t),new en(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new en(Pr(this.r),Pr(this.g),Pr(this.b),ao(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vv,formatHex:vv,formatHex8:GA,formatRgb:_v,toString:_v}));function vv(){return`#${Ir(this.r)}${Ir(this.g)}${Ir(this.b)}`}function GA(){return`#${Ir(this.r)}${Ir(this.g)}${Ir(this.b)}${Ir((isNaN(this.opacity)?1:this.opacity)*255)}`}function _v(){const t=ao(this.opacity);return`${t===1?"rgb(":"rgba("}${Pr(this.r)}, ${Pr(this.g)}, ${Pr(this.b)}${t===1?")":`, ${t})`}`}function ao(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Pr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ir(t){return t=Pr(t),(t<16?"0":"")+t.toString(16)}function bv(t,n,r,i){return i<=0?t=n=r=NaN:r<=0||r>=1?t=n=NaN:n<=0&&(t=NaN),new Xn(t,n,r,i)}function db(t){if(t instanceof Xn)return new Xn(t.h,t.s,t.l,t.opacity);if(t instanceof Ps||(t=ei(t)),!t)return new Xn;if(t instanceof Xn)return t;t=t.rgb();var n=t.r/255,r=t.g/255,i=t.b/255,s=Math.min(n,r,i),c=Math.max(n,r,i),f=NaN,h=c-s,g=(c+s)/2;return h?(n===c?f=(r-i)/h+(r<i)*6:r===c?f=(i-n)/h+2:f=(n-r)/h+4,h/=g<.5?c+s:2-c-s,f*=60):h=g>0&&g<1?0:f,new Xn(f,h,g,t.opacity)}function QA(t,n,r,i){return arguments.length===1?db(t):new Xn(t,n,r,i??1)}function Xn(t,n,r,i){this.h=+t,this.s=+n,this.l=+r,this.opacity=+i}um(Xn,QA,fb(Ps,{brighter(t){return t=t==null?no:Math.pow(no,t),new Xn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ys:Math.pow(Ys,t),new Xn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,s=2*r-i;return new en(lh(t>=240?t-240:t+120,s,i),lh(t,s,i),lh(t<120?t+240:t-120,s,i),this.opacity)},clamp(){return new Xn(wv(this.h),Cc(this.s),Cc(this.l),ao(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ao(this.opacity);return`${t===1?"hsl(":"hsla("}${wv(this.h)}, ${Cc(this.s)*100}%, ${Cc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function wv(t){return t=(t||0)%360,t<0?t+360:t}function Cc(t){return Math.max(0,Math.min(1,t||0))}function lh(t,n,r){return(t<60?n+(r-n)*t/60:t<180?r:t<240?n+(r-n)*(240-t)/60:n)*255}const cm=t=>()=>t;function ZA(t,n){return function(r){return t+r*n}}function FA(t,n,r){return t=Math.pow(t,r),n=Math.pow(n,r)-t,r=1/r,function(i){return Math.pow(t+i*n,r)}}function IA(t){return(t=+t)==1?hb:function(n,r){return r-n?FA(n,r,t):cm(isNaN(n)?r:n)}}function hb(t,n){var r=n-t;return r?ZA(t,r):cm(isNaN(t)?n:t)}const ro=function t(n){var r=IA(n);function i(s,c){var f=r((s=Oh(s)).r,(c=Oh(c)).r),h=r(s.g,c.g),g=r(s.b,c.b),m=hb(s.opacity,c.opacity);return function(y){return s.r=f(y),s.g=h(y),s.b=g(y),s.opacity=m(y),s+""}}return i.gamma=t,i}(1);function KA(t,n){n||(n=[]);var r=t?Math.min(n.length,t.length):0,i=n.slice(),s;return function(c){for(s=0;s<r;++s)i[s]=t[s]*(1-c)+n[s]*c;return i}}function JA(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function PA(t,n){var r=n?n.length:0,i=t?Math.min(r,t.length):0,s=new Array(i),c=new Array(r),f;for(f=0;f<i;++f)s[f]=om(t[f],n[f]);for(;f<r;++f)c[f]=n[f];return function(h){for(f=0;f<i;++f)c[f]=s[f](h);return c}}function WA(t,n){var r=new Date;return t=+t,n=+n,function(i){return r.setTime(t*(1-i)+n*i),r}}function qn(t,n){return t=+t,n=+n,function(r){return t*(1-r)+n*r}}function eT(t,n){var r={},i={},s;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(s in n)s in t?r[s]=om(t[s],n[s]):i[s]=n[s];return function(c){for(s in r)i[s]=r[s](c);return i}}var zh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sh=new RegExp(zh.source,"g");function tT(t){return function(){return t}}function nT(t){return function(n){return t(n)+""}}function mb(t,n){var r=zh.lastIndex=sh.lastIndex=0,i,s,c,f=-1,h=[],g=[];for(t=t+"",n=n+"";(i=zh.exec(t))&&(s=sh.exec(n));)(c=s.index)>r&&(c=n.slice(r,c),h[f]?h[f]+=c:h[++f]=c),(i=i[0])===(s=s[0])?h[f]?h[f]+=s:h[++f]=s:(h[++f]=null,g.push({i:f,x:qn(i,s)})),r=sh.lastIndex;return r<n.length&&(c=n.slice(r),h[f]?h[f]+=c:h[++f]=c),h.length<2?g[0]?nT(g[0].x):tT(n):(n=g.length,function(m){for(var y=0,p;y<n;++y)h[(p=g[y]).i]=p.x(m);return h.join("")})}function om(t,n){var r=typeof n,i;return n==null||r==="boolean"?cm(n):(r==="number"?qn:r==="string"?(i=ei(n))?(n=i,ro):mb:n instanceof ei?ro:n instanceof Date?WA:JA(n)?KA:Array.isArray(n)?PA:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?eT:qn)(t,n)}function aT(t,n){return t=+t,n=+n,function(r){return Math.round(t*(1-r)+n*r)}}var xv=180/Math.PI,Uh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gb(t,n,r,i,s,c){var f,h,g;return(f=Math.sqrt(t*t+n*n))&&(t/=f,n/=f),(g=t*r+n*i)&&(r-=t*g,i-=n*g),(h=Math.sqrt(r*r+i*i))&&(r/=h,i/=h,g/=h),t*i<n*r&&(t=-t,n=-n,g=-g,f=-f),{translateX:s,translateY:c,rotate:Math.atan2(n,t)*xv,skewX:Math.atan(g)*xv,scaleX:f,scaleY:h}}var Rc;function rT(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Uh:gb(n.a,n.b,n.c,n.d,n.e,n.f)}function iT(t){return t==null||(Rc||(Rc=document.createElementNS("http://www.w3.org/2000/svg","g")),Rc.setAttribute("transform",t),!(t=Rc.transform.baseVal.consolidate()))?Uh:(t=t.matrix,gb(t.a,t.b,t.c,t.d,t.e,t.f))}function yb(t,n,r,i){function s(m){return m.length?m.pop()+" ":""}function c(m,y,p,v,b,S){if(m!==p||y!==v){var w=b.push("translate(",null,n,null,r);S.push({i:w-4,x:qn(m,p)},{i:w-2,x:qn(y,v)})}else(p||v)&&b.push("translate("+p+n+v+r)}function f(m,y,p,v){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),v.push({i:p.push(s(p)+"rotate(",null,i)-2,x:qn(m,y)})):y&&p.push(s(p)+"rotate("+y+i)}function h(m,y,p,v){m!==y?v.push({i:p.push(s(p)+"skewX(",null,i)-2,x:qn(m,y)}):y&&p.push(s(p)+"skewX("+y+i)}function g(m,y,p,v,b,S){if(m!==p||y!==v){var w=b.push(s(b)+"scale(",null,",",null,")");S.push({i:w-4,x:qn(m,p)},{i:w-2,x:qn(y,v)})}else(p!==1||v!==1)&&b.push(s(b)+"scale("+p+","+v+")")}return function(m,y){var p=[],v=[];return m=t(m),y=t(y),c(m.translateX,m.translateY,y.translateX,y.translateY,p,v),f(m.rotate,y.rotate,p,v),h(m.skewX,y.skewX,p,v),g(m.scaleX,m.scaleY,y.scaleX,y.scaleY,p,v),m=y=null,function(b){for(var S=-1,w=v.length,C;++S<w;)p[(C=v[S]).i]=C.x(b);return p.join("")}}}var lT=yb(rT,"px, ","px)","deg)"),sT=yb(iT,", ",")",")"),uT=1e-12;function Sv(t){return((t=Math.exp(t))+1/t)/2}function cT(t){return((t=Math.exp(t))-1/t)/2}function oT(t){return((t=Math.exp(2*t))-1)/(t+1)}const fT=function t(n,r,i){function s(c,f){var h=c[0],g=c[1],m=c[2],y=f[0],p=f[1],v=f[2],b=y-h,S=p-g,w=b*b+S*S,C,N;if(w<uT)N=Math.log(v/m)/n,C=function(k){return[h+k*b,g+k*S,m*Math.exp(n*k*N)]};else{var T=Math.sqrt(w),O=(v*v-m*m+i*w)/(2*m*r*T),M=(v*v-m*m-i*w)/(2*v*r*T),H=Math.log(Math.sqrt(O*O+1)-O),j=Math.log(Math.sqrt(M*M+1)-M);N=(j-H)/n,C=function(k){var F=k*N,X=Sv(H),ee=m/(r*T)*(X*oT(n*F+H)-cT(H));return[h+ee*b,g+ee*S,m*X/Sv(n*F+H)]}}return C.duration=N*1e3*n/Math.SQRT2,C}return s.rho=function(c){var f=Math.max(.001,+c),h=f*f,g=h*h;return t(f,h,g)},s}(Math.SQRT2,2,4);var hl=0,Rs=0,bs=0,pb=1e3,io,Ns,lo=0,ti=0,bo=0,Xs=typeof performance=="object"&&performance.now?performance:Date,vb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fm(){return ti||(vb(dT),ti=Xs.now()+bo)}function dT(){ti=0}function so(){this._call=this._time=this._next=null}so.prototype=_b.prototype={constructor:so,restart:function(t,n,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?fm():+r)+(n==null?0:+n),!this._next&&Ns!==this&&(Ns?Ns._next=this:io=this,Ns=this),this._call=t,this._time=r,jh()},stop:function(){this._call&&(this._call=null,this._time=1/0,jh())}};function _b(t,n,r){var i=new so;return i.restart(t,n,r),i}function hT(){fm(),++hl;for(var t=io,n;t;)(n=ti-t._time)>=0&&t._call.call(void 0,n),t=t._next;--hl}function Ev(){ti=(lo=Xs.now())+bo,hl=Rs=0;try{hT()}finally{hl=0,gT(),ti=0}}function mT(){var t=Xs.now(),n=t-lo;n>pb&&(bo-=n,lo=t)}function gT(){for(var t,n=io,r,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(r=n._next,n._next=null,n=t?t._next=r:io=r);Ns=t,jh(i)}function jh(t){if(!hl){Rs&&(Rs=clearTimeout(Rs));var n=t-ti;n>24?(t<1/0&&(Rs=setTimeout(Ev,t-Xs.now()-bo)),bs&&(bs=clearInterval(bs))):(bs||(lo=Xs.now(),bs=setInterval(mT,pb)),hl=1,vb(Ev))}}function Av(t,n,r){var i=new so;return n=n==null?0:+n,i.restart(s=>{i.stop(),t(s+n)},n,r),i}var yT=vo("start","end","cancel","interrupt"),pT=[],bb=0,Tv=1,Hh=2,Gc=3,Mv=4,Bh=5,Qc=6;function wo(t,n,r,i,s,c){var f=t.__transition;if(!f)t.__transition={};else if(r in f)return;vT(t,r,{name:n,index:i,group:s,on:yT,tween:pT,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:bb})}function dm(t,n){var r=Qn(t,n);if(r.state>bb)throw new Error("too late; already scheduled");return r}function la(t,n){var r=Qn(t,n);if(r.state>Gc)throw new Error("too late; already running");return r}function Qn(t,n){var r=t.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function vT(t,n,r){var i=t.__transition,s;i[n]=r,r.timer=_b(c,0,r.time);function c(m){r.state=Tv,r.timer.restart(f,r.delay,r.time),r.delay<=m&&f(m-r.delay)}function f(m){var y,p,v,b;if(r.state!==Tv)return g();for(y in i)if(b=i[y],b.name===r.name){if(b.state===Gc)return Av(f);b.state===Mv?(b.state=Qc,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete i[y]):+y<n&&(b.state=Qc,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete i[y])}if(Av(function(){r.state===Gc&&(r.state=Mv,r.timer.restart(h,r.delay,r.time),h(m))}),r.state=Hh,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Hh){for(r.state=Gc,s=new Array(v=r.tween.length),y=0,p=-1;y<v;++y)(b=r.tween[y].value.call(t,t.__data__,r.index,r.group))&&(s[++p]=b);s.length=p+1}}function h(m){for(var y=m<r.duration?r.ease.call(null,m/r.duration):(r.timer.restart(g),r.state=Bh,1),p=-1,v=s.length;++p<v;)s[p].call(t,y);r.state===Bh&&(r.on.call("end",t,t.__data__,r.index,r.group),g())}function g(){r.state=Qc,r.timer.stop(),delete i[n];for(var m in i)return;delete t.__transition}}function Zc(t,n){var r=t.__transition,i,s,c=!0,f;if(r){n=n==null?null:n+"";for(f in r){if((i=r[f]).name!==n){c=!1;continue}s=i.state>Hh&&i.state<Bh,i.state=Qc,i.timer.stop(),i.on.call(s?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[f]}c&&delete t.__transition}}function _T(t){return this.each(function(){Zc(this,t)})}function bT(t,n){var r,i;return function(){var s=la(this,t),c=s.tween;if(c!==r){i=r=c;for(var f=0,h=i.length;f<h;++f)if(i[f].name===n){i=i.slice(),i.splice(f,1);break}}s.tween=i}}function wT(t,n,r){var i,s;if(typeof r!="function")throw new Error;return function(){var c=la(this,t),f=c.tween;if(f!==i){s=(i=f).slice();for(var h={name:n,value:r},g=0,m=s.length;g<m;++g)if(s[g].name===n){s[g]=h;break}g===m&&s.push(h)}c.tween=s}}function xT(t,n){var r=this._id;if(t+="",arguments.length<2){for(var i=Qn(this.node(),r).tween,s=0,c=i.length,f;s<c;++s)if((f=i[s]).name===t)return f.value;return null}return this.each((n==null?bT:wT)(r,t,n))}function hm(t,n,r){var i=t._id;return t.each(function(){var s=la(this,i);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return Qn(s,i).value[n]}}function wb(t,n){var r;return(typeof n=="number"?qn:n instanceof ei?ro:(r=ei(n))?(n=r,ro):mb)(t,n)}function ST(t){return function(){this.removeAttribute(t)}}function ET(t){return function(){this.removeAttributeNS(t.space,t.local)}}function AT(t,n,r){var i,s=r+"",c;return function(){var f=this.getAttribute(t);return f===s?null:f===i?c:c=n(i=f,r)}}function TT(t,n,r){var i,s=r+"",c;return function(){var f=this.getAttributeNS(t.space,t.local);return f===s?null:f===i?c:c=n(i=f,r)}}function MT(t,n,r){var i,s,c;return function(){var f,h=r(this),g;return h==null?void this.removeAttribute(t):(f=this.getAttribute(t),g=h+"",f===g?null:f===i&&g===s?c:(s=g,c=n(i=f,h)))}}function CT(t,n,r){var i,s,c;return function(){var f,h=r(this),g;return h==null?void this.removeAttributeNS(t.space,t.local):(f=this.getAttributeNS(t.space,t.local),g=h+"",f===g?null:f===i&&g===s?c:(s=g,c=n(i=f,h)))}}function RT(t,n){var r=_o(t),i=r==="transform"?sT:wb;return this.attrTween(t,typeof n=="function"?(r.local?CT:MT)(r,i,hm(this,"attr."+t,n)):n==null?(r.local?ET:ST)(r):(r.local?TT:AT)(r,i,n))}function NT(t,n){return function(r){this.setAttribute(t,n.call(this,r))}}function DT(t,n){return function(r){this.setAttributeNS(t.space,t.local,n.call(this,r))}}function OT(t,n){var r,i;function s(){var c=n.apply(this,arguments);return c!==i&&(r=(i=c)&&DT(t,c)),r}return s._value=n,s}function zT(t,n){var r,i;function s(){var c=n.apply(this,arguments);return c!==i&&(r=(i=c)&&NT(t,c)),r}return s._value=n,s}function UT(t,n){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var i=_o(t);return this.tween(r,(i.local?OT:zT)(i,n))}function jT(t,n){return function(){dm(this,t).delay=+n.apply(this,arguments)}}function HT(t,n){return n=+n,function(){dm(this,t).delay=n}}function BT(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?jT:HT)(n,t)):Qn(this.node(),n).delay}function LT(t,n){return function(){la(this,t).duration=+n.apply(this,arguments)}}function kT(t,n){return n=+n,function(){la(this,t).duration=n}}function $T(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?LT:kT)(n,t)):Qn(this.node(),n).duration}function YT(t,n){if(typeof n!="function")throw new Error;return function(){la(this,t).ease=n}}function qT(t){var n=this._id;return arguments.length?this.each(YT(n,t)):Qn(this.node(),n).ease}function XT(t,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;la(this,t).ease=r}}function VT(t){if(typeof t!="function")throw new Error;return this.each(XT(this._id,t))}function GT(t){typeof t!="function"&&(t=W_(t));for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s)for(var c=n[s],f=c.length,h=i[s]=[],g,m=0;m<f;++m)(g=c[m])&&t.call(g,g.__data__,m,c)&&h.push(g);return new za(i,this._parents,this._name,this._id)}function QT(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,r=t._groups,i=n.length,s=r.length,c=Math.min(i,s),f=new Array(i),h=0;h<c;++h)for(var g=n[h],m=r[h],y=g.length,p=f[h]=new Array(y),v,b=0;b<y;++b)(v=g[b]||m[b])&&(p[b]=v);for(;h<i;++h)f[h]=n[h];return new za(f,this._parents,this._name,this._id)}function ZT(t){return(t+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function FT(t,n,r){var i,s,c=ZT(n)?dm:la;return function(){var f=c(this,t),h=f.on;h!==i&&(s=(i=h).copy()).on(n,r),f.on=s}}function IT(t,n){var r=this._id;return arguments.length<2?Qn(this.node(),r).on.on(t):this.each(FT(r,t,n))}function KT(t){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==t)return;n&&n.removeChild(this)}}function JT(){return this.on("end.remove",KT(this._id))}function PT(t){var n=this._name,r=this._id;typeof t!="function"&&(t=lm(t));for(var i=this._groups,s=i.length,c=new Array(s),f=0;f<s;++f)for(var h=i[f],g=h.length,m=c[f]=new Array(g),y,p,v=0;v<g;++v)(y=h[v])&&(p=t.call(y,y.__data__,v,h))&&("__data__"in y&&(p.__data__=y.__data__),m[v]=p,wo(m[v],n,r,v,m,Qn(y,r)));return new za(c,this._parents,n,r)}function WT(t){var n=this._name,r=this._id;typeof t!="function"&&(t=P_(t));for(var i=this._groups,s=i.length,c=[],f=[],h=0;h<s;++h)for(var g=i[h],m=g.length,y,p=0;p<m;++p)if(y=g[p]){for(var v=t.call(y,y.__data__,p,g),b,S=Qn(y,r),w=0,C=v.length;w<C;++w)(b=v[w])&&wo(b,n,r,w,v,S);c.push(v),f.push(y)}return new za(c,f,n,r)}var eM=Js.prototype.constructor;function tM(){return new eM(this._groups,this._parents)}function nM(t,n){var r,i,s;return function(){var c=dl(this,t),f=(this.style.removeProperty(t),dl(this,t));return c===f?null:c===r&&f===i?s:s=n(r=c,i=f)}}function xb(t){return function(){this.style.removeProperty(t)}}function aM(t,n,r){var i,s=r+"",c;return function(){var f=dl(this,t);return f===s?null:f===i?c:c=n(i=f,r)}}function rM(t,n,r){var i,s,c;return function(){var f=dl(this,t),h=r(this),g=h+"";return h==null&&(g=h=(this.style.removeProperty(t),dl(this,t))),f===g?null:f===i&&g===s?c:(s=g,c=n(i=f,h))}}function iM(t,n){var r,i,s,c="style."+n,f="end."+c,h;return function(){var g=la(this,t),m=g.on,y=g.value[c]==null?h||(h=xb(n)):void 0;(m!==r||s!==y)&&(i=(r=m).copy()).on(f,s=y),g.on=i}}function lM(t,n,r){var i=(t+="")=="transform"?lT:wb;return n==null?this.styleTween(t,nM(t,i)).on("end.style."+t,xb(t)):typeof n=="function"?this.styleTween(t,rM(t,i,hm(this,"style."+t,n))).each(iM(this._id,t)):this.styleTween(t,aM(t,i,n),r).on("end.style."+t,null)}function sM(t,n,r){return function(i){this.style.setProperty(t,n.call(this,i),r)}}function uM(t,n,r){var i,s;function c(){var f=n.apply(this,arguments);return f!==s&&(i=(s=f)&&sM(t,f,r)),i}return c._value=n,c}function cM(t,n,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,uM(t,n,r??""))}function oM(t){return function(){this.textContent=t}}function fM(t){return function(){var n=t(this);this.textContent=n??""}}function dM(t){return this.tween("text",typeof t=="function"?fM(hm(this,"text",t)):oM(t==null?"":t+""))}function hM(t){return function(n){this.textContent=t.call(this,n)}}function mM(t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&hM(s)),n}return i._value=t,i}function gM(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,mM(t))}function yM(){for(var t=this._name,n=this._id,r=Sb(),i=this._groups,s=i.length,c=0;c<s;++c)for(var f=i[c],h=f.length,g,m=0;m<h;++m)if(g=f[m]){var y=Qn(g,n);wo(g,t,r,m,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new za(i,this._parents,t,r)}function pM(){var t,n,r=this,i=r._id,s=r.size();return new Promise(function(c,f){var h={value:f},g={value:function(){--s===0&&c()}};r.each(function(){var m=la(this,i),y=m.on;y!==t&&(n=(t=y).copy(),n._.cancel.push(h),n._.interrupt.push(h),n._.end.push(g)),m.on=n}),s===0&&c()})}var vM=0;function za(t,n,r,i){this._groups=t,this._parents=n,this._name=r,this._id=i}function Sb(){return++vM}var Aa=Js.prototype;za.prototype={constructor:za,select:PT,selectAll:WT,selectChild:Aa.selectChild,selectChildren:Aa.selectChildren,filter:GT,merge:QT,selection:tM,transition:yM,call:Aa.call,nodes:Aa.nodes,node:Aa.node,size:Aa.size,empty:Aa.empty,each:Aa.each,on:IT,attr:RT,attrTween:UT,style:lM,styleTween:cM,text:dM,textTween:gM,remove:JT,tween:xT,delay:BT,duration:$T,ease:qT,easeVarying:VT,end:pM,[Symbol.iterator]:Aa[Symbol.iterator]};function _M(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var bM={time:null,delay:0,duration:250,ease:_M};function wM(t,n){for(var r;!(r=t.__transition)||!(r=r[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return r}function xM(t){var n,r;t instanceof za?(n=t._id,t=t._name):(n=Sb(),(r=bM).time=fm(),t=t==null?null:t+"");for(var i=this._groups,s=i.length,c=0;c<s;++c)for(var f=i[c],h=f.length,g,m=0;m<h;++m)(g=f[m])&&wo(g,t,n,m,f,r||wM(g,n));return new za(i,this._parents,t,n)}Js.prototype.interrupt=_T;Js.prototype.transition=xM;const Nc=t=>()=>t;function SM(t,{sourceEvent:n,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Ca(t,n,r){this.k=t,this.x=n,this.y=r}Ca.prototype={constructor:Ca,scale:function(t){return t===1?this:new Ca(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new Ca(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Oa=new Ca(1,0,0);Ca.prototype;function uh(t){t.stopImmediatePropagation()}function ws(t){t.preventDefault(),t.stopImmediatePropagation()}function EM(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function AM(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Cv(){return this.__zoom||Oa}function TM(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function MM(){return navigator.maxTouchPoints||"ontouchstart"in this}function CM(t,n,r){var i=t.invertX(n[0][0])-r[0][0],s=t.invertX(n[1][0])-r[1][0],c=t.invertY(n[0][1])-r[0][1],f=t.invertY(n[1][1])-r[1][1];return t.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),f>c?(c+f)/2:Math.min(0,c)||Math.max(0,f))}function Eb(){var t=EM,n=AM,r=CM,i=TM,s=MM,c=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],h=250,g=fT,m=vo("start","zoom","end"),y,p,v,b=500,S=150,w=0,C=10;function N(D){D.property("__zoom",Cv).on("wheel.zoom",F,{passive:!1}).on("mousedown.zoom",X).on("dblclick.zoom",ee).filter(s).on("touchstart.zoom",W).on("touchmove.zoom",ne).on("touchend.zoom touchcancel.zoom",ue).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.transform=function(D,Z,R,Y){var J=D.selection?D.selection():D;J.property("__zoom",Cv),D!==J?H(D,Z,R,Y):J.interrupt().each(function(){j(this,arguments).event(Y).start().zoom(null,typeof Z=="function"?Z.apply(this,arguments):Z).end()})},N.scaleBy=function(D,Z,R,Y){N.scaleTo(D,function(){var J=this.__zoom.k,$=typeof Z=="function"?Z.apply(this,arguments):Z;return J*$},R,Y)},N.scaleTo=function(D,Z,R,Y){N.transform(D,function(){var J=n.apply(this,arguments),$=this.__zoom,A=R==null?M(J):typeof R=="function"?R.apply(this,arguments):R,L=$.invert(A),G=typeof Z=="function"?Z.apply(this,arguments):Z;return r(O(T($,G),A,L),J,f)},R,Y)},N.translateBy=function(D,Z,R,Y){N.transform(D,function(){return r(this.__zoom.translate(typeof Z=="function"?Z.apply(this,arguments):Z,typeof R=="function"?R.apply(this,arguments):R),n.apply(this,arguments),f)},null,Y)},N.translateTo=function(D,Z,R,Y,J){N.transform(D,function(){var $=n.apply(this,arguments),A=this.__zoom,L=Y==null?M($):typeof Y=="function"?Y.apply(this,arguments):Y;return r(Oa.translate(L[0],L[1]).scale(A.k).translate(typeof Z=="function"?-Z.apply(this,arguments):-Z,typeof R=="function"?-R.apply(this,arguments):-R),$,f)},Y,J)};function T(D,Z){return Z=Math.max(c[0],Math.min(c[1],Z)),Z===D.k?D:new Ca(Z,D.x,D.y)}function O(D,Z,R){var Y=Z[0]-R[0]*D.k,J=Z[1]-R[1]*D.k;return Y===D.x&&J===D.y?D:new Ca(D.k,Y,J)}function M(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function H(D,Z,R,Y){D.on("start.zoom",function(){j(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(Y).end()}).tween("zoom",function(){var J=this,$=arguments,A=j(J,$).event(Y),L=n.apply(J,$),G=R==null?M(L):typeof R=="function"?R.apply(J,$):R,P=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),re=J.__zoom,oe=typeof Z=="function"?Z.apply(J,$):Z,fe=g(re.invert(G).concat(P/re.k),oe.invert(G).concat(P/oe.k));return function(be){if(be===1)be=oe;else{var ye=fe(be),ce=P/ye[2];be=new Ca(ce,G[0]-ye[0]*ce,G[1]-ye[1]*ce)}A.zoom(null,be)}})}function j(D,Z,R){return!R&&D.__zooming||new k(D,Z)}function k(D,Z){this.that=D,this.args=Z,this.active=0,this.sourceEvent=null,this.extent=n.apply(D,Z),this.taps=0}k.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,Z){return this.mouse&&D!=="mouse"&&(this.mouse[1]=Z.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=Z.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=Z.invert(this.touch1[0])),this.that.__zoom=Z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var Z=Pt(this.that).datum();m.call(D,this.that,new SM(D,{sourceEvent:this.sourceEvent,target:N,transform:this.that.__zoom,dispatch:m}),Z)}};function F(D,...Z){if(!t.apply(this,arguments))return;var R=j(this,Z).event(D),Y=this.__zoom,J=Math.max(c[0],Math.min(c[1],Y.k*Math.pow(2,i.apply(this,arguments)))),$=Yn(D);if(R.wheel)(R.mouse[0][0]!==$[0]||R.mouse[0][1]!==$[1])&&(R.mouse[1]=Y.invert(R.mouse[0]=$)),clearTimeout(R.wheel);else{if(Y.k===J)return;R.mouse=[$,Y.invert($)],Zc(this),R.start()}ws(D),R.wheel=setTimeout(A,S),R.zoom("mouse",r(O(T(Y,J),R.mouse[0],R.mouse[1]),R.extent,f));function A(){R.wheel=null,R.end()}}function X(D,...Z){if(v||!t.apply(this,arguments))return;var R=D.currentTarget,Y=j(this,Z,!0).event(D),J=Pt(D.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",P,!0),$=Yn(D,R),A=D.clientX,L=D.clientY;cb(D.view),uh(D),Y.mouse=[$,this.__zoom.invert($)],Zc(this),Y.start();function G(re){if(ws(re),!Y.moved){var oe=re.clientX-A,fe=re.clientY-L;Y.moved=oe*oe+fe*fe>w}Y.event(re).zoom("mouse",r(O(Y.that.__zoom,Y.mouse[0]=Yn(re,R),Y.mouse[1]),Y.extent,f))}function P(re){J.on("mousemove.zoom mouseup.zoom",null),ob(re.view,Y.moved),ws(re),Y.event(re).end()}}function ee(D,...Z){if(t.apply(this,arguments)){var R=this.__zoom,Y=Yn(D.changedTouches?D.changedTouches[0]:D,this),J=R.invert(Y),$=R.k*(D.shiftKey?.5:2),A=r(O(T(R,$),Y,J),n.apply(this,Z),f);ws(D),h>0?Pt(this).transition().duration(h).call(H,A,Y,D):Pt(this).call(N.transform,A,Y,D)}}function W(D,...Z){if(t.apply(this,arguments)){var R=D.touches,Y=R.length,J=j(this,Z,D.changedTouches.length===Y).event(D),$,A,L,G;for(uh(D),A=0;A<Y;++A)L=R[A],G=Yn(L,this),G=[G,this.__zoom.invert(G),L.identifier],J.touch0?!J.touch1&&J.touch0[2]!==G[2]&&(J.touch1=G,J.taps=0):(J.touch0=G,$=!0,J.taps=1+!!y);y&&(y=clearTimeout(y)),$&&(J.taps<2&&(p=G[0],y=setTimeout(function(){y=null},b)),Zc(this),J.start())}}function ne(D,...Z){if(this.__zooming){var R=j(this,Z).event(D),Y=D.changedTouches,J=Y.length,$,A,L,G;for(ws(D),$=0;$<J;++$)A=Y[$],L=Yn(A,this),R.touch0&&R.touch0[2]===A.identifier?R.touch0[0]=L:R.touch1&&R.touch1[2]===A.identifier&&(R.touch1[0]=L);if(A=R.that.__zoom,R.touch1){var P=R.touch0[0],re=R.touch0[1],oe=R.touch1[0],fe=R.touch1[1],be=(be=oe[0]-P[0])*be+(be=oe[1]-P[1])*be,ye=(ye=fe[0]-re[0])*ye+(ye=fe[1]-re[1])*ye;A=T(A,Math.sqrt(be/ye)),L=[(P[0]+oe[0])/2,(P[1]+oe[1])/2],G=[(re[0]+fe[0])/2,(re[1]+fe[1])/2]}else if(R.touch0)L=R.touch0[0],G=R.touch0[1];else return;R.zoom("touch",r(O(A,L,G),R.extent,f))}}function ue(D,...Z){if(this.__zooming){var R=j(this,Z).event(D),Y=D.changedTouches,J=Y.length,$,A;for(uh(D),v&&clearTimeout(v),v=setTimeout(function(){v=null},b),$=0;$<J;++$)A=Y[$],R.touch0&&R.touch0[2]===A.identifier?delete R.touch0:R.touch1&&R.touch1[2]===A.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(A=Yn(A,this),Math.hypot(p[0]-A[0],p[1]-A[1])<C)){var L=Pt(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return N.wheelDelta=function(D){return arguments.length?(i=typeof D=="function"?D:Nc(+D),N):i},N.filter=function(D){return arguments.length?(t=typeof D=="function"?D:Nc(!!D),N):t},N.touchable=function(D){return arguments.length?(s=typeof D=="function"?D:Nc(!!D),N):s},N.extent=function(D){return arguments.length?(n=typeof D=="function"?D:Nc([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),N):n},N.scaleExtent=function(D){return arguments.length?(c[0]=+D[0],c[1]=+D[1],N):[c[0],c[1]]},N.translateExtent=function(D){return arguments.length?(f[0][0]=+D[0][0],f[1][0]=+D[1][0],f[0][1]=+D[0][1],f[1][1]=+D[1][1],N):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},N.constrain=function(D){return arguments.length?(r=D,N):r},N.duration=function(D){return arguments.length?(h=+D,N):h},N.interpolate=function(D){return arguments.length?(g=D,N):g},N.on=function(){var D=m.on.apply(m,arguments);return D===m?N:D},N.clickDistance=function(D){return arguments.length?(w=(D=+D)*D,N):Math.sqrt(w)},N.tapDistance=function(D){return arguments.length?(C=+D,N):C},N}Q_();const xo=U.createContext(null),RM=xo.Provider,Ua={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,n)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?n.targetHandle:n.sourceHandle}", edge id: ${n.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Ab=Ua.error001();function Pe(t,n){const r=U.useContext(xo);if(r===null)throw new Error(Ab);return K_(r,t,n)}const vt=()=>{const t=U.useContext(xo);if(t===null)throw new Error(Ab);return U.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},NM=t=>t.userSelectionActive?"none":"all";function mm({position:t,children:n,className:r,style:i,...s}){const c=Pe(NM),f=`${t}`.split("-");return te.createElement("div",{className:Ht(["react-flow__panel",r,...f]),style:{...i,pointerEvents:c},...s},n)}function DM({proOptions:t,position:n="bottom-right"}){return t!=null&&t.hideAttribution?null:te.createElement(mm,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},te.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const OM=({x:t,y:n,label:r,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:c={},labelBgPadding:f=[2,4],labelBgBorderRadius:h=2,children:g,className:m,...y})=>{const p=U.useRef(null),[v,b]=U.useState({x:0,y:0,width:0,height:0}),S=Ht(["react-flow__edge-textwrapper",m]);return U.useEffect(()=>{if(p.current){const w=p.current.getBBox();b({x:w.x,y:w.y,width:w.width,height:w.height})}},[r]),typeof r>"u"||!r?null:te.createElement("g",{transform:`translate(${t-v.width/2} ${n-v.height/2})`,className:S,visibility:v.width?"visible":"hidden",...y},s&&te.createElement("rect",{width:v.width+2*f[0],x:-f[0],y:-f[1],height:v.height+2*f[1],className:"react-flow__edge-textbg",style:c,rx:h,ry:h}),te.createElement("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:p,style:i},r),g)};var zM=U.memo(OM);const gm=t=>({width:t.offsetWidth,height:t.offsetHeight}),ml=(t,n=0,r=1)=>Math.min(Math.max(t,n),r),ym=(t={x:0,y:0},n)=>({x:ml(t.x,n[0][0],n[1][0]),y:ml(t.y,n[0][1],n[1][1])}),Rv=(t,n,r)=>t<n?ml(Math.abs(t-n),1,50)/50:t>r?-ml(Math.abs(t-r),1,50)/50:0,Tb=(t,n)=>{const r=Rv(t.x,35,n.width-35)*20,i=Rv(t.y,35,n.height-35)*20;return[r,i]},Mb=t=>{var n;return((n=t.getRootNode)==null?void 0:n.call(t))||(window==null?void 0:window.document)},Cb=(t,n)=>({x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}),Vs=({x:t,y:n,width:r,height:i})=>({x:t,y:n,x2:t+r,y2:n+i}),Rb=({x:t,y:n,x2:r,y2:i})=>({x:t,y:n,width:r-t,height:i-n}),Nv=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),UM=(t,n)=>Rb(Cb(Vs(t),Vs(n))),Lh=(t,n)=>{const r=Math.max(0,Math.min(t.x+t.width,n.x+n.width)-Math.max(t.x,n.x)),i=Math.max(0,Math.min(t.y+t.height,n.y+n.height)-Math.max(t.y,n.y));return Math.ceil(r*i)},jM=t=>Cn(t.width)&&Cn(t.height)&&Cn(t.x)&&Cn(t.y),Cn=t=>!isNaN(t)&&isFinite(t),it=Symbol.for("internals"),Nb=["Enter"," ","Escape"],HM=(t,n)=>{},BM=t=>"nativeEvent"in t;function kh(t){var s,c;const n=BM(t)?t.nativeEvent:t,r=((c=(s=n.composedPath)==null?void 0:s.call(n))==null?void 0:c[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Db=t=>"clientX"in t,br=(t,n)=>{var c,f;const r=Db(t),i=r?t.clientX:(c=t.touches)==null?void 0:c[0].clientX,s=r?t.clientY:(f=t.touches)==null?void 0:f[0].clientY;return{x:i-((n==null?void 0:n.left)??0),y:s-((n==null?void 0:n.top)??0)}},uo=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Ws=({id:t,path:n,labelX:r,labelY:i,label:s,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:v,interactionWidth:b=20})=>te.createElement(te.Fragment,null,te.createElement("path",{id:t,style:y,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:v}),b&&te.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),s&&Cn(r)&&Cn(i)?te.createElement(zM,{x:r,y:i,label:s,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m}):null);Ws.displayName="BaseEdge";function xs(t,n,r){return r===void 0?r:i=>{const s=n().edges.find(c=>c.id===t);s&&r(i,{...s})}}function Ob({sourceX:t,sourceY:n,targetX:r,targetY:i}){const s=Math.abs(r-t)/2,c=r<t?r+s:r-s,f=Math.abs(i-n)/2,h=i<n?i+f:i-f;return[c,h,s,f]}function zb({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:f,targetControlY:h}){const g=t*.125+s*.375+f*.375+r*.125,m=n*.125+c*.375+h*.375+i*.125,y=Math.abs(g-t),p=Math.abs(m-n);return[g,m,y,p]}var ni;(function(t){t.Strict="strict",t.Loose="loose"})(ni||(ni={}));var Kr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Kr||(Kr={}));var Gs;(function(t){t.Partial="partial",t.Full="full"})(Gs||(Gs={}));var _r;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(_r||(_r={}));var Qs;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Qs||(Qs={}));var ve;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ve||(ve={}));function Dv({pos:t,x1:n,y1:r,x2:i,y2:s}){return t===ve.Left||t===ve.Right?[.5*(n+i),r]:[n,.5*(r+s)]}function Ub({sourceX:t,sourceY:n,sourcePosition:r=ve.Bottom,targetX:i,targetY:s,targetPosition:c=ve.Top}){const[f,h]=Dv({pos:r,x1:t,y1:n,x2:i,y2:s}),[g,m]=Dv({pos:c,x1:i,y1:s,x2:t,y2:n}),[y,p,v,b]=zb({sourceX:t,sourceY:n,targetX:i,targetY:s,sourceControlX:f,sourceControlY:h,targetControlX:g,targetControlY:m});return[`M${t},${n} C${f},${h} ${g},${m} ${i},${s}`,y,p,v,b]}const pm=U.memo(({sourceX:t,sourceY:n,targetX:r,targetY:i,sourcePosition:s=ve.Bottom,targetPosition:c=ve.Top,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:v,markerEnd:b,markerStart:S,interactionWidth:w})=>{const[C,N,T]=Ub({sourceX:t,sourceY:n,sourcePosition:s,targetX:r,targetY:i,targetPosition:c});return te.createElement(Ws,{path:C,labelX:N,labelY:T,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:v,markerEnd:b,markerStart:S,interactionWidth:w})});pm.displayName="SimpleBezierEdge";const Ov={[ve.Left]:{x:-1,y:0},[ve.Right]:{x:1,y:0},[ve.Top]:{x:0,y:-1},[ve.Bottom]:{x:0,y:1}},LM=({source:t,sourcePosition:n=ve.Bottom,target:r})=>n===ve.Left||n===ve.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},zv=(t,n)=>Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));function kM({source:t,sourcePosition:n=ve.Bottom,target:r,targetPosition:i=ve.Top,center:s,offset:c}){const f=Ov[n],h=Ov[i],g={x:t.x+f.x*c,y:t.y+f.y*c},m={x:r.x+h.x*c,y:r.y+h.y*c},y=LM({source:g,sourcePosition:n,target:m}),p=y.x!==0?"x":"y",v=y[p];let b=[],S,w;const C={x:0,y:0},N={x:0,y:0},[T,O,M,H]=Ob({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(f[p]*h[p]===-1){S=s.x??T,w=s.y??O;const k=[{x:S,y:g.y},{x:S,y:m.y}],F=[{x:g.x,y:w},{x:m.x,y:w}];f[p]===v?b=p==="x"?k:F:b=p==="x"?F:k}else{const k=[{x:g.x,y:m.y}],F=[{x:m.x,y:g.y}];if(p==="x"?b=f.x===v?F:k:b=f.y===v?k:F,n===i){const ue=Math.abs(t[p]-r[p]);if(ue<=c){const D=Math.min(c-1,c-ue);f[p]===v?C[p]=(g[p]>t[p]?-1:1)*D:N[p]=(m[p]>r[p]?-1:1)*D}}if(n!==i){const ue=p==="x"?"y":"x",D=f[p]===h[ue],Z=g[ue]>m[ue],R=g[ue]<m[ue];(f[p]===1&&(!D&&Z||D&&R)||f[p]!==1&&(!D&&R||D&&Z))&&(b=p==="x"?k:F)}const X={x:g.x+C.x,y:g.y+C.y},ee={x:m.x+N.x,y:m.y+N.y},W=Math.max(Math.abs(X.x-b[0].x),Math.abs(ee.x-b[0].x)),ne=Math.max(Math.abs(X.y-b[0].y),Math.abs(ee.y-b[0].y));W>=ne?(S=(X.x+ee.x)/2,w=b[0].y):(S=b[0].x,w=(X.y+ee.y)/2)}return[[t,{x:g.x+C.x,y:g.y+C.y},...b,{x:m.x+N.x,y:m.y+N.y},r],S,w,M,H]}function $M(t,n,r,i){const s=Math.min(zv(t,n)/2,zv(n,r)/2,i),{x:c,y:f}=n;if(t.x===c&&c===r.x||t.y===f&&f===r.y)return`L${c} ${f}`;if(t.y===f){const m=t.x<r.x?-1:1,y=t.y<r.y?1:-1;return`L ${c+s*m},${f}Q ${c},${f} ${c},${f+s*y}`}const h=t.x<r.x?1:-1,g=t.y<r.y?-1:1;return`L ${c},${f+s*g}Q ${c},${f} ${c+s*h},${f}`}function $h({sourceX:t,sourceY:n,sourcePosition:r=ve.Bottom,targetX:i,targetY:s,targetPosition:c=ve.Top,borderRadius:f=5,centerX:h,centerY:g,offset:m=20}){const[y,p,v,b,S]=kM({source:{x:t,y:n},sourcePosition:r,target:{x:i,y:s},targetPosition:c,center:{x:h,y:g},offset:m});return[y.reduce((C,N,T)=>{let O="";return T>0&&T<y.length-1?O=$M(y[T-1],N,y[T+1],f):O=`${T===0?"M":"L"}${N.x} ${N.y}`,C+=O,C},""),p,v,b,S]}const So=U.memo(({sourceX:t,sourceY:n,targetX:r,targetY:i,label:s,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,sourcePosition:p=ve.Bottom,targetPosition:v=ve.Top,markerEnd:b,markerStart:S,pathOptions:w,interactionWidth:C})=>{const[N,T,O]=$h({sourceX:t,sourceY:n,sourcePosition:p,targetX:r,targetY:i,targetPosition:v,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset});return te.createElement(Ws,{path:N,labelX:T,labelY:O,label:s,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:b,markerStart:S,interactionWidth:C})});So.displayName="SmoothStepEdge";const vm=U.memo(t=>{var n;return te.createElement(So,{...t,pathOptions:U.useMemo(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(n=t.pathOptions)==null?void 0:n.offset])})});vm.displayName="StepEdge";function YM({sourceX:t,sourceY:n,targetX:r,targetY:i}){const[s,c,f,h]=Ob({sourceX:t,sourceY:n,targetX:r,targetY:i});return[`M ${t},${n}L ${r},${i}`,s,c,f,h]}const _m=U.memo(({sourceX:t,sourceY:n,targetX:r,targetY:i,label:s,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:v,interactionWidth:b})=>{const[S,w,C]=YM({sourceX:t,sourceY:n,targetX:r,targetY:i});return te.createElement(Ws,{path:S,labelX:w,labelY:C,label:s,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:v,interactionWidth:b})});_m.displayName="StraightEdge";function Dc(t,n){return t>=0?.5*t:n*25*Math.sqrt(-t)}function Uv({pos:t,x1:n,y1:r,x2:i,y2:s,c}){switch(t){case ve.Left:return[n-Dc(n-i,c),r];case ve.Right:return[n+Dc(i-n,c),r];case ve.Top:return[n,r-Dc(r-s,c)];case ve.Bottom:return[n,r+Dc(s-r,c)]}}function jb({sourceX:t,sourceY:n,sourcePosition:r=ve.Bottom,targetX:i,targetY:s,targetPosition:c=ve.Top,curvature:f=.25}){const[h,g]=Uv({pos:r,x1:t,y1:n,x2:i,y2:s,c:f}),[m,y]=Uv({pos:c,x1:i,y1:s,x2:t,y2:n,c:f}),[p,v,b,S]=zb({sourceX:t,sourceY:n,targetX:i,targetY:s,sourceControlX:h,sourceControlY:g,targetControlX:m,targetControlY:y});return[`M${t},${n} C${h},${g} ${m},${y} ${i},${s}`,p,v,b,S]}const co=U.memo(({sourceX:t,sourceY:n,targetX:r,targetY:i,sourcePosition:s=ve.Bottom,targetPosition:c=ve.Top,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:v,markerEnd:b,markerStart:S,pathOptions:w,interactionWidth:C})=>{const[N,T,O]=jb({sourceX:t,sourceY:n,sourcePosition:s,targetX:r,targetY:i,targetPosition:c,curvature:w==null?void 0:w.curvature});return te.createElement(Ws,{path:N,labelX:T,labelY:O,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:v,markerEnd:b,markerStart:S,interactionWidth:C})});co.displayName="BezierEdge";const bm=U.createContext(null),qM=bm.Provider;bm.Consumer;const XM=()=>U.useContext(bm),VM=t=>"id"in t&&"source"in t&&"target"in t,GM=({source:t,sourceHandle:n,target:r,targetHandle:i})=>`reactflow__edge-${t}${n||""}-${r}${i||""}`,Yh=(t,n)=>typeof t>"u"?"":typeof t=="string"?t:`${n?`${n}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,QM=(t,n)=>n.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),ZM=(t,n)=>{if(!t.source||!t.target)return n;let r;return VM(t)?r={...t}:r={...t,id:GM(t)},QM(r,n)?n:n.concat(r)},qh=({x:t,y:n},[r,i,s],c,[f,h])=>{const g={x:(t-r)/s,y:(n-i)/s};return c?{x:f*Math.round(g.x/f),y:h*Math.round(g.y/h)}:g},Hb=({x:t,y:n},[r,i,s])=>({x:t*s+r,y:n*s+i}),Wr=(t,n=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(t.width??0)*n[0],i=(t.height??0)*n[1],s={x:t.position.x-r,y:t.position.y-i};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-i}:s}},Eo=(t,n=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((i,s)=>{const{x:c,y:f}=Wr(s,n).positionAbsolute;return Cb(i,Vs({x:c,y:f,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Rb(r)},Bb=(t,n,[r,i,s]=[0,0,1],c=!1,f=!1,h=[0,0])=>{const g={x:(n.x-r)/s,y:(n.y-i)/s,width:n.width/s,height:n.height/s},m=[];return t.forEach(y=>{const{width:p,height:v,selectable:b=!0,hidden:S=!1}=y;if(f&&!b||S)return!1;const{positionAbsolute:w}=Wr(y,h),C={x:w.x,y:w.y,width:p||0,height:v||0},N=Lh(g,C),T=typeof p>"u"||typeof v>"u"||p===null||v===null,O=c&&N>0,M=(p||0)*(v||0);(T||O||N>=M||y.dragging)&&m.push(y)}),m},Lb=(t,n)=>{const r=t.map(i=>i.id);return n.filter(i=>r.includes(i.source)||r.includes(i.target))},kb=(t,n,r,i,s,c=.1)=>{const f=n/(t.width*(1+c)),h=r/(t.height*(1+c)),g=Math.min(f,h),m=ml(g,i,s),y=t.x+t.width/2,p=t.y+t.height/2,v=n/2-y*m,b=r/2-p*m;return{x:v,y:b,zoom:m}},Zr=(t,n=0)=>t.transition().duration(n);function jv(t,n,r,i){return(n[r]||[]).reduce((s,c)=>{var f,h;return`${t.id}-${c.id}-${r}`!==i&&s.push({id:c.id||null,type:r,nodeId:t.id,x:(((f=t.positionAbsolute)==null?void 0:f.x)??0)+c.x+c.width/2,y:(((h=t.positionAbsolute)==null?void 0:h.y)??0)+c.y+c.height/2}),s},[])}function FM(t,n,r,i,s,c){const{x:f,y:h}=br(t),m=n.elementsFromPoint(f,h).find(S=>S.classList.contains("react-flow__handle"));if(m){const S=m.getAttribute("data-nodeid");if(S){const w=wm(void 0,m),C=m.getAttribute("data-handleid"),N=c({nodeId:S,id:C,type:w});if(N){const T=s.find(O=>O.nodeId===S&&O.type===w&&O.id===C);return{handle:{id:C,type:w,nodeId:S,x:(T==null?void 0:T.x)||r.x,y:(T==null?void 0:T.y)||r.y},validHandleResult:N}}}}let y=[],p=1/0;if(s.forEach(S=>{const w=Math.sqrt((S.x-r.x)**2+(S.y-r.y)**2);if(w<=i){const C=c(S);w<=p&&(w<p?y=[{handle:S,validHandleResult:C}]:w===p&&y.push({handle:S,validHandleResult:C}),p=w)}}),!y.length)return{handle:null,validHandleResult:$b()};if(y.length===1)return y[0];const v=y.some(({validHandleResult:S})=>S.isValid),b=y.some(({handle:S})=>S.type==="target");return y.find(({handle:S,validHandleResult:w})=>b?S.type==="target":v?w.isValid:!0)||y[0]}const IM={source:null,target:null,sourceHandle:null,targetHandle:null},$b=()=>({handleDomNode:null,isValid:!1,connection:IM,endHandle:null});function Yb(t,n,r,i,s,c,f){const h=s==="target",g=f.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),m={...$b(),handleDomNode:g};if(g){const y=wm(void 0,g),p=g.getAttribute("data-nodeid"),v=g.getAttribute("data-handleid"),b=g.classList.contains("connectable"),S=g.classList.contains("connectableend"),w={source:h?p:r,sourceHandle:h?v:i,target:h?r:p,targetHandle:h?i:v};m.connection=w,b&&S&&(n===ni.Strict?h&&y==="source"||!h&&y==="target":p!==r||v!==i)&&(m.endHandle={nodeId:p,handleId:v,type:y},m.isValid=c(w))}return m}function KM({nodes:t,nodeId:n,handleId:r,handleType:i}){return t.reduce((s,c)=>{if(c[it]){const{handleBounds:f}=c[it];let h=[],g=[];f&&(h=jv(c,f,"source",`${n}-${r}-${i}`),g=jv(c,f,"target",`${n}-${r}-${i}`)),s.push(...h,...g)}return s},[])}function wm(t,n){return t||(n!=null&&n.classList.contains("target")?"target":n!=null&&n.classList.contains("source")?"source":null)}function ch(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function JM(t,n){let r=null;return n?r="valid":t&&!n&&(r="invalid"),r}function qb({event:t,handleId:n,nodeId:r,onConnect:i,isTarget:s,getState:c,setState:f,isValidConnection:h,edgeUpdaterType:g,onReconnectEnd:m}){const y=Mb(t.target),{connectionMode:p,domNode:v,autoPanOnConnect:b,connectionRadius:S,onConnectStart:w,panBy:C,getNodes:N,cancelConnection:T}=c();let O=0,M;const{x:H,y:j}=br(t),k=y==null?void 0:y.elementFromPoint(H,j),F=wm(g,k),X=v==null?void 0:v.getBoundingClientRect();if(!X||!F)return;let ee,W=br(t,X),ne=!1,ue=null,D=!1,Z=null;const R=KM({nodes:N(),nodeId:r,handleId:n,handleType:F}),Y=()=>{if(!b)return;const[A,L]=Tb(W,X);C({x:A,y:L}),O=requestAnimationFrame(Y)};f({connectionPosition:W,connectionStatus:null,connectionNodeId:r,connectionHandleId:n,connectionHandleType:F,connectionStartHandle:{nodeId:r,handleId:n,type:F},connectionEndHandle:null}),w==null||w(t,{nodeId:r,handleId:n,handleType:F});function J(A){const{transform:L}=c();W=br(A,X);const{handle:G,validHandleResult:P}=FM(A,y,qh(W,L,!1,[1,1]),S,R,re=>Yb(re,p,r,n,s?"target":"source",h,y));if(M=G,ne||(Y(),ne=!0),Z=P.handleDomNode,ue=P.connection,D=P.isValid,f({connectionPosition:M&&D?Hb({x:M.x,y:M.y},L):W,connectionStatus:JM(!!M,D),connectionEndHandle:P.endHandle}),!M&&!D&&!Z)return ch(ee);ue.source!==ue.target&&Z&&(ch(ee),ee=Z,Z.classList.add("connecting","react-flow__handle-connecting"),Z.classList.toggle("valid",D),Z.classList.toggle("react-flow__handle-valid",D))}function $(A){var L,G;(M||Z)&&ue&&D&&(i==null||i(ue)),(G=(L=c()).onConnectEnd)==null||G.call(L,A),g&&(m==null||m(A)),ch(ee),T(),cancelAnimationFrame(O),ne=!1,D=!1,ue=null,Z=null,y.removeEventListener("mousemove",J),y.removeEventListener("mouseup",$),y.removeEventListener("touchmove",J),y.removeEventListener("touchend",$)}y.addEventListener("mousemove",J),y.addEventListener("mouseup",$),y.addEventListener("touchmove",J),y.addEventListener("touchend",$)}const Hv=()=>!0,PM=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),WM=(t,n,r)=>i=>{const{connectionStartHandle:s,connectionEndHandle:c,connectionClickStartHandle:f}=i;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===n&&(s==null?void 0:s.type)===r||(c==null?void 0:c.nodeId)===t&&(c==null?void 0:c.handleId)===n&&(c==null?void 0:c.type)===r,clickConnecting:(f==null?void 0:f.nodeId)===t&&(f==null?void 0:f.handleId)===n&&(f==null?void 0:f.type)===r}},Xb=U.forwardRef(({type:t="source",position:n=ve.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:c=!0,id:f,onConnect:h,children:g,className:m,onMouseDown:y,onTouchStart:p,...v},b)=>{var X,ee;const S=f||null,w=t==="target",C=vt(),N=XM(),{connectOnClick:T,noPanClassName:O}=Pe(PM,Ct),{connecting:M,clickConnecting:H}=Pe(WM(N,S,t),Ct);N||(ee=(X=C.getState()).onError)==null||ee.call(X,"010",Ua.error010());const j=W=>{const{defaultEdgeOptions:ne,onConnect:ue,hasDefaultEdges:D}=C.getState(),Z={...ne,...W};if(D){const{edges:R,setEdges:Y}=C.getState();Y(ZM(Z,R))}ue==null||ue(Z),h==null||h(Z)},k=W=>{if(!N)return;const ne=Db(W);s&&(ne&&W.button===0||!ne)&&qb({event:W,handleId:S,nodeId:N,onConnect:j,isTarget:w,getState:C.getState,setState:C.setState,isValidConnection:r||C.getState().isValidConnection||Hv}),ne?y==null||y(W):p==null||p(W)},F=W=>{const{onClickConnectStart:ne,onClickConnectEnd:ue,connectionClickStartHandle:D,connectionMode:Z,isValidConnection:R}=C.getState();if(!N||!D&&!s)return;if(!D){ne==null||ne(W,{nodeId:N,handleId:S,handleType:t}),C.setState({connectionClickStartHandle:{nodeId:N,type:t,handleId:S}});return}const Y=Mb(W.target),J=r||R||Hv,{connection:$,isValid:A}=Yb({nodeId:N,id:S,type:t},Z,D.nodeId,D.handleId||null,D.type,J,Y);A&&j($),ue==null||ue(W),C.setState({connectionClickStartHandle:null})};return te.createElement("div",{"data-handleid":S,"data-nodeid":N,"data-handlepos":n,"data-id":`${N}-${S}-${t}`,className:Ht(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",O,m,{source:!w,target:w,connectable:i,connectablestart:s,connectableend:c,connecting:H,connectionindicator:i&&(s&&!M||c&&M)}]),onMouseDown:k,onTouchStart:k,onClick:T?F:void 0,ref:b,...v},g)});Xb.displayName="Handle";var gl=U.memo(Xb);const Vb=({data:t,isConnectable:n,targetPosition:r=ve.Top,sourcePosition:i=ve.Bottom})=>te.createElement(te.Fragment,null,te.createElement(gl,{type:"target",position:r,isConnectable:n}),t==null?void 0:t.label,te.createElement(gl,{type:"source",position:i,isConnectable:n}));Vb.displayName="DefaultNode";var Xh=U.memo(Vb);const Gb=({data:t,isConnectable:n,sourcePosition:r=ve.Bottom})=>te.createElement(te.Fragment,null,t==null?void 0:t.label,te.createElement(gl,{type:"source",position:r,isConnectable:n}));Gb.displayName="InputNode";var Qb=U.memo(Gb);const Zb=({data:t,isConnectable:n,targetPosition:r=ve.Top})=>te.createElement(te.Fragment,null,te.createElement(gl,{type:"target",position:r,isConnectable:n}),t==null?void 0:t.label);Zb.displayName="OutputNode";var Fb=U.memo(Zb);const xm=()=>null;xm.displayName="GroupNode";const eC=t=>({selectedNodes:t.getNodes().filter(n=>n.selected),selectedEdges:t.edges.filter(n=>n.selected).map(n=>({...n}))}),Oc=t=>t.id;function tC(t,n){return Ct(t.selectedNodes.map(Oc),n.selectedNodes.map(Oc))&&Ct(t.selectedEdges.map(Oc),n.selectedEdges.map(Oc))}const Ib=U.memo(({onSelectionChange:t})=>{const n=vt(),{selectedNodes:r,selectedEdges:i}=Pe(eC,tC);return U.useEffect(()=>{const s={nodes:r,edges:i};t==null||t(s),n.getState().onSelectionChange.forEach(c=>c(s))},[r,i,t]),null});Ib.displayName="SelectionListener";const nC=t=>!!t.onSelectionChange;function aC({onSelectionChange:t}){const n=Pe(nC);return t||n?te.createElement(Ib,{onSelectionChange:t}):null}const rC=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Gi(t,n){U.useEffect(()=>{typeof t<"u"&&n(t)},[t])}function Oe(t,n,r){U.useEffect(()=>{typeof n<"u"&&r({[t]:n})},[n])}const iC=({nodes:t,edges:n,defaultNodes:r,defaultEdges:i,onConnect:s,onConnectStart:c,onConnectEnd:f,onClickConnectStart:h,onClickConnectEnd:g,nodesDraggable:m,nodesConnectable:y,nodesFocusable:p,edgesFocusable:v,edgesUpdatable:b,elevateNodesOnSelect:S,minZoom:w,maxZoom:C,nodeExtent:N,onNodesChange:T,onEdgesChange:O,elementsSelectable:M,connectionMode:H,snapGrid:j,snapToGrid:k,translateExtent:F,connectOnClick:X,defaultEdgeOptions:ee,fitView:W,fitViewOptions:ne,onNodesDelete:ue,onEdgesDelete:D,onNodeDrag:Z,onNodeDragStart:R,onNodeDragStop:Y,onSelectionDrag:J,onSelectionDragStart:$,onSelectionDragStop:A,noPanClassName:L,nodeOrigin:G,rfId:P,autoPanOnConnect:re,autoPanOnNodeDrag:oe,onError:fe,connectionRadius:be,isValidConnection:ye,nodeDragThreshold:ce})=>{const{setNodes:de,setEdges:_e,setDefaultNodesAndEdges:le,setMinZoom:He,setMaxZoom:Te,setTranslateExtent:ze,setNodeExtent:Ye,reset:Me}=Pe(rC,Ct),me=vt();return U.useEffect(()=>{const wt=i==null?void 0:i.map(yn=>({...yn,...ee}));return le(r,wt),()=>{Me()}},[]),Oe("defaultEdgeOptions",ee,me.setState),Oe("connectionMode",H,me.setState),Oe("onConnect",s,me.setState),Oe("onConnectStart",c,me.setState),Oe("onConnectEnd",f,me.setState),Oe("onClickConnectStart",h,me.setState),Oe("onClickConnectEnd",g,me.setState),Oe("nodesDraggable",m,me.setState),Oe("nodesConnectable",y,me.setState),Oe("nodesFocusable",p,me.setState),Oe("edgesFocusable",v,me.setState),Oe("edgesUpdatable",b,me.setState),Oe("elementsSelectable",M,me.setState),Oe("elevateNodesOnSelect",S,me.setState),Oe("snapToGrid",k,me.setState),Oe("snapGrid",j,me.setState),Oe("onNodesChange",T,me.setState),Oe("onEdgesChange",O,me.setState),Oe("connectOnClick",X,me.setState),Oe("fitViewOnInit",W,me.setState),Oe("fitViewOnInitOptions",ne,me.setState),Oe("onNodesDelete",ue,me.setState),Oe("onEdgesDelete",D,me.setState),Oe("onNodeDrag",Z,me.setState),Oe("onNodeDragStart",R,me.setState),Oe("onNodeDragStop",Y,me.setState),Oe("onSelectionDrag",J,me.setState),Oe("onSelectionDragStart",$,me.setState),Oe("onSelectionDragStop",A,me.setState),Oe("noPanClassName",L,me.setState),Oe("nodeOrigin",G,me.setState),Oe("rfId",P,me.setState),Oe("autoPanOnConnect",re,me.setState),Oe("autoPanOnNodeDrag",oe,me.setState),Oe("onError",fe,me.setState),Oe("connectionRadius",be,me.setState),Oe("isValidConnection",ye,me.setState),Oe("nodeDragThreshold",ce,me.setState),Gi(t,de),Gi(n,_e),Gi(w,He),Gi(C,Te),Gi(F,ze),Gi(N,Ye),null},Bv={display:"none"},lC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Kb="react-flow__node-desc",Jb="react-flow__edge-desc",sC="react-flow__aria-live",uC=t=>t.ariaLiveMessage;function cC({rfId:t}){const n=Pe(uC);return te.createElement("div",{id:`${sC}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:lC},n)}function oC({rfId:t,disableKeyboardA11y:n}){return te.createElement(te.Fragment,null,te.createElement("div",{id:`${Kb}-${t}`,style:Bv},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),te.createElement("div",{id:`${Jb}-${t}`,style:Bv},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&te.createElement(cC,{rfId:t}))}var Zs=(t=null,n={actInsideInputWithModifier:!0})=>{const[r,i]=U.useState(!1),s=U.useRef(!1),c=U.useRef(new Set([])),[f,h]=U.useMemo(()=>{if(t!==null){const m=(Array.isArray(t)?t:[t]).filter(p=>typeof p=="string").map(p=>p.split("+")),y=m.reduce((p,v)=>p.concat(...v),[]);return[m,y]}return[[],[]]},[t]);return U.useEffect(()=>{const g=typeof document<"u"?document:null,m=(n==null?void 0:n.target)||g;if(t!==null){const y=b=>{if(s.current=b.ctrlKey||b.metaKey||b.shiftKey,(!s.current||s.current&&!n.actInsideInputWithModifier)&&kh(b))return!1;const w=kv(b.code,h);c.current.add(b[w]),Lv(f,c.current,!1)&&(b.preventDefault(),i(!0))},p=b=>{if((!s.current||s.current&&!n.actInsideInputWithModifier)&&kh(b))return!1;const w=kv(b.code,h);Lv(f,c.current,!0)?(i(!1),c.current.clear()):c.current.delete(b[w]),b.key==="Meta"&&c.current.clear(),s.current=!1},v=()=>{c.current.clear(),i(!1)};return m==null||m.addEventListener("keydown",y),m==null||m.addEventListener("keyup",p),window.addEventListener("blur",v),()=>{m==null||m.removeEventListener("keydown",y),m==null||m.removeEventListener("keyup",p),window.removeEventListener("blur",v)}}},[t,i]),r};function Lv(t,n,r){return t.filter(i=>r||i.length===n.size).some(i=>i.every(s=>n.has(s)))}function kv(t,n){return n.includes(t)?"code":"key"}function Pb(t,n,r,i){var h,g;const s=t.parentNode||t.parentId;if(!s)return r;const c=n.get(s),f=Wr(c,i);return Pb(c,n,{x:(r.x??0)+f.x,y:(r.y??0)+f.y,z:(((h=c[it])==null?void 0:h.z)??0)>(r.z??0)?((g=c[it])==null?void 0:g.z)??0:r.z??0},i)}function Wb(t,n,r){t.forEach(i=>{var c;const s=i.parentNode||i.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||r!=null&&r[i.id]){const{x:f,y:h,z:g}=Pb(i,t,{...i.position,z:((c=i[it])==null?void 0:c.z)??0},n);i.positionAbsolute={x:f,y:h},i[it].z=g,r!=null&&r[i.id]&&(i[it].isParent=!0)}})}function oh(t,n,r,i){const s=new Map,c={},f=i?1e3:0;return t.forEach(h=>{var b;const g=(Cn(h.zIndex)?h.zIndex:0)+(h.selected?f:0),m=n.get(h.id),y={...h,positionAbsolute:{x:h.position.x,y:h.position.y}},p=h.parentNode||h.parentId;p&&(c[p]=!0);const v=(m==null?void 0:m.type)&&(m==null?void 0:m.type)!==h.type;Object.defineProperty(y,it,{enumerable:!1,value:{handleBounds:v||(b=m==null?void 0:m[it])==null?void 0:b.handleBounds,z:g}}),s.set(h.id,y)}),Wb(s,r,c),s}function ew(t,n={}){const{getNodes:r,width:i,height:s,minZoom:c,maxZoom:f,d3Zoom:h,d3Selection:g,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:p}=t(),v=n.initial&&!m&&y;if(h&&g&&(v||!n.initial)){const S=r().filter(C=>{var T;const N=n.includeHiddenNodes?C.width&&C.height:!C.hidden;return(T=n.nodes)!=null&&T.length?N&&n.nodes.some(O=>O.id===C.id):N}),w=S.every(C=>C.width&&C.height);if(S.length>0&&w){const C=Eo(S,p),{x:N,y:T,zoom:O}=kb(C,i,s,n.minZoom??c,n.maxZoom??f,n.padding??.1),M=Oa.translate(N,T).scale(O);return typeof n.duration=="number"&&n.duration>0?h.transform(Zr(g,n.duration),M):h.transform(g,M),!0}}return!1}function fC(t,n){return t.forEach(r=>{const i=n.get(r.id);i&&n.set(i.id,{...i,[it]:i[it],selected:r.selected})}),new Map(n)}function dC(t,n){return n.map(r=>{const i=t.find(s=>s.id===r.id);return i&&(r.selected=i.selected),r})}function zc({changedNodes:t,changedEdges:n,get:r,set:i}){const{nodeInternals:s,edges:c,onNodesChange:f,onEdgesChange:h,hasDefaultNodes:g,hasDefaultEdges:m}=r();t!=null&&t.length&&(g&&i({nodeInternals:fC(t,s)}),f==null||f(t)),n!=null&&n.length&&(m&&i({edges:dC(n,c)}),h==null||h(n))}const Qi=()=>{},hC={zoomIn:Qi,zoomOut:Qi,zoomTo:Qi,getZoom:()=>1,setViewport:Qi,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Qi,fitBounds:Qi,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},mC=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),gC=()=>{const t=vt(),{d3Zoom:n,d3Selection:r}=Pe(mC,Ct);return U.useMemo(()=>r&&n?{zoomIn:s=>n.scaleBy(Zr(r,s==null?void 0:s.duration),1.2),zoomOut:s=>n.scaleBy(Zr(r,s==null?void 0:s.duration),1/1.2),zoomTo:(s,c)=>n.scaleTo(Zr(r,c==null?void 0:c.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,c)=>{const[f,h,g]=t.getState().transform,m=Oa.translate(s.x??f,s.y??h).scale(s.zoom??g);n.transform(Zr(r,c==null?void 0:c.duration),m)},getViewport:()=>{const[s,c,f]=t.getState().transform;return{x:s,y:c,zoom:f}},fitView:s=>ew(t.getState,s),setCenter:(s,c,f)=>{const{width:h,height:g,maxZoom:m}=t.getState(),y=typeof(f==null?void 0:f.zoom)<"u"?f.zoom:m,p=h/2-s*y,v=g/2-c*y,b=Oa.translate(p,v).scale(y);n.transform(Zr(r,f==null?void 0:f.duration),b)},fitBounds:(s,c)=>{const{width:f,height:h,minZoom:g,maxZoom:m}=t.getState(),{x:y,y:p,zoom:v}=kb(s,f,h,g,m,(c==null?void 0:c.padding)??.1),b=Oa.translate(y,p).scale(v);n.transform(Zr(r,c==null?void 0:c.duration),b)},project:s=>{const{transform:c,snapToGrid:f,snapGrid:h}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),qh(s,c,f,h)},screenToFlowPosition:s=>{const{transform:c,snapToGrid:f,snapGrid:h,domNode:g}=t.getState();if(!g)return s;const{x:m,y}=g.getBoundingClientRect(),p={x:s.x-m,y:s.y-y};return qh(p,c,f,h)},flowToScreenPosition:s=>{const{transform:c,domNode:f}=t.getState();if(!f)return s;const{x:h,y:g}=f.getBoundingClientRect(),m=Hb(s,c);return{x:m.x+h,y:m.y+g}},viewportInitialized:!0}:hC,[n,r])};function Sm(){const t=gC(),n=vt(),r=U.useCallback(()=>n.getState().getNodes().map(w=>({...w})),[]),i=U.useCallback(w=>n.getState().nodeInternals.get(w),[]),s=U.useCallback(()=>{const{edges:w=[]}=n.getState();return w.map(C=>({...C}))},[]),c=U.useCallback(w=>{const{edges:C=[]}=n.getState();return C.find(N=>N.id===w)},[]),f=U.useCallback(w=>{const{getNodes:C,setNodes:N,hasDefaultNodes:T,onNodesChange:O}=n.getState(),M=C(),H=typeof w=="function"?w(M):w;if(T)N(H);else if(O){const j=H.length===0?M.map(k=>({type:"remove",id:k.id})):H.map(k=>({item:k,type:"reset"}));O(j)}},[]),h=U.useCallback(w=>{const{edges:C=[],setEdges:N,hasDefaultEdges:T,onEdgesChange:O}=n.getState(),M=typeof w=="function"?w(C):w;if(T)N(M);else if(O){const H=M.length===0?C.map(j=>({type:"remove",id:j.id})):M.map(j=>({item:j,type:"reset"}));O(H)}},[]),g=U.useCallback(w=>{const C=Array.isArray(w)?w:[w],{getNodes:N,setNodes:T,hasDefaultNodes:O,onNodesChange:M}=n.getState();if(O){const j=[...N(),...C];T(j)}else if(M){const H=C.map(j=>({item:j,type:"add"}));M(H)}},[]),m=U.useCallback(w=>{const C=Array.isArray(w)?w:[w],{edges:N=[],setEdges:T,hasDefaultEdges:O,onEdgesChange:M}=n.getState();if(O)T([...N,...C]);else if(M){const H=C.map(j=>({item:j,type:"add"}));M(H)}},[]),y=U.useCallback(()=>{const{getNodes:w,edges:C=[],transform:N}=n.getState(),[T,O,M]=N;return{nodes:w().map(H=>({...H})),edges:C.map(H=>({...H})),viewport:{x:T,y:O,zoom:M}}},[]),p=U.useCallback(({nodes:w,edges:C})=>{const{nodeInternals:N,getNodes:T,edges:O,hasDefaultNodes:M,hasDefaultEdges:H,onNodesDelete:j,onEdgesDelete:k,onNodesChange:F,onEdgesChange:X}=n.getState(),ee=(w||[]).map(Z=>Z.id),W=(C||[]).map(Z=>Z.id),ne=T().reduce((Z,R)=>{const Y=R.parentNode||R.parentId,J=!ee.includes(R.id)&&Y&&Z.find(A=>A.id===Y);return(typeof R.deletable=="boolean"?R.deletable:!0)&&(ee.includes(R.id)||J)&&Z.push(R),Z},[]),ue=O.filter(Z=>typeof Z.deletable=="boolean"?Z.deletable:!0),D=ue.filter(Z=>W.includes(Z.id));if(ne||D){const Z=Lb(ne,ue),R=[...D,...Z],Y=R.reduce((J,$)=>(J.includes($.id)||J.push($.id),J),[]);if((H||M)&&(H&&n.setState({edges:O.filter(J=>!Y.includes(J.id))}),M&&(ne.forEach(J=>{N.delete(J.id)}),n.setState({nodeInternals:new Map(N)}))),Y.length>0&&(k==null||k(R),X&&X(Y.map(J=>({id:J,type:"remove"})))),ne.length>0&&(j==null||j(ne),F)){const J=ne.map($=>({id:$.id,type:"remove"}));F(J)}}},[]),v=U.useCallback(w=>{const C=jM(w),N=C?null:n.getState().nodeInternals.get(w.id);return!C&&!N?[null,null,C]:[C?w:Nv(N),N,C]},[]),b=U.useCallback((w,C=!0,N)=>{const[T,O,M]=v(w);return T?(N||n.getState().getNodes()).filter(H=>{if(!M&&(H.id===O.id||!H.positionAbsolute))return!1;const j=Nv(H),k=Lh(j,T);return C&&k>0||k>=T.width*T.height}):[]},[]),S=U.useCallback((w,C,N=!0)=>{const[T]=v(w);if(!T)return!1;const O=Lh(T,C);return N&&O>0||O>=T.width*T.height},[]);return U.useMemo(()=>({...t,getNodes:r,getNode:i,getEdges:s,getEdge:c,setNodes:f,setEdges:h,addNodes:g,addEdges:m,toObject:y,deleteElements:p,getIntersectingNodes:b,isNodeIntersecting:S}),[t,r,i,s,c,f,h,g,m,y,p,b,S])}const yC={actInsideInputWithModifier:!1};var pC=({deleteKeyCode:t,multiSelectionKeyCode:n})=>{const r=vt(),{deleteElements:i}=Sm(),s=Zs(t,yC),c=Zs(n);U.useEffect(()=>{if(s){const{edges:f,getNodes:h}=r.getState(),g=h().filter(y=>y.selected),m=f.filter(y=>y.selected);i({nodes:g,edges:m}),r.setState({nodesSelectionActive:!1})}},[s]),U.useEffect(()=>{r.setState({multiSelectionActive:c})},[c])};function vC(t){const n=vt();U.useEffect(()=>{let r;const i=()=>{var c,f;if(!t.current)return;const s=gm(t.current);(s.height===0||s.width===0)&&((f=(c=n.getState()).onError)==null||f.call(c,"004",Ua.error004())),n.setState({width:s.width||500,height:s.height||500})};return i(),window.addEventListener("resize",i),t.current&&(r=new ResizeObserver(()=>i()),r.observe(t.current)),()=>{window.removeEventListener("resize",i),r&&t.current&&r.unobserve(t.current)}},[])}const Em={position:"absolute",width:"100%",height:"100%",top:0,left:0},_C=(t,n)=>t.x!==n.x||t.y!==n.y||t.zoom!==n.k,Uc=t=>({x:t.x,y:t.y,zoom:t.k}),Zi=(t,n)=>t.target.closest(`.${n}`),$v=(t,n)=>n===2&&Array.isArray(t)&&t.includes(2),Yv=t=>{const n=t.ctrlKey&&uo()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*n},bC=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),wC=({onMove:t,onMoveStart:n,onMoveEnd:r,onPaneContextMenu:i,zoomOnScroll:s=!0,zoomOnPinch:c=!0,panOnScroll:f=!1,panOnScrollSpeed:h=.5,panOnScrollMode:g=Kr.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:p=!0,defaultViewport:v,translateExtent:b,minZoom:S,maxZoom:w,zoomActivationKeyCode:C,preventScrolling:N=!0,children:T,noWheelClassName:O,noPanClassName:M})=>{const H=U.useRef(),j=vt(),k=U.useRef(!1),F=U.useRef(!1),X=U.useRef(null),ee=U.useRef({x:0,y:0,zoom:0}),{d3Zoom:W,d3Selection:ne,d3ZoomHandler:ue,userSelectionActive:D}=Pe(bC,Ct),Z=Zs(C),R=U.useRef(0),Y=U.useRef(!1),J=U.useRef();return vC(X),U.useEffect(()=>{if(X.current){const $=X.current.getBoundingClientRect(),A=Eb().scaleExtent([S,w]).translateExtent(b),L=Pt(X.current).call(A),G=Oa.translate(v.x,v.y).scale(ml(v.zoom,S,w)),P=[[0,0],[$.width,$.height]],re=A.constrain()(G,P,b);A.transform(L,re),A.wheelDelta(Yv),j.setState({d3Zoom:A,d3Selection:L,d3ZoomHandler:L.on("wheel.zoom"),transform:[re.x,re.y,re.k],domNode:X.current.closest(".react-flow")})}},[]),U.useEffect(()=>{ne&&W&&(f&&!Z&&!D?ne.on("wheel.zoom",$=>{if(Zi($,O))return!1;$.preventDefault(),$.stopImmediatePropagation();const A=ne.property("__zoom").k||1;if($.ctrlKey&&c){const ye=Yn($),ce=Yv($),de=A*Math.pow(2,ce);W.scaleTo(ne,de,ye,$);return}const L=$.deltaMode===1?20:1;let G=g===Kr.Vertical?0:$.deltaX*L,P=g===Kr.Horizontal?0:$.deltaY*L;!uo()&&$.shiftKey&&g!==Kr.Vertical&&(G=$.deltaY*L,P=0),W.translateBy(ne,-(G/A)*h,-(P/A)*h,{internal:!0});const re=Uc(ne.property("__zoom")),{onViewportChangeStart:oe,onViewportChange:fe,onViewportChangeEnd:be}=j.getState();clearTimeout(J.current),Y.current||(Y.current=!0,n==null||n($,re),oe==null||oe(re)),Y.current&&(t==null||t($,re),fe==null||fe(re),J.current=setTimeout(()=>{r==null||r($,re),be==null||be(re),Y.current=!1},150))},{passive:!1}):typeof ue<"u"&&ne.on("wheel.zoom",function($,A){if(!N&&$.type==="wheel"&&!$.ctrlKey||Zi($,O))return null;$.preventDefault(),ue.call(this,$,A)},{passive:!1}))},[D,f,g,ne,W,ue,Z,c,N,O,n,t,r]),U.useEffect(()=>{W&&W.on("start",$=>{var G,P;if(!$.sourceEvent||$.sourceEvent.internal)return null;R.current=(G=$.sourceEvent)==null?void 0:G.button;const{onViewportChangeStart:A}=j.getState(),L=Uc($.transform);k.current=!0,ee.current=L,((P=$.sourceEvent)==null?void 0:P.type)==="mousedown"&&j.setState({paneDragging:!0}),A==null||A(L),n==null||n($.sourceEvent,L)})},[W,n]),U.useEffect(()=>{W&&(D&&!k.current?W.on("zoom",null):D||W.on("zoom",$=>{var L;const{onViewportChange:A}=j.getState();if(j.setState({transform:[$.transform.x,$.transform.y,$.transform.k]}),F.current=!!(i&&$v(p,R.current??0)),(t||A)&&!((L=$.sourceEvent)!=null&&L.internal)){const G=Uc($.transform);A==null||A(G),t==null||t($.sourceEvent,G)}}))},[D,W,t,p,i]),U.useEffect(()=>{W&&W.on("end",$=>{if(!$.sourceEvent||$.sourceEvent.internal)return null;const{onViewportChangeEnd:A}=j.getState();if(k.current=!1,j.setState({paneDragging:!1}),i&&$v(p,R.current??0)&&!F.current&&i($.sourceEvent),F.current=!1,(r||A)&&_C(ee.current,$.transform)){const L=Uc($.transform);ee.current=L,clearTimeout(H.current),H.current=setTimeout(()=>{A==null||A(L),r==null||r($.sourceEvent,L)},f?150:0)}})},[W,f,p,r,i]),U.useEffect(()=>{W&&W.filter($=>{const A=Z||s,L=c&&$.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&$.button===1&&$.type==="mousedown"&&(Zi($,"react-flow__node")||Zi($,"react-flow__edge")))return!0;if(!p&&!A&&!f&&!m&&!c||D||!m&&$.type==="dblclick"||Zi($,O)&&$.type==="wheel"||Zi($,M)&&($.type!=="wheel"||f&&$.type==="wheel"&&!Z)||!c&&$.ctrlKey&&$.type==="wheel"||!A&&!f&&!L&&$.type==="wheel"||!p&&($.type==="mousedown"||$.type==="touchstart")||Array.isArray(p)&&!p.includes($.button)&&$.type==="mousedown")return!1;const G=Array.isArray(p)&&p.includes($.button)||!$.button||$.button<=1;return(!$.ctrlKey||$.type==="wheel")&&G})},[D,W,s,c,f,m,p,y,Z]),te.createElement("div",{className:"react-flow__renderer",ref:X,style:Em},T)},xC=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function SC(){const{userSelectionActive:t,userSelectionRect:n}=Pe(xC,Ct);return t&&n?te.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}function qv(t,n){const r=n.parentNode||n.parentId,i=t.find(s=>s.id===r);if(i){const s=n.position.x+n.width-i.width,c=n.position.y+n.height-i.height;if(s>0||c>0||n.position.x<0||n.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,s>0&&(i.style.width+=s),c>0&&(i.style.height+=c),n.position.x<0){const f=Math.abs(n.position.x);i.position.x=i.position.x-f,i.style.width+=f,n.position.x=0}if(n.position.y<0){const f=Math.abs(n.position.y);i.position.y=i.position.y-f,i.style.height+=f,n.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function EC(t,n){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const r=t.filter(i=>i.type==="add").map(i=>i.item);return n.reduce((i,s)=>{const c=t.filter(h=>h.id===s.id);if(c.length===0)return i.push(s),i;const f={...s};for(const h of c)if(h)switch(h.type){case"select":{f.selected=h.selected;break}case"position":{typeof h.position<"u"&&(f.position=h.position),typeof h.positionAbsolute<"u"&&(f.positionAbsolute=h.positionAbsolute),typeof h.dragging<"u"&&(f.dragging=h.dragging),f.expandParent&&qv(i,f);break}case"dimensions":{typeof h.dimensions<"u"&&(f.width=h.dimensions.width,f.height=h.dimensions.height),typeof h.updateStyle<"u"&&(f.style={...f.style||{},...h.dimensions}),typeof h.resizing=="boolean"&&(f.resizing=h.resizing),f.expandParent&&qv(i,f);break}case"remove":return i}return i.push(f),i},r)}function AC(t,n){return EC(t,n)}const vr=(t,n)=>({id:t,type:"select",selected:n});function nl(t,n){return t.reduce((r,i)=>{const s=n.includes(i.id);return!i.selected&&s?(i.selected=!0,r.push(vr(i.id,!0))):i.selected&&!s&&(i.selected=!1,r.push(vr(i.id,!1))),r},[])}const fh=(t,n)=>r=>{r.target===n.current&&(t==null||t(r))},TC=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),tw=U.memo(({isSelecting:t,selectionMode:n=Gs.Full,panOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:c,onPaneContextMenu:f,onPaneScroll:h,onPaneMouseEnter:g,onPaneMouseMove:m,onPaneMouseLeave:y,children:p})=>{const v=U.useRef(null),b=vt(),S=U.useRef(0),w=U.useRef(0),C=U.useRef(),{userSelectionActive:N,elementsSelectable:T,dragging:O}=Pe(TC,Ct),M=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,w.current=0},H=ue=>{c==null||c(ue),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},j=ue=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){ue.preventDefault();return}f==null||f(ue)},k=h?ue=>h(ue):void 0,F=ue=>{const{resetSelectedElements:D,domNode:Z}=b.getState();if(C.current=Z==null?void 0:Z.getBoundingClientRect(),!T||!t||ue.button!==0||ue.target!==v.current||!C.current)return;const{x:R,y:Y}=br(ue,C.current);D(),b.setState({userSelectionRect:{width:0,height:0,startX:R,startY:Y,x:R,y:Y}}),i==null||i(ue)},X=ue=>{const{userSelectionRect:D,nodeInternals:Z,edges:R,transform:Y,onNodesChange:J,onEdgesChange:$,nodeOrigin:A,getNodes:L}=b.getState();if(!t||!C.current||!D)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const G=br(ue,C.current),P=D.startX??0,re=D.startY??0,oe={...D,x:G.x<P?G.x:P,y:G.y<re?G.y:re,width:Math.abs(G.x-P),height:Math.abs(G.y-re)},fe=L(),be=Bb(Z,oe,Y,n===Gs.Partial,!0,A),ye=Lb(be,R).map(de=>de.id),ce=be.map(de=>de.id);if(S.current!==ce.length){S.current=ce.length;const de=nl(fe,ce);de.length&&(J==null||J(de))}if(w.current!==ye.length){w.current=ye.length;const de=nl(R,ye);de.length&&($==null||$(de))}b.setState({userSelectionRect:oe})},ee=ue=>{if(ue.button!==0)return;const{userSelectionRect:D}=b.getState();!N&&D&&ue.target===v.current&&(H==null||H(ue)),b.setState({nodesSelectionActive:S.current>0}),M(),s==null||s(ue)},W=ue=>{N&&(b.setState({nodesSelectionActive:S.current>0}),s==null||s(ue)),M()},ne=T&&(t||N);return te.createElement("div",{className:Ht(["react-flow__pane",{dragging:O,selection:t}]),onClick:ne?void 0:fh(H,v),onContextMenu:fh(j,v),onWheel:fh(k,v),onMouseEnter:ne?void 0:g,onMouseDown:ne?F:void 0,onMouseMove:ne?X:m,onMouseUp:ne?ee:void 0,onMouseLeave:ne?W:y,ref:v,style:Em},p,te.createElement(SC,null))});tw.displayName="Pane";function nw(t,n){const r=t.parentNode||t.parentId;if(!r)return!1;const i=n.get(r);return i?i.selected?!0:nw(i,n):!1}function Xv(t,n,r){let i=t;do{if(i!=null&&i.matches(n))return!0;if(i===r.current)return!1;i=i.parentElement}while(i);return!1}function MC(t,n,r,i){return Array.from(t.values()).filter(s=>(s.selected||s.id===i)&&(!s.parentNode||s.parentId||!nw(s,t))&&(s.draggable||n&&typeof s.draggable>"u")).map(s=>{var c,f;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((c=s.positionAbsolute)==null?void 0:c.x)??0),y:r.y-(((f=s.positionAbsolute)==null?void 0:f.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function CC(t,n){return!n||n==="parent"?n:[n[0],[n[1][0]-(t.width||0),n[1][1]-(t.height||0)]]}function aw(t,n,r,i,s=[0,0],c){const f=CC(t,t.extent||i);let h=f;const g=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(g&&t.width&&t.height){const p=r.get(g),{x:v,y:b}=Wr(p,s).positionAbsolute;h=p&&Cn(v)&&Cn(b)&&Cn(p.width)&&Cn(p.height)?[[v+t.width*s[0],b+t.height*s[1]],[v+p.width-t.width+t.width*s[0],b+p.height-t.height+t.height*s[1]]]:h}else c==null||c("005",Ua.error005()),h=f;else if(t.extent&&g&&t.extent!=="parent"){const p=r.get(g),{x:v,y:b}=Wr(p,s).positionAbsolute;h=[[t.extent[0][0]+v,t.extent[0][1]+b],[t.extent[1][0]+v,t.extent[1][1]+b]]}let m={x:0,y:0};if(g){const p=r.get(g);m=Wr(p,s).positionAbsolute}const y=h&&h!=="parent"?ym(n,h):n;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function dh({nodeId:t,dragItems:n,nodeInternals:r}){const i=n.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?i.find(s=>s.id===t):i[0],i]}const Vv=(t,n,r,i)=>{const s=n.querySelectorAll(t);if(!s||!s.length)return null;const c=Array.from(s),f=n.getBoundingClientRect(),h={x:f.width*i[0],y:f.height*i[1]};return c.map(g=>{const m=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(m.left-f.left-h.x)/r,y:(m.top-f.top-h.y)/r,...gm(g)}})};function Ss(t,n,r){return r===void 0?r:i=>{const s=n().nodeInternals.get(t);s&&r(i,{...s})}}function Vh({id:t,store:n,unselect:r=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:c,multiSelectionActive:f,nodeInternals:h,onError:g}=n.getState(),m=h.get(t);if(!m){g==null||g("012",Ua.error012(t));return}n.setState({nodesSelectionActive:!1}),m.selected?(r||m.selected&&f)&&(c({nodes:[m],edges:[]}),requestAnimationFrame(()=>{var y;return(y=i==null?void 0:i.current)==null?void 0:y.blur()})):s([t])}function RC(){const t=vt();return U.useCallback(({sourceEvent:r})=>{const{transform:i,snapGrid:s,snapToGrid:c}=t.getState(),f=r.touches?r.touches[0].clientX:r.clientX,h=r.touches?r.touches[0].clientY:r.clientY,g={x:(f-i[0])/i[2],y:(h-i[1])/i[2]};return{xSnapped:c?s[0]*Math.round(g.x/s[0]):g.x,ySnapped:c?s[1]*Math.round(g.y/s[1]):g.y,...g}},[])}function hh(t){return(n,r,i)=>t==null?void 0:t(n,i)}function rw({nodeRef:t,disabled:n=!1,noDragClassName:r,handleSelector:i,nodeId:s,isSelectable:c,selectNodesOnDrag:f}){const h=vt(),[g,m]=U.useState(!1),y=U.useRef([]),p=U.useRef({x:null,y:null}),v=U.useRef(0),b=U.useRef(null),S=U.useRef({x:0,y:0}),w=U.useRef(null),C=U.useRef(!1),N=U.useRef(!1),T=U.useRef(!1),O=RC();return U.useEffect(()=>{if(t!=null&&t.current){const M=Pt(t.current),H=({x:F,y:X})=>{const{nodeInternals:ee,onNodeDrag:W,onSelectionDrag:ne,updateNodePositions:ue,nodeExtent:D,snapGrid:Z,snapToGrid:R,nodeOrigin:Y,onError:J}=h.getState();p.current={x:F,y:X};let $=!1,A={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&D){const G=Eo(y.current,Y);A=Vs(G)}if(y.current=y.current.map(G=>{const P={x:F-G.distance.x,y:X-G.distance.y};R&&(P.x=Z[0]*Math.round(P.x/Z[0]),P.y=Z[1]*Math.round(P.y/Z[1]));const re=[[D[0][0],D[0][1]],[D[1][0],D[1][1]]];y.current.length>1&&D&&!G.extent&&(re[0][0]=G.positionAbsolute.x-A.x+D[0][0],re[1][0]=G.positionAbsolute.x+(G.width??0)-A.x2+D[1][0],re[0][1]=G.positionAbsolute.y-A.y+D[0][1],re[1][1]=G.positionAbsolute.y+(G.height??0)-A.y2+D[1][1]);const oe=aw(G,P,ee,re,Y,J);return $=$||G.position.x!==oe.position.x||G.position.y!==oe.position.y,G.position=oe.position,G.positionAbsolute=oe.positionAbsolute,G}),!$)return;ue(y.current,!0,!0),m(!0);const L=s?W:hh(ne);if(L&&w.current){const[G,P]=dh({nodeId:s,dragItems:y.current,nodeInternals:ee});L(w.current,G,P)}},j=()=>{if(!b.current)return;const[F,X]=Tb(S.current,b.current);if(F!==0||X!==0){const{transform:ee,panBy:W}=h.getState();p.current.x=(p.current.x??0)-F/ee[2],p.current.y=(p.current.y??0)-X/ee[2],W({x:F,y:X})&&H(p.current)}v.current=requestAnimationFrame(j)},k=F=>{var Y;const{nodeInternals:X,multiSelectionActive:ee,nodesDraggable:W,unselectNodesAndEdges:ne,onNodeDragStart:ue,onSelectionDragStart:D}=h.getState();N.current=!0;const Z=s?ue:hh(D);(!f||!c)&&!ee&&s&&((Y=X.get(s))!=null&&Y.selected||ne()),s&&c&&f&&Vh({id:s,store:h,nodeRef:t});const R=O(F);if(p.current=R,y.current=MC(X,W,R,s),Z&&y.current){const[J,$]=dh({nodeId:s,dragItems:y.current,nodeInternals:X});Z(F.sourceEvent,J,$)}};if(n)M.on(".drag",null);else{const F=UA().on("start",X=>{const{domNode:ee,nodeDragThreshold:W}=h.getState();W===0&&k(X),T.current=!1;const ne=O(X);p.current=ne,b.current=(ee==null?void 0:ee.getBoundingClientRect())||null,S.current=br(X.sourceEvent,b.current)}).on("drag",X=>{var ue,D;const ee=O(X),{autoPanOnNodeDrag:W,nodeDragThreshold:ne}=h.getState();if(X.sourceEvent.type==="touchmove"&&X.sourceEvent.touches.length>1&&(T.current=!0),!T.current){if(!C.current&&N.current&&W&&(C.current=!0,j()),!N.current){const Z=ee.xSnapped-(((ue=p==null?void 0:p.current)==null?void 0:ue.x)??0),R=ee.ySnapped-(((D=p==null?void 0:p.current)==null?void 0:D.y)??0);Math.sqrt(Z*Z+R*R)>ne&&k(X)}(p.current.x!==ee.xSnapped||p.current.y!==ee.ySnapped)&&y.current&&N.current&&(w.current=X.sourceEvent,S.current=br(X.sourceEvent,b.current),H(ee))}}).on("end",X=>{if(!(!N.current||T.current)&&(m(!1),C.current=!1,N.current=!1,cancelAnimationFrame(v.current),y.current)){const{updateNodePositions:ee,nodeInternals:W,onNodeDragStop:ne,onSelectionDragStop:ue}=h.getState(),D=s?ne:hh(ue);if(ee(y.current,!1,!1),D){const[Z,R]=dh({nodeId:s,dragItems:y.current,nodeInternals:W});D(X.sourceEvent,Z,R)}}}).filter(X=>{const ee=X.target;return!X.button&&(!r||!Xv(ee,`.${r}`,t))&&(!i||Xv(ee,i,t))});return M.call(F),()=>{M.on(".drag",null)}}}},[t,n,r,i,c,h,s,f,O]),g}function iw(){const t=vt();return U.useCallback(r=>{const{nodeInternals:i,nodeExtent:s,updateNodePositions:c,getNodes:f,snapToGrid:h,snapGrid:g,onError:m,nodesDraggable:y}=t.getState(),p=f().filter(T=>T.selected&&(T.draggable||y&&typeof T.draggable>"u")),v=h?g[0]:5,b=h?g[1]:5,S=r.isShiftPressed?4:1,w=r.x*v*S,C=r.y*b*S,N=p.map(T=>{if(T.positionAbsolute){const O={x:T.positionAbsolute.x+w,y:T.positionAbsolute.y+C};h&&(O.x=g[0]*Math.round(O.x/g[0]),O.y=g[1]*Math.round(O.y/g[1]));const{positionAbsolute:M,position:H}=aw(T,O,i,s,void 0,m);T.position=H,T.positionAbsolute=M}return T});c(N,!0,!1)},[])}const ul={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Es=t=>{const n=({id:r,type:i,data:s,xPos:c,yPos:f,xPosOrigin:h,yPosOrigin:g,selected:m,onClick:y,onMouseEnter:p,onMouseMove:v,onMouseLeave:b,onContextMenu:S,onDoubleClick:w,style:C,className:N,isDraggable:T,isSelectable:O,isConnectable:M,isFocusable:H,selectNodesOnDrag:j,sourcePosition:k,targetPosition:F,hidden:X,resizeObserver:ee,dragHandle:W,zIndex:ne,isParent:ue,noDragClassName:D,noPanClassName:Z,initialized:R,disableKeyboardA11y:Y,ariaLabel:J,rfId:$,hasHandleBounds:A})=>{const L=vt(),G=U.useRef(null),P=U.useRef(null),re=U.useRef(k),oe=U.useRef(F),fe=U.useRef(i),be=O||T||y||p||v||b,ye=iw(),ce=Ss(r,L.getState,p),de=Ss(r,L.getState,v),_e=Ss(r,L.getState,b),le=Ss(r,L.getState,S),He=Ss(r,L.getState,w),Te=Me=>{const{nodeDragThreshold:me}=L.getState();if(O&&(!j||!T||me>0)&&Vh({id:r,store:L,nodeRef:G}),y){const wt=L.getState().nodeInternals.get(r);wt&&y(Me,{...wt})}},ze=Me=>{if(!kh(Me)&&!Y)if(Nb.includes(Me.key)&&O){const me=Me.key==="Escape";Vh({id:r,store:L,unselect:me,nodeRef:G})}else T&&m&&Object.prototype.hasOwnProperty.call(ul,Me.key)&&(L.setState({ariaLiveMessage:`Moved selected node ${Me.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~c}, y: ${~~f}`}),ye({x:ul[Me.key].x,y:ul[Me.key].y,isShiftPressed:Me.shiftKey}))};U.useEffect(()=>()=>{P.current&&(ee==null||ee.unobserve(P.current),P.current=null)},[]),U.useEffect(()=>{if(G.current&&!X){const Me=G.current;(!R||!A||P.current!==Me)&&(P.current&&(ee==null||ee.unobserve(P.current)),ee==null||ee.observe(Me),P.current=Me)}},[X,R,A]),U.useEffect(()=>{const Me=fe.current!==i,me=re.current!==k,wt=oe.current!==F;G.current&&(Me||me||wt)&&(Me&&(fe.current=i),me&&(re.current=k),wt&&(oe.current=F),L.getState().updateNodeDimensions([{id:r,nodeElement:G.current,forceUpdate:!0}]))},[r,i,k,F]);const Ye=rw({nodeRef:G,disabled:X||!T,noDragClassName:D,handleSelector:W,nodeId:r,isSelectable:O,selectNodesOnDrag:j});return X?null:te.createElement("div",{className:Ht(["react-flow__node",`react-flow__node-${i}`,{[Z]:T},N,{selected:m,selectable:O,parent:ue,dragging:Ye}]),ref:G,style:{zIndex:ne,transform:`translate(${h}px,${g}px)`,pointerEvents:be?"all":"none",visibility:R?"visible":"hidden",...C},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:de,onMouseLeave:_e,onContextMenu:le,onClick:Te,onDoubleClick:He,onKeyDown:H?ze:void 0,tabIndex:H?0:void 0,role:H?"button":void 0,"aria-describedby":Y?void 0:`${Kb}-${$}`,"aria-label":J},te.createElement(qM,{value:r},te.createElement(t,{id:r,data:s,type:i,xPos:c,yPos:f,selected:m,isConnectable:M,sourcePosition:k,targetPosition:F,dragging:Ye,dragHandle:W,zIndex:ne})))};return n.displayName="NodeWrapper",U.memo(n)};const NC=t=>{const n=t.getNodes().filter(r=>r.selected);return{...Eo(n,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function DC({onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:r}){const i=vt(),{width:s,height:c,x:f,y:h,transformString:g,userSelectionActive:m}=Pe(NC,Ct),y=iw(),p=U.useRef(null);if(U.useEffect(()=>{var S;r||(S=p.current)==null||S.focus({preventScroll:!0})},[r]),rw({nodeRef:p}),m||!s||!c)return null;const v=t?S=>{const w=i.getState().getNodes().filter(C=>C.selected);t(S,w)}:void 0,b=S=>{Object.prototype.hasOwnProperty.call(ul,S.key)&&y({x:ul[S.key].x,y:ul[S.key].y,isShiftPressed:S.shiftKey})};return te.createElement("div",{className:Ht(["react-flow__nodesselection","react-flow__container",n]),style:{transform:g}},te.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:r?void 0:-1,onKeyDown:r?void 0:b,style:{width:s,height:c,top:h,left:f}}))}var OC=U.memo(DC);const zC=t=>t.nodesSelectionActive,lw=({children:t,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:f,deleteKeyCode:h,onMove:g,onMoveStart:m,onMoveEnd:y,selectionKeyCode:p,selectionOnDrag:v,selectionMode:b,onSelectionStart:S,onSelectionEnd:w,multiSelectionKeyCode:C,panActivationKeyCode:N,zoomActivationKeyCode:T,elementsSelectable:O,zoomOnScroll:M,zoomOnPinch:H,panOnScroll:j,panOnScrollSpeed:k,panOnScrollMode:F,zoomOnDoubleClick:X,panOnDrag:ee,defaultViewport:W,translateExtent:ne,minZoom:ue,maxZoom:D,preventScrolling:Z,onSelectionContextMenu:R,noWheelClassName:Y,noPanClassName:J,disableKeyboardA11y:$})=>{const A=Pe(zC),L=Zs(p),G=Zs(N),P=G||ee,re=G||j,oe=L||v&&P!==!0;return pC({deleteKeyCode:h,multiSelectionKeyCode:C}),te.createElement(wC,{onMove:g,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:c,elementsSelectable:O,zoomOnScroll:M,zoomOnPinch:H,panOnScroll:re,panOnScrollSpeed:k,panOnScrollMode:F,zoomOnDoubleClick:X,panOnDrag:!L&&P,defaultViewport:W,translateExtent:ne,minZoom:ue,maxZoom:D,zoomActivationKeyCode:T,preventScrolling:Z,noWheelClassName:Y,noPanClassName:J},te.createElement(tw,{onSelectionStart:S,onSelectionEnd:w,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:f,panOnDrag:P,isSelecting:!!oe,selectionMode:b},t,A&&te.createElement(OC,{onSelectionContextMenu:R,noPanClassName:J,disableKeyboardA11y:$})))};lw.displayName="FlowRenderer";var UC=U.memo(lw);function jC(t){return Pe(U.useCallback(r=>t?Bb(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function HC(t){const n={input:Es(t.input||Qb),default:Es(t.default||Xh),output:Es(t.output||Fb),group:Es(t.group||xm)},r={},i=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,c)=>(s[c]=Es(t[c]||Xh),s),r);return{...n,...i}}const BC=({x:t,y:n,width:r,height:i,origin:s})=>!r||!i?{x:t,y:n}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:n}:{x:t-r*s[0],y:n-i*s[1]},LC=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),sw=t=>{const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:i,elementsSelectable:s,updateNodeDimensions:c,onError:f}=Pe(LC,Ct),h=jC(t.onlyRenderVisibleElements),g=U.useRef(),m=U.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(p=>{const v=p.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));c(v)});return g.current=y,y},[]);return U.useEffect(()=>()=>{var y;(y=g==null?void 0:g.current)==null||y.disconnect()},[]),te.createElement("div",{className:"react-flow__nodes",style:Em},h.map(y=>{var H,j,k;let p=y.type||"default";t.nodeTypes[p]||(f==null||f("003",Ua.error003(p)),p="default");const v=t.nodeTypes[p]||t.nodeTypes.default,b=!!(y.draggable||n&&typeof y.draggable>"u"),S=!!(y.selectable||s&&typeof y.selectable>"u"),w=!!(y.connectable||r&&typeof y.connectable>"u"),C=!!(y.focusable||i&&typeof y.focusable>"u"),N=t.nodeExtent?ym(y.positionAbsolute,t.nodeExtent):y.positionAbsolute,T=(N==null?void 0:N.x)??0,O=(N==null?void 0:N.y)??0,M=BC({x:T,y:O,width:y.width??0,height:y.height??0,origin:t.nodeOrigin});return te.createElement(v,{key:y.id,id:y.id,className:y.className,style:y.style,type:p,data:y.data,sourcePosition:y.sourcePosition||ve.Bottom,targetPosition:y.targetPosition||ve.Top,hidden:y.hidden,xPos:T,yPos:O,xPosOrigin:M.x,yPosOrigin:M.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!y.selected,isDraggable:b,isSelectable:S,isConnectable:w,isFocusable:C,resizeObserver:m,dragHandle:y.dragHandle,zIndex:((H=y[it])==null?void 0:H.z)??0,isParent:!!((j=y[it])!=null&&j.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!y.width&&!!y.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!((k=y[it])!=null&&k.handleBounds)})}))};sw.displayName="NodeRenderer";var kC=U.memo(sw);const $C=(t,n,r)=>r===ve.Left?t-n:r===ve.Right?t+n:t,YC=(t,n,r)=>r===ve.Top?t-n:r===ve.Bottom?t+n:t,Gv="react-flow__edgeupdater",Qv=({position:t,centerX:n,centerY:r,radius:i=10,onMouseDown:s,onMouseEnter:c,onMouseOut:f,type:h})=>te.createElement("circle",{onMouseDown:s,onMouseEnter:c,onMouseOut:f,className:Ht([Gv,`${Gv}-${h}`]),cx:$C(n,i,t),cy:YC(r,i,t),r:i,stroke:"transparent",fill:"transparent"}),qC=()=>!0;var Fi=t=>{const n=({id:r,className:i,type:s,data:c,onClick:f,onEdgeDoubleClick:h,selected:g,animated:m,label:y,labelStyle:p,labelShowBg:v,labelBgStyle:b,labelBgPadding:S,labelBgBorderRadius:w,style:C,source:N,target:T,sourceX:O,sourceY:M,targetX:H,targetY:j,sourcePosition:k,targetPosition:F,elementsSelectable:X,hidden:ee,sourceHandleId:W,targetHandleId:ne,onContextMenu:ue,onMouseEnter:D,onMouseMove:Z,onMouseLeave:R,reconnectRadius:Y,onReconnect:J,onReconnectStart:$,onReconnectEnd:A,markerEnd:L,markerStart:G,rfId:P,ariaLabel:re,isFocusable:oe,isReconnectable:fe,pathOptions:be,interactionWidth:ye,disableKeyboardA11y:ce})=>{const de=U.useRef(null),[_e,le]=U.useState(!1),[He,Te]=U.useState(!1),ze=vt(),Ye=U.useMemo(()=>`url('#${Yh(G,P)}')`,[G,P]),Me=U.useMemo(()=>`url('#${Yh(L,P)}')`,[L,P]);if(ee)return null;const me=xt=>{var Bt;const{edges:nn,addSelectedEdges:pn,unselectNodesAndEdges:vn,multiSelectionActive:Vt}=ze.getState(),Qt=nn.find(Ar=>Ar.id===r);Qt&&(X&&(ze.setState({nodesSelectionActive:!1}),Qt.selected&&Vt?(vn({nodes:[],edges:[Qt]}),(Bt=de.current)==null||Bt.blur()):pn([r])),f&&f(xt,Qt))},wt=xs(r,ze.getState,h),yn=xs(r,ze.getState,ue),Zn=xs(r,ze.getState,D),Ba=xs(r,ze.getState,Z),sa=xs(r,ze.getState,R),On=(xt,nn)=>{if(xt.button!==0)return;const{edges:pn,isValidConnection:vn}=ze.getState(),Vt=nn?T:N,Qt=(nn?ne:W)||null,Bt=nn?"target":"source",Ar=vn||qC,ui=nn,ka=pn.find(ua=>ua.id===r);Te(!0),$==null||$(xt,ka,Bt);const Tr=ua=>{Te(!1),A==null||A(ua,ka,Bt)};qb({event:xt,handleId:Qt,nodeId:Vt,onConnect:ua=>J==null?void 0:J(ka,ua),isTarget:ui,getState:ze.getState,setState:ze.setState,isValidConnection:Ar,edgeUpdaterType:Bt,onReconnectEnd:Tr})},La=xt=>On(xt,!0),tn=xt=>On(xt,!1),lt=()=>le(!0),Xt=()=>le(!1),ot=!X&&!f,Er=xt=>{var nn;if(!ce&&Nb.includes(xt.key)&&X){const{unselectNodesAndEdges:pn,addSelectedEdges:vn,edges:Vt}=ze.getState();xt.key==="Escape"?((nn=de.current)==null||nn.blur(),pn({edges:[Vt.find(Bt=>Bt.id===r)]})):vn([r])}};return te.createElement("g",{className:Ht(["react-flow__edge",`react-flow__edge-${s}`,i,{selected:g,animated:m,inactive:ot,updating:_e}]),onClick:me,onDoubleClick:wt,onContextMenu:yn,onMouseEnter:Zn,onMouseMove:Ba,onMouseLeave:sa,onKeyDown:oe?Er:void 0,tabIndex:oe?0:void 0,role:oe?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":re===null?void 0:re||`Edge from ${N} to ${T}`,"aria-describedby":oe?`${Jb}-${P}`:void 0,ref:de},!He&&te.createElement(t,{id:r,source:N,target:T,selected:g,animated:m,label:y,labelStyle:p,labelShowBg:v,labelBgStyle:b,labelBgPadding:S,labelBgBorderRadius:w,data:c,style:C,sourceX:O,sourceY:M,targetX:H,targetY:j,sourcePosition:k,targetPosition:F,sourceHandleId:W,targetHandleId:ne,markerStart:Ye,markerEnd:Me,pathOptions:be,interactionWidth:ye}),fe&&te.createElement(te.Fragment,null,(fe==="source"||fe===!0)&&te.createElement(Qv,{position:k,centerX:O,centerY:M,radius:Y,onMouseDown:La,onMouseEnter:lt,onMouseOut:Xt,type:"source"}),(fe==="target"||fe===!0)&&te.createElement(Qv,{position:F,centerX:H,centerY:j,radius:Y,onMouseDown:tn,onMouseEnter:lt,onMouseOut:Xt,type:"target"})))};return n.displayName="EdgeWrapper",U.memo(n)};function XC(t){const n={default:Fi(t.default||co),straight:Fi(t.bezier||_m),step:Fi(t.step||vm),smoothstep:Fi(t.step||So),simplebezier:Fi(t.simplebezier||pm)},r={},i=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,c)=>(s[c]=Fi(t[c]||co),s),r);return{...n,...i}}function Zv(t,n,r=null){const i=((r==null?void 0:r.x)||0)+n.x,s=((r==null?void 0:r.y)||0)+n.y,c=(r==null?void 0:r.width)||n.width,f=(r==null?void 0:r.height)||n.height;switch(t){case ve.Top:return{x:i+c/2,y:s};case ve.Right:return{x:i+c,y:s+f/2};case ve.Bottom:return{x:i+c/2,y:s+f};case ve.Left:return{x:i,y:s+f/2}}}function Fv(t,n){return t?t.length===1||!n?t[0]:n&&t.find(r=>r.id===n)||null:null}const VC=(t,n,r,i,s,c)=>{const f=Zv(r,t,n),h=Zv(c,i,s);return{sourceX:f.x,sourceY:f.y,targetX:h.x,targetY:h.y}};function GC({sourcePos:t,targetPos:n,sourceWidth:r,sourceHeight:i,targetWidth:s,targetHeight:c,width:f,height:h,transform:g}){const m={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+s),y2:Math.max(t.y+i,n.y+c)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=Vs({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:f/g[2],height:h/g[2]}),p=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),v=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(p*v)>0}function Iv(t){var i,s,c,f,h;const n=((i=t==null?void 0:t[it])==null?void 0:i.handleBounds)||null,r=n&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((c=t==null?void 0:t.positionAbsolute)==null?void 0:c.y)<"u";return[{x:((f=t==null?void 0:t.positionAbsolute)==null?void 0:f.x)||0,y:((h=t==null?void 0:t.positionAbsolute)==null?void 0:h.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},n,!!r]}const QC=[{level:0,isMaxLevel:!0,edges:[]}];function ZC(t,n,r=!1){let i=-1;const s=t.reduce((f,h)=>{var y,p;const g=Cn(h.zIndex);let m=g?h.zIndex:0;if(r){const v=n.get(h.target),b=n.get(h.source),S=h.selected||(v==null?void 0:v.selected)||(b==null?void 0:b.selected),w=Math.max(((y=b==null?void 0:b[it])==null?void 0:y.z)||0,((p=v==null?void 0:v[it])==null?void 0:p.z)||0,1e3);m=(g?h.zIndex:0)+(S?w:0)}return f[m]?f[m].push(h):f[m]=[h],i=m>i?m:i,f},{}),c=Object.entries(s).map(([f,h])=>{const g=+f;return{edges:h,level:g,isMaxLevel:g===i}});return c.length===0?QC:c}function FC(t,n,r){const i=Pe(U.useCallback(s=>t?s.edges.filter(c=>{const f=n.get(c.source),h=n.get(c.target);return(f==null?void 0:f.width)&&(f==null?void 0:f.height)&&(h==null?void 0:h.width)&&(h==null?void 0:h.height)&&GC({sourcePos:f.positionAbsolute||{x:0,y:0},targetPos:h.positionAbsolute||{x:0,y:0},sourceWidth:f.width,sourceHeight:f.height,targetWidth:h.width,targetHeight:h.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,n]));return ZC(i,n,r)}const IC=({color:t="none",strokeWidth:n=1})=>te.createElement("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),KC=({color:t="none",strokeWidth:n=1})=>te.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Kv={[Qs.Arrow]:IC,[Qs.ArrowClosed]:KC};function JC(t){const n=vt();return U.useMemo(()=>{var s,c;return Object.prototype.hasOwnProperty.call(Kv,t)?Kv[t]:((c=(s=n.getState()).onError)==null||c.call(s,"009",Ua.error009(t)),null)},[t])}const PC=({id:t,type:n,color:r,width:i=12.5,height:s=12.5,markerUnits:c="strokeWidth",strokeWidth:f,orient:h="auto-start-reverse"})=>{const g=JC(n);return g?te.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:h,refX:"0",refY:"0"},te.createElement(g,{color:r,strokeWidth:f})):null},WC=({defaultColor:t,rfId:n})=>r=>{const i=[];return r.edges.reduce((s,c)=>([c.markerStart,c.markerEnd].forEach(f=>{if(f&&typeof f=="object"){const h=Yh(f,n);i.includes(h)||(s.push({id:h,color:f.color||t,...f}),i.push(h))}}),s),[]).sort((s,c)=>s.id.localeCompare(c.id))},uw=({defaultColor:t,rfId:n})=>{const r=Pe(U.useCallback(WC({defaultColor:t,rfId:n}),[t,n]),(i,s)=>!(i.length!==s.length||i.some((c,f)=>c.id!==s[f].id)));return te.createElement("defs",null,r.map(i=>te.createElement(PC,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};uw.displayName="MarkerDefinitions";var eR=U.memo(uw);const tR=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),cw=({defaultMarkerColor:t,onlyRenderVisibleElements:n,elevateEdgesOnSelect:r,rfId:i,edgeTypes:s,noPanClassName:c,onEdgeContextMenu:f,onEdgeMouseEnter:h,onEdgeMouseMove:g,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:p,onReconnect:v,onReconnectStart:b,onReconnectEnd:S,reconnectRadius:w,children:C,disableKeyboardA11y:N})=>{const{edgesFocusable:T,edgesUpdatable:O,elementsSelectable:M,width:H,height:j,connectionMode:k,nodeInternals:F,onError:X}=Pe(tR,Ct),ee=FC(n,F,r);return H?te.createElement(te.Fragment,null,ee.map(({level:W,edges:ne,isMaxLevel:ue})=>te.createElement("svg",{key:W,style:{zIndex:W},width:H,height:j,className:"react-flow__edges react-flow__container"},ue&&te.createElement(eR,{defaultColor:t,rfId:i}),te.createElement("g",null,ne.map(D=>{const[Z,R,Y]=Iv(F.get(D.source)),[J,$,A]=Iv(F.get(D.target));if(!Y||!A)return null;let L=D.type||"default";s[L]||(X==null||X("011",Ua.error011(L)),L="default");const G=s[L]||s.default,P=k===ni.Strict?$.target:($.target??[]).concat($.source??[]),re=Fv(R.source,D.sourceHandle),oe=Fv(P,D.targetHandle),fe=(re==null?void 0:re.position)||ve.Bottom,be=(oe==null?void 0:oe.position)||ve.Top,ye=!!(D.focusable||T&&typeof D.focusable>"u"),ce=D.reconnectable||D.updatable,de=typeof v<"u"&&(ce||O&&typeof ce>"u");if(!re||!oe)return X==null||X("008",Ua.error008(re,D)),null;const{sourceX:_e,sourceY:le,targetX:He,targetY:Te}=VC(Z,re,fe,J,oe,be);return te.createElement(G,{key:D.id,id:D.id,className:Ht([D.className,c]),type:L,data:D.data,selected:!!D.selected,animated:!!D.animated,hidden:!!D.hidden,label:D.label,labelStyle:D.labelStyle,labelShowBg:D.labelShowBg,labelBgStyle:D.labelBgStyle,labelBgPadding:D.labelBgPadding,labelBgBorderRadius:D.labelBgBorderRadius,style:D.style,source:D.source,target:D.target,sourceHandleId:D.sourceHandle,targetHandleId:D.targetHandle,markerEnd:D.markerEnd,markerStart:D.markerStart,sourceX:_e,sourceY:le,targetX:He,targetY:Te,sourcePosition:fe,targetPosition:be,elementsSelectable:M,onContextMenu:f,onMouseEnter:h,onMouseMove:g,onMouseLeave:m,onClick:y,onEdgeDoubleClick:p,onReconnect:v,onReconnectStart:b,onReconnectEnd:S,reconnectRadius:w,rfId:i,ariaLabel:D.ariaLabel,isFocusable:ye,isReconnectable:de,pathOptions:"pathOptions"in D?D.pathOptions:void 0,interactionWidth:D.interactionWidth,disableKeyboardA11y:N})})))),C):null};cw.displayName="EdgeRenderer";var nR=U.memo(cw);const aR=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function rR({children:t}){const n=Pe(aR);return te.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},t)}function iR(t){const n=Sm(),r=U.useRef(!1);U.useEffect(()=>{!r.current&&n.viewportInitialized&&t&&(setTimeout(()=>t(n),1),r.current=!0)},[t,n.viewportInitialized])}const lR={[ve.Left]:ve.Right,[ve.Right]:ve.Left,[ve.Top]:ve.Bottom,[ve.Bottom]:ve.Top},ow=({nodeId:t,handleType:n,style:r,type:i=_r.Bezier,CustomComponent:s,connectionStatus:c})=>{var j,k,F;const{fromNode:f,handleId:h,toX:g,toY:m,connectionMode:y}=Pe(U.useCallback(X=>({fromNode:X.nodeInternals.get(t),handleId:X.connectionHandleId,toX:(X.connectionPosition.x-X.transform[0])/X.transform[2],toY:(X.connectionPosition.y-X.transform[1])/X.transform[2],connectionMode:X.connectionMode}),[t]),Ct),p=(j=f==null?void 0:f[it])==null?void 0:j.handleBounds;let v=p==null?void 0:p[n];if(y===ni.Loose&&(v=v||(p==null?void 0:p[n==="source"?"target":"source"])),!f||!v)return null;const b=h?v.find(X=>X.id===h):v[0],S=b?b.x+b.width/2:(f.width??0)/2,w=b?b.y+b.height/2:f.height??0,C=(((k=f.positionAbsolute)==null?void 0:k.x)??0)+S,N=(((F=f.positionAbsolute)==null?void 0:F.y)??0)+w,T=b==null?void 0:b.position,O=T?lR[T]:null;if(!T||!O)return null;if(s)return te.createElement(s,{connectionLineType:i,connectionLineStyle:r,fromNode:f,fromHandle:b,fromX:C,fromY:N,toX:g,toY:m,fromPosition:T,toPosition:O,connectionStatus:c});let M="";const H={sourceX:C,sourceY:N,sourcePosition:T,targetX:g,targetY:m,targetPosition:O};return i===_r.Bezier?[M]=jb(H):i===_r.Step?[M]=$h({...H,borderRadius:0}):i===_r.SmoothStep?[M]=$h(H):i===_r.SimpleBezier?[M]=Ub(H):M=`M${C},${N} ${g},${m}`,te.createElement("path",{d:M,fill:"none",className:"react-flow__connection-path",style:r})};ow.displayName="ConnectionLine";const sR=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function uR({containerStyle:t,style:n,type:r,component:i}){const{nodeId:s,handleType:c,nodesConnectable:f,width:h,height:g,connectionStatus:m}=Pe(sR,Ct);return!(s&&c&&h&&f)?null:te.createElement("svg",{style:t,width:h,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},te.createElement("g",{className:Ht(["react-flow__connection",m])},te.createElement(ow,{nodeId:s,handleType:c,style:n,type:r,CustomComponent:i,connectionStatus:m})))}function Jv(t,n){return U.useRef(null),vt(),U.useMemo(()=>n(t),[t])}const fw=({nodeTypes:t,edgeTypes:n,onMove:r,onMoveStart:i,onMoveEnd:s,onInit:c,onNodeClick:f,onEdgeClick:h,onNodeDoubleClick:g,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:p,onNodeMouseLeave:v,onNodeContextMenu:b,onSelectionContextMenu:S,onSelectionStart:w,onSelectionEnd:C,connectionLineType:N,connectionLineStyle:T,connectionLineComponent:O,connectionLineContainerStyle:M,selectionKeyCode:H,selectionOnDrag:j,selectionMode:k,multiSelectionKeyCode:F,panActivationKeyCode:X,zoomActivationKeyCode:ee,deleteKeyCode:W,onlyRenderVisibleElements:ne,elementsSelectable:ue,selectNodesOnDrag:D,defaultViewport:Z,translateExtent:R,minZoom:Y,maxZoom:J,preventScrolling:$,defaultMarkerColor:A,zoomOnScroll:L,zoomOnPinch:G,panOnScroll:P,panOnScrollSpeed:re,panOnScrollMode:oe,zoomOnDoubleClick:fe,panOnDrag:be,onPaneClick:ye,onPaneMouseEnter:ce,onPaneMouseMove:de,onPaneMouseLeave:_e,onPaneScroll:le,onPaneContextMenu:He,onEdgeContextMenu:Te,onEdgeMouseEnter:ze,onEdgeMouseMove:Ye,onEdgeMouseLeave:Me,onReconnect:me,onReconnectStart:wt,onReconnectEnd:yn,reconnectRadius:Zn,noDragClassName:Ba,noWheelClassName:sa,noPanClassName:On,elevateEdgesOnSelect:La,disableKeyboardA11y:tn,nodeOrigin:lt,nodeExtent:Xt,rfId:ot})=>{const Er=Jv(t,HC),xt=Jv(n,XC);return iR(c),te.createElement(UC,{onPaneClick:ye,onPaneMouseEnter:ce,onPaneMouseMove:de,onPaneMouseLeave:_e,onPaneContextMenu:He,onPaneScroll:le,deleteKeyCode:W,selectionKeyCode:H,selectionOnDrag:j,selectionMode:k,onSelectionStart:w,onSelectionEnd:C,multiSelectionKeyCode:F,panActivationKeyCode:X,zoomActivationKeyCode:ee,elementsSelectable:ue,onMove:r,onMoveStart:i,onMoveEnd:s,zoomOnScroll:L,zoomOnPinch:G,zoomOnDoubleClick:fe,panOnScroll:P,panOnScrollSpeed:re,panOnScrollMode:oe,panOnDrag:be,defaultViewport:Z,translateExtent:R,minZoom:Y,maxZoom:J,onSelectionContextMenu:S,preventScrolling:$,noDragClassName:Ba,noWheelClassName:sa,noPanClassName:On,disableKeyboardA11y:tn},te.createElement(rR,null,te.createElement(nR,{edgeTypes:xt,onEdgeClick:h,onEdgeDoubleClick:m,onlyRenderVisibleElements:ne,onEdgeContextMenu:Te,onEdgeMouseEnter:ze,onEdgeMouseMove:Ye,onEdgeMouseLeave:Me,onReconnect:me,onReconnectStart:wt,onReconnectEnd:yn,reconnectRadius:Zn,defaultMarkerColor:A,noPanClassName:On,elevateEdgesOnSelect:!!La,disableKeyboardA11y:tn,rfId:ot},te.createElement(uR,{style:T,type:N,component:O,containerStyle:M})),te.createElement("div",{className:"react-flow__edgelabel-renderer"}),te.createElement(kC,{nodeTypes:Er,onNodeClick:f,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:p,onNodeMouseLeave:v,onNodeContextMenu:b,selectNodesOnDrag:D,onlyRenderVisibleElements:ne,noPanClassName:On,noDragClassName:Ba,disableKeyboardA11y:tn,nodeOrigin:lt,nodeExtent:Xt,rfId:ot})))};fw.displayName="GraphView";var cR=U.memo(fw);const Gh=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],mr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Gh,nodeExtent:Gh,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ni.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:HM,isValidConnection:void 0},oR=()=>QE((t,n)=>({...mr,setNodes:r=>{const{nodeInternals:i,nodeOrigin:s,elevateNodesOnSelect:c}=n();t({nodeInternals:oh(r,i,s,c)})},getNodes:()=>Array.from(n().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:i={}}=n();t({edges:r.map(s=>({...i,...s}))})},setDefaultNodesAndEdges:(r,i)=>{const s=typeof r<"u",c=typeof i<"u",f=s?oh(r,new Map,n().nodeOrigin,n().elevateNodesOnSelect):new Map;t({nodeInternals:f,edges:c?i:[],hasDefaultNodes:s,hasDefaultEdges:c})},updateNodeDimensions:r=>{const{onNodesChange:i,nodeInternals:s,fitViewOnInit:c,fitViewOnInitDone:f,fitViewOnInitOptions:h,domNode:g,nodeOrigin:m}=n(),y=g==null?void 0:g.querySelector(".react-flow__viewport");if(!y)return;const p=window.getComputedStyle(y),{m22:v}=new window.DOMMatrixReadOnly(p.transform),b=r.reduce((w,C)=>{const N=s.get(C.id);if(N!=null&&N.hidden)s.set(N.id,{...N,[it]:{...N[it],handleBounds:void 0}});else if(N){const T=gm(C.nodeElement);!!(T.width&&T.height&&(N.width!==T.width||N.height!==T.height||C.forceUpdate))&&(s.set(N.id,{...N,[it]:{...N[it],handleBounds:{source:Vv(".source",C.nodeElement,v,m),target:Vv(".target",C.nodeElement,v,m)}},...T}),w.push({id:N.id,type:"dimensions",dimensions:T}))}return w},[]);Wb(s,m);const S=f||c&&!f&&ew(n,{initial:!0,...h});t({nodeInternals:new Map(s),fitViewOnInitDone:S}),(b==null?void 0:b.length)>0&&(i==null||i(b))},updateNodePositions:(r,i=!0,s=!1)=>{const{triggerNodeChanges:c}=n(),f=r.map(h=>{const g={id:h.id,type:"position",dragging:s};return i&&(g.positionAbsolute=h.positionAbsolute,g.position=h.position),g});c(f)},triggerNodeChanges:r=>{const{onNodesChange:i,nodeInternals:s,hasDefaultNodes:c,nodeOrigin:f,getNodes:h,elevateNodesOnSelect:g}=n();if(r!=null&&r.length){if(c){const m=AC(r,h()),y=oh(m,s,f,g);t({nodeInternals:y})}i==null||i(r)}},addSelectedNodes:r=>{const{multiSelectionActive:i,edges:s,getNodes:c}=n();let f,h=null;i?f=r.map(g=>vr(g,!0)):(f=nl(c(),r),h=nl(s,[])),zc({changedNodes:f,changedEdges:h,get:n,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:i,edges:s,getNodes:c}=n();let f,h=null;i?f=r.map(g=>vr(g,!0)):(f=nl(s,r),h=nl(c(),[])),zc({changedNodes:h,changedEdges:f,get:n,set:t})},unselectNodesAndEdges:({nodes:r,edges:i}={})=>{const{edges:s,getNodes:c}=n(),f=r||c(),h=i||s,g=f.map(y=>(y.selected=!1,vr(y.id,!1))),m=h.map(y=>vr(y.id,!1));zc({changedNodes:g,changedEdges:m,get:n,set:t})},setMinZoom:r=>{const{d3Zoom:i,maxZoom:s}=n();i==null||i.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:i,minZoom:s}=n();i==null||i.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:r=>{var i;(i=n().d3Zoom)==null||i.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:i}=n(),c=i().filter(h=>h.selected).map(h=>vr(h.id,!1)),f=r.filter(h=>h.selected).map(h=>vr(h.id,!1));zc({changedNodes:c,changedEdges:f,get:n,set:t})},setNodeExtent:r=>{const{nodeInternals:i}=n();i.forEach(s=>{s.positionAbsolute=ym(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(i)})},panBy:r=>{const{transform:i,width:s,height:c,d3Zoom:f,d3Selection:h,translateExtent:g}=n();if(!f||!h||!r.x&&!r.y)return!1;const m=Oa.translate(i[0]+r.x,i[1]+r.y).scale(i[2]),y=[[0,0],[s,c]],p=f==null?void 0:f.constrain()(m,y,g);return f.transform(h,p),i[0]!==p.x||i[1]!==p.y||i[2]!==p.k},cancelConnection:()=>t({connectionNodeId:mr.connectionNodeId,connectionHandleId:mr.connectionHandleId,connectionHandleType:mr.connectionHandleType,connectionStatus:mr.connectionStatus,connectionStartHandle:mr.connectionStartHandle,connectionEndHandle:mr.connectionEndHandle}),reset:()=>t({...mr})}),Object.is),dw=({children:t})=>{const n=U.useRef(null);return n.current||(n.current=oR()),te.createElement(RM,{value:n.current},t)};dw.displayName="ReactFlowProvider";const hw=({children:t})=>U.useContext(xo)?te.createElement(te.Fragment,null,t):te.createElement(dw,null,t);hw.displayName="ReactFlowWrapper";const fR={input:Qb,default:Xh,output:Fb,group:xm},dR={default:co,straight:_m,step:vm,smoothstep:So,simplebezier:pm},hR=[0,0],mR=[15,15],gR={x:0,y:0,zoom:1},yR={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},mw=U.forwardRef(({nodes:t,edges:n,defaultNodes:r,defaultEdges:i,className:s,nodeTypes:c=fR,edgeTypes:f=dR,onNodeClick:h,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:p,onMoveEnd:v,onConnect:b,onConnectStart:S,onConnectEnd:w,onClickConnectStart:C,onClickConnectEnd:N,onNodeMouseEnter:T,onNodeMouseMove:O,onNodeMouseLeave:M,onNodeContextMenu:H,onNodeDoubleClick:j,onNodeDragStart:k,onNodeDrag:F,onNodeDragStop:X,onNodesDelete:ee,onEdgesDelete:W,onSelectionChange:ne,onSelectionDragStart:ue,onSelectionDrag:D,onSelectionDragStop:Z,onSelectionContextMenu:R,onSelectionStart:Y,onSelectionEnd:J,connectionMode:$=ni.Strict,connectionLineType:A=_r.Bezier,connectionLineStyle:L,connectionLineComponent:G,connectionLineContainerStyle:P,deleteKeyCode:re="Backspace",selectionKeyCode:oe="Shift",selectionOnDrag:fe=!1,selectionMode:be=Gs.Full,panActivationKeyCode:ye="Space",multiSelectionKeyCode:ce=uo()?"Meta":"Control",zoomActivationKeyCode:de=uo()?"Meta":"Control",snapToGrid:_e=!1,snapGrid:le=mR,onlyRenderVisibleElements:He=!1,selectNodesOnDrag:Te=!0,nodesDraggable:ze,nodesConnectable:Ye,nodesFocusable:Me,nodeOrigin:me=hR,edgesFocusable:wt,edgesUpdatable:yn,elementsSelectable:Zn,defaultViewport:Ba=gR,minZoom:sa=.5,maxZoom:On=2,translateExtent:La=Gh,preventScrolling:tn=!0,nodeExtent:lt,defaultMarkerColor:Xt="#b1b1b7",zoomOnScroll:ot=!0,zoomOnPinch:Er=!0,panOnScroll:xt=!1,panOnScrollSpeed:nn=.5,panOnScrollMode:pn=Kr.Free,zoomOnDoubleClick:vn=!0,panOnDrag:Vt=!0,onPaneClick:Qt,onPaneMouseEnter:Bt,onPaneMouseMove:Ar,onPaneMouseLeave:ui,onPaneScroll:ka,onPaneContextMenu:Tr,children:$a,onEdgeContextMenu:ua,onEdgeDoubleClick:uu,onEdgeMouseEnter:cu,onEdgeMouseMove:wl,onEdgeMouseLeave:xl,onEdgeUpdate:ou,onEdgeUpdateStart:ko,onEdgeUpdateEnd:Fn,onReconnect:St,onReconnectStart:Lt,onReconnectEnd:Ya,reconnectRadius:Sl=10,edgeUpdaterRadius:$o=10,onNodesChange:Yo,onEdgesChange:fu,noDragClassName:Mr="nodrag",noWheelClassName:El="nowheel",noPanClassName:ca="nopan",fitView:qa=!1,fitViewOptions:Cr,connectOnClick:Xa=!0,attributionPosition:ft,proOptions:du,defaultEdgeOptions:hu,elevateNodesOnSelect:oa=!0,elevateEdgesOnSelect:Va=!1,disableKeyboardA11y:mu=!1,autoPanOnConnect:gu=!0,autoPanOnNodeDrag:yu=!0,connectionRadius:qo=20,isValidConnection:ci,onError:oi,style:zn,id:fi,nodeDragThreshold:pu,...Ga},Al)=>{const Rr=fi||"1";return te.createElement("div",{...Ga,style:{...zn,...yR},ref:Al,className:Ht(["react-flow",s]),"data-testid":"rf__wrapper",id:fi},te.createElement(hw,null,te.createElement(cR,{onInit:m,onMove:y,onMoveStart:p,onMoveEnd:v,onNodeClick:h,onEdgeClick:g,onNodeMouseEnter:T,onNodeMouseMove:O,onNodeMouseLeave:M,onNodeContextMenu:H,onNodeDoubleClick:j,nodeTypes:c,edgeTypes:f,connectionLineType:A,connectionLineStyle:L,connectionLineComponent:G,connectionLineContainerStyle:P,selectionKeyCode:oe,selectionOnDrag:fe,selectionMode:be,deleteKeyCode:re,multiSelectionKeyCode:ce,panActivationKeyCode:ye,zoomActivationKeyCode:de,onlyRenderVisibleElements:He,selectNodesOnDrag:Te,defaultViewport:Ba,translateExtent:La,minZoom:sa,maxZoom:On,preventScrolling:tn,zoomOnScroll:ot,zoomOnPinch:Er,zoomOnDoubleClick:vn,panOnScroll:xt,panOnScrollSpeed:nn,panOnScrollMode:pn,panOnDrag:Vt,onPaneClick:Qt,onPaneMouseEnter:Bt,onPaneMouseMove:Ar,onPaneMouseLeave:ui,onPaneScroll:ka,onPaneContextMenu:Tr,onSelectionContextMenu:R,onSelectionStart:Y,onSelectionEnd:J,onEdgeContextMenu:ua,onEdgeDoubleClick:uu,onEdgeMouseEnter:cu,onEdgeMouseMove:wl,onEdgeMouseLeave:xl,onReconnect:St??ou,onReconnectStart:Lt??ko,onReconnectEnd:Ya??Fn,reconnectRadius:Sl??$o,defaultMarkerColor:Xt,noDragClassName:Mr,noWheelClassName:El,noPanClassName:ca,elevateEdgesOnSelect:Va,rfId:Rr,disableKeyboardA11y:mu,nodeOrigin:me,nodeExtent:lt}),te.createElement(iC,{nodes:t,edges:n,defaultNodes:r,defaultEdges:i,onConnect:b,onConnectStart:S,onConnectEnd:w,onClickConnectStart:C,onClickConnectEnd:N,nodesDraggable:ze,nodesConnectable:Ye,nodesFocusable:Me,edgesFocusable:wt,edgesUpdatable:yn,elementsSelectable:Zn,elevateNodesOnSelect:oa,minZoom:sa,maxZoom:On,nodeExtent:lt,onNodesChange:Yo,onEdgesChange:fu,snapToGrid:_e,snapGrid:le,connectionMode:$,translateExtent:La,connectOnClick:Xa,defaultEdgeOptions:hu,fitView:qa,fitViewOptions:Cr,onNodesDelete:ee,onEdgesDelete:W,onNodeDragStart:k,onNodeDrag:F,onNodeDragStop:X,onSelectionDrag:D,onSelectionDragStart:ue,onSelectionDragStop:Z,noPanClassName:ca,nodeOrigin:me,rfId:Rr,autoPanOnConnect:gu,autoPanOnNodeDrag:yu,onError:oi,connectionRadius:qo,isValidConnection:ci,nodeDragThreshold:pu}),te.createElement(aC,{onSelectionChange:ne}),$a,te.createElement(DM,{proOptions:du,position:ft}),te.createElement(oC,{rfId:Rr,disableKeyboardA11y:mu})))});mw.displayName="ReactFlow";const gw=({id:t,x:n,y:r,width:i,height:s,style:c,color:f,strokeColor:h,strokeWidth:g,className:m,borderRadius:y,shapeRendering:p,onClick:v,selected:b})=>{const{background:S,backgroundColor:w}=c||{},C=f||S||w;return te.createElement("rect",{className:Ht(["react-flow__minimap-node",{selected:b},m]),x:n,y:r,rx:y,ry:y,width:i,height:s,fill:C,stroke:h,strokeWidth:g,shapeRendering:p,onClick:v?N=>v(N,t):void 0})};gw.displayName="MiniMapNode";var pR=U.memo(gw);const vR=t=>t.nodeOrigin,_R=t=>t.getNodes().filter(n=>!n.hidden&&n.width&&n.height),mh=t=>t instanceof Function?t:()=>t;function bR({nodeStrokeColor:t="transparent",nodeColor:n="#e2e2e2",nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:c=pR,onClick:f}){const h=Pe(_R,Ct),g=Pe(vR),m=mh(n),y=mh(t),p=mh(r),v=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return te.createElement(te.Fragment,null,h.map(b=>{const{x:S,y:w}=Wr(b,g).positionAbsolute;return te.createElement(c,{key:b.id,x:S,y:w,width:b.width,height:b.height,style:b.style,selected:b.selected,className:p(b),color:m(b),borderRadius:i,strokeColor:y(b),strokeWidth:s,shapeRendering:v,onClick:f,id:b.id})}))}var wR=U.memo(bR);const xR=200,SR=150,ER=t=>{const n=t.getNodes(),r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:n.length>0?UM(Eo(n,t.nodeOrigin),r):r,rfId:t.rfId}},AR="react-flow__minimap-desc";function yw({style:t,className:n,nodeStrokeColor:r="transparent",nodeColor:i="#e2e2e2",nodeClassName:s="",nodeBorderRadius:c=5,nodeStrokeWidth:f=2,nodeComponent:h,maskColor:g="rgb(240, 240, 240, 0.6)",maskStrokeColor:m="none",maskStrokeWidth:y=1,position:p="bottom-right",onClick:v,onNodeClick:b,pannable:S=!1,zoomable:w=!1,ariaLabel:C="React Flow mini map",inversePan:N=!1,zoomStep:T=10,offsetScale:O=5}){const M=vt(),H=U.useRef(null),{boundingRect:j,viewBB:k,rfId:F}=Pe(ER,Ct),X=(t==null?void 0:t.width)??xR,ee=(t==null?void 0:t.height)??SR,W=j.width/X,ne=j.height/ee,ue=Math.max(W,ne),D=ue*X,Z=ue*ee,R=O*ue,Y=j.x-(D-j.width)/2-R,J=j.y-(Z-j.height)/2-R,$=D+R*2,A=Z+R*2,L=`${AR}-${F}`,G=U.useRef(0);G.current=ue,U.useEffect(()=>{if(H.current){const oe=Pt(H.current),fe=ce=>{const{transform:de,d3Selection:_e,d3Zoom:le}=M.getState();if(ce.sourceEvent.type!=="wheel"||!_e||!le)return;const He=-ce.sourceEvent.deltaY*(ce.sourceEvent.deltaMode===1?.05:ce.sourceEvent.deltaMode?1:.002)*T,Te=de[2]*Math.pow(2,He);le.scaleTo(_e,Te)},be=ce=>{const{transform:de,d3Selection:_e,d3Zoom:le,translateExtent:He,width:Te,height:ze}=M.getState();if(ce.sourceEvent.type!=="mousemove"||!_e||!le)return;const Ye=G.current*Math.max(1,de[2])*(N?-1:1),Me={x:de[0]-ce.sourceEvent.movementX*Ye,y:de[1]-ce.sourceEvent.movementY*Ye},me=[[0,0],[Te,ze]],wt=Oa.translate(Me.x,Me.y).scale(de[2]),yn=le.constrain()(wt,me,He);le.transform(_e,yn)},ye=Eb().on("zoom",S?be:null).on("zoom.wheel",w?fe:null);return oe.call(ye),()=>{oe.on("zoom",null)}}},[S,w,N,T]);const P=v?oe=>{const fe=Yn(oe);v(oe,{x:fe[0],y:fe[1]})}:void 0,re=b?(oe,fe)=>{const be=M.getState().nodeInternals.get(fe);b(oe,be)}:void 0;return te.createElement(mm,{position:p,style:t,className:Ht(["react-flow__minimap",n]),"data-testid":"rf__minimap"},te.createElement("svg",{width:X,height:ee,viewBox:`${Y} ${J} ${$} ${A}`,role:"img","aria-labelledby":L,ref:H,onClick:P},C&&te.createElement("title",{id:L},C),te.createElement(wR,{onClick:re,nodeColor:i,nodeStrokeColor:r,nodeBorderRadius:c,nodeClassName:s,nodeStrokeWidth:f,nodeComponent:h}),te.createElement("path",{className:"react-flow__minimap-mask",d:`M${Y-R},${J-R}h${$+R*2}v${A+R*2}h${-$-R*2}z
        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fill:g,fillRule:"evenodd",stroke:m,strokeWidth:y,pointerEvents:"none"})))}yw.displayName="MiniMap";var TR=U.memo(yw);function MR(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},te.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function CR(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},te.createElement("path",{d:"M0 0h32v4.2H0z"}))}function RR(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},te.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function NR(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},te.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function DR(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},te.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Ds=({children:t,className:n,...r})=>te.createElement("button",{type:"button",className:Ht(["react-flow__controls-button",n]),...r},t);Ds.displayName="ControlButton";const OR=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),pw=({style:t,showZoom:n=!0,showFitView:r=!0,showInteractive:i=!0,fitViewOptions:s,onZoomIn:c,onZoomOut:f,onFitView:h,onInteractiveChange:g,className:m,children:y,position:p="bottom-left"})=>{const v=vt(),[b,S]=U.useState(!1),{isInteractive:w,minZoomReached:C,maxZoomReached:N}=Pe(OR,Ct),{zoomIn:T,zoomOut:O,fitView:M}=Sm();if(U.useEffect(()=>{S(!0)},[]),!b)return null;const H=()=>{T(),c==null||c()},j=()=>{O(),f==null||f()},k=()=>{M(s),h==null||h()},F=()=>{v.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),g==null||g(!w)};return te.createElement(mm,{className:Ht(["react-flow__controls",m]),position:p,style:t,"data-testid":"rf__controls"},n&&te.createElement(te.Fragment,null,te.createElement(Ds,{onClick:H,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:N},te.createElement(MR,null)),te.createElement(Ds,{onClick:j,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:C},te.createElement(CR,null))),r&&te.createElement(Ds,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},te.createElement(RR,null)),i&&te.createElement(Ds,{className:"react-flow__controls-interactive",onClick:F,title:"toggle interactivity","aria-label":"toggle interactivity"},w?te.createElement(DR,null):te.createElement(NR,null)),y)};pw.displayName="Controls";var zR=U.memo(pw),Gn;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Gn||(Gn={}));function UR({color:t,dimensions:n,lineWidth:r}){return te.createElement("path",{stroke:t,strokeWidth:r,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function jR({color:t,radius:n}){return te.createElement("circle",{cx:n,cy:n,r:n,fill:t})}const HR={[Gn.Dots]:"#91919a",[Gn.Lines]:"#eee",[Gn.Cross]:"#e2e2e2"},BR={[Gn.Dots]:1,[Gn.Lines]:1,[Gn.Cross]:6},LR=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function vw({id:t,variant:n=Gn.Dots,gap:r=20,size:i,lineWidth:s=1,offset:c=2,color:f,style:h,className:g}){const m=U.useRef(null),{transform:y,patternId:p}=Pe(LR,Ct),v=f||HR[n],b=i||BR[n],S=n===Gn.Dots,w=n===Gn.Cross,C=Array.isArray(r)?r:[r,r],N=[C[0]*y[2]||1,C[1]*y[2]||1],T=b*y[2],O=w?[T,T]:N,M=S?[T/c,T/c]:[O[0]/c,O[1]/c];return te.createElement("svg",{className:Ht(["react-flow__background",g]),style:{...h,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},te.createElement("pattern",{id:p+t,x:y[0]%N[0],y:y[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},S?te.createElement(jR,{color:v,radius:T/c}):te.createElement(UR,{dimensions:O,color:v,lineWidth:s})),te.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+t})`}))}vw.displayName="Background";var kR=U.memo(vw);const $R="_characterNode_1d4td_1",YR="_highlighted_1d4td_29",Pv={characterNode:$R,highlighted:YR};function qR({data:t}){return E.jsxs("div",{className:`${Pv.characterNode} ${t.highlighted?Pv.highlighted:""}`.trim(),children:[t.label,E.jsx(gl,{type:"target",position:ve.Left}),E.jsx(gl,{type:"source",position:ve.Right})]})}const XR={character:qR};function VR(){const{query:t,setQuery:n}=ct(),r=t.realmId,i=t.id,[s,c]=U.useState([]);U.useEffect(()=>{c(r?qt.readAll(r):[])},[r]);const{nodes:f,edges:h}=U.useMemo(()=>{const y=[],p=[],b={x:250,y:250},S=2*Math.PI/(s.length||1);return s.forEach((w,C)=>{const N=C*S,T=b.x+200*Math.cos(N),O=b.y+200*Math.sin(N);y.push({id:w.id,type:"character",position:{x:T,y:O},data:{label:w.name,character:w,highlighted:i===w.id}}),Object.entries(w.relations||{}).forEach(([M,H])=>{s.find(j=>j.id===H)&&p.push({id:`${w.id}-${H}-${M}`,source:w.id,target:H,label:M,style:{stroke:i===H?"#ff6b6b":"#000",strokeWidth:2},labelStyle:{fontSize:"10px",fontWeight:"bold"},markerEnd:{type:Qs.Arrow,color:i===H?"#ff6b6b":"#000"}})})}),{nodes:y,edges:p}},[s,i]),g=(y,p)=>{n({id:p.id})},m=(y,p)=>{n({id:p.target})};return E.jsx("div",{style:{width:"500px",height:"500px",border:"1px solid #ccc"},children:E.jsxs(mw,{nodes:f,edges:h,nodeTypes:XR,onNodeClick:g,onEdgeClick:m,fitView:!0,proOptions:{hideAttribution:!0},children:[E.jsx(kR,{}),E.jsx(zR,{}),E.jsx(TR,{})]})})}function GR(){var g;const{query:t,setQuery:n}=ct(),r=t.realmId,[i,s]=U.useState([]),[c]=U.useState(""),f=()=>{const m=prompt("Enter a name for the new character");if(!m)return;const y=qt.create({realmId:r,name:m,description:"new character",birth:new Date,death:new Date,properties:{},relations:{}});h(),n({id:y.id})},h=()=>{s(qt.readAll(r).filter(m=>m.realmId===r))};return U.useEffect(()=>{r&&h()},[r]),E.jsx(E.Fragment,{children:c?E.jsx(E.Fragment,{children:(g=i.find(m=>m.id===c))==null?void 0:g.name}):E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:f,children:Ie.PLUS}),E.jsx(VR,{})]})})}var Ve=(t=>(t.Character="character",t.Concept="concept",t.Item="item",t.Location="location",t.Event="event",t.Input="input",t.Talk="talk",t.Data="data",t.Person="person",t.Timeline="timeline",t.Explore="explore",t))(Ve||{});function QR(){const{gotoState:t,query:n,setQuery:r}=ct(),[i,s]=U.useState({id:"",created:new Date,updated:new Date,realmId:"",name:"",description:""}),c=n.id,f=()=>{t(Ve.Concept),r({id:""})},h=y=>{const p=Dn.read(y),v={id:"",created:new Date,updated:new Date,realmId:"",name:"",description:"",...p};s(v)},g=y=>{prompt(`Type 'yes' to remove the ${i==null?void 0:i.name} concept?`)==="yes"&&Dn.remove(y),f()},m=y=>{y.preventDefault(),Dn.update(i==null?void 0:i.id,i),f()};return U.useEffect(()=>{c?h(c):s({id:"",created:new Date,updated:new Date,realmId:"",name:"",description:""})},[c]),E.jsx(E.Fragment,{children:E.jsxs("form",{onSubmit:m,children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",required:!0,name:"name",value:(i==null?void 0:i.name)||"",onChange:y=>s({...i,name:y.target.value})}),E.jsx("label",{children:"Description"}),E.jsx("textarea",{autoFocus:!0,name:"description",required:!0,value:(i==null?void 0:i.description)||"",onChange:y=>s({...i,description:y.target.value})}),E.jsx("span",{}),E.jsxs("span",{children:[E.jsx("button",{type:"button",onClick:f,children:Ie.DARROW_LEFT}),E.jsx("button",{type:"submit",children:Ie.FLOPPY_DISK}),E.jsx("button",{onClick:()=>g(i==null?void 0:i.id),children:Ie.RED_X})]})]})})}function _w(t,n){if(!n)return!0;t=t.toLowerCase(),n=n.toLowerCase();let r=0;for(const i of n){if(r=t.indexOf(i,r),r===-1)return!1;r++}return!0}function ZR(){var v;const{query:t,gotoState:n,setQuery:r}=ct(),[i,s]=U.useState([]),[c,f]=U.useState(""),[h,g]=U.useState(""),m=t.realmId,y=()=>{const b=prompt("Enter a name for the new concept");if(!b)return;const S=Dn.create({realmId:m,name:b,description:"new concept"});p(),f(S.id)},p=()=>{const b=Dn.readAll(m).filter(S=>S.realmId===m).sort((S,w)=>S.name.localeCompare(w.name));s(b)};return U.useEffect(()=>{m&&p()},[m]),E.jsx(E.Fragment,{children:c?E.jsx(E.Fragment,{children:(v=i.find(b=>b.id===c))==null?void 0:v.id}):E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:y,children:Ie.PLUS}),E.jsx("input",{type:"text",placeholder:"Search",value:h,onChange:b=>g(b.target.value)}),E.jsx("ul",{children:i&&i.filter(b=>_w(b.name,h)).map(b=>E.jsx("li",{children:E.jsx("button",{onClick:()=>{n(Ve.Concept),r({id:b.id})},children:b.name})},b.id))})]})})}function bw(){var S;const{query:t,setQuery:n}=ct(),r=t.id,[i,s]=U.useState({}),[c,f]=U.useState([]),[h,g]=U.useState([]),[m,y]=U.useState([]),p=w=>{const C=ra.read(w);s({name:"",description:"",characters:[],items:[],locations:[],...C,start:C!=null&&C.start?new Date(C.start).toISOString().slice(0,16):"",end:C!=null&&C.end?new Date(C.end).toISOString().slice(0,16):""}),C!=null&&C.realmId&&(f(qt.readAll(C.realmId)),g(mn.readAll(C.realmId)),y(Wt.readAll(C.realmId)))},v=w=>{prompt(`Type 'yes' to remove the ${i==null?void 0:i.name} event?`)==="yes"&&ra.remove(w),n({id:""})},b=w=>{w.preventDefault();const C={...i,start:i!=null&&i.start?new Date(i.start):void 0,end:i!=null&&i.end?new Date(i.end):void 0};ra.update(i==null?void 0:i.id,C),n({id:""})};return U.useEffect(()=>{r?p(r):(s({}),f([]),g([]),y([]))},[r]),E.jsx(E.Fragment,{children:E.jsxs("form",{onSubmit:b,children:[E.jsx("label",{children:" Name "}),E.jsx("input",{type:"text",required:!0,name:"name",value:(i==null?void 0:i.name)||"",onChange:w=>s({...i,name:w.target.value})}),E.jsx("label",{children:" Description "}),E.jsx("textarea",{name:"description",required:!0,value:(i==null?void 0:i.description)||"",onChange:w=>s({...i,description:w.target.value})}),E.jsx("label",{children:" Start "}),E.jsx("input",{type:"datetime-local",name:"start",value:(i==null?void 0:i.start)||"",onChange:w=>s({...i,start:w.target.value})}),E.jsx("label",{children:" End "}),E.jsx("input",{type:"datetime-local",name:"end",value:(i==null?void 0:i.end)||"",onChange:w=>s({...i,end:w.target.value})}),E.jsx("label",{children:" Characters "}),E.jsx("select",{multiple:!0,value:(i==null?void 0:i.characters)||[],onChange:w=>s({...i,characters:Array.from(w.target.selectedOptions,C=>C.value)}),children:c.map(w=>E.jsx("option",{value:w.id,children:w.name},w.id))}),E.jsx("label",{children:" Items "}),E.jsx("select",{multiple:!0,value:(i==null?void 0:i.items)||[],onChange:w=>s({...i,items:Array.from(w.target.selectedOptions,C=>C.value)}),children:h.map(w=>E.jsx("option",{value:w.id,children:w.name},w.id))}),E.jsx("label",{children:" Location "}),E.jsxs("select",{value:((S=i==null?void 0:i.locations)==null?void 0:S[0])||"",onChange:w=>s({...i,locations:w.target.value?[w.target.value]:[]}),children:[E.jsx("option",{value:"",children:"None"}),m.map(w=>E.jsx("option",{value:w.id,children:w.name},w.id))]}),E.jsx("span",{}),E.jsxs("span",{children:[E.jsx("button",{type:"button",onClick:()=>n({id:""}),children:Ie.DARROW_LEFT}),E.jsx("button",{type:"submit",children:Ie.FLOPPY_DISK}),E.jsx("button",{onClick:()=>v(i==null?void 0:i.id),type:"button",children:Ie.RED_X})]})]})})}function Fc(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function FR(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Am(t){let n,r,i;t.length!==2?(n=Fc,r=(h,g)=>Fc(t(h),g),i=(h,g)=>t(h)-g):(n=t===Fc||t===FR?t:IR,r=t,i=t);function s(h,g,m=0,y=h.length){if(m<y){if(n(g,g)!==0)return y;do{const p=m+y>>>1;r(h[p],g)<0?m=p+1:y=p}while(m<y)}return m}function c(h,g,m=0,y=h.length){if(m<y){if(n(g,g)!==0)return y;do{const p=m+y>>>1;r(h[p],g)<=0?m=p+1:y=p}while(m<y)}return m}function f(h,g,m=0,y=h.length){const p=s(h,g,m,y-1);return p>m&&i(h[p-1],g)>-i(h[p],g)?p-1:p}return{left:s,center:f,right:c}}function IR(){return 0}function KR(t){return t===null?NaN:+t}const JR=Am(Fc),PR=JR.right;Am(KR).center;function ww(t,n){let r,i;for(const s of t)s!=null&&(r===void 0?s>=s&&(r=i=s):(r>s&&(r=s),i<s&&(i=s)));return[r,i]}class Wv extends Map{constructor(n,r=t3){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[i,s]of n)this.set(i,s)}get(n){return super.get(e_(this,n))}has(n){return super.has(e_(this,n))}set(n,r){return super.set(WR(this,n),r)}delete(n){return super.delete(e3(this,n))}}function e_({_intern:t,_key:n},r){const i=n(r);return t.has(i)?t.get(i):r}function WR({_intern:t,_key:n},r){const i=n(r);return t.has(i)?t.get(i):(t.set(i,r),r)}function e3({_intern:t,_key:n},r){const i=n(r);return t.has(i)&&(r=t.get(i),t.delete(i)),r}function t3(t){return t!==null&&typeof t=="object"?t.valueOf():t}const n3=Math.sqrt(50),a3=Math.sqrt(10),r3=Math.sqrt(2);function xw(t,n,r){const i=(n-t)/Math.max(0,r),s=Math.floor(Math.log10(i)),c=i/Math.pow(10,s),f=c>=n3?10:c>=a3?5:c>=r3?2:1;let h,g,m;return s<0?(m=Math.pow(10,-s)/f,h=Math.round(t*m),g=Math.round(n*m),h/m<t&&++h,g/m>n&&--g,m=-m):(m=Math.pow(10,s)*f,h=Math.round(t/m),g=Math.round(n/m),h*m<t&&++h,g*m>n&&--g),g<h&&.5<=r&&r<2?xw(t,n,r*2):[h,g,m]}function t_(t,n,r){return n=+n,t=+t,r=+r,xw(t,n,r)[2]}function n_(t,n,r){n=+n,t=+t,r=+r;const i=n<t,s=i?t_(n,t,r):t_(t,n,r);return(i?-1:1)*(s<0?1/-s:s)}function i3(t,n,r){t=+t,n=+n,r=(s=arguments.length)<2?(n=t,t=0,1):s<3?1:+r;for(var i=-1,s=Math.max(0,Math.ceil((n-t)/r))|0,c=new Array(s);++i<s;)c[i]=t+i*r;return c}function l3(t){return t}var s3=3,a_=1e-6;function u3(t){return"translate("+t+",0)"}function c3(t){return n=>+t(n)}function o3(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),r=>+t(r)+n}function f3(){return!this.__axis}function d3(t,n){var r=[],i=null,s=null,c=6,f=6,h=3,g=typeof window<"u"&&window.devicePixelRatio>1?0:.5,m=1,y="y",p=u3;function v(b){var S=i??(n.ticks?n.ticks.apply(n,r):n.domain()),w=s??(n.tickFormat?n.tickFormat.apply(n,r):l3),C=Math.max(c,0)+h,N=n.range(),T=+N[0]+g,O=+N[N.length-1]+g,M=(n.bandwidth?o3:c3)(n.copy(),g),H=b.selection?b.selection():b,j=H.selectAll(".domain").data([null]),k=H.selectAll(".tick").data(S,n).order(),F=k.exit(),X=k.enter().append("g").attr("class","tick"),ee=k.select("line"),W=k.select("text");j=j.merge(j.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(X),ee=ee.merge(X.append("line").attr("stroke","currentColor").attr(y+"2",m*c)),W=W.merge(X.append("text").attr("fill","currentColor").attr(y,m*C).attr("dy","0.71em")),b!==H&&(j=j.transition(b),k=k.transition(b),ee=ee.transition(b),W=W.transition(b),F=F.transition(b).attr("opacity",a_).attr("transform",function(ne){return isFinite(ne=M(ne))?p(ne+g):this.getAttribute("transform")}),X.attr("opacity",a_).attr("transform",function(ne){var ue=this.parentNode.__axis;return p((ue&&isFinite(ue=ue(ne))?ue:M(ne))+g)})),F.remove(),j.attr("d",f?"M"+T+","+m*f+"V"+g+"H"+O+"V"+m*f:"M"+T+","+g+"H"+O),k.attr("opacity",1).attr("transform",function(ne){return p(M(ne)+g)}),ee.attr(y+"2",m*c),W.attr(y,m*C).text(w),H.filter(f3).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),H.each(function(){this.__axis=M})}return v.scale=function(b){return arguments.length?(n=b,v):n},v.ticks=function(){return r=Array.from(arguments),v},v.tickArguments=function(b){return arguments.length?(r=b==null?[]:Array.from(b),v):r.slice()},v.tickValues=function(b){return arguments.length?(i=b==null?null:Array.from(b),v):i&&i.slice()},v.tickFormat=function(b){return arguments.length?(s=b,v):s},v.tickSize=function(b){return arguments.length?(c=f=+b,v):c},v.tickSizeInner=function(b){return arguments.length?(c=+b,v):c},v.tickSizeOuter=function(b){return arguments.length?(f=+b,v):f},v.tickPadding=function(b){return arguments.length?(h=+b,v):h},v.offset=function(b){return arguments.length?(g=+b,v):g},v}function Sw(t){return d3(s3,t)}function Tm(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}const r_=Symbol("implicit");function Ew(){var t=new Wv,n=[],r=[],i=r_;function s(c){let f=t.get(c);if(f===void 0){if(i!==r_)return i;t.set(c,f=n.push(c)-1)}return r[f%r.length]}return s.domain=function(c){if(!arguments.length)return n.slice();n=[],t=new Wv;for(const f of c)t.has(f)||t.set(f,n.push(f)-1);return s},s.range=function(c){return arguments.length?(r=Array.from(c),s):r.slice()},s.unknown=function(c){return arguments.length?(i=c,s):i},s.copy=function(){return Ew(n,r).unknown(i)},Tm.apply(s,arguments),s}function Mm(){var t=Ew().unknown(void 0),n=t.domain,r=t.range,i=0,s=1,c,f,h=!1,g=0,m=0,y=.5;delete t.unknown;function p(){var v=n().length,b=s<i,S=b?s:i,w=b?i:s;c=(w-S)/Math.max(1,v-g+m*2),h&&(c=Math.floor(c)),S+=(w-S-c*(v-g))*y,f=c*(1-g),h&&(S=Math.round(S),f=Math.round(f));var C=i3(v).map(function(N){return S+c*N});return r(b?C.reverse():C)}return t.domain=function(v){return arguments.length?(n(v),p()):n()},t.range=function(v){return arguments.length?([i,s]=v,i=+i,s=+s,p()):[i,s]},t.rangeRound=function(v){return[i,s]=v,i=+i,s=+s,h=!0,p()},t.bandwidth=function(){return f},t.step=function(){return c},t.round=function(v){return arguments.length?(h=!!v,p()):h},t.padding=function(v){return arguments.length?(g=Math.min(1,m=+v),p()):g},t.paddingInner=function(v){return arguments.length?(g=Math.min(1,v),p()):g},t.paddingOuter=function(v){return arguments.length?(m=+v,p()):m},t.align=function(v){return arguments.length?(y=Math.max(0,Math.min(1,v)),p()):y},t.copy=function(){return Mm(n(),[i,s]).round(h).paddingInner(g).paddingOuter(m).align(y)},Tm.apply(p(),arguments)}function h3(t){return function(){return t}}function m3(t){return+t}var i_=[0,1];function al(t){return t}function Qh(t,n){return(n-=t=+t)?function(r){return(r-t)/n}:h3(isNaN(n)?NaN:.5)}function g3(t,n){var r;return t>n&&(r=t,t=n,n=r),function(i){return Math.max(t,Math.min(n,i))}}function y3(t,n,r){var i=t[0],s=t[1],c=n[0],f=n[1];return s<i?(i=Qh(s,i),c=r(f,c)):(i=Qh(i,s),c=r(c,f)),function(h){return c(i(h))}}function p3(t,n,r){var i=Math.min(t.length,n.length)-1,s=new Array(i),c=new Array(i),f=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++f<i;)s[f]=Qh(t[f],t[f+1]),c[f]=r(n[f],n[f+1]);return function(h){var g=PR(t,h,1,i)-1;return c[g](s[g](h))}}function v3(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function _3(){var t=i_,n=i_,r=om,i,s,c,f=al,h,g,m;function y(){var v=Math.min(t.length,n.length);return f!==al&&(f=g3(t[0],t[v-1])),h=v>2?p3:y3,g=m=null,p}function p(v){return v==null||isNaN(v=+v)?c:(g||(g=h(t.map(i),n,r)))(i(f(v)))}return p.invert=function(v){return f(s((m||(m=h(n,t.map(i),qn)))(v)))},p.domain=function(v){return arguments.length?(t=Array.from(v,m3),y()):t.slice()},p.range=function(v){return arguments.length?(n=Array.from(v),y()):n.slice()},p.rangeRound=function(v){return n=Array.from(v),r=aT,y()},p.clamp=function(v){return arguments.length?(f=v?!0:al,y()):f!==al},p.interpolate=function(v){return arguments.length?(r=v,y()):r},p.unknown=function(v){return arguments.length?(c=v,p):c},function(v,b){return i=v,s=b,y()}}function b3(){return _3()(al,al)}function w3(t,n){t=t.slice();var r=0,i=t.length-1,s=t[r],c=t[i],f;return c<s&&(f=r,r=i,i=f,f=s,s=c,c=f),t[r]=n.floor(s),t[i]=n.ceil(c),t}const gh=new Date,yh=new Date;function _t(t,n,r,i){function s(c){return t(c=arguments.length===0?new Date:new Date(+c)),c}return s.floor=c=>(t(c=new Date(+c)),c),s.ceil=c=>(t(c=new Date(c-1)),n(c,1),t(c),c),s.round=c=>{const f=s(c),h=s.ceil(c);return c-f<h-c?f:h},s.offset=(c,f)=>(n(c=new Date(+c),f==null?1:Math.floor(f)),c),s.range=(c,f,h)=>{const g=[];if(c=s.ceil(c),h=h==null?1:Math.floor(h),!(c<f)||!(h>0))return g;let m;do g.push(m=new Date(+c)),n(c,h),t(c);while(m<c&&c<f);return g},s.filter=c=>_t(f=>{if(f>=f)for(;t(f),!c(f);)f.setTime(f-1)},(f,h)=>{if(f>=f)if(h<0)for(;++h<=0;)for(;n(f,-1),!c(f););else for(;--h>=0;)for(;n(f,1),!c(f););}),r&&(s.count=(c,f)=>(gh.setTime(+c),yh.setTime(+f),t(gh),t(yh),Math.floor(r(gh,yh))),s.every=c=>(c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?s.filter(i?f=>i(f)%c===0:f=>s.count(0,f)%c===0):s)),s}const oo=_t(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);oo.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_t(n=>{n.setTime(Math.floor(n/t)*t)},(n,r)=>{n.setTime(+n+r*t)},(n,r)=>(r-n)/t):oo);oo.range;const Ra=1e3,Rn=Ra*60,Na=Rn*60,ja=Na*24,Cm=ja*7,l_=ja*30,ph=ja*365,rl=_t(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*Ra)},(t,n)=>(n-t)/Ra,t=>t.getUTCSeconds());rl.range;const Rm=_t(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ra)},(t,n)=>{t.setTime(+t+n*Rn)},(t,n)=>(n-t)/Rn,t=>t.getMinutes());Rm.range;const x3=_t(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*Rn)},(t,n)=>(n-t)/Rn,t=>t.getUTCMinutes());x3.range;const Nm=_t(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ra-t.getMinutes()*Rn)},(t,n)=>{t.setTime(+t+n*Na)},(t,n)=>(n-t)/Na,t=>t.getHours());Nm.range;const S3=_t(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*Na)},(t,n)=>(n-t)/Na,t=>t.getUTCHours());S3.range;const eu=_t(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Rn)/ja,t=>t.getDate()-1);eu.range;const Dm=_t(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/ja,t=>t.getUTCDate()-1);Dm.range;const E3=_t(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/ja,t=>Math.floor(t/ja));E3.range;function li(t){return _t(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,r)=>{n.setDate(n.getDate()+r*7)},(n,r)=>(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*Rn)/Cm)}const Ao=li(0),fo=li(1),A3=li(2),T3=li(3),yl=li(4),M3=li(5),C3=li(6);Ao.range;fo.range;A3.range;T3.range;yl.range;M3.range;C3.range;function si(t){return _t(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCDate(n.getUTCDate()+r*7)},(n,r)=>(r-n)/Cm)}const Aw=si(0),ho=si(1),R3=si(2),N3=si(3),pl=si(4),D3=si(5),O3=si(6);Aw.range;ho.range;R3.range;N3.range;pl.range;D3.range;O3.range;const Om=_t(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Om.range;const z3=_t(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());z3.range;const Ha=_t(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ha.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_t(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,r)=>{n.setFullYear(n.getFullYear()+r*t)});Ha.range;const ai=_t(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ai.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_t(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCFullYear(n.getUTCFullYear()+r*t)});ai.range;function U3(t,n,r,i,s,c){const f=[[rl,1,Ra],[rl,5,5*Ra],[rl,15,15*Ra],[rl,30,30*Ra],[c,1,Rn],[c,5,5*Rn],[c,15,15*Rn],[c,30,30*Rn],[s,1,Na],[s,3,3*Na],[s,6,6*Na],[s,12,12*Na],[i,1,ja],[i,2,2*ja],[r,1,Cm],[n,1,l_],[n,3,3*l_],[t,1,ph]];function h(m,y,p){const v=y<m;v&&([m,y]=[y,m]);const b=p&&typeof p.range=="function"?p:g(m,y,p),S=b?b.range(m,+y+1):[];return v?S.reverse():S}function g(m,y,p){const v=Math.abs(y-m)/p,b=Am(([,,C])=>C).right(f,v);if(b===f.length)return t.every(n_(m/ph,y/ph,p));if(b===0)return oo.every(Math.max(n_(m,y,p),1));const[S,w]=f[v/f[b-1][2]<f[b][2]/v?b-1:b];return S.every(w)}return[h,g]}const[j3,H3]=U3(Ha,Om,Ao,eu,Nm,Rm);function vh(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _h(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function As(t,n,r){return{y:t,m:n,d:r,H:0,M:0,S:0,L:0}}function B3(t){var n=t.dateTime,r=t.date,i=t.time,s=t.periods,c=t.days,f=t.shortDays,h=t.months,g=t.shortMonths,m=Ts(s),y=Ms(s),p=Ts(c),v=Ms(c),b=Ts(f),S=Ms(f),w=Ts(h),C=Ms(h),N=Ts(g),T=Ms(g),O={a:Y,A:J,b:$,B:A,c:null,d:d_,e:d_,f:lN,g:yN,G:vN,H:aN,I:rN,j:iN,L:Tw,m:sN,M:uN,p:L,q:G,Q:g_,s:y_,S:cN,u:oN,U:fN,V:dN,w:hN,W:mN,x:null,X:null,y:gN,Y:pN,Z:_N,"%":m_},M={a:P,A:re,b:oe,B:fe,c:null,d:h_,e:h_,f:SN,g:zN,G:jN,H:bN,I:wN,j:xN,L:Cw,m:EN,M:AN,p:be,q:ye,Q:g_,s:y_,S:TN,u:MN,U:CN,V:RN,w:NN,W:DN,x:null,X:null,y:ON,Y:UN,Z:HN,"%":m_},H={a:ee,A:W,b:ne,B:ue,c:D,d:o_,e:o_,f:W3,g:c_,G:u_,H:f_,I:f_,j:I3,L:P3,m:F3,M:K3,p:X,q:Z3,Q:tN,s:nN,S:J3,u:q3,U:X3,V:V3,w:Y3,W:G3,x:Z,X:R,y:c_,Y:u_,Z:Q3,"%":eN};O.x=j(r,O),O.X=j(i,O),O.c=j(n,O),M.x=j(r,M),M.X=j(i,M),M.c=j(n,M);function j(ce,de){return function(_e){var le=[],He=-1,Te=0,ze=ce.length,Ye,Me,me;for(_e instanceof Date||(_e=new Date(+_e));++He<ze;)ce.charCodeAt(He)===37&&(le.push(ce.slice(Te,He)),(Me=s_[Ye=ce.charAt(++He)])!=null?Ye=ce.charAt(++He):Me=Ye==="e"?" ":"0",(me=de[Ye])&&(Ye=me(_e,Me)),le.push(Ye),Te=He+1);return le.push(ce.slice(Te,He)),le.join("")}}function k(ce,de){return function(_e){var le=As(1900,void 0,1),He=F(le,ce,_e+="",0),Te,ze;if(He!=_e.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(de&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Te=_h(As(le.y,0,1)),ze=Te.getUTCDay(),Te=ze>4||ze===0?ho.ceil(Te):ho(Te),Te=Dm.offset(Te,(le.V-1)*7),le.y=Te.getUTCFullYear(),le.m=Te.getUTCMonth(),le.d=Te.getUTCDate()+(le.w+6)%7):(Te=vh(As(le.y,0,1)),ze=Te.getDay(),Te=ze>4||ze===0?fo.ceil(Te):fo(Te),Te=eu.offset(Te,(le.V-1)*7),le.y=Te.getFullYear(),le.m=Te.getMonth(),le.d=Te.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),ze="Z"in le?_h(As(le.y,0,1)).getUTCDay():vh(As(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(ze+5)%7:le.w+le.U*7-(ze+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,_h(le)):vh(le)}}function F(ce,de,_e,le){for(var He=0,Te=de.length,ze=_e.length,Ye,Me;He<Te;){if(le>=ze)return-1;if(Ye=de.charCodeAt(He++),Ye===37){if(Ye=de.charAt(He++),Me=H[Ye in s_?de.charAt(He++):Ye],!Me||(le=Me(ce,_e,le))<0)return-1}else if(Ye!=_e.charCodeAt(le++))return-1}return le}function X(ce,de,_e){var le=m.exec(de.slice(_e));return le?(ce.p=y.get(le[0].toLowerCase()),_e+le[0].length):-1}function ee(ce,de,_e){var le=b.exec(de.slice(_e));return le?(ce.w=S.get(le[0].toLowerCase()),_e+le[0].length):-1}function W(ce,de,_e){var le=p.exec(de.slice(_e));return le?(ce.w=v.get(le[0].toLowerCase()),_e+le[0].length):-1}function ne(ce,de,_e){var le=N.exec(de.slice(_e));return le?(ce.m=T.get(le[0].toLowerCase()),_e+le[0].length):-1}function ue(ce,de,_e){var le=w.exec(de.slice(_e));return le?(ce.m=C.get(le[0].toLowerCase()),_e+le[0].length):-1}function D(ce,de,_e){return F(ce,n,de,_e)}function Z(ce,de,_e){return F(ce,r,de,_e)}function R(ce,de,_e){return F(ce,i,de,_e)}function Y(ce){return f[ce.getDay()]}function J(ce){return c[ce.getDay()]}function $(ce){return g[ce.getMonth()]}function A(ce){return h[ce.getMonth()]}function L(ce){return s[+(ce.getHours()>=12)]}function G(ce){return 1+~~(ce.getMonth()/3)}function P(ce){return f[ce.getUTCDay()]}function re(ce){return c[ce.getUTCDay()]}function oe(ce){return g[ce.getUTCMonth()]}function fe(ce){return h[ce.getUTCMonth()]}function be(ce){return s[+(ce.getUTCHours()>=12)]}function ye(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var de=j(ce+="",O);return de.toString=function(){return ce},de},parse:function(ce){var de=k(ce+="",!1);return de.toString=function(){return ce},de},utcFormat:function(ce){var de=j(ce+="",M);return de.toString=function(){return ce},de},utcParse:function(ce){var de=k(ce+="",!0);return de.toString=function(){return ce},de}}}var s_={"-":"",_:" ",0:"0"},Rt=/^\s*\d+/,L3=/^%/,k3=/[\\^$*+?|[\]().{}]/g;function ke(t,n,r){var i=t<0?"-":"",s=(i?-t:t)+"",c=s.length;return i+(c<r?new Array(r-c+1).join(n)+s:s)}function $3(t){return t.replace(k3,"\\$&")}function Ts(t){return new RegExp("^(?:"+t.map($3).join("|")+")","i")}function Ms(t){return new Map(t.map((n,r)=>[n.toLowerCase(),r]))}function Y3(t,n,r){var i=Rt.exec(n.slice(r,r+1));return i?(t.w=+i[0],r+i[0].length):-1}function q3(t,n,r){var i=Rt.exec(n.slice(r,r+1));return i?(t.u=+i[0],r+i[0].length):-1}function X3(t,n,r){var i=Rt.exec(n.slice(r,r+2));return i?(t.U=+i[0],r+i[0].length):-1}function V3(t,n,r){var i=Rt.exec(n.slice(r,r+2));return i?(t.V=+i[0],r+i[0].length):-1}function G3(t,n,r){var i=Rt.exec(n.slice(r,r+2));return i?(t.W=+i[0],r+i[0].length):-1}function u_(t,n,r){var i=Rt.exec(n.slice(r,r+4));return i?(t.y=+i[0],r+i[0].length):-1}function c_(t,n,r){var i=Rt.exec(n.slice(r,r+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function Q3(t,n,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(r,r+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function Z3(t,n,r){var i=Rt.exec(n.slice(r,r+1));return i?(t.q=i[0]*3-3,r+i[0].length):-1}function F3(t,n,r){var i=Rt.exec(n.slice(r,r+2));return i?(t.m=i[0]-1,r+i[0].length):-1}function o_(t,n,r){var i=Rt.exec(n.slice(r,r+2));return i?(t.d=+i[0],r+i[0].length):-1}function I3(t,n,r){var i=Rt.exec(n.slice(r,r+3));return i?(t.m=0,t.d=+i[0],r+i[0].length):-1}function f_(t,n,r){var i=Rt.exec(n.slice(r,r+2));return i?(t.H=+i[0],r+i[0].length):-1}function K3(t,n,r){var i=Rt.exec(n.slice(r,r+2));return i?(t.M=+i[0],r+i[0].length):-1}function J3(t,n,r){var i=Rt.exec(n.slice(r,r+2));return i?(t.S=+i[0],r+i[0].length):-1}function P3(t,n,r){var i=Rt.exec(n.slice(r,r+3));return i?(t.L=+i[0],r+i[0].length):-1}function W3(t,n,r){var i=Rt.exec(n.slice(r,r+6));return i?(t.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function eN(t,n,r){var i=L3.exec(n.slice(r,r+1));return i?r+i[0].length:-1}function tN(t,n,r){var i=Rt.exec(n.slice(r));return i?(t.Q=+i[0],r+i[0].length):-1}function nN(t,n,r){var i=Rt.exec(n.slice(r));return i?(t.s=+i[0],r+i[0].length):-1}function d_(t,n){return ke(t.getDate(),n,2)}function aN(t,n){return ke(t.getHours(),n,2)}function rN(t,n){return ke(t.getHours()%12||12,n,2)}function iN(t,n){return ke(1+eu.count(Ha(t),t),n,3)}function Tw(t,n){return ke(t.getMilliseconds(),n,3)}function lN(t,n){return Tw(t,n)+"000"}function sN(t,n){return ke(t.getMonth()+1,n,2)}function uN(t,n){return ke(t.getMinutes(),n,2)}function cN(t,n){return ke(t.getSeconds(),n,2)}function oN(t){var n=t.getDay();return n===0?7:n}function fN(t,n){return ke(Ao.count(Ha(t)-1,t),n,2)}function Mw(t){var n=t.getDay();return n>=4||n===0?yl(t):yl.ceil(t)}function dN(t,n){return t=Mw(t),ke(yl.count(Ha(t),t)+(Ha(t).getDay()===4),n,2)}function hN(t){return t.getDay()}function mN(t,n){return ke(fo.count(Ha(t)-1,t),n,2)}function gN(t,n){return ke(t.getFullYear()%100,n,2)}function yN(t,n){return t=Mw(t),ke(t.getFullYear()%100,n,2)}function pN(t,n){return ke(t.getFullYear()%1e4,n,4)}function vN(t,n){var r=t.getDay();return t=r>=4||r===0?yl(t):yl.ceil(t),ke(t.getFullYear()%1e4,n,4)}function _N(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+ke(n/60|0,"0",2)+ke(n%60,"0",2)}function h_(t,n){return ke(t.getUTCDate(),n,2)}function bN(t,n){return ke(t.getUTCHours(),n,2)}function wN(t,n){return ke(t.getUTCHours()%12||12,n,2)}function xN(t,n){return ke(1+Dm.count(ai(t),t),n,3)}function Cw(t,n){return ke(t.getUTCMilliseconds(),n,3)}function SN(t,n){return Cw(t,n)+"000"}function EN(t,n){return ke(t.getUTCMonth()+1,n,2)}function AN(t,n){return ke(t.getUTCMinutes(),n,2)}function TN(t,n){return ke(t.getUTCSeconds(),n,2)}function MN(t){var n=t.getUTCDay();return n===0?7:n}function CN(t,n){return ke(Aw.count(ai(t)-1,t),n,2)}function Rw(t){var n=t.getUTCDay();return n>=4||n===0?pl(t):pl.ceil(t)}function RN(t,n){return t=Rw(t),ke(pl.count(ai(t),t)+(ai(t).getUTCDay()===4),n,2)}function NN(t){return t.getUTCDay()}function DN(t,n){return ke(ho.count(ai(t)-1,t),n,2)}function ON(t,n){return ke(t.getUTCFullYear()%100,n,2)}function zN(t,n){return t=Rw(t),ke(t.getUTCFullYear()%100,n,2)}function UN(t,n){return ke(t.getUTCFullYear()%1e4,n,4)}function jN(t,n){var r=t.getUTCDay();return t=r>=4||r===0?pl(t):pl.ceil(t),ke(t.getUTCFullYear()%1e4,n,4)}function HN(){return"+0000"}function m_(){return"%"}function g_(t){return+t}function y_(t){return Math.floor(+t/1e3)}var Ii,Nw;BN({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function BN(t){return Ii=B3(t),Nw=Ii.format,Ii.parse,Ii.utcFormat,Ii.utcParse,Ii}function LN(t){return new Date(t)}function kN(t){return t instanceof Date?+t:+new Date(+t)}function Dw(t,n,r,i,s,c,f,h,g,m){var y=b3(),p=y.invert,v=y.domain,b=m(".%L"),S=m(":%S"),w=m("%I:%M"),C=m("%I %p"),N=m("%a %d"),T=m("%b %d"),O=m("%B"),M=m("%Y");function H(j){return(g(j)<j?b:h(j)<j?S:f(j)<j?w:c(j)<j?C:i(j)<j?s(j)<j?N:T:r(j)<j?O:M)(j)}return y.invert=function(j){return new Date(p(j))},y.domain=function(j){return arguments.length?v(Array.from(j,kN)):v().map(LN)},y.ticks=function(j){var k=v();return t(k[0],k[k.length-1],j??10)},y.tickFormat=function(j,k){return k==null?H:m(k)},y.nice=function(j){var k=v();return(!j||typeof j.range!="function")&&(j=n(k[0],k[k.length-1],j??10)),j?v(w3(k,j)):y},y.copy=function(){return v3(y,Dw(t,n,r,i,s,c,f,h,g,m))},y}function Ow(){return Tm.apply(Dw(j3,H3,Ha,Om,Ao,eu,Nm,Rm,rl,Nw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function p_(t,n){const[r,i]=U.useState(()=>{const c=window.localStorage.getItem(t);try{const f=c?JSON.parse(c):void 0;return f!==void 0?f:(window.localStorage.setItem(t,JSON.stringify(n)),n)}catch{return window.localStorage.setItem(t,JSON.stringify(n)),n}}),s=c=>{try{const f=c instanceof Function?c(r):c;i(f),window.localStorage.setItem(t,JSON.stringify(f)),window.dispatchEvent(new CustomEvent("localStorageUpdate",{detail:{key:t,newValue:f}}))}catch(f){console.error(f)}};return U.useEffect(()=>{const c=h=>{if(h.key===t)try{i(h.newValue?JSON.parse(h.newValue):n)}catch{i(n)}},f=h=>{h.detail.key===t&&i(h.detail.newValue)};return window.addEventListener("storage",c),window.addEventListener("localStorageUpdate",f),()=>{window.removeEventListener("storage",c),window.removeEventListener("localStorageUpdate",f)}},[t,n]),[r,s]}function v_(t){if(typeof t!="string")return!1;try{return JSON.parse(t),!0}catch{return!1}}function $N(t="user",n={},r={}){const i=f=>`${t}.${String(f)}`,s=new Map,c=new Proxy(n,{set:(f,h,g)=>{if(typeof window>"u"||typeof h!="string")return!1;const m=h,y=i(m),p=localStorage.getItem(y),v=v_(p)?JSON.parse(p):p;return localStorage.setItem(y,JSON.stringify(g)),window.dispatchEvent(new CustomEvent("store:change",{detail:{property:m,oldValue:v,newValue:g,prefix:t}})),(s.get(m)??[]).forEach(b=>b(g,v)),!0},get:(f,h)=>{if(h==="on")return(m,y)=>{s.has(m)||s.set(m,[]),s.get(m).push(y)};if(h==="off")return(m,y)=>{const p=s.get(m);if(!p)return;const v=p.indexOf(y);v>-1&&p.splice(v,1)};if(typeof h!="string")return;const g=localStorage.getItem(i(h));return v_(g)?JSON.parse(g):g}});return Object.entries(r).forEach(([f,h])=>{const g=f;(c[g]===void 0||c[g]===null)&&(c[g]=h)}),c}function zw(t="user",n={}){const[,r]=U.useState(0),i=U.useRef(null);return!i.current&&typeof window<"u"&&(i.current=$N(t,{},n)),U.useEffect(()=>{const s=()=>r(h=>h+1),c=h=>{var g;((g=h.detail)==null?void 0:g.prefix)===t&&s()},f=h=>{var g;(g=h.key)!=null&&g.startsWith(t+".")&&s()};return window.addEventListener("store:change",c),window.addEventListener("storage",f),()=>{window.removeEventListener("store:change",c),window.removeEventListener("storage",f)}},[t]),i.current??new Proxy({},{get:()=>{},set:()=>!0})}var __={exports:{}},Cs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function YN(){if(b_)return Cs;b_=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,s,c){var f=null;if(c!==void 0&&(f=""+c),s.key!==void 0&&(f=""+s.key),"key"in s){c={};for(var h in s)h!=="key"&&(c[h]=s[h])}else c=s;return s=c.ref,{$$typeof:t,type:i,key:f,ref:s!==void 0?s:null,props:c}}return Cs.Fragment=n,Cs.jsx=r,Cs.jsxs=r,Cs}var w_;function qN(){return w_||(w_=1,__.exports=YN()),__.exports}qN();U.createContext(void 0);function XN({events:t=[]}){const{setQuery:n}=ct(),r=U.useRef(null),[i,s]=U.useState(),[c,f]=U.useState(),h=zw(),[g,m]=U.useState(0),y=S=>S?new Date(S.getTime()-S.getTimezoneOffset()*6e4).toISOString().slice(0,16):"",p=S=>{if(!i||!c)return;const w=g*S;s(new Date(i.getTime()+w)),f(new Date(c.getTime()+w))},v=S=>{if(!i||!c)return;const w=i.getTime()+g/2,C=g*S;s(new Date(w-C/2)),f(new Date(w+C/2))},b=t.filter(S=>S.start&&S.end&&!isNaN(+S.start)&&!isNaN(+S.end)&&+S.end>+S.start);return U.useEffect(()=>{!i||!c||(m(c.getTime()-i.getTime()),h.timelineMinimum=i?i.toISOString():void 0,h.timelineMaximum=c?c.toISOString():void 0)},[i,c]),U.useEffect(()=>{if(h.timelineMinimum){const S=new Date(h.timelineMinimum);isNaN(+S)||s(S)}if(h.timelineMaximum){const S=new Date(h.timelineMaximum);isNaN(+S)||f(S)}},[s,f]),U.useEffect(()=>{if(!b.length)return;const S=ww(b.flatMap(w=>[w.start,w.end]));s(S[0]),f(S[1])},[t]),U.useEffect(()=>{if(!r.current||!b.length||!i||!c)return;const S=Pt(r.current);S.selectAll("*").remove();const w={top:20,right:20,bottom:20,left:100},N=(parseInt(S.style("width"))||600)-w.left-w.right,T=25,O=b.filter(F=>F.start<=c&&F.end>=i),M=O.length*T,H=S.attr("height",M+w.top+w.bottom).append("g").attr("transform",`translate(${w.left},${w.top})`),j=Ow().domain([i,c]).range([0,N]),k=Mm().domain(O.map(F=>F.id)).range([0,M]).padding(.1);H.append("g").attr("transform",`translate(0,${M})`).call(Sw(j).ticks(5)),H.selectAll("rect").data(O).enter().append("rect").attr("x",F=>j(F.start)).attr("y",F=>k(F.id)??0).attr("width",F=>Math.max(1,j(F.end)-j(F.start))).attr("height",k.bandwidth()).attr("fill","#69b3a2").attr("rx",4).on("click",(F,X)=>n({id:X.id})),H.selectAll("text.label").data(O).enter().append("text").attr("class","label").attr("x",F=>j(F.start)+4).attr("y",F=>(k(F.id)??0)+k.bandwidth()/2).attr("dominant-baseline","middle").attr("fill","white").attr("font-size","12px").text(F=>F.name).on("click",(F,X)=>n({id:X.id}))},[b,i,c]),E.jsxs(E.Fragment,{children:[E.jsxs("div",{style:{marginBottom:"8px",display:"flex",gap:"8px",alignItems:"center"},children:[E.jsxs("label",{children:["From:"," ",E.jsx("input",{type:"datetime-local",value:y(i),onChange:S=>s(S.target.value?new Date(S.target.value):void 0)})]}),E.jsxs("label",{children:["To:"," ",E.jsx("input",{type:"datetime-local",value:y(c),onChange:S=>f(S.target.value?new Date(S.target.value):void 0)})]}),E.jsxs("span",{style:{marginLeft:"auto",display:"flex",gap:"4px"},children:[E.jsx("button",{type:"button",onClick:()=>v(.5),children:"+"}),E.jsx("button",{type:"button",onClick:()=>v(2),children:"-"}),E.jsx("button",{type:"button",onClick:()=>p(-1),children:"←"}),E.jsx("button",{type:"button",onClick:()=>p(1),children:"→"})]})]}),E.jsx("svg",{ref:r,width:"100%"})]})}function VN(){var y;const{query:t,setQuery:n}=ct(),r=t.realmId,i=t.id,[s,c]=U.useState([]),[f,h]=U.useState("list"),g=()=>{const p=prompt("Enter a name for the new event");if(!p)return;const v=ra.create({realmId:r,characters:[],items:[],locationId:"",name:p,description:"new event",start:new Date,end:new Date});m(),n({id:v.id})},m=()=>{c(ra.readAll(r).filter(p=>p.realmId===r))};return U.useEffect(()=>{r&&m()},[r]),U.useEffect(()=>{!i&&r&&m()},[i,r]),E.jsx(E.Fragment,{children:i?E.jsxs(E.Fragment,{children:[E.jsxs("div",{style:{marginBottom:"10px"},children:[E.jsxs("button",{onClick:()=>n({id:""}),style:{marginRight:"10px"},children:["← Back to ",f==="timeline"?"Timeline":"List"]}),E.jsxs("span",{children:["Editing: ",(y=s.find(p=>p.id===i))==null?void 0:y.name]})]}),E.jsx(bw,{})]}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{style:{marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[E.jsxs("button",{onClick:g,children:[Ie.PLUS," New Event"]}),E.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"5px"},children:[E.jsx("button",{onClick:()=>h("list"),style:{backgroundColor:f==="list"?"#007bff":"#f8f9fa",color:f==="list"?"white":"black",border:"1px solid #ccc",padding:"5px 10px",borderRadius:"4px",cursor:"pointer"},children:"📋 List"}),E.jsx("button",{onClick:()=>h("timeline"),style:{backgroundColor:f==="timeline"?"#007bff":"#f8f9fa",color:f==="timeline"?"white":"black",border:"1px solid #ccc",padding:"5px 10px",borderRadius:"4px",cursor:"pointer"},children:"📅 Timeline"})]})]}),f==="list"?E.jsxs("select",{onChange:p=>n({id:p.target.value}),value:i,style:{width:"100%",padding:"8px"},children:[E.jsx("option",{value:"",children:"Select an event"}),s&&s.map(p=>E.jsx("option",{value:p.id,children:p.name},p.id))]}):E.jsx(XN,{events:s})]})})}function GN(){var y;const{query:t,setQuery:n}=ct(),r=t.realmId,[i,s]=U.useState([]),[c]=U.useState(""),[f,h]=U.useState(""),g=()=>{const p=prompt("Enter a name for the new item");if(!p)return;const v=mn.create({realmId:r,name:p,description:"new item",properties:{}});m(),n({id:v.id})},m=()=>{const p=mn.readAll(r).filter(v=>v.realmId===r).sort((v,b)=>v.name.localeCompare(b.name));s(p)};return U.useEffect(()=>{r&&m()},[r]),E.jsx(E.Fragment,{children:c?E.jsx(E.Fragment,{children:(y=i.find(p=>p.id===c))==null?void 0:y.id}):E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:g,children:Ie.PLUS}),E.jsx("input",{type:"text",placeholder:"Search",value:f,onChange:p=>h(p.target.value)}),E.jsx("ul",{children:i&&i.filter(p=>_w(p.name,f)).map(p=>E.jsx("li",{children:E.jsx("a",{href:"#",onClick:v=>{v.preventDefault(),n({id:p.id})},children:p.name})},p.id))})]})})}function QN({node:t,list:n,select:r}){const i=n.filter(f=>f.parentId===t.id),[s,c]=U.useState(!1);return E.jsxs("li",{children:[E.jsx("a",{href:"#",onClick:f=>{f.preventDefault(),r({id:t.id})},children:t.name}),i.length>0&&E.jsx("button",{style:{marginRight:"4px"},onClick:()=>c(f=>!f),children:s?"▼":"▶"}),s&&i.length>0&&E.jsx(Uw,{list:n,parentId:t.id,select:r})]})}function Uw({list:t,parentId:n,select:r}){const i=t.filter(s=>s.parentId===n);return i.length?E.jsx("ul",{children:i.map(s=>E.jsx(QN,{node:s,list:t,select:r},s.id))}):null}function ZN(){const{query:t,setQuery:n}=ct(),r=t.realmId,[i,s]=U.useState([]),c=()=>{const h=prompt("Enter a name for the new location");if(!h)return;const g=Wt.create({realmId:r,parentId:"",name:h,description:"new location"});f(),n({id:g.id})},f=()=>{s(Wt.readAll(r).filter(h=>h.realmId===r))};return U.useEffect(()=>{r&&f()},[r]),E.jsx(E.Fragment,{children:E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:c,children:Ie.PLUS}),E.jsx(Uw,{list:i,parentId:"",select:n})]})})}function jw(t,n){const r=t.split(/\n/).map(s=>s.trim()).filter(Boolean),i=[];for(const s of r){const c=/^(Character|Item|Location|Concept)\s+([^.,;:!-]+)[\s:,-]+(.+)$/i.exec(s);if(!c)continue;const[,f,h,g]=c,m=f.charAt(0).toUpperCase()+f.slice(1).toLowerCase(),y=h.trim(),p=g.trim();let v,b;switch(m){case"Character":v=qt.readAll(n).find(S=>S.name.toLowerCase()===y.toLowerCase()),v?b=()=>{qt.update(v.id,{description:p})}:b=()=>{qt.create({realmId:n,name:y,description:p,birth:new Date,death:new Date,relations:{},properties:{}})};break;case"Item":v=mn.readAll(n).find(S=>S.name.toLowerCase()===y.toLowerCase()),v?b=()=>{mn.update(v.id,{description:p})}:b=()=>{mn.create({realmId:n,name:y,description:p,properties:{}})};break;case"Location":v=Wt.readAll(n).find(S=>S.name.toLowerCase()===y.toLowerCase()),v?b=()=>{Wt.update(v.id,{description:p})}:b=()=>{Wt.create({realmId:n,parentId:"",name:y,description:p})};break;case"Concept":v=Dn.readAll(n).find(S=>S.name.toLowerCase()===y.toLowerCase()),v?b=()=>{Dn.update(v.id,{description:p})}:b=()=>{Dn.create({realmId:n,name:y,description:p})};break}i.push({type:m,name:y,description:p,existing:!!v,accept:b})}return i}function Hw({suggestions:t,setSuggestions:n}){const r=s=>{t[s].accept(),n(t.filter((f,h)=>h!==s))},i=s=>{n(t.filter((c,f)=>f!==s))};return t.length===0?null:E.jsx("ul",{children:t.map((s,c)=>E.jsxs("li",{children:[E.jsx("b",{children:s.type})," ",E.jsx("i",{children:s.name})," - ",s.description,s.existing?" (update)":" (create)",E.jsx("button",{onClick:()=>r(c),children:"accept"}),E.jsx("button",{onClick:()=>i(c),children:"dismiss"})]},c))})}function FN(){const{query:t}=ct(),[n,r]=U.useState(""),[i,s]=U.useState([]);return U.useEffect(()=>{s(jw(n,t.realmId))},[n,t.realmId]),E.jsxs("div",{className:"input-editor",children:[E.jsx("textarea",{placeholder:"Type notes...",value:n,onChange:c=>r(c.target.value),rows:10,cols:50}),E.jsx(Hw,{suggestions:i,setSuggestions:s})]})}function IN(){const{query:t}=ct(),[n,r]=U.useState(""),[i,s]=U.useState([]),[c,f]=U.useState(!1),h=U.useRef(null);U.useEffect(()=>{const y=jw(n,t.realmId);console.log(y),s(y)},[n,t.realmId]);const g=()=>{const y=window.SpeechRecognition||window.webkitSpeechRecognition;if(!y){alert("Speech recognition not supported");return}const p=new y;p.continuous=!0,p.interimResults=!1,p.onresult=v=>{let b="";for(let S=v.resultIndex;S<v.results.length;S++){const w=v.results[S];w.isFinal&&(b+=w[0].transcript)}b&&r(S=>(S+" "+b).trim())},p.onend=()=>f(!1),p.start(),h.current=p,f(!0)},m=()=>{var y;(y=h.current)==null||y.stop()};return E.jsxs("div",{className:"talk-editor",children:[E.jsxs("button",{onClick:c?m:g,children:[c?"Stop":"Start"," Talking"]}),E.jsx("textarea",{value:n,rows:10,cols:50,onChange:y=>r(y.target.value)}),E.jsx(Hw,{suggestions:i,setSuggestions:s})]})}function KN(){const{query:t,setQuery:n}=ct(),r=t.id,[i,s]=U.useState({}),[c,f]=U.useState([]),h=(v={})=>Object.entries(v).map(([b,S])=>({key:b,value:String(S)})),g=v=>{const b={};for(const{key:S,value:w}of v)S&&(b[S]=w);return b},m=v=>{const b=mn.read(v);s({name:"",description:"",properties:{},...b}),f(h((b==null?void 0:b.properties)||{}))},y=v=>{prompt(`Type 'yes' to remove the ${i==null?void 0:i.name} item?`)==="yes"&&mn.remove(v),n({id:""})},p=v=>{v.preventDefault();const b={...i,properties:g(c)};mn.update(i==null?void 0:i.id,b),n({id:""})};return U.useEffect(()=>{r?m(r):(s({}),f([]))},[r]),E.jsx(E.Fragment,{children:E.jsxs("form",{onSubmit:p,children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",required:!0,name:"name",value:(i==null?void 0:i.name)||"",onChange:v=>s({...i,name:v.target.value})}),E.jsx("label",{children:"Description"}),E.jsx("textarea",{name:"description",required:!0,value:(i==null?void 0:i.description)||"",onChange:v=>s({...i,description:v.target.value})}),E.jsx("label",{children:"Properties"}),E.jsxs("div",{children:[c.map((v,b)=>E.jsxs("div",{className:"key-value",children:[E.jsx("input",{type:"text",placeholder:"Key",value:v.key,onChange:S=>{const w=[...c];w[b]={...w[b],key:S.target.value},f(w)}}),E.jsx("input",{type:"text",placeholder:"Value",value:v.value,onChange:S=>{const w=[...c];w[b]={...w[b],value:S.target.value},f(w)}}),E.jsx("button",{type:"button",onClick:()=>{const S=c.filter((w,C)=>C!==b);f(S)},children:"x"})]},b)),E.jsx("button",{type:"button",onClick:()=>f([...c,{key:"",value:""}]),children:"Add property"})]}),E.jsx("span",{}),E.jsxs("span",{children:[E.jsx("button",{type:"button",onClick:()=>n({id:""}),children:Ie.DARROW_LEFT}),E.jsx("button",{type:"submit",children:Ie.FLOPPY_DISK}),E.jsx("button",{onClick:()=>y(i==null?void 0:i.id),children:Ie.RED_X})]})]})})}function JN(){const{query:t,setQuery:n}=ct(),r=t.id,[i,s]=U.useState({}),[c,f]=U.useState([]),h=y=>{const p=Wt.read(y);if(s({name:"",description:"",parentId:"",...p}),p!=null&&p.realmId){const v=Wt.readAll(p.realmId).filter(b=>b.id!==y);f(v)}},g=y=>{prompt(`Type 'yes' to remove the ${i==null?void 0:i.name} location?`)==="yes"&&Wt.remove(y),n({id:""})},m=y=>{y.preventDefault(),Wt.update(i==null?void 0:i.id,i),n({id:""})};return U.useEffect(()=>{r?h(r):s({})},[r]),E.jsx(E.Fragment,{children:E.jsxs("form",{onSubmit:m,children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",required:!0,name:"name",value:(i==null?void 0:i.name)||"",onChange:y=>s({...i,name:y.target.value})}),E.jsx("label",{children:"Description"}),E.jsx("textarea",{name:"description",required:!0,value:(i==null?void 0:i.description)||"",onChange:y=>s({...i,description:y.target.value})}),E.jsx("label",{children:"Parent Location"}),E.jsxs("select",{name:"parentId",value:(i==null?void 0:i.parentId)||"",onChange:y=>s({...i,parentId:y.target.value}),children:[E.jsx("option",{value:"",children:"None"}),c.map(y=>E.jsx("option",{value:y.id,children:y.name},y.id))]}),E.jsx("span",{}),E.jsxs("span",{children:[E.jsx("button",{type:"button",onClick:()=>n({id:""}),children:Ie.DARROW_LEFT}),E.jsx("button",{type:"submit",children:Ie.FLOPPY_DISK}),E.jsx("button",{onClick:()=>g(i==null?void 0:i.id),children:Ie.RED_X})]})]})})}function PN(){const{gotoState:t,setQuery:n,query:r}=ct(),i=zw(),s=U.useRef(null),[c,f]=U.useState([]),[h,g]=p_("globalTimelineMin",void 0),[m,y]=p_("globalTimelineMax",void 0),p=r.realmId;U.useEffect(()=>{const w=ra.readAll(p),C=qt.readAll(p),N=[...w.map(T=>({id:T.id,name:T.name,start:T.start,end:T.end,type:"event"})),...C.map(T=>({id:T.id,name:T.name,start:T.birth,end:T.death,type:"character"}))].filter(T=>T.start&&T.end&&!isNaN(+T.start)&&!isNaN(+T.end)&&+T.end>+T.start);if(f(N),N.length){const T=ww(N.flatMap(O=>[O.start,O.end]));g(T[0]),y(T[1])}},[p]);const v=w=>{if(!h||!m)return;const C=typeof h=="string"?new Date(h):h,N=typeof m=="string"?new Date(m):m,O=(N.getTime()-C.getTime())*w;g(new Date(C.getTime()+O)),y(new Date(N.getTime()+O))},b=w=>{if(!h||!m)return;const C=typeof h=="string"?new Date(h):h,T=(typeof m=="string"?new Date(m):m).getTime()-C.getTime(),O=C.getTime()+T/2,M=T*w;g(new Date(O-M/2)),y(new Date(O+M/2))};U.useEffect(()=>{if(!s.current||!c.length||!h||!m)return;const w=typeof h=="string"?new Date(h):h,C=typeof m=="string"?new Date(m):m,N=Pt(s.current);N.selectAll("*").remove();const T={top:20,right:20,bottom:20,left:100},M=(parseInt(N.style("width"))||600)-T.left-T.right,H=25,j=c.filter(ne=>ne.start<=C&&ne.end>=w),k=j.length*H,F=N.attr("height",k+T.top+T.bottom).append("g").attr("transform",`translate(${T.left},${T.top})`),X=Ow().domain([w,C]).range([0,M]),ee=Mm().domain(j.map(ne=>ne.id)).range([0,k]).padding(.1);F.append("g").attr("transform",`translate(0,${k})`).call(Sw(X).ticks(5));const W=8;F.selectAll("rect").data(j).enter().append("rect").attr("x",ne=>X(ne.start)).attr("y",ne=>ee(ne.id)??0).attr("width",ne=>Math.max(W,X(ne.end)-X(ne.start))).attr("height",ee.bandwidth()).attr("fill",ne=>ne.type==="event"?"#69b3a2":"#a369b3").attr("rx",4).on("click",(ne,ue)=>{t(ue.type==="event"?Ve.Event:Ve.Character),n({id:ue.id,realmId:p})}),F.selectAll("text.label").data(j).enter().append("text").attr("class","label").attr("x",ne=>X(ne.start)+4).attr("y",ne=>(ee(ne.id)??0)+ee.bandwidth()/2).attr("dominant-baseline","middle").attr("fill","white").attr("font-size","12px").text(ne=>ne.name).on("click",(ne,ue)=>{t(ue.type==="event"?Ve.Event:Ve.Character),n({id:ue.id,realmId:p})})},[c,h,m,p]),U.useEffect(()=>{i.globalTimelineMin=h?typeof h=="string"?h:h.toISOString():void 0,i.globalTimelineMax=m?typeof m=="string"?m:m.toISOString():void 0},[h,m]);const S=w=>{if(!w)return"";const C=typeof w=="string"?new Date(w):w;return new Date(C.getTime()-C.getTimezoneOffset()*6e4).toISOString().slice(0,16)};return E.jsxs(E.Fragment,{children:[E.jsxs("div",{style:{marginBottom:"8px",display:"flex",gap:"8px",alignItems:"center"},children:[E.jsxs("label",{children:["From:"," ",E.jsx("input",{type:"datetime-local",value:S(h),onChange:w=>g(w.target.value?new Date(w.target.value):void 0)})]}),E.jsxs("label",{children:["To:"," ",E.jsx("input",{type:"datetime-local",value:S(m),onChange:w=>y(w.target.value?new Date(w.target.value):void 0)})]}),E.jsxs("span",{style:{marginLeft:"auto",display:"flex",gap:"4px"},children:[E.jsx("button",{type:"button",onClick:()=>b(.5),children:"+"}),E.jsx("button",{type:"button",onClick:()=>b(2),children:"-"}),E.jsx("button",{type:"button",onClick:()=>v(-1),children:"←"}),E.jsx("button",{type:"button",onClick:()=>v(1),children:"→"})]})]}),E.jsx("svg",{ref:s,width:"100%"})]})}const Zh="RFC3986",Fh={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},WN="RFC1738",eD=Array.isArray,ea=(()=>{const t=[];for(let n=0;n<256;++n)t.push("%"+((n<16?"0":"")+n.toString(16)).toUpperCase());return t})(),bh=1024,tD=(t,n,r,i,s)=>{if(t.length===0)return t;let c=t;if(typeof t=="symbol"?c=Symbol.prototype.toString.call(t):typeof t!="string"&&(c=String(t)),r==="iso-8859-1")return escape(c).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});let f="";for(let h=0;h<c.length;h+=bh){const g=c.length>=bh?c.slice(h,h+bh):c,m=[];for(let y=0;y<g.length;++y){let p=g.charCodeAt(y);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===WN&&(p===40||p===41)){m[m.length]=g.charAt(y);continue}if(p<128){m[m.length]=ea[p];continue}if(p<2048){m[m.length]=ea[192|p>>6]+ea[128|p&63];continue}if(p<55296||p>=57344){m[m.length]=ea[224|p>>12]+ea[128|p>>6&63]+ea[128|p&63];continue}y+=1,p=65536+((p&1023)<<10|g.charCodeAt(y)&1023),m[m.length]=ea[240|p>>18]+ea[128|p>>12&63]+ea[128|p>>6&63]+ea[128|p&63]}f+=m.join("")}return f};function nD(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function x_(t,n){if(eD(t)){const r=[];for(let i=0;i<t.length;i+=1)r.push(n(t[i]));return r}return n(t)}const aD=Object.prototype.hasOwnProperty,Bw={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,n){return String(t)+"["+n+"]"},repeat(t){return String(t)}},ta=Array.isArray,rD=Array.prototype.push,Lw=function(t,n){rD.apply(t,ta(n)?n:[n])},iD=Date.prototype.toISOString,pt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:tD,encodeValuesOnly:!1,format:Zh,formatter:Fh[Zh],indices:!1,serializeDate(t){return iD.call(t)},skipNulls:!1,strictNullHandling:!1};function lD(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const wh={};function kw(t,n,r,i,s,c,f,h,g,m,y,p,v,b,S,w,C,N){let T=t,O=N,M=0,H=!1;for(;(O=O.get(wh))!==void 0&&!H;){const ee=O.get(t);if(M+=1,typeof ee<"u"){if(ee===M)throw new RangeError("Cyclic object value");H=!0}typeof O.get(wh)>"u"&&(M=0)}if(typeof m=="function"?T=m(n,T):T instanceof Date?T=v==null?void 0:v(T):r==="comma"&&ta(T)&&(T=x_(T,function(ee){return ee instanceof Date?v==null?void 0:v(ee):ee})),T===null){if(c)return g&&!w?g(n,pt.encoder,C,"key",b):n;T=""}if(lD(T)||nD(T)){if(g){const ee=w?n:g(n,pt.encoder,C,"key",b);return[(S==null?void 0:S(ee))+"="+(S==null?void 0:S(g(T,pt.encoder,C,"value",b)))]}return[(S==null?void 0:S(n))+"="+(S==null?void 0:S(String(T)))]}const j=[];if(typeof T>"u")return j;let k;if(r==="comma"&&ta(T))w&&g&&(T=x_(T,g)),k=[{value:T.length>0?T.join(",")||null:void 0}];else if(ta(m))k=m;else{const ee=Object.keys(T);k=y?ee.sort(y):ee}const F=h?String(n).replace(/\./g,"%2E"):String(n),X=i&&ta(T)&&T.length===1?F+"[]":F;if(s&&ta(T)&&T.length===0)return X+"[]";for(let ee=0;ee<k.length;++ee){const W=k[ee],ne=typeof W=="object"&&typeof W.value<"u"?W.value:T[W];if(f&&ne===null)continue;const ue=p&&h?W.replace(/\./g,"%2E"):W,D=ta(T)?typeof r=="function"?r(X,ue):X:X+(p?"."+ue:"["+ue+"]");N.set(t,M);const Z=new WeakMap;Z.set(wh,N),Lw(j,kw(ne,D,r,i,s,c,f,h,r==="comma"&&w&&ta(T)?null:g,m,y,p,v,b,S,w,C,Z))}return j}function sD(t=pt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const n=t.charset||pt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=Zh;if(typeof t.format<"u"){if(!aD.call(Fh,t.format))throw new TypeError("Unknown format option provided.");r=t.format}const i=Fh[r];let s=pt.filter;(typeof t.filter=="function"||ta(t.filter))&&(s=t.filter);let c;if(t.arrayFormat&&t.arrayFormat in Bw?c=t.arrayFormat:"indices"in t?c=t.indices?"indices":"repeat":c=pt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const f=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:pt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:pt.addQueryPrefix,allowDots:f,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:pt.allowEmptyArrays,arrayFormat:c,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:pt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?pt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:pt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:pt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:pt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:pt.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:pt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:pt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:pt.strictNullHandling}}function uD(t,n={}){let r=t;const i=sD(n);let s,c;typeof i.filter=="function"?(c=i.filter,r=c("",r)):ta(i.filter)&&(c=i.filter,s=c);const f=[];if(typeof r!="object"||r===null)return"";const h=Bw[i.arrayFormat],g=h==="comma"&&i.commaRoundTrip;s||(s=Object.keys(r)),i.sort&&s.sort(i.sort);const m=new WeakMap;for(let v=0;v<s.length;++v){const b=s[v];i.skipNulls&&r[b]===null||Lw(f,kw(r[b],b,h,g,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,m))}const y=f.join(i.delimiter);let p=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),y.length>0?p+y:""}const el="4.104.0";let S_=!1,Ls,$w,Yw,Ih,qw,Xw,Vw,Gw,Qw;function cD(t,n={auto:!1}){if(S_)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Ls)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Ls}'\``);S_=n.auto,Ls=t.kind,$w=t.fetch,Yw=t.FormData,Ih=t.File,qw=t.ReadableStream,Xw=t.getMultipartRequestOptions,Vw=t.getDefaultAgent,Gw=t.fileFromPath,Qw=t.isFsReadStream}class oD{constructor(n){this.body=n}get[Symbol.toStringTag](){return"MultipartBody"}}function fD({manuallyImported:t}={}){const n=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,i,s,c;try{r=fetch,i=Request,s=Response,c=Headers}catch(f){throw new Error(`this environment is missing the following Web Fetch API type: ${f.message}. ${n}`)}return{kind:"web",fetch:r,Request:i,Response:s,Headers:c,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${n}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${n}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${n}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${n}`)}},getMultipartRequestOptions:async(f,h)=>({...h,body:new oD(f)}),getDefaultAgent:f=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:f=>!1}}const Zw=()=>{Ls||cD(fD(),{auto:!0})};Zw();class Se extends Error{}class jt extends Se{constructor(n,r,i,s){super(`${jt.makeMessage(n,r,i)}`),this.status=n,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"],this.error=r;const c=r;this.code=c==null?void 0:c.code,this.param=c==null?void 0:c.param,this.type=c==null?void 0:c.type}static makeMessage(n,r,i){const s=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):i;return n&&s?`${n} ${s}`:n?`${n} status code (no body)`:s||"(no status code or body)"}static generate(n,r,i,s){if(!n||!s)return new To({message:i,cause:Jh(r)});const c=r==null?void 0:r.error;return n===400?new Fw(n,c,i,s):n===401?new Iw(n,c,i,s):n===403?new Kw(n,c,i,s):n===404?new Jw(n,c,i,s):n===409?new Pw(n,c,i,s):n===422?new Ww(n,c,i,s):n===429?new e1(n,c,i,s):n>=500?new t1(n,c,i,s):new jt(n,c,i,s)}}class Nn extends jt{constructor({message:n}={}){super(void 0,void 0,n||"Request was aborted.",void 0)}}class To extends jt{constructor({message:n,cause:r}){super(void 0,void 0,n||"Connection error.",void 0),r&&(this.cause=r)}}class zm extends To{constructor({message:n}={}){super({message:n??"Request timed out."})}}class Fw extends jt{}class Iw extends jt{}class Kw extends jt{}class Jw extends jt{}class Pw extends jt{}class Ww extends jt{}class e1 extends jt{}class t1 extends jt{}class n1 extends Se{constructor(){super("Could not parse response content as the length limit was reached")}}class a1 extends Se{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var jc=function(t,n,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?t!==n||!s:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,r):s?s.value=r:n.set(t,r),r},Qr=function(t,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!i:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:n.get(t)},dn;class Mo{constructor(){dn.set(this,void 0),this.buffer=new Uint8Array,jc(this,dn,null,"f")}decode(n){if(n==null)return[];const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(this.buffer.length+r.length);i.set(this.buffer),i.set(r,this.buffer.length),this.buffer=i;const s=[];let c;for(;(c=dD(this.buffer,Qr(this,dn,"f")))!=null;){if(c.carriage&&Qr(this,dn,"f")==null){jc(this,dn,c.index,"f");continue}if(Qr(this,dn,"f")!=null&&(c.index!==Qr(this,dn,"f")+1||c.carriage)){s.push(this.decodeText(this.buffer.slice(0,Qr(this,dn,"f")-1))),this.buffer=this.buffer.slice(Qr(this,dn,"f")),jc(this,dn,null,"f");continue}const f=Qr(this,dn,"f")!==null?c.preceding-1:c.preceding,h=this.decodeText(this.buffer.slice(0,f));s.push(h),this.buffer=this.buffer.slice(c.index),jc(this,dn,null,"f")}return s}decodeText(n){if(n==null)return"";if(typeof n=="string")return n;if(typeof Buffer<"u"){if(n instanceof Buffer)return n.toString();if(n instanceof Uint8Array)return Buffer.from(n).toString();throw new Se(`Unexpected: received non-Uint8Array (${n.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(n instanceof Uint8Array||n instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(n);throw new Se(`Unexpected: received non-Uint8Array/ArrayBuffer (${n.constructor.name}) in a web platform. Please report this error.`)}throw new Se("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}dn=new WeakMap;Mo.NEWLINE_CHARS=new Set([`
`,"\r"]);Mo.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function dD(t,n){for(let s=n??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function hD(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}function r1(t){if(t[Symbol.asyncIterator])return t;const n=t.getReader();return{async next(){try{const r=await n.read();return r!=null&&r.done&&n.releaseLock(),r}catch(r){throw n.releaseLock(),r}},async return(){const r=n.cancel();return n.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class aa{constructor(n,r){this.iterator=n,this.controller=r}static fromSSEResponse(n,r){let i=!1;async function*s(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(const f of mD(n,r))if(!c){if(f.data.startsWith("[DONE]")){c=!0;continue}if(f.event===null||f.event.startsWith("response.")||f.event.startsWith("transcript.")){let h;try{h=JSON.parse(f.data)}catch(g){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),g}if(h&&h.error)throw new jt(void 0,h.error,void 0,f1(n.headers));yield h}else{let h;try{h=JSON.parse(f.data)}catch(g){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),g}if(f.event=="error")throw new jt(void 0,h.error,h.message,void 0);yield{event:f.event,data:h}}}c=!0}catch(f){if(f instanceof Error&&f.name==="AbortError")return;throw f}finally{c||r.abort()}}return new aa(s,r)}static fromReadableStream(n,r){let i=!1;async function*s(){const f=new Mo,h=r1(n);for await(const g of h)for(const m of f.decode(g))yield m;for(const g of f.flush())yield g}async function*c(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let f=!1;try{for await(const h of s())f||h&&(yield JSON.parse(h));f=!0}catch(h){if(h instanceof Error&&h.name==="AbortError")return;throw h}finally{f||r.abort()}}return new aa(c,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const n=[],r=[],i=this.iterator(),s=c=>({next:()=>{if(c.length===0){const f=i.next();n.push(f),r.push(f)}return c.shift()}});return[new aa(()=>s(n),this.controller),new aa(()=>s(r),this.controller)]}toReadableStream(){const n=this;let r;const i=new TextEncoder;return new qw({async start(){r=n[Symbol.asyncIterator]()},async pull(s){try{const{value:c,done:f}=await r.next();if(f)return s.close();const h=i.encode(JSON.stringify(c)+`
`);s.enqueue(h)}catch(c){s.error(c)}},async cancel(){var s;await((s=r.return)==null?void 0:s.call(r))}})}}async function*mD(t,n){if(!t.body)throw n.abort(),new Se("Attempted to iterate over a response with no body");const r=new yD,i=new Mo,s=r1(t.body);for await(const c of gD(s))for(const f of i.decode(c)){const h=r.decode(f);h&&(yield h)}for(const c of i.flush()){const f=r.decode(c);f&&(yield f)}}async function*gD(t){let n=new Uint8Array;for await(const r of t){if(r==null)continue;const i=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r;let s=new Uint8Array(n.length+i.length);s.set(n),s.set(i,n.length),n=s;let c;for(;(c=hD(n))!==-1;)yield n.slice(0,c),n=n.slice(c)}n.length>0&&(yield n)}class yD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(n){if(n.endsWith("\r")&&(n=n.substring(0,n.length-1)),!n){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(n),n.startsWith(":"))return null;let[r,i,s]=pD(n,":");return s.startsWith(" ")&&(s=s.substring(1)),r==="event"?this.event=s:r==="data"&&this.data.push(s),null}}function pD(t,n){const r=t.indexOf(n);return r!==-1?[t.substring(0,r),n,t.substring(r+n.length)]:[t,"",""]}const i1=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",l1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Co(t),Co=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",vD=t=>l1(t)||i1(t)||Qw(t);async function s1(t,n,r){var s;if(t=await t,l1(t))return t;if(i1(t)){const c=await t.blob();n||(n=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const f=Co(c)?[await c.arrayBuffer()]:[c];return new Ih(f,n,r)}const i=await _D(t);if(n||(n=wD(t)??"unknown_file"),!(r!=null&&r.type)){const c=(s=i[0])==null?void 0:s.type;typeof c=="string"&&(r={...r,type:c})}return new Ih(i,n,r)}async function _D(t){var r;let n=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)n.push(t);else if(Co(t))n.push(await t.arrayBuffer());else if(xD(t))for await(const i of t)n.push(i);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(r=t==null?void 0:t.constructor)==null?void 0:r.name}; props: ${bD(t)}`);return n}function bD(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function wD(t){var n;return xh(t.name)||xh(t.filename)||((n=xh(t.path))==null?void 0:n.split(/[\\/]/).pop())}const xh=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},xD=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",E_=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",ri=async t=>{const n=await SD(t.body);return Xw(n,t)},SD=async t=>{const n=new Yw;return await Promise.all(Object.entries(t||{}).map(([r,i])=>Kh(n,r,i))),n},Kh=async(t,n,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${n}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(n,String(r));else if(vD(r)){const i=await s1(r);t.append(n,i)}else if(Array.isArray(r))await Promise.all(r.map(i=>Kh(t,n+"[]",i)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([i,s])=>Kh(t,`${n}[${i}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var cl={},ED=function(t,n,r,i,s){if(typeof n=="function"?t!==n||!0:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n.set(t,r),r},AD=function(t,n,r,i){if(typeof n=="function"?t!==n||!i:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:n.get(t)},Hc;Zw();async function u1(t){var f;const{response:n}=t;if(t.options.stream)return wr("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller):aa.fromSSEResponse(n,t.controller);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const r=n.headers.get("content-type"),i=(f=r==null?void 0:r.split(";")[0])==null?void 0:f.trim();if((i==null?void 0:i.includes("application/json"))||(i==null?void 0:i.endsWith("+json"))){const h=await n.json();return wr("response",n.status,n.url,n.headers,h),c1(h,n)}const c=await n.text();return wr("response",n.status,n.url,n.headers,c),c}function c1(t,n){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:n.headers.get("x-request-id"),enumerable:!1})}class Ro extends Promise{constructor(n,r=u1){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r}_thenUnwrap(n){return new Ro(this.responsePromise,async r=>c1(n(await this.parseResponse(r),r),r.response))}asResponse(){return this.responsePromise.then(n=>n.response)}async withResponse(){const[n,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:n,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(n,r){return this.parse().then(n,r)}catch(n){return this.parse().catch(n)}finally(n){return this.parse().finally(n)}}class TD{constructor({baseURL:n,maxRetries:r=2,timeout:i=6e5,httpAgent:s,fetch:c}){this.baseURL=n,this.maxRetries=Sh("maxRetries",r),this.timeout=Sh("timeout",i),this.httpAgent=s,this.fetch=c??$w}authHeaders(n){return{}}defaultHeaders(n){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...DD(),...this.authHeaders(n)}}validateHeaders(n,r){}defaultIdempotencyKey(){return`stainless-node-retry-${jD()}`}get(n,r){return this.methodRequest("get",n,r)}post(n,r){return this.methodRequest("post",n,r)}patch(n,r){return this.methodRequest("patch",n,r)}put(n,r){return this.methodRequest("put",n,r)}delete(n,r){return this.methodRequest("delete",n,r)}methodRequest(n,r,i){return this.request(Promise.resolve(i).then(async s=>{const c=s&&Co(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:n,path:r,...s,body:c}}))}getAPIList(n,r,i){return this.requestAPIList(r,{method:"get",path:n,...i})}calculateContentLength(n){if(typeof n=="string"){if(typeof Buffer<"u")return Buffer.byteLength(n,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(n).length.toString()}else if(ArrayBuffer.isView(n))return n.byteLength.toString();return null}buildRequest(n,{retryCount:r=0}={}){var w;const i={...n},{method:s,path:c,query:f,headers:h={}}=i,g=ArrayBuffer.isView(i.body)||i.__binaryRequest&&typeof i.body=="string"?i.body:E_(i.body)?i.body.body:i.body?JSON.stringify(i.body,null,2):null,m=this.calculateContentLength(g),y=this.buildURL(c,f);"timeout"in i&&Sh("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const p=i.httpAgent??this.httpAgent??Vw(y),v=i.timeout+1e3;typeof((w=p==null?void 0:p.options)==null?void 0:w.timeout)=="number"&&v>(p.options.timeout??0)&&(p.options.timeout=v),this.idempotencyHeader&&s!=="get"&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),h[this.idempotencyHeader]=n.idempotencyKey);const b=this.buildHeaders({options:i,headers:h,contentLength:m,retryCount:r});return{req:{method:s,...g&&{body:g},headers:b,...p&&{agent:p},signal:i.signal??null},url:y,timeout:i.timeout}}buildHeaders({options:n,headers:r,contentLength:i,retryCount:s}){const c={};i&&(c["content-length"]=i);const f=this.defaultHeaders(n);return C_(c,f),C_(c,r),E_(n.body)&&Ls!=="node"&&delete c["content-type"],Lc(f,"x-stainless-retry-count")===void 0&&Lc(r,"x-stainless-retry-count")===void 0&&(c["x-stainless-retry-count"]=String(s)),Lc(f,"x-stainless-timeout")===void 0&&Lc(r,"x-stainless-timeout")===void 0&&n.timeout&&(c["x-stainless-timeout"]=String(Math.trunc(n.timeout/1e3))),this.validateHeaders(c,r),c}async prepareOptions(n){}async prepareRequest(n,{url:r,options:i}){}parseHeaders(n){return n?Symbol.iterator in n?Object.fromEntries(Array.from(n).map(r=>[...r])):{...n}:{}}makeStatusError(n,r,i,s){return jt.generate(n,r,i,s)}request(n,r=null){return new Ro(this.makeRequest(n,r))}async makeRequest(n,r){var p,v;const i=await n,s=i.maxRetries??this.maxRetries;r==null&&(r=s),await this.prepareOptions(i);const{req:c,url:f,timeout:h}=this.buildRequest(i,{retryCount:s-r});if(await this.prepareRequest(c,{url:f,options:i}),wr("request",f,i,c.headers),(p=i.signal)!=null&&p.aborted)throw new Nn;const g=new AbortController,m=await this.fetchWithTimeout(f,c,h,g).catch(Jh);if(m instanceof Error){if((v=i.signal)!=null&&v.aborted)throw new Nn;if(r)return this.retryRequest(i,r);throw m.name==="AbortError"?new zm:new To({cause:m})}const y=f1(m.headers);if(!m.ok){if(r&&this.shouldRetry(m)){const T=`retrying, ${r} attempts remaining`;return wr(`response (error; ${T})`,m.status,f,y),this.retryRequest(i,r,y)}const b=await m.text().catch(T=>Jh(T).message),S=OD(b),w=S?void 0:b;throw wr(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,m.status,f,y,w),this.makeStatusError(m.status,S,w,y)}return{response:m,options:i,controller:g}}requestAPIList(n,r){const i=this.makeRequest(r,null);return new MD(this,i,n)}buildURL(n,r){const i=UD(n)?new URL(n):new URL(this.baseURL+(this.baseURL.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),s=this.defaultQuery();return d1(s)||(r={...s,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(i.search=this.stringifyQuery(r)),i.toString()}stringifyQuery(n){return Object.entries(n).filter(([r,i])=>typeof i<"u").map(([r,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(r)}=`;throw new Se(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(n,r,i,s){const{signal:c,...f}=r||{};c&&c.addEventListener("abort",()=>s.abort());const h=setTimeout(()=>s.abort(),i),g={signal:s.signal,...f};return g.method&&(g.method=g.method.toUpperCase()),this.fetch.call(void 0,n,g).finally(()=>{clearTimeout(h)})}shouldRetry(n){const r=n.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:n.status===408||n.status===409||n.status===429||n.status>=500}async retryRequest(n,r,i){let s;const c=i==null?void 0:i["retry-after-ms"];if(c){const h=parseFloat(c);Number.isNaN(h)||(s=h)}const f=i==null?void 0:i["retry-after"];if(f&&!s){const h=parseFloat(f);Number.isNaN(h)?s=Date.parse(f)-Date.now():s=h*1e3}if(!(s&&0<=s&&s<60*1e3)){const h=n.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(r,h)}return await tu(s),this.makeRequest(n,r-1)}calculateDefaultRetryTimeoutMillis(n,r){const c=r-n,f=Math.min(.5*Math.pow(2,c),8),h=1-Math.random()*.25;return f*h*1e3}getUserAgent(){return`${this.constructor.name}/JS ${el}`}}class o1{constructor(n,r,i,s){Hc.set(this,void 0),ED(this,Hc,n),this.options=s,this.response=r,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const n=this.nextPageInfo();if(!n)throw new Se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in n&&typeof r.query=="object")r.query={...r.query,...n.params};else if("url"in n){const i=[...Object.entries(r.query||{}),...n.url.searchParams.entries()];for(const[s,c]of i)n.url.searchParams.set(s,c);r.query=void 0,r.path=n.url.toString()}return await AD(this,Hc,"f").requestAPIList(this.constructor,r)}async*iterPages(){let n=this;for(yield n;n.hasNextPage();)n=await n.getNextPage(),yield n}async*[(Hc=new WeakMap,Symbol.asyncIterator)](){for await(const n of this.iterPages())for(const r of n.getPaginatedItems())yield r}}class MD extends Ro{constructor(n,r,i){super(r,async s=>new i(n,s.response,await u1(s),s.options))}async*[Symbol.asyncIterator](){const n=await this;for await(const r of n)yield r}}const f1=t=>new Proxy(Object.fromEntries(t.entries()),{get(n,r){const i=r.toString();return n[i.toLowerCase()]||n[i]}}),CD={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},nt=t=>typeof t=="object"&&t!==null&&!d1(t)&&Object.keys(t).every(n=>h1(CD,n)),RD=()=>{var n;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":el,"X-Stainless-OS":T_(Deno.build.os),"X-Stainless-Arch":A_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":el,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":el,"X-Stainless-OS":T_(process.platform),"X-Stainless-Arch":A_(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=ND();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":el,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":el,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ND(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:n,pattern:r}of t){const i=r.exec(navigator.userAgent);if(i){const s=i[1]||0,c=i[2]||0,f=i[3]||0;return{browser:n,version:`${s}.${c}.${f}`}}}return null}const A_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",T_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let M_;const DD=()=>M_??(M_=RD()),OD=t=>{try{return JSON.parse(t)}catch{return}},zD=/^[a-z][a-z0-9+.-]*:/i,UD=t=>zD.test(t),tu=t=>new Promise(n=>setTimeout(n,t)),Sh=(t,n)=>{if(typeof n!="number"||!Number.isInteger(n))throw new Se(`${t} must be an integer`);if(n<0)throw new Se(`${t} must be a positive integer`);return n},Jh=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},Bc=t=>{var n,r,i,s;if(typeof process<"u")return((n=cl==null?void 0:cl[t])==null?void 0:n.trim())??void 0;if(typeof Deno<"u")return(s=(i=(r=Deno.env)==null?void 0:r.get)==null?void 0:i.call(r,t))==null?void 0:s.trim()};function d1(t){if(!t)return!0;for(const n in t)return!1;return!0}function h1(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function C_(t,n){for(const r in n){if(!h1(n,r))continue;const i=r.toLowerCase();if(!i)continue;const s=n[r];s===null?delete t[i]:s!==void 0&&(t[i]=s)}}const R_=new Set(["authorization","api-key"]);function wr(t,...n){if(typeof process<"u"&&(cl==null?void 0:cl.DEBUG)==="true"){const r=n.map(i=>{if(!i)return i;if(i.headers){const c={...i,headers:{...i.headers}};for(const f in i.headers)R_.has(f.toLowerCase())&&(c.headers[f]="REDACTED");return c}let s=null;for(const c in i)R_.has(c.toLowerCase())&&(s??(s={...i}),s[c]="REDACTED");return s??i});console.log(`OpenAI:DEBUG:${t}`,...r)}}const jD=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=Math.random()*16|0;return(t==="x"?n:n&3|8).toString(16)}),HD=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",BD=t=>typeof(t==null?void 0:t.get)=="function",Lc=(t,n)=>{var i;const r=n.toLowerCase();if(BD(t)){const s=((i=n[0])==null?void 0:i.toUpperCase())+n.substring(1).replace(/([^\w])(\w)/g,(c,f,h)=>f+h.toUpperCase());for(const c of[n,r,n.toUpperCase(),s]){const f=t.get(c);if(f)return f}}for(const[s,c]of Object.entries(t))if(s.toLowerCase()===r)return Array.isArray(c)?(c.length<=1||console.warn(`Received ${c.length} entries for the ${n} header, using the first entry.`),c[0]):c},LD=t=>{if(typeof Buffer<"u"){const n=Buffer.from(t,"base64");return Array.from(new Float32Array(n.buffer,n.byteOffset,n.length/Float32Array.BYTES_PER_ELEMENT))}else{const n=atob(t),r=n.length,i=new Uint8Array(r);for(let s=0;s<r;s++)i[s]=n.charCodeAt(s);return Array.from(new Float32Array(i.buffer))}};function Eh(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class No extends o1{constructor(n,r,i,s){super(n,r,i,s),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class bt extends o1{constructor(n,r,i,s){super(n,r,i,s),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const n=this.nextPageInfo();if(!n)return null;if("params"in n)return n.params;const r=Object.fromEntries(n.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var i;const n=this.getPaginatedItems();if(!n.length)return null;const r=(i=n[n.length-1])==null?void 0:i.id;return r?{params:{after:r}}:null}}class Ae{constructor(n){this._client=n}}let m1=class extends Ae{list(n,r={},i){return nt(r)?this.list(n,{},r):this._client.getAPIList(`/chat/completions/${n}/messages`,kD,{query:r,...i})}},Do=class extends Ae{constructor(){super(...arguments),this.messages=new m1(this._client)}create(n,r){return this._client.post("/chat/completions",{body:n,...r,stream:n.stream??!1})}retrieve(n,r){return this._client.get(`/chat/completions/${n}`,r)}update(n,r,i){return this._client.post(`/chat/completions/${n}`,{body:r,...i})}list(n={},r){return nt(n)?this.list({},n):this._client.getAPIList("/chat/completions",Oo,{query:n,...r})}del(n,r){return this._client.delete(`/chat/completions/${n}`,r)}};class Oo extends bt{}class kD extends bt{}Do.ChatCompletionsPage=Oo;Do.Messages=m1;let zo=class extends Ae{constructor(){super(...arguments),this.completions=new Do(this._client)}};zo.Completions=Do;zo.ChatCompletionsPage=Oo;class g1 extends Ae{create(n,r){return this._client.post("/audio/speech",{body:n,...r,headers:{Accept:"application/octet-stream",...r==null?void 0:r.headers},__binaryResponse:!0})}}class y1 extends Ae{create(n,r){return this._client.post("/audio/transcriptions",ri({body:n,...r,stream:n.stream??!1,__metadata:{model:n.model}}))}}class p1 extends Ae{create(n,r){return this._client.post("/audio/translations",ri({body:n,...r,__metadata:{model:n.model}}))}}class nu extends Ae{constructor(){super(...arguments),this.transcriptions=new y1(this._client),this.translations=new p1(this._client),this.speech=new g1(this._client)}}nu.Transcriptions=y1;nu.Translations=p1;nu.Speech=g1;class Um extends Ae{create(n,r){return this._client.post("/batches",{body:n,...r})}retrieve(n,r){return this._client.get(`/batches/${n}`,r)}list(n={},r){return nt(n)?this.list({},n):this._client.getAPIList("/batches",jm,{query:n,...r})}cancel(n,r){return this._client.post(`/batches/${n}/cancel`,r)}}class jm extends bt{}Um.BatchesPage=jm;var kn=function(t,n,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?t!==n||!s:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,r):s?s.value=r:n.set(t,r),r},tt=function(t,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!i:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:n.get(t)},Ph,Ic,Kc,Os,zs,Jc,Us,Ma,js,mo,go,tl,v1;class Hm{constructor(){Ph.add(this),this.controller=new AbortController,Ic.set(this,void 0),Kc.set(this,()=>{}),Os.set(this,()=>{}),zs.set(this,void 0),Jc.set(this,()=>{}),Us.set(this,()=>{}),Ma.set(this,{}),js.set(this,!1),mo.set(this,!1),go.set(this,!1),tl.set(this,!1),kn(this,Ic,new Promise((n,r)=>{kn(this,Kc,n,"f"),kn(this,Os,r,"f")}),"f"),kn(this,zs,new Promise((n,r)=>{kn(this,Jc,n,"f"),kn(this,Us,r,"f")}),"f"),tt(this,Ic,"f").catch(()=>{}),tt(this,zs,"f").catch(()=>{})}_run(n){setTimeout(()=>{n().then(()=>{this._emitFinal(),this._emit("end")},tt(this,Ph,"m",v1).bind(this))},0)}_connected(){this.ended||(tt(this,Kc,"f").call(this),this._emit("connect"))}get ended(){return tt(this,js,"f")}get errored(){return tt(this,mo,"f")}get aborted(){return tt(this,go,"f")}abort(){this.controller.abort()}on(n,r){return(tt(this,Ma,"f")[n]||(tt(this,Ma,"f")[n]=[])).push({listener:r}),this}off(n,r){const i=tt(this,Ma,"f")[n];if(!i)return this;const s=i.findIndex(c=>c.listener===r);return s>=0&&i.splice(s,1),this}once(n,r){return(tt(this,Ma,"f")[n]||(tt(this,Ma,"f")[n]=[])).push({listener:r,once:!0}),this}emitted(n){return new Promise((r,i)=>{kn(this,tl,!0,"f"),n!=="error"&&this.once("error",i),this.once(n,r)})}async done(){kn(this,tl,!0,"f"),await tt(this,zs,"f")}_emit(n,...r){if(tt(this,js,"f"))return;n==="end"&&(kn(this,js,!0,"f"),tt(this,Jc,"f").call(this));const i=tt(this,Ma,"f")[n];if(i&&(tt(this,Ma,"f")[n]=i.filter(s=>!s.once),i.forEach(({listener:s})=>s(...r))),n==="abort"){const s=r[0];!tt(this,tl,"f")&&!(i!=null&&i.length)&&Promise.reject(s),tt(this,Os,"f").call(this,s),tt(this,Us,"f").call(this,s),this._emit("end");return}if(n==="error"){const s=r[0];!tt(this,tl,"f")&&!(i!=null&&i.length)&&Promise.reject(s),tt(this,Os,"f").call(this,s),tt(this,Us,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Ic=new WeakMap,Kc=new WeakMap,Os=new WeakMap,zs=new WeakMap,Jc=new WeakMap,Us=new WeakMap,Ma=new WeakMap,js=new WeakMap,mo=new WeakMap,go=new WeakMap,tl=new WeakMap,Ph=new WeakSet,v1=function(n){if(kn(this,mo,!0,"f"),n instanceof Error&&n.name==="AbortError"&&(n=new Nn),n instanceof Nn)return kn(this,go,!0,"f"),this._emit("abort",n);if(n instanceof Se)return this._emit("error",n);if(n instanceof Error){const r=new Se(n.message);return r.cause=n,this._emit("error",r)}return this._emit("error",new Se(String(n)))};var pe=function(t,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!i:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:n.get(t)},fn=function(t,n,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?t!==n||!s:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,r):s?s.value=r:n.set(t,r),r},Ut,Wh,na,Pc,$n,Jr,il,Fr,yo,hn,Wc,eo,ks,Hs,Bs,N_,D_,O_,z_,U_,j_,H_;class Vn extends Hm{constructor(){super(...arguments),Ut.add(this),Wh.set(this,[]),na.set(this,{}),Pc.set(this,{}),$n.set(this,void 0),Jr.set(this,void 0),il.set(this,void 0),Fr.set(this,void 0),yo.set(this,void 0),hn.set(this,void 0),Wc.set(this,void 0),eo.set(this,void 0),ks.set(this,void 0)}[(Wh=new WeakMap,na=new WeakMap,Pc=new WeakMap,$n=new WeakMap,Jr=new WeakMap,il=new WeakMap,Fr=new WeakMap,yo=new WeakMap,hn=new WeakMap,Wc=new WeakMap,eo=new WeakMap,ks=new WeakMap,Ut=new WeakSet,Symbol.asyncIterator)](){const n=[],r=[];let i=!1;return this.on("event",s=>{const c=r.shift();c?c.resolve(s):n.push(s)}),this.on("end",()=>{i=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),this.on("error",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),{next:async()=>n.length?{value:n.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((c,f)=>r.push({resolve:c,reject:f})).then(c=>c?{value:c,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(n){const r=new Vn;return r._run(()=>r._fromReadableStream(n)),r}async _fromReadableStream(n,r){var c;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=aa.fromReadableStream(n,this.controller);for await(const f of s)pe(this,Ut,"m",Hs).call(this,f);if((c=s.controller.signal)!=null&&c.aborted)throw new Nn;return this._addRun(pe(this,Ut,"m",Bs).call(this))}toReadableStream(){return new aa(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(n,r,i,s,c){const f=new Vn;return f._run(()=>f._runToolAssistantStream(n,r,i,s,{...c,headers:{...c==null?void 0:c.headers,"X-Stainless-Helper-Method":"stream"}})),f}async _createToolAssistantStream(n,r,i,s,c){var m;const f=c==null?void 0:c.signal;f&&(f.aborted&&this.controller.abort(),f.addEventListener("abort",()=>this.controller.abort()));const h={...s,stream:!0},g=await n.submitToolOutputs(r,i,h,{...c,signal:this.controller.signal});this._connected();for await(const y of g)pe(this,Ut,"m",Hs).call(this,y);if((m=g.controller.signal)!=null&&m.aborted)throw new Nn;return this._addRun(pe(this,Ut,"m",Bs).call(this))}static createThreadAssistantStream(n,r,i){const s=new Vn;return s._run(()=>s._threadAssistantStream(n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(n,r,i,s){const c=new Vn;return c._run(()=>c._runAssistantStream(n,r,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),c}currentEvent(){return pe(this,Wc,"f")}currentRun(){return pe(this,eo,"f")}currentMessageSnapshot(){return pe(this,$n,"f")}currentRunStepSnapshot(){return pe(this,ks,"f")}async finalRunSteps(){return await this.done(),Object.values(pe(this,na,"f"))}async finalMessages(){return await this.done(),Object.values(pe(this,Pc,"f"))}async finalRun(){if(await this.done(),!pe(this,Jr,"f"))throw Error("Final run was not received.");return pe(this,Jr,"f")}async _createThreadAssistantStream(n,r,i){var h;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const c={...r,stream:!0},f=await n.createAndRun(c,{...i,signal:this.controller.signal});this._connected();for await(const g of f)pe(this,Ut,"m",Hs).call(this,g);if((h=f.controller.signal)!=null&&h.aborted)throw new Nn;return this._addRun(pe(this,Ut,"m",Bs).call(this))}async _createAssistantStream(n,r,i,s){var g;const c=s==null?void 0:s.signal;c&&(c.aborted&&this.controller.abort(),c.addEventListener("abort",()=>this.controller.abort()));const f={...i,stream:!0},h=await n.create(r,f,{...s,signal:this.controller.signal});this._connected();for await(const m of h)pe(this,Ut,"m",Hs).call(this,m);if((g=h.controller.signal)!=null&&g.aborted)throw new Nn;return this._addRun(pe(this,Ut,"m",Bs).call(this))}static accumulateDelta(n,r){for(const[i,s]of Object.entries(r)){if(!n.hasOwnProperty(i)){n[i]=s;continue}let c=n[i];if(c==null){n[i]=s;continue}if(i==="index"||i==="type"){n[i]=s;continue}if(typeof c=="string"&&typeof s=="string")c+=s;else if(typeof c=="number"&&typeof s=="number")c+=s;else if(Eh(c)&&Eh(s))c=this.accumulateDelta(c,s);else if(Array.isArray(c)&&Array.isArray(s)){if(c.every(f=>typeof f=="string"||typeof f=="number")){c.push(...s);continue}for(const f of s){if(!Eh(f))throw new Error(`Expected array delta entry to be an object but got: ${f}`);const h=f.index;if(h==null)throw console.error(f),new Error("Expected array delta entry to have an `index` property");if(typeof h!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${h}`);const g=c[h];g==null?c.push(f):c[h]=this.accumulateDelta(g,f)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${s}, accValue: ${c}`);n[i]=c}return n}_addRun(n){return n}async _threadAssistantStream(n,r,i){return await this._createThreadAssistantStream(r,n,i)}async _runAssistantStream(n,r,i,s){return await this._createAssistantStream(r,n,i,s)}async _runToolAssistantStream(n,r,i,s,c){return await this._createToolAssistantStream(i,n,r,s,c)}}Hs=function(n){if(!this.ended)switch(fn(this,Wc,n,"f"),pe(this,Ut,"m",O_).call(this,n),n.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":pe(this,Ut,"m",H_).call(this,n);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":pe(this,Ut,"m",D_).call(this,n);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":pe(this,Ut,"m",N_).call(this,n);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Bs=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");if(!pe(this,Jr,"f"))throw Error("Final run has not been received");return pe(this,Jr,"f")},N_=function(n){const[r,i]=pe(this,Ut,"m",U_).call(this,n,pe(this,$n,"f"));fn(this,$n,r,"f"),pe(this,Pc,"f")[r.id]=r;for(const s of i){const c=r.content[s.index];(c==null?void 0:c.type)=="text"&&this._emit("textCreated",c.text)}switch(n.event){case"thread.message.created":this._emit("messageCreated",n.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",n.data.delta,r),n.data.delta.content)for(const s of n.data.delta.content){if(s.type=="text"&&s.text){let c=s.text,f=r.content[s.index];if(f&&f.type=="text")this._emit("textDelta",c,f.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=pe(this,il,"f")){if(pe(this,Fr,"f"))switch(pe(this,Fr,"f").type){case"text":this._emit("textDone",pe(this,Fr,"f").text,pe(this,$n,"f"));break;case"image_file":this._emit("imageFileDone",pe(this,Fr,"f").image_file,pe(this,$n,"f"));break}fn(this,il,s.index,"f")}fn(this,Fr,r.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(pe(this,il,"f")!==void 0){const s=n.data.content[pe(this,il,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,pe(this,$n,"f"));break;case"text":this._emit("textDone",s.text,pe(this,$n,"f"));break}}pe(this,$n,"f")&&this._emit("messageDone",n.data),fn(this,$n,void 0,"f")}},D_=function(n){const r=pe(this,Ut,"m",z_).call(this,n);switch(fn(this,ks,r,"f"),n.event){case"thread.run.step.created":this._emit("runStepCreated",n.data);break;case"thread.run.step.delta":const i=n.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const c of i.step_details.tool_calls)c.index==pe(this,yo,"f")?this._emit("toolCallDelta",c,r.step_details.tool_calls[c.index]):(pe(this,hn,"f")&&this._emit("toolCallDone",pe(this,hn,"f")),fn(this,yo,c.index,"f"),fn(this,hn,r.step_details.tool_calls[c.index],"f"),pe(this,hn,"f")&&this._emit("toolCallCreated",pe(this,hn,"f")));this._emit("runStepDelta",n.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":fn(this,ks,void 0,"f"),n.data.step_details.type=="tool_calls"&&pe(this,hn,"f")&&(this._emit("toolCallDone",pe(this,hn,"f")),fn(this,hn,void 0,"f")),this._emit("runStepDone",n.data,r);break}},O_=function(n){pe(this,Wh,"f").push(n),this._emit("event",n)},z_=function(n){switch(n.event){case"thread.run.step.created":return pe(this,na,"f")[n.data.id]=n.data,n.data;case"thread.run.step.delta":let r=pe(this,na,"f")[n.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let i=n.data;if(i.delta){const s=Vn.accumulateDelta(r,i.delta);pe(this,na,"f")[n.data.id]=s}return pe(this,na,"f")[n.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":pe(this,na,"f")[n.data.id]=n.data;break}if(pe(this,na,"f")[n.data.id])return pe(this,na,"f")[n.data.id];throw new Error("No snapshot available")},U_=function(n,r){let i=[];switch(n.event){case"thread.message.created":return[n.data,i];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=n.data;if(s.delta.content)for(const c of s.delta.content)if(c.index in r.content){let f=r.content[c.index];r.content[c.index]=pe(this,Ut,"m",j_).call(this,c,f)}else r.content[c.index]=c,i.push(c);return[r,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},j_=function(n,r){return Vn.accumulateDelta(r,n)},H_=function(n){switch(fn(this,eo,n.data,"f"),n.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":fn(this,Jr,n.data,"f"),pe(this,hn,"f")&&(this._emit("toolCallDone",pe(this,hn,"f")),fn(this,hn,void 0,"f"));break}};class Bm extends Ae{create(n,r){return this._client.post("/assistants",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(n,r){return this._client.get(`/assistants/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(n,r,i){return this._client.post(`/assistants/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(n={},r){return nt(n)?this.list({},n):this._client.getAPIList("/assistants",Lm,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(n,r){return this._client.delete(`/assistants/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Lm extends bt{}Bm.AssistantsPage=Lm;function B_(t){return typeof t.parse=="function"}const ol=t=>(t==null?void 0:t.role)==="assistant",_1=t=>(t==null?void 0:t.role)==="function",b1=t=>(t==null?void 0:t.role)==="tool";function km(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function au(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function $D(t,n){return!n||!w1(n)?{...t,choices:t.choices.map(r=>({...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:$m(t,n)}function $m(t,n){const r=t.choices.map(i=>{var s;if(i.finish_reason==="length")throw new n1;if(i.finish_reason==="content_filter")throw new a1;return{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:((s=i.message.tool_calls)==null?void 0:s.map(c=>qD(n,c)))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?YD(n,i.message.content):null}}});return{...t,choices:r}}function YD(t,n){var r,i;return((r=t.response_format)==null?void 0:r.type)!=="json_schema"?null:((i=t.response_format)==null?void 0:i.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(n):JSON.parse(n):null}function qD(t,n){var i;const r=(i=t.tools)==null?void 0:i.find(s=>{var c;return((c=s.function)==null?void 0:c.name)===n.function.name});return{...n,function:{...n.function,parsed_arguments:au(r)?r.$parseRaw(n.function.arguments):r!=null&&r.function.strict?JSON.parse(n.function.arguments):null}}}function XD(t,n){var i;if(!t)return!1;const r=(i=t.tools)==null?void 0:i.find(s=>{var c;return((c=s.function)==null?void 0:c.name)===n.function.name});return au(r)||(r==null?void 0:r.function.strict)||!1}function w1(t){var n;return km(t.response_format)?!0:((n=t.tools)==null?void 0:n.some(r=>au(r)||r.type==="function"&&r.function.strict===!0))??!1}function VD(t){for(const n of t??[]){if(n.type!=="function")throw new Se(`Currently only \`function\` tool types support auto-parsing; Received \`${n.type}\``);if(n.function.strict!==!0)throw new Se(`The \`${n.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Jt=function(t,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!i:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:n.get(t)},Yt,em,po,tm,nm,am,x1,rm;const L_=10;class S1 extends Hm{constructor(){super(...arguments),Yt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(n){var i;this._chatCompletions.push(n),this._emit("chatCompletion",n);const r=(i=n.choices[0])==null?void 0:i.message;return r&&this._addMessage(r),n}_addMessage(n,r=!0){if("content"in n||(n.content=null),this.messages.push(n),r){if(this._emit("message",n),(_1(n)||b1(n))&&n.content)this._emit("functionCallResult",n.content);else if(ol(n)&&n.function_call)this._emit("functionCall",n.function_call);else if(ol(n)&&n.tool_calls)for(const i of n.tool_calls)i.type==="function"&&this._emit("functionCall",i.function)}}async finalChatCompletion(){await this.done();const n=this._chatCompletions[this._chatCompletions.length-1];if(!n)throw new Se("stream ended without producing a ChatCompletion");return n}async finalContent(){return await this.done(),Jt(this,Yt,"m",em).call(this)}async finalMessage(){return await this.done(),Jt(this,Yt,"m",po).call(this)}async finalFunctionCall(){return await this.done(),Jt(this,Yt,"m",tm).call(this)}async finalFunctionCallResult(){return await this.done(),Jt(this,Yt,"m",nm).call(this)}async totalUsage(){return await this.done(),Jt(this,Yt,"m",am).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const n=this._chatCompletions[this._chatCompletions.length-1];n&&this._emit("finalChatCompletion",n);const r=Jt(this,Yt,"m",po).call(this);r&&this._emit("finalMessage",r);const i=Jt(this,Yt,"m",em).call(this);i&&this._emit("finalContent",i);const s=Jt(this,Yt,"m",tm).call(this);s&&this._emit("finalFunctionCall",s);const c=Jt(this,Yt,"m",nm).call(this);c!=null&&this._emit("finalFunctionCallResult",c),this._chatCompletions.some(f=>f.usage)&&this._emit("totalUsage",Jt(this,Yt,"m",am).call(this))}async _createChatCompletion(n,r,i){const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Jt(this,Yt,"m",x1).call(this,r);const c=await n.chat.completions.create({...r,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion($m(c,r))}async _runChatCompletion(n,r,i){for(const s of r.messages)this._addMessage(s,!1);return await this._createChatCompletion(n,r,i)}async _runFunctions(n,r,i){var v;const s="function",{function_call:c="auto",stream:f,...h}=r,g=typeof c!="string"&&(c==null?void 0:c.name),{maxChatCompletions:m=L_}=i||{},y={};for(const b of r.functions)y[b.name||b.function.name]=b;const p=r.functions.map(b=>({name:b.name||b.function.name,parameters:b.parameters,description:b.description}));for(const b of r.messages)this._addMessage(b,!1);for(let b=0;b<m;++b){const w=(v=(await this._createChatCompletion(n,{...h,function_call:c,functions:p,messages:[...this.messages]},i)).choices[0])==null?void 0:v.message;if(!w)throw new Se("missing message in ChatCompletion response");if(!w.function_call)return;const{name:C,arguments:N}=w.function_call,T=y[C];if(T){if(g&&g!==C){const j=`Invalid function_call: ${JSON.stringify(C)}. ${JSON.stringify(g)} requested. Please try again`;this._addMessage({role:s,name:C,content:j});continue}}else{const j=`Invalid function_call: ${JSON.stringify(C)}. Available options are: ${p.map(k=>JSON.stringify(k.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:C,content:j});continue}let O;try{O=B_(T)?await T.parse(N):N}catch(j){this._addMessage({role:s,name:C,content:j instanceof Error?j.message:String(j)});continue}const M=await T.function(O,this),H=Jt(this,Yt,"m",rm).call(this,M);if(this._addMessage({role:s,name:C,content:H}),g)return}}async _runTools(n,r,i){var b,S,w;const s="tool",{tool_choice:c="auto",stream:f,...h}=r,g=typeof c!="string"&&((b=c==null?void 0:c.function)==null?void 0:b.name),{maxChatCompletions:m=L_}=i||{},y=r.tools.map(C=>{if(au(C)){if(!C.$callback)throw new Se("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:C.$callback,name:C.function.name,description:C.function.description||"",parameters:C.function.parameters,parse:C.$parseRaw,strict:!0}}}return C}),p={};for(const C of y)C.type==="function"&&(p[C.function.name||C.function.function.name]=C.function);const v="tools"in r?y.map(C=>C.type==="function"?{type:"function",function:{name:C.function.name||C.function.function.name,parameters:C.function.parameters,description:C.function.description,strict:C.function.strict}}:C):void 0;for(const C of r.messages)this._addMessage(C,!1);for(let C=0;C<m;++C){const T=(S=(await this._createChatCompletion(n,{...h,tool_choice:c,tools:v,messages:[...this.messages]},i)).choices[0])==null?void 0:S.message;if(!T)throw new Se("missing message in ChatCompletion response");if(!((w=T.tool_calls)!=null&&w.length))return;for(const O of T.tool_calls){if(O.type!=="function")continue;const M=O.id,{name:H,arguments:j}=O.function,k=p[H];if(k){if(g&&g!==H){const W=`Invalid tool_call: ${JSON.stringify(H)}. ${JSON.stringify(g)} requested. Please try again`;this._addMessage({role:s,tool_call_id:M,content:W});continue}}else{const W=`Invalid tool_call: ${JSON.stringify(H)}. Available options are: ${Object.keys(p).map(ne=>JSON.stringify(ne)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:M,content:W});continue}let F;try{F=B_(k)?await k.parse(j):j}catch(W){const ne=W instanceof Error?W.message:String(W);this._addMessage({role:s,tool_call_id:M,content:ne});continue}const X=await k.function(F,this),ee=Jt(this,Yt,"m",rm).call(this,X);if(this._addMessage({role:s,tool_call_id:M,content:ee}),g)return}}}}Yt=new WeakSet,em=function(){return Jt(this,Yt,"m",po).call(this).content??null},po=function(){let n=this.messages.length;for(;n-- >0;){const r=this.messages[n];if(ol(r)){const{function_call:i,...s}=r,c={...s,content:r.content??null,refusal:r.refusal??null};return i&&(c.function_call=i),c}}throw new Se("stream ended without producing a ChatCompletionMessage with role=assistant")},tm=function(){var n,r;for(let i=this.messages.length-1;i>=0;i--){const s=this.messages[i];if(ol(s)&&(s!=null&&s.function_call))return s.function_call;if(ol(s)&&((n=s==null?void 0:s.tool_calls)!=null&&n.length))return(r=s.tool_calls.at(-1))==null?void 0:r.function}},nm=function(){for(let n=this.messages.length-1;n>=0;n--){const r=this.messages[n];if(_1(r)&&r.content!=null||b1(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(i=>{var s;return i.role==="assistant"&&((s=i.tool_calls)==null?void 0:s.some(c=>c.type==="function"&&c.id===r.tool_call_id))}))return r.content}},am=function(){const n={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(n.completion_tokens+=r.completion_tokens,n.prompt_tokens+=r.prompt_tokens,n.total_tokens+=r.total_tokens);return n},x1=function(n){if(n.n!=null&&n.n>1)throw new Se("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},rm=function(n){return typeof n=="string"?n:n===void 0?"undefined":JSON.stringify(n)};class Fs extends S1{static runFunctions(n,r,i){const s=new Fs,c={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(n,r,c)),s}static runTools(n,r,i){const s=new Fs,c={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(n,r,c)),s}_addMessage(n,r=!0){super._addMessage(n,r),ol(n)&&n.content&&this._emit("content",n.content)}}const E1=1,A1=2,T1=4,M1=8,C1=16,R1=32,N1=64,D1=128,O1=256,z1=D1|O1,U1=C1|R1|z1|N1,j1=E1|A1|U1,H1=T1|M1,GD=j1|H1,Mt={STR:E1,NUM:A1,ARR:T1,OBJ:M1,NULL:C1,BOOL:R1,NAN:N1,INFINITY:D1,MINUS_INFINITY:O1,INF:z1,SPECIAL:U1,ATOM:j1,COLLECTION:H1,ALL:GD};class QD extends Error{}class ZD extends Error{}function FD(t,n=Mt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return ID(t.trim(),n)}const ID=(t,n)=>{const r=t.length;let i=0;const s=v=>{throw new QD(`${v} at position ${i}`)},c=v=>{throw new ZD(`${v} at position ${i}`)},f=()=>(p(),i>=r&&s("Unexpected end of input"),t[i]==='"'?h():t[i]==="{"?g():t[i]==="["?m():t.substring(i,i+4)==="null"||Mt.NULL&n&&r-i<4&&"null".startsWith(t.substring(i))?(i+=4,null):t.substring(i,i+4)==="true"||Mt.BOOL&n&&r-i<4&&"true".startsWith(t.substring(i))?(i+=4,!0):t.substring(i,i+5)==="false"||Mt.BOOL&n&&r-i<5&&"false".startsWith(t.substring(i))?(i+=5,!1):t.substring(i,i+8)==="Infinity"||Mt.INFINITY&n&&r-i<8&&"Infinity".startsWith(t.substring(i))?(i+=8,1/0):t.substring(i,i+9)==="-Infinity"||Mt.MINUS_INFINITY&n&&1<r-i&&r-i<9&&"-Infinity".startsWith(t.substring(i))?(i+=9,-1/0):t.substring(i,i+3)==="NaN"||Mt.NAN&n&&r-i<3&&"NaN".startsWith(t.substring(i))?(i+=3,NaN):y()),h=()=>{const v=i;let b=!1;for(i++;i<r&&(t[i]!=='"'||b&&t[i-1]==="\\");)b=t[i]==="\\"?!b:!1,i++;if(t.charAt(i)=='"')try{return JSON.parse(t.substring(v,++i-Number(b)))}catch(S){c(String(S))}else if(Mt.STR&n)try{return JSON.parse(t.substring(v,i-Number(b))+'"')}catch{return JSON.parse(t.substring(v,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},g=()=>{i++,p();const v={};try{for(;t[i]!=="}";){if(p(),i>=r&&Mt.OBJ&n)return v;const b=h();p(),i++;try{const S=f();Object.defineProperty(v,b,{value:S,writable:!0,enumerable:!0,configurable:!0})}catch(S){if(Mt.OBJ&n)return v;throw S}p(),t[i]===","&&i++}}catch{if(Mt.OBJ&n)return v;s("Expected '}' at end of object")}return i++,v},m=()=>{i++;const v=[];try{for(;t[i]!=="]";)v.push(f()),p(),t[i]===","&&i++}catch{if(Mt.ARR&n)return v;s("Expected ']' at end of array")}return i++,v},y=()=>{if(i===0){t==="-"&&Mt.NUM&n&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(b){if(Mt.NUM&n)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}c(String(b))}}const v=i;for(t[i]==="-"&&i++;t[i]&&!",]}".includes(t[i]);)i++;i==r&&!(Mt.NUM&n)&&s("Unterminated number literal");try{return JSON.parse(t.substring(v,i))}catch{t.substring(v,i)==="-"&&Mt.NUM&n&&s("Not sure what '-' is");try{return JSON.parse(t.substring(v,t.lastIndexOf("e")))}catch(S){c(String(S))}}},p=()=>{for(;i<r&&` 
\r	`.includes(t[i]);)i++};return f()},k_=t=>FD(t,Mt.ALL^Mt.NUM);var Ki=function(t,n,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?t!==n||!s:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,r):s?s.value=r:n.set(t,r),r},Fe=function(t,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!i:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:n.get(t)},yt,Ta,Ji,gr,Ah,kc,Th,Mh,Ch,$c,Rh,$_;class Is extends S1{constructor(n){super(),yt.add(this),Ta.set(this,void 0),Ji.set(this,void 0),gr.set(this,void 0),Ki(this,Ta,n,"f"),Ki(this,Ji,[],"f")}get currentChatCompletionSnapshot(){return Fe(this,gr,"f")}static fromReadableStream(n){const r=new Is(null);return r._run(()=>r._fromReadableStream(n)),r}static createChatCompletion(n,r,i){const s=new Is(r);return s._run(()=>s._runChatCompletion(n,{...r,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(n,r,i){var f;super._createChatCompletion;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Fe(this,yt,"m",Ah).call(this);const c=await n.chat.completions.create({...r,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const h of c)Fe(this,yt,"m",Th).call(this,h);if((f=c.controller.signal)!=null&&f.aborted)throw new Nn;return this._addChatCompletion(Fe(this,yt,"m",$c).call(this))}async _fromReadableStream(n,r){var f;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Fe(this,yt,"m",Ah).call(this),this._connected();const s=aa.fromReadableStream(n,this.controller);let c;for await(const h of s)c&&c!==h.id&&this._addChatCompletion(Fe(this,yt,"m",$c).call(this)),Fe(this,yt,"m",Th).call(this,h),c=h.id;if((f=s.controller.signal)!=null&&f.aborted)throw new Nn;return this._addChatCompletion(Fe(this,yt,"m",$c).call(this))}[(Ta=new WeakMap,Ji=new WeakMap,gr=new WeakMap,yt=new WeakSet,Ah=function(){this.ended||Ki(this,gr,void 0,"f")},kc=function(r){let i=Fe(this,Ji,"f")[r.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Fe(this,Ji,"f")[r.index]=i,i)},Th=function(r){var s,c,f,h,g,m,y,p,v,b,S,w,C,N,T;if(this.ended)return;const i=Fe(this,yt,"m",$_).call(this,r);this._emit("chunk",r,i);for(const O of r.choices){const M=i.choices[O.index];O.delta.content!=null&&((s=M.message)==null?void 0:s.role)==="assistant"&&((c=M.message)!=null&&c.content)&&(this._emit("content",O.delta.content,M.message.content),this._emit("content.delta",{delta:O.delta.content,snapshot:M.message.content,parsed:M.message.parsed})),O.delta.refusal!=null&&((f=M.message)==null?void 0:f.role)==="assistant"&&((h=M.message)!=null&&h.refusal)&&this._emit("refusal.delta",{delta:O.delta.refusal,snapshot:M.message.refusal}),((g=O.logprobs)==null?void 0:g.content)!=null&&((m=M.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(y=O.logprobs)==null?void 0:y.content,snapshot:((p=M.logprobs)==null?void 0:p.content)??[]}),((v=O.logprobs)==null?void 0:v.refusal)!=null&&((b=M.message)==null?void 0:b.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(S=O.logprobs)==null?void 0:S.refusal,snapshot:((w=M.logprobs)==null?void 0:w.refusal)??[]});const H=Fe(this,yt,"m",kc).call(this,M);M.finish_reason&&(Fe(this,yt,"m",Ch).call(this,M),H.current_tool_call_index!=null&&Fe(this,yt,"m",Mh).call(this,M,H.current_tool_call_index));for(const j of O.delta.tool_calls??[])H.current_tool_call_index!==j.index&&(Fe(this,yt,"m",Ch).call(this,M),H.current_tool_call_index!=null&&Fe(this,yt,"m",Mh).call(this,M,H.current_tool_call_index)),H.current_tool_call_index=j.index;for(const j of O.delta.tool_calls??[]){const k=(C=M.message.tool_calls)==null?void 0:C[j.index];k!=null&&k.type&&((k==null?void 0:k.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(N=k.function)==null?void 0:N.name,index:j.index,arguments:k.function.arguments,parsed_arguments:k.function.parsed_arguments,arguments_delta:((T=j.function)==null?void 0:T.arguments)??""}):(k==null||k.type,void 0))}}},Mh=function(r,i){var f,h,g;if(Fe(this,yt,"m",kc).call(this,r).done_tool_calls.has(i))return;const c=(f=r.message.tool_calls)==null?void 0:f[i];if(!c)throw new Error("no tool call snapshot");if(!c.type)throw new Error("tool call snapshot missing `type`");if(c.type==="function"){const m=(g=(h=Fe(this,Ta,"f"))==null?void 0:h.tools)==null?void 0:g.find(y=>y.type==="function"&&y.function.name===c.function.name);this._emit("tool_calls.function.arguments.done",{name:c.function.name,index:i,arguments:c.function.arguments,parsed_arguments:au(m)?m.$parseRaw(c.function.arguments):m!=null&&m.function.strict?JSON.parse(c.function.arguments):null})}else c.type},Ch=function(r){var s,c;const i=Fe(this,yt,"m",kc).call(this,r);if(r.message.content&&!i.content_done){i.content_done=!0;const f=Fe(this,yt,"m",Rh).call(this);this._emit("content.done",{content:r.message.content,parsed:f?f.$parseRaw(r.message.content):null})}r.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),(s=r.logprobs)!=null&&s.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),(c=r.logprobs)!=null&&c.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},$c=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const r=Fe(this,gr,"f");if(!r)throw new Se("request ended without sending any chunks");return Ki(this,gr,void 0,"f"),Ki(this,Ji,[],"f"),KD(r,Fe(this,Ta,"f"))},Rh=function(){var i;const r=(i=Fe(this,Ta,"f"))==null?void 0:i.response_format;return km(r)?r:null},$_=function(r){var i,s,c,f;let h=Fe(this,gr,"f");const{choices:g,...m}=r;h?Object.assign(h,m):h=Ki(this,gr,{...m,choices:[]},"f");for(const{delta:y,finish_reason:p,index:v,logprobs:b=null,...S}of r.choices){let w=h.choices[v];if(w||(w=h.choices[v]={finish_reason:p,index:v,message:{},logprobs:b,...S}),b)if(!w.logprobs)w.logprobs=Object.assign({},b);else{const{content:j,refusal:k,...F}=b;Object.assign(w.logprobs,F),j&&((i=w.logprobs).content??(i.content=[]),w.logprobs.content.push(...j)),k&&((s=w.logprobs).refusal??(s.refusal=[]),w.logprobs.refusal.push(...k))}if(p&&(w.finish_reason=p,Fe(this,Ta,"f")&&w1(Fe(this,Ta,"f")))){if(p==="length")throw new n1;if(p==="content_filter")throw new a1}if(Object.assign(w,S),!y)continue;const{content:C,refusal:N,function_call:T,role:O,tool_calls:M,...H}=y;if(Object.assign(w.message,H),N&&(w.message.refusal=(w.message.refusal||"")+N),O&&(w.message.role=O),T&&(w.message.function_call?(T.name&&(w.message.function_call.name=T.name),T.arguments&&((c=w.message.function_call).arguments??(c.arguments=""),w.message.function_call.arguments+=T.arguments)):w.message.function_call=T),C&&(w.message.content=(w.message.content||"")+C,!w.message.refusal&&Fe(this,yt,"m",Rh).call(this)&&(w.message.parsed=k_(w.message.content))),M){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:j,id:k,type:F,function:X,...ee}of M){const W=(f=w.message.tool_calls)[j]??(f[j]={});Object.assign(W,ee),k&&(W.id=k),F&&(W.type=F),X&&(W.function??(W.function={name:X.name??"",arguments:""})),X!=null&&X.name&&(W.function.name=X.name),X!=null&&X.arguments&&(W.function.arguments+=X.arguments,XD(Fe(this,Ta,"f"),W)&&(W.function.parsed_arguments=k_(W.function.arguments)))}}}return h},Symbol.asyncIterator)](){const n=[],r=[];let i=!1;return this.on("chunk",s=>{const c=r.shift();c?c.resolve(s):n.push(s)}),this.on("end",()=>{i=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),this.on("error",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),{next:async()=>n.length?{value:n.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((c,f)=>r.push({resolve:c,reject:f})).then(c=>c?{value:c,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new aa(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function KD(t,n){const{id:r,choices:i,created:s,model:c,system_fingerprint:f,...h}=t,g={...h,id:r,choices:i.map(({message:m,finish_reason:y,index:p,logprobs:v,...b})=>{if(!y)throw new Se(`missing finish_reason for choice ${p}`);const{content:S=null,function_call:w,tool_calls:C,...N}=m,T=m.role;if(!T)throw new Se(`missing role for choice ${p}`);if(w){const{arguments:O,name:M}=w;if(O==null)throw new Se(`missing function_call.arguments for choice ${p}`);if(!M)throw new Se(`missing function_call.name for choice ${p}`);return{...b,message:{content:S,function_call:{arguments:O,name:M},role:T,refusal:m.refusal??null},finish_reason:y,index:p,logprobs:v}}return C?{...b,index:p,finish_reason:y,logprobs:v,message:{...N,role:T,content:S,refusal:m.refusal??null,tool_calls:C.map((O,M)=>{const{function:H,type:j,id:k,...F}=O,{arguments:X,name:ee,...W}=H||{};if(k==null)throw new Se(`missing choices[${p}].tool_calls[${M}].id
${Yc(t)}`);if(j==null)throw new Se(`missing choices[${p}].tool_calls[${M}].type
${Yc(t)}`);if(ee==null)throw new Se(`missing choices[${p}].tool_calls[${M}].function.name
${Yc(t)}`);if(X==null)throw new Se(`missing choices[${p}].tool_calls[${M}].function.arguments
${Yc(t)}`);return{...F,id:k,type:j,function:{...W,name:ee,arguments:X}}})}}:{...b,message:{...N,content:S,role:T,refusal:m.refusal??null},finish_reason:y,index:p,logprobs:v}}),created:s,model:c,object:"chat.completion",...f?{system_fingerprint:f}:{}};return $D(g,n)}function Yc(t){return JSON.stringify(t)}class fl extends Is{static fromReadableStream(n){const r=new fl(null);return r._run(()=>r._fromReadableStream(n)),r}static runFunctions(n,r,i){const s=new fl(null),c={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(n,r,c)),s}static runTools(n,r,i){const s=new fl(r),c={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(n,r,c)),s}}let B1=class extends Ae{parse(n,r){return VD(n.tools),this._client.chat.completions.create(n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(i=>$m(i,n))}runFunctions(n,r){return n.stream?fl.runFunctions(this._client,n,r):Fs.runFunctions(this._client,n,r)}runTools(n,r){return n.stream?fl.runTools(this._client,n,r):Fs.runTools(this._client,n,r)}stream(n,r){return Is.createChatCompletion(this._client,n,r)}};class im extends Ae{constructor(){super(...arguments),this.completions=new B1(this._client)}}(function(t){t.Completions=B1})(im||(im={}));class L1 extends Ae{create(n,r){return this._client.post("/realtime/sessions",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class k1 extends Ae{create(n,r){return this._client.post("/realtime/transcription_sessions",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Uo extends Ae{constructor(){super(...arguments),this.sessions=new L1(this._client),this.transcriptionSessions=new k1(this._client)}}Uo.Sessions=L1;Uo.TranscriptionSessions=k1;class Ym extends Ae{create(n,r,i){return this._client.post(`/threads/${n}/messages`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(n,r,i){return this._client.get(`/threads/${n}/messages/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(n,r,i,s){return this._client.post(`/threads/${n}/messages/${r}`,{body:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(n,r={},i){return nt(r)?this.list(n,{},r):this._client.getAPIList(`/threads/${n}/messages`,qm,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(n,r,i){return this._client.delete(`/threads/${n}/messages/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class qm extends bt{}Ym.MessagesPage=qm;class Xm extends Ae{retrieve(n,r,i,s={},c){return nt(s)?this.retrieve(n,r,i,{},s):this._client.get(`/threads/${n}/runs/${r}/steps/${i}`,{query:s,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}list(n,r,i={},s){return nt(i)?this.list(n,r,{},i):this._client.getAPIList(`/threads/${n}/runs/${r}/steps`,Vm,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Vm extends bt{}Xm.RunStepsPage=Vm;let ru=class extends Ae{constructor(){super(...arguments),this.steps=new Xm(this._client)}create(n,r,i){const{include:s,...c}=r;return this._client.post(`/threads/${n}/runs`,{query:{include:s},body:c,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}retrieve(n,r,i){return this._client.get(`/threads/${n}/runs/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(n,r,i,s){return this._client.post(`/threads/${n}/runs/${r}`,{body:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(n,r={},i){return nt(r)?this.list(n,{},r):this._client.getAPIList(`/threads/${n}/runs`,Gm,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}cancel(n,r,i){return this._client.post(`/threads/${n}/runs/${r}/cancel`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(n,r,i){const s=await this.create(n,r,i);return await this.poll(n,s.id,i)}createAndStream(n,r,i){return Vn.createAssistantStream(n,this._client.beta.threads.runs,r,i)}async poll(n,r,i){const s={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const{data:c,response:f}=await this.retrieve(n,r,{...i,headers:{...i==null?void 0:i.headers,...s}}).withResponse();switch(c.status){case"queued":case"in_progress":case"cancelling":let h=5e3;if(i!=null&&i.pollIntervalMs)h=i.pollIntervalMs;else{const g=f.headers.get("openai-poll-after-ms");if(g){const m=parseInt(g);isNaN(m)||(h=m)}}await tu(h);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return c}}}stream(n,r,i){return Vn.createAssistantStream(n,this._client.beta.threads.runs,r,i)}submitToolOutputs(n,r,i,s){return this._client.post(`/threads/${n}/runs/${r}/submit_tool_outputs`,{body:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:i.stream??!1})}async submitToolOutputsAndPoll(n,r,i,s){const c=await this.submitToolOutputs(n,r,i,s);return await this.poll(n,c.id,s)}submitToolOutputsStream(n,r,i,s){return Vn.createToolAssistantStream(n,r,this._client.beta.threads.runs,i,s)}};class Gm extends bt{}ru.RunsPage=Gm;ru.Steps=Xm;ru.RunStepsPage=Vm;class vl extends Ae{constructor(){super(...arguments),this.runs=new ru(this._client),this.messages=new Ym(this._client)}create(n={},r){return nt(n)?this.create({},n):this._client.post("/threads",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(n,r){return this._client.get(`/threads/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(n,r,i){return this._client.post(`/threads/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(n,r){return this._client.delete(`/threads/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}createAndRun(n,r){return this._client.post("/threads/runs",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}async createAndRunPoll(n,r){const i=await this.createAndRun(n,r);return await this.runs.poll(i.thread_id,i.id,r)}createAndRunStream(n,r){return Vn.createThreadAssistantStream(n,this._client.beta.threads,r)}}vl.Runs=ru;vl.RunsPage=Gm;vl.Messages=Ym;vl.MessagesPage=qm;class _l extends Ae{constructor(){super(...arguments),this.realtime=new Uo(this._client),this.chat=new im(this._client),this.assistants=new Bm(this._client),this.threads=new vl(this._client)}}_l.Realtime=Uo;_l.Assistants=Bm;_l.AssistantsPage=Lm;_l.Threads=vl;class $1 extends Ae{create(n,r){return this._client.post("/completions",{body:n,...r,stream:n.stream??!1})}}class Y1 extends Ae{retrieve(n,r,i){return this._client.get(`/containers/${n}/files/${r}/content`,{...i,headers:{Accept:"application/binary",...i==null?void 0:i.headers},__binaryResponse:!0})}}let jo=class extends Ae{constructor(){super(...arguments),this.content=new Y1(this._client)}create(n,r,i){return this._client.post(`/containers/${n}/files`,ri({body:r,...i}))}retrieve(n,r,i){return this._client.get(`/containers/${n}/files/${r}`,i)}list(n,r={},i){return nt(r)?this.list(n,{},r):this._client.getAPIList(`/containers/${n}/files`,Qm,{query:r,...i})}del(n,r,i){return this._client.delete(`/containers/${n}/files/${r}`,{...i,headers:{Accept:"*/*",...i==null?void 0:i.headers}})}};class Qm extends bt{}jo.FileListResponsesPage=Qm;jo.Content=Y1;class iu extends Ae{constructor(){super(...arguments),this.files=new jo(this._client)}create(n,r){return this._client.post("/containers",{body:n,...r})}retrieve(n,r){return this._client.get(`/containers/${n}`,r)}list(n={},r){return nt(n)?this.list({},n):this._client.getAPIList("/containers",Zm,{query:n,...r})}del(n,r){return this._client.delete(`/containers/${n}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}}class Zm extends bt{}iu.ContainerListResponsesPage=Zm;iu.Files=jo;iu.FileListResponsesPage=Qm;class q1 extends Ae{create(n,r){const i=!!n.encoding_format;let s=i?n.encoding_format:"base64";i&&wr("Request","User defined encoding_format:",n.encoding_format);const c=this._client.post("/embeddings",{body:{...n,encoding_format:s},...r});return i?c:(wr("response","Decoding base64 embeddings to float32 array"),c._thenUnwrap(f=>(f&&f.data&&f.data.forEach(h=>{const g=h.embedding;h.embedding=LD(g)}),f)))}}class Fm extends Ae{retrieve(n,r,i,s){return this._client.get(`/evals/${n}/runs/${r}/output_items/${i}`,s)}list(n,r,i={},s){return nt(i)?this.list(n,r,{},i):this._client.getAPIList(`/evals/${n}/runs/${r}/output_items`,Im,{query:i,...s})}}class Im extends bt{}Fm.OutputItemListResponsesPage=Im;class lu extends Ae{constructor(){super(...arguments),this.outputItems=new Fm(this._client)}create(n,r,i){return this._client.post(`/evals/${n}/runs`,{body:r,...i})}retrieve(n,r,i){return this._client.get(`/evals/${n}/runs/${r}`,i)}list(n,r={},i){return nt(r)?this.list(n,{},r):this._client.getAPIList(`/evals/${n}/runs`,Km,{query:r,...i})}del(n,r,i){return this._client.delete(`/evals/${n}/runs/${r}`,i)}cancel(n,r,i){return this._client.post(`/evals/${n}/runs/${r}`,i)}}class Km extends bt{}lu.RunListResponsesPage=Km;lu.OutputItems=Fm;lu.OutputItemListResponsesPage=Im;class su extends Ae{constructor(){super(...arguments),this.runs=new lu(this._client)}create(n,r){return this._client.post("/evals",{body:n,...r})}retrieve(n,r){return this._client.get(`/evals/${n}`,r)}update(n,r,i){return this._client.post(`/evals/${n}`,{body:r,...i})}list(n={},r){return nt(n)?this.list({},n):this._client.getAPIList("/evals",Jm,{query:n,...r})}del(n,r){return this._client.delete(`/evals/${n}`,r)}}class Jm extends bt{}su.EvalListResponsesPage=Jm;su.Runs=lu;su.RunListResponsesPage=Km;let Pm=class extends Ae{create(n,r){return this._client.post("/files",ri({body:n,...r}))}retrieve(n,r){return this._client.get(`/files/${n}`,r)}list(n={},r){return nt(n)?this.list({},n):this._client.getAPIList("/files",Wm,{query:n,...r})}del(n,r){return this._client.delete(`/files/${n}`,r)}content(n,r){return this._client.get(`/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}retrieveContent(n,r){return this._client.get(`/files/${n}/content`,r)}async waitForProcessing(n,{pollInterval:r=5e3,maxWait:i=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),c=Date.now();let f=await this.retrieve(n);for(;!f.status||!s.has(f.status);)if(await tu(r),f=await this.retrieve(n),Date.now()-c>i)throw new zm({message:`Giving up on waiting for file ${n} to finish processing after ${i} milliseconds.`});return f}};class Wm extends bt{}Pm.FileObjectsPage=Wm;class X1 extends Ae{}let V1=class extends Ae{run(n,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:n,...r})}validate(n,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:n,...r})}};class eg extends Ae{constructor(){super(...arguments),this.graders=new V1(this._client)}}eg.Graders=V1;class tg extends Ae{create(n,r,i){return this._client.getAPIList(`/fine_tuning/checkpoints/${n}/permissions`,ng,{body:r,method:"post",...i})}retrieve(n,r={},i){return nt(r)?this.retrieve(n,{},r):this._client.get(`/fine_tuning/checkpoints/${n}/permissions`,{query:r,...i})}del(n,r,i){return this._client.delete(`/fine_tuning/checkpoints/${n}/permissions/${r}`,i)}}class ng extends No{}tg.PermissionCreateResponsesPage=ng;let Ho=class extends Ae{constructor(){super(...arguments),this.permissions=new tg(this._client)}};Ho.Permissions=tg;Ho.PermissionCreateResponsesPage=ng;class ag extends Ae{list(n,r={},i){return nt(r)?this.list(n,{},r):this._client.getAPIList(`/fine_tuning/jobs/${n}/checkpoints`,rg,{query:r,...i})}}class rg extends bt{}ag.FineTuningJobCheckpointsPage=rg;class bl extends Ae{constructor(){super(...arguments),this.checkpoints=new ag(this._client)}create(n,r){return this._client.post("/fine_tuning/jobs",{body:n,...r})}retrieve(n,r){return this._client.get(`/fine_tuning/jobs/${n}`,r)}list(n={},r){return nt(n)?this.list({},n):this._client.getAPIList("/fine_tuning/jobs",ig,{query:n,...r})}cancel(n,r){return this._client.post(`/fine_tuning/jobs/${n}/cancel`,r)}listEvents(n,r={},i){return nt(r)?this.listEvents(n,{},r):this._client.getAPIList(`/fine_tuning/jobs/${n}/events`,lg,{query:r,...i})}pause(n,r){return this._client.post(`/fine_tuning/jobs/${n}/pause`,r)}resume(n,r){return this._client.post(`/fine_tuning/jobs/${n}/resume`,r)}}class ig extends bt{}class lg extends bt{}bl.FineTuningJobsPage=ig;bl.FineTuningJobEventsPage=lg;bl.Checkpoints=ag;bl.FineTuningJobCheckpointsPage=rg;class xr extends Ae{constructor(){super(...arguments),this.methods=new X1(this._client),this.jobs=new bl(this._client),this.checkpoints=new Ho(this._client),this.alpha=new eg(this._client)}}xr.Methods=X1;xr.Jobs=bl;xr.FineTuningJobsPage=ig;xr.FineTuningJobEventsPage=lg;xr.Checkpoints=Ho;xr.Alpha=eg;class G1 extends Ae{}class sg extends Ae{constructor(){super(...arguments),this.graderModels=new G1(this._client)}}sg.GraderModels=G1;class Q1 extends Ae{createVariation(n,r){return this._client.post("/images/variations",ri({body:n,...r}))}edit(n,r){return this._client.post("/images/edits",ri({body:n,...r}))}generate(n,r){return this._client.post("/images/generations",{body:n,...r})}}class ug extends Ae{retrieve(n,r){return this._client.get(`/models/${n}`,r)}list(n){return this._client.getAPIList("/models",cg,n)}del(n,r){return this._client.delete(`/models/${n}`,r)}}class cg extends No{}ug.ModelsPage=cg;class Z1 extends Ae{create(n,r){return this._client.post("/moderations",{body:n,...r})}}function JD(t,n){return!n||!WD(n)?{...t,output_parsed:null,output:t.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(i=>({...i,parsed:null}))}:r)}:F1(t,n)}function F1(t,n){const r=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:nO(n,s)};if(s.type==="message"){const c=s.content.map(f=>f.type==="output_text"?{...f,parsed:PD(n,f.text)}:f);return{...s,content:c}}return s}),i=Object.assign({},t,{output:r});return Object.getOwnPropertyDescriptor(t,"output_text")||I1(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(const s of i.output)if(s.type==="message"){for(const c of s.content)if(c.type==="output_text"&&c.parsed!==null)return c.parsed}return null}}),i}function PD(t,n){var r,i,s,c;return((i=(r=t.text)==null?void 0:r.format)==null?void 0:i.type)!=="json_schema"?null:"$parseRaw"in((s=t.text)==null?void 0:s.format)?((c=t.text)==null?void 0:c.format).$parseRaw(n):JSON.parse(n)}function WD(t){var n;return!!km((n=t.text)==null?void 0:n.format)}function eO(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function tO(t,n){return t.find(r=>r.type==="function"&&r.name===n)}function nO(t,n){const r=tO(t.tools??[],n.name);return{...n,...n,parsed_arguments:eO(r)?r.$parseRaw(n.arguments):r!=null&&r.strict?JSON.parse(n.arguments):null}}function I1(t){const n=[];for(const r of t.output)if(r.type==="message")for(const i of r.content)i.type==="output_text"&&n.push(i.text);t.output_text=n.join("")}class K1 extends Ae{list(n,r={},i){return nt(r)?this.list(n,{},r):this._client.getAPIList(`/responses/${n}/input_items`,rO,{query:r,...i})}}var Pi=function(t,n,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?t!==n||!s:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,r):s?s.value=r:n.set(t,r),r},yr=function(t,n,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!i:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:n.get(t)},Wi,qc,pr,Xc,Y_,q_,X_,V_;class og extends Hm{constructor(n){super(),Wi.add(this),qc.set(this,void 0),pr.set(this,void 0),Xc.set(this,void 0),Pi(this,qc,n,"f")}static createResponse(n,r,i){const s=new og(r);return s._run(()=>s._createOrRetrieveResponse(n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(n,r,i){var h;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),yr(this,Wi,"m",Y_).call(this);let c,f=null;"response_id"in r?(c=await n.responses.retrieve(r.response_id,{stream:!0},{...i,signal:this.controller.signal,stream:!0}),f=r.starting_after??null):c=await n.responses.create({...r,stream:!0},{...i,signal:this.controller.signal}),this._connected();for await(const g of c)yr(this,Wi,"m",q_).call(this,g,f);if((h=c.controller.signal)!=null&&h.aborted)throw new Nn;return yr(this,Wi,"m",X_).call(this)}[(qc=new WeakMap,pr=new WeakMap,Xc=new WeakMap,Wi=new WeakSet,Y_=function(){this.ended||Pi(this,pr,void 0,"f")},q_=function(r,i){if(this.ended)return;const s=(f,h)=>{(i==null||h.sequence_number>i)&&this._emit(f,h)},c=yr(this,Wi,"m",V_).call(this,r);switch(s("event",r),r.type){case"response.output_text.delta":{const f=c.output[r.output_index];if(!f)throw new Se(`missing output at index ${r.output_index}`);if(f.type==="message"){const h=f.content[r.content_index];if(!h)throw new Se(`missing content at index ${r.content_index}`);if(h.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${h.type}`);s("response.output_text.delta",{...r,snapshot:h.text})}break}case"response.function_call_arguments.delta":{const f=c.output[r.output_index];if(!f)throw new Se(`missing output at index ${r.output_index}`);f.type==="function_call"&&s("response.function_call_arguments.delta",{...r,snapshot:f.arguments});break}default:s(r.type,r);break}},X_=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const r=yr(this,pr,"f");if(!r)throw new Se("request ended without sending any events");Pi(this,pr,void 0,"f");const i=aO(r,yr(this,qc,"f"));return Pi(this,Xc,i,"f"),i},V_=function(r){let i=yr(this,pr,"f");if(!i){if(r.type!=="response.created")throw new Se(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return i=Pi(this,pr,r.response,"f"),i}switch(r.type){case"response.output_item.added":{i.output.push(r.item);break}case"response.content_part.added":{const s=i.output[r.output_index];if(!s)throw new Se(`missing output at index ${r.output_index}`);s.type==="message"&&s.content.push(r.part);break}case"response.output_text.delta":{const s=i.output[r.output_index];if(!s)throw new Se(`missing output at index ${r.output_index}`);if(s.type==="message"){const c=s.content[r.content_index];if(!c)throw new Se(`missing content at index ${r.content_index}`);if(c.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${c.type}`);c.text+=r.delta}break}case"response.function_call_arguments.delta":{const s=i.output[r.output_index];if(!s)throw new Se(`missing output at index ${r.output_index}`);s.type==="function_call"&&(s.arguments+=r.delta);break}case"response.completed":{Pi(this,pr,r.response,"f");break}}return i},Symbol.asyncIterator)](){const n=[],r=[];let i=!1;return this.on("event",s=>{const c=r.shift();c?c.resolve(s):n.push(s)}),this.on("end",()=>{i=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),this.on("error",s=>{i=!0;for(const c of r)c.reject(s);r.length=0}),{next:async()=>n.length?{value:n.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((c,f)=>r.push({resolve:c,reject:f})).then(c=>c?{value:c,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const n=yr(this,Xc,"f");if(!n)throw new Se("stream ended without producing a ChatCompletion");return n}}function aO(t,n){return JD(t,n)}class fg extends Ae{constructor(){super(...arguments),this.inputItems=new K1(this._client)}create(n,r){return this._client.post("/responses",{body:n,...r,stream:n.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&I1(i),i))}retrieve(n,r={},i){return this._client.get(`/responses/${n}`,{query:r,...i,stream:(r==null?void 0:r.stream)??!1})}del(n,r){return this._client.delete(`/responses/${n}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}parse(n,r){return this._client.responses.create(n,r)._thenUnwrap(i=>F1(i,n))}stream(n,r){return og.createResponse(this._client,n,r)}cancel(n,r){return this._client.post(`/responses/${n}/cancel`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}}class rO extends bt{}fg.InputItems=K1;class J1 extends Ae{create(n,r,i){return this._client.post(`/uploads/${n}/parts`,ri({body:r,...i}))}}class dg extends Ae{constructor(){super(...arguments),this.parts=new J1(this._client)}create(n,r){return this._client.post("/uploads",{body:n,...r})}cancel(n,r){return this._client.post(`/uploads/${n}/cancel`,r)}complete(n,r,i){return this._client.post(`/uploads/${n}/complete`,{body:r,...i})}}dg.Parts=J1;const iO=async t=>{const n=await Promise.allSettled(t),r=n.filter(s=>s.status==="rejected");if(r.length){for(const s of r)console.error(s.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const i=[];for(const s of n)s.status==="fulfilled"&&i.push(s.value);return i};class Bo extends Ae{create(n,r,i){return this._client.post(`/vector_stores/${n}/files`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(n,r,i){return this._client.get(`/vector_stores/${n}/files/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(n,r,i,s){return this._client.post(`/vector_stores/${n}/files/${r}`,{body:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(n,r={},i){return nt(r)?this.list(n,{},r):this._client.getAPIList(`/vector_stores/${n}/files`,Lo,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(n,r,i){return this._client.delete(`/vector_stores/${n}/files/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(n,r,i){const s=await this.create(n,r,i);return await this.poll(n,s.id,i)}async poll(n,r,i){const s={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const c=await this.retrieve(n,r,{...i,headers:s}).withResponse(),f=c.data;switch(f.status){case"in_progress":let h=5e3;if(i!=null&&i.pollIntervalMs)h=i.pollIntervalMs;else{const g=c.response.headers.get("openai-poll-after-ms");if(g){const m=parseInt(g);isNaN(m)||(h=m)}}await tu(h);break;case"failed":case"completed":return f}}}async upload(n,r,i){const s=await this._client.files.create({file:r,purpose:"assistants"},i);return this.create(n,{file_id:s.id},i)}async uploadAndPoll(n,r,i){const s=await this.upload(n,r,i);return await this.poll(n,s.id,i)}content(n,r,i){return this._client.getAPIList(`/vector_stores/${n}/files/${r}/content`,hg,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class Lo extends bt{}class hg extends No{}Bo.VectorStoreFilesPage=Lo;Bo.FileContentResponsesPage=hg;class P1 extends Ae{create(n,r,i){return this._client.post(`/vector_stores/${n}/file_batches`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(n,r,i){return this._client.get(`/vector_stores/${n}/file_batches/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}cancel(n,r,i){return this._client.post(`/vector_stores/${n}/file_batches/${r}/cancel`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(n,r,i){const s=await this.create(n,r);return await this.poll(n,s.id,i)}listFiles(n,r,i={},s){return nt(i)?this.listFiles(n,r,{},i):this._client.getAPIList(`/vector_stores/${n}/file_batches/${r}/files`,Lo,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(n,r,i){const s={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const{data:c,response:f}=await this.retrieve(n,r,{...i,headers:s}).withResponse();switch(c.status){case"in_progress":let h=5e3;if(i!=null&&i.pollIntervalMs)h=i.pollIntervalMs;else{const g=f.headers.get("openai-poll-after-ms");if(g){const m=parseInt(g);isNaN(m)||(h=m)}}await tu(h);break;case"failed":case"cancelled":case"completed":return c}}}async uploadAndPoll(n,{files:r,fileIds:i=[]},s){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const c=(s==null?void 0:s.maxConcurrency)??5,f=Math.min(c,r.length),h=this._client,g=r.values(),m=[...i];async function y(v){for(let b of v){const S=await h.files.create({file:b,purpose:"assistants"},s);m.push(S.id)}}const p=Array(f).fill(g).map(y);return await iO(p),await this.createAndPoll(n,{file_ids:m})}}class Sr extends Ae{constructor(){super(...arguments),this.files=new Bo(this._client),this.fileBatches=new P1(this._client)}create(n,r){return this._client.post("/vector_stores",{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(n,r){return this._client.get(`/vector_stores/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(n,r,i){return this._client.post(`/vector_stores/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(n={},r){return nt(n)?this.list({},n):this._client.getAPIList("/vector_stores",mg,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(n,r){return this._client.delete(`/vector_stores/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}search(n,r,i){return this._client.getAPIList(`/vector_stores/${n}/search`,gg,{body:r,method:"post",...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class mg extends bt{}class gg extends No{}Sr.VectorStoresPage=mg;Sr.VectorStoreSearchResponsesPage=gg;Sr.Files=Bo;Sr.VectorStoreFilesPage=Lo;Sr.FileContentResponsesPage=hg;Sr.FileBatches=P1;var W1;class Ce extends TD{constructor({baseURL:n=Bc("OPENAI_BASE_URL"),apiKey:r=Bc("OPENAI_API_KEY"),organization:i=Bc("OPENAI_ORG_ID")??null,project:s=Bc("OPENAI_PROJECT_ID")??null,...c}={}){if(r===void 0)throw new Se("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const f={apiKey:r,organization:i,project:s,...c,baseURL:n||"https://api.openai.com/v1"};if(!f.dangerouslyAllowBrowser&&HD())throw new Se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:f.baseURL,timeout:f.timeout??6e5,httpAgent:f.httpAgent,maxRetries:f.maxRetries,fetch:f.fetch}),this.completions=new $1(this),this.chat=new zo(this),this.embeddings=new q1(this),this.files=new Pm(this),this.images=new Q1(this),this.audio=new nu(this),this.moderations=new Z1(this),this.models=new ug(this),this.fineTuning=new xr(this),this.graders=new sg(this),this.vectorStores=new Sr(this),this.beta=new _l(this),this.batches=new Um(this),this.uploads=new dg(this),this.responses=new fg(this),this.evals=new su(this),this.containers=new iu(this),this._options=f,this.apiKey=r,this.organization=i,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(n){return{...super.defaultHeaders(n),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(n){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(n){return uD(n,{arrayFormat:"brackets"})}}W1=Ce;Ce.OpenAI=W1;Ce.DEFAULT_TIMEOUT=6e5;Ce.OpenAIError=Se;Ce.APIError=jt;Ce.APIConnectionError=To;Ce.APIConnectionTimeoutError=zm;Ce.APIUserAbortError=Nn;Ce.NotFoundError=Jw;Ce.ConflictError=Pw;Ce.RateLimitError=e1;Ce.BadRequestError=Fw;Ce.AuthenticationError=Iw;Ce.InternalServerError=t1;Ce.PermissionDeniedError=Kw;Ce.UnprocessableEntityError=Ww;Ce.toFile=s1;Ce.fileFromPath=Gw;Ce.Completions=$1;Ce.Chat=zo;Ce.ChatCompletionsPage=Oo;Ce.Embeddings=q1;Ce.Files=Pm;Ce.FileObjectsPage=Wm;Ce.Images=Q1;Ce.Audio=nu;Ce.Moderations=Z1;Ce.Models=ug;Ce.ModelsPage=cg;Ce.FineTuning=xr;Ce.Graders=sg;Ce.VectorStores=Sr;Ce.VectorStoresPage=mg;Ce.VectorStoreSearchResponsesPage=gg;Ce.Beta=_l;Ce.Batches=Um;Ce.BatchesPage=jm;Ce.Uploads=dg;Ce.Responses=fg;Ce.Evals=su;Ce.EvalListResponsesPage=Jm;Ce.Containers=iu;Ce.ContainerListResponsesPage=Zm;async function lO(t,n,r){var f,h,g;const i=new Ce({apiKey:t,dangerouslyAllowBrowser:!0}),s=[{role:"system",content:"You are a helpful assistant for exploring a fictional realm."},{role:"user",content:`Here is the realm data: ${JSON.stringify(n)}

Question: ${r}`}];return((g=(h=(f=(await i.chat.completions.create({model:"gpt-3.5-turbo",messages:s})).choices)==null?void 0:f[0])==null?void 0:h.message)==null?void 0:g.content)||""}function sO(){const{query:t}=ct(),[n,r]=U.useState(""),[i,s]=U.useState(""),c=async()=>{const f=window.localStorage.getItem("openaiKey")||"";if(!f){alert("Please enter your OpenAI API key in the Account page.");return}const h=I_(t.realmId);if(h){s("Loading...");try{const g=await lO(f,h,n);s(g)}catch(g){console.error(g),s("Error: "+((g==null?void 0:g.message)||g))}}};return E.jsxs("div",{className:"explore-page",children:[E.jsx("textarea",{rows:5,cols:50,value:n,placeholder:"Ask about this realm...",onChange:f=>r(f.target.value)}),E.jsx("br",{}),E.jsx("button",{onClick:c,children:"Ask"}),E.jsx("pre",{children:i})]})}function uO(){const{query:t,setQuery:n}=ct(),r=t.realmId,[i,s]=U.useState({id:"",created:new Date,updated:new Date,name:"",description:""}),c=g=>{const m=Da.read(g),y={id:"",created:new Date,updated:new Date,name:"",description:"",...m};s(y)},f=g=>{prompt(`Type 'yes' to remove the ${i==null?void 0:i.name} realm?`)==="yes"&&(Da.remove(g),qt.remove(g),Dn.remove(g),ra.remove(g),mn.remove(g),Wt.remove(g),n({realmId:""}))},h=g=>{g.preventDefault(),Da.update(i==null?void 0:i.id,i)};return U.useEffect(()=>{r?c(r):s({id:"",created:new Date,updated:new Date,name:"",description:""})},[r]),E.jsx(E.Fragment,{children:E.jsxs("form",{className:"horiz",onSubmit:h,children:[E.jsx("label",{children:"RealmName"}),E.jsx("input",{type:"text",required:!0,name:"name",value:i==null?void 0:i.name,onChange:g=>s({...i,name:g.target.value})}),E.jsxs("span",{children:[" ",E.jsx("button",{type:"submit",children:Ie.FLOPPY_DISK})," "]}),E.jsx("label",{children:"Description"}),E.jsx("textarea",{name:"description",required:!0,value:i==null?void 0:i.description,onChange:g=>s({...i,description:g.target.value})}),E.jsx("span",{children:E.jsx("button",{onClick:()=>f(i==null?void 0:i.id),type:"button",children:Ie.RED_X})})]})})}function cO(){const{query:t,currentState:n}=ct();return U.useEffect(()=>{console.log("QUERY",t)},[t]),E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"realm banner",children:[E.jsx(zE,{}),(t==null?void 0:t.realmId)&&E.jsx(uO,{}),E.jsx("div",{children:n})]}),E.jsxs("main",{children:[t.realmId&&E.jsx(E.Fragment,{children:E.jsxs("div",{className:"mode-select",children:[E.jsx(Ln,{to:Ve.Concept,children:"concepts"}),E.jsx(Ln,{to:Ve.Character,children:"characters"}),E.jsx(Ln,{to:Ve.Item,children:"items"}),E.jsx(Ln,{to:Ve.Location,children:"locations"}),E.jsx(Ln,{to:Ve.Event,children:"events"}),E.jsx(Ln,{to:Ve.Timeline,children:"timeline"}),E.jsx(Ln,{to:Ve.Input,children:"input"}),E.jsx(Ln,{to:Ve.Talk,children:"talk"}),E.jsx(Ln,{to:Ve.Explore,children:"explore"})]})}),E.jsxs("div",{className:"viewport",children:[E.jsx(Bn,{name:Ve.Concept,children:t.id?E.jsx(QR,{}):E.jsx(ZR,{})}),E.jsx(Bn,{name:Ve.Character,children:t.id?E.jsx(UE,{}):E.jsx(GR,{})}),E.jsx(Bn,{name:Ve.Item,children:t.id?E.jsx(KN,{}):E.jsx(GN,{})}),E.jsx(Bn,{name:Ve.Location,children:t.id?E.jsx(JN,{}):E.jsx(ZN,{})}),E.jsx(Bn,{name:Ve.Event,children:t.id?E.jsx(bw,{}):E.jsx(VN,{})}),E.jsx(Bn,{name:Ve.Timeline,children:t.realmId?E.jsx(PN,{}):null}),E.jsx(Bn,{name:Ve.Input,children:E.jsx(FN,{})}),E.jsx(Bn,{name:Ve.Talk,children:E.jsx(IN,{})}),E.jsx(Bn,{name:Ve.Explore,children:E.jsx(sO,{})}),E.jsx(Bn,{name:Ve.Person,children:E.jsx(_E,{})}),E.jsx(Bn,{name:Ve.Data,children:E.jsx(OE,{})})]})]}),E.jsxs("footer",{children:[E.jsx(Ln,{to:Ve.Data,children:Ie.FLOPPY_DISK}),E.jsx(Ln,{to:Ve.Person,children:Ie.PERSON})]})]})}function oO(){return E.jsxs(E.Fragment,{children:[E.jsx(pE,{}),E.jsx(gE,{name:"main",children:E.jsx(cO,{})})]})}mE.createRoot(document.getElementById("root")).render(E.jsx(U.StrictMode,{children:E.jsx(oO,{})}));
